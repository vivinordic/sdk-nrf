<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>AT monitor &mdash; nRF Connect SDK 2.3.99 documentation</title>
      <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="../../_static/css/nordic.css" type="text/css" />
      <link rel="stylesheet" href="../../_static/togglebutton.css" type="text/css" />
      <link rel="stylesheet" href="../../_static/css/nrf.css" type="text/css" />
      <link rel="stylesheet" href="../../_static/tabs.css" type="text/css" /> 
  <!--[if lt IE 9]>
    <script src="../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="../../" id="documentation_options" src="../../_static/documentation_options.js"></script>
        <script src="../../_static/jquery.js"></script>
        <script src="../../_static/underscore.js"></script>
        <script src="../../_static/_sphinx_javascript_frameworks_compat.js"></script>
        <script src="../../_static/doctools.js"></script>
        <script src="../../_static/sphinx_highlight.js"></script>
        <script src="https://www.googletagmanager.com/gtag/js?id=G-ZPVZRKFQJR"></script>
        <script src="../../_static/js/ga-tracker.js"></script>
        <script data-culture="EN" id="CookieConsent" type="text/javascript" src="https://policy.app.cookieinformation.com/uc.js"></script>
        <script>let toggleHintShow = 'Click to show';</script>
        <script>let toggleHintHide = 'Click to hide';</script>
        <script>let toggleOpenOnPrint = 'true';</script>
        <script src="../../_static/togglebutton.js"></script>
        <script>var togglebuttonSelector = '.toggle, .admonition.dropdown';</script>
    <script src="../../_static/js/theme.js"></script>
<script
  type="text/javascript"
  src="../../_static/js/ncs.js"
></script>
<script src="../../_static/js/bootstrap.bundle.min.js"></script>

    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="AT parameters" href="at_params.html" />
    <link rel="prev" title="AT Host" href="at_host.html" />
<link
  href="../../_static/css/bootstrap.min.css"
  rel="stylesheet"
/>
<link
  rel="shortcut icon"
  href="../../_static/images/favicon.ico"
/>

</head>

<body class="wy-body-for-nav">
<div class="announcement"></div>
<div class="d-print-none ncs-header">
  <div class="container-xl ncs-header-top">
    <div class="row h-100">
      <div class="d-none d-md-block col-2">
        <div class="bg-white py-4 px-3 ml-2 ncs-header-logo">
          <img
            class="ncs-header-logo"
            src="../../_static/images/nordic-logo.png"
            alt=""
          />
        </div>
      </div>
      <div
        class="col-8 col-md-7 pl-md-4 d-flex align-self-center justify-content-center"
      >
        <form class="w-75" action="../../search.html" method="get">
          <div class="form-group">
            <input
              type="text"
              name="q"
              class="ncs-search-input form-control"
              placeholder="Search all docs..."
            />
          </div>
        </form>
      </div>
      <div class="col-4 col-md-3 d-md-block p-3 text-end">
        <div class="dropdown">
          <button
            class="btn dropdown-toggle ncs-btn-versions"
            type="button"
            id="dropdownMenuButton1"
            data-bs-toggle="dropdown"
            aria-expanded="false"
          >
            <span class="d-none d-md-inline">nRF Connect SDK</span>
            <span id="ncsversion" class="d-inline"></span>
          </button>
          <div class="dropdown-menu" aria-labelledby="dropdownMenuButton"></div>
        </div>
      </div>
    </div>
  </div>
  <div class="ncs-header-nav">
    <div class="container-xl">
      <div class="row">
        <div class="col col-12 d-flex justify-content-center">
          <nav class="navbar navbar-dark navbar-expand-lg p-0">
            <span class="navbar-brand d-block d-lg-none py-2 pl-1"
              >Documentation sets</span
            >
            <button
              class="navbar-toggler"
              type="button"
              data-bs-toggle="collapse"
              data-bs-target="#navbarNavAltMarkup"
              aria-controls="navbarNavAltMarkup"
              aria-expanded="false"
              aria-label="Toggle navigation"
            >
              <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="navbarNavAltMarkup">
              <ul class="navbar-nav">
                <li class="nav-item active py-1 px-3">
                  <a
                    class="nav-link"
                    href="../../../nrf/index.html"
                    >nRF Connect SDK</a
                  >
                </li>
                <li><hr class="dropdown-divider" /></li>
                <li class="nav-item  py-1 px-3">
                  <a
                    class="nav-link"
                    href="../../../nrfx/index.html"
                    >nrfx</a
                  >
                </li>
                <li><hr class="dropdown-divider" /></li>
                <li class="nav-item  py-1 px-3">
                  <a
                    class="nav-link"
                    href="../../../nrfxlib/README.html"
                    >nrfxlib</a
                  >
                </li>
                <li><hr class="dropdown-divider" /></li>
                <li class="nav-item  py-1 px-3">
                  <a
                    class="nav-link"
                    href="../../../zephyr/index.html"
                    >Zephyr Project</a
                  >
                </li>
                <li><hr class="dropdown-divider" /></li>
                <li class="nav-item  py-1 px-3">
                  <a
                    class="nav-link"
                    href="../../../mcuboot/wrapper.html"
                    >MCUboot</a
                  >
                </li>
                <li><hr class="dropdown-divider" /></li>
                <li class="nav-item  py-1 px-3">
                  <a
                    class="nav-link"
                    href="../../../tfm/index.html"
                    >Trusted Firmware-M</a
                  >
                </li>
                <li><hr class="dropdown-divider" /></li>
                <li class="nav-item  py-1 px-3">
                  <a
                    class="nav-link"
                    href="../../../matter/index.html"
                    >Matter</a
                  >
                </li>
                <li><hr class="dropdown-divider" /></li>
                <li class="nav-item  py-1 px-3">
                  <a
                    class="nav-link"
                    href="../../../kconfig/index.html"
                    >Kconfig Reference</a
                  >
                </li>
                <li><hr class="dropdown-divider" /></li>
              </ul>
            </div>
          </nav>
        </div>
      </div>
    </div>
  </div>
</div>

  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
            <a href="../../index.html" class="icon icon-home"> nRF Connect SDK
          </a>
              <div class="version">
                2.3.99
              </div>
<div id="searchbox" role="search">
  <div class="searchformwrapper">
    <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
      <input type="text" name="q" placeholder="Search docs" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
  </div>
</div>
<script>$('#searchbox').show(0);</script>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Contents</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../introduction.html">Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../getting_started.html">Getting started</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../dev_model.html">Development model</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../app_dev.html">Application development</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../security.html">Security</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../ecosystem_integration.html">Ecosystems integration</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../nrf91.html">Working with nRF91 Series</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../nrf70.html">Working with nRF70 Series</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../nrf53.html">Working with nRF53 Series</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../nrf52.html">Working with nRF52 Series</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../protocols.html">Protocols</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../applications.html">Applications</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../samples.html">Samples</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../drivers.html">Drivers</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../index.html">Libraries</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../bin/index.html">Binary libraries</a></li>
<li class="toctree-l2"><a class="reference internal" href="../bluetooth_services/index.html">Bluetooth libraries and services</a></li>
<li class="toctree-l2"><a class="reference internal" href="../bootloader/index.html">Bootloader libraries</a></li>
<li class="toctree-l2"><a class="reference internal" href="../caf/index.html">Common Application Framework</a></li>
<li class="toctree-l2"><a class="reference internal" href="../debug/index.html">Debug libraries</a></li>
<li class="toctree-l2"><a class="reference internal" href="../dfu/index.html">DFU libraries</a></li>
<li class="toctree-l2"><a class="reference internal" href="../gazell/index.html">Gazell libraries</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="index.html">Modem libraries</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="at_cmd_parser.html">AT command parser</a></li>
<li class="toctree-l3"><a class="reference internal" href="at_custom_cmd.html">Custom AT commands</a></li>
<li class="toctree-l3"><a class="reference internal" href="at_host.html">AT Host</a></li>
<li class="toctree-l3 current"><a class="current reference internal" href="#">AT monitor</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#overview">Overview</a></li>
<li class="toctree-l4"><a class="reference internal" href="#initialization">Initialization</a></li>
<li class="toctree-l4"><a class="reference internal" href="#usage">Usage</a></li>
<li class="toctree-l4"><a class="reference internal" href="#api-documentation">API documentation</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="at_params.html">AT parameters</a></li>
<li class="toctree-l3"><a class="reference internal" href="at_shell.html">AT shell</a></li>
<li class="toctree-l3"><a class="reference internal" href="gcf_sms_lib.html">GCF SMS</a></li>
<li class="toctree-l3"><a class="reference internal" href="location.html">Location</a></li>
<li class="toctree-l3"><a class="reference internal" href="lte_lc.html">LTE link controller</a></li>
<li class="toctree-l3"><a class="reference internal" href="modem_antenna.html">Modem antenna</a></li>
<li class="toctree-l3"><a class="reference internal" href="modem_attest_token.html">Modem attestation token</a></li>
<li class="toctree-l3"><a class="reference internal" href="modem_info.html">Modem information</a></li>
<li class="toctree-l3"><a class="reference internal" href="modem_jwt.html">Modem JWT</a></li>
<li class="toctree-l3"><a class="reference internal" href="modem_key_mgmt.html">Modem key management</a></li>
<li class="toctree-l3"><a class="reference internal" href="modem_slm.html">Modem SLM</a></li>
<li class="toctree-l3"><a class="reference internal" href="nrf_modem_lib.html">Modem library integration layer</a></li>
<li class="toctree-l3"><a class="reference internal" href="pdn.html">PDN</a></li>
<li class="toctree-l3"><a class="reference internal" href="sms.html">SMS subscriber</a></li>
<li class="toctree-l3"><a class="reference internal" href="zzhc.html">China Telecom ZZHC library</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../mpsl/index.html">Multiprotocol Service Layer libraries</a></li>
<li class="toctree-l2"><a class="reference internal" href="../networking/index.html">Libraries for networking</a></li>
<li class="toctree-l2"><a class="reference internal" href="../nfc/index.html">Libraries for NFC</a></li>
<li class="toctree-l2"><a class="reference internal" href="../nrf_rpc/index.html">nRF RPC libraries</a></li>
<li class="toctree-l2"><a class="reference internal" href="../others/index.html">Other libraries</a></li>
<li class="toctree-l2"><a class="reference internal" href="../shell/index.html">Shell libraries</a></li>
<li class="toctree-l2"><a class="reference internal" href="../tfm/index.html">TF-M libraries</a></li>
<li class="toctree-l2"><a class="reference internal" href="../zigbee/index.html">Libraries for Zigbee</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../scripts.html">Scripts</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../release_notes.html">Release notes</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../known_issues.html">Known issues</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../software_maturity.html">Software maturity levels</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../documentation.html">About this documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../glossary.html">Glossary</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">nRF Connect SDK</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../../index.html" class="icon icon-home"></a></li>
          <li class="breadcrumb-item"><a href="../index.html">Libraries</a></li>
          <li class="breadcrumb-item"><a href="index.html">Modem libraries</a></li>
      <li class="breadcrumb-item active">AT monitor</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../../_sources/libraries/modem/at_monitor.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="at-monitor">
<span id="at-monitor-readme"></span><h1>AT monitor<a class="headerlink" href="#at-monitor" title="Permalink to this heading"></a></h1>
<div class="contents local topic" id="contents">
<ul class="simple">
<li><p><a class="reference internal" href="#overview" id="id7">Overview</a></p></li>
<li><p><a class="reference internal" href="#initialization" id="id8">Initialization</a></p></li>
<li><p><a class="reference internal" href="#usage" id="id9">Usage</a></p>
<ul>
<li><p><a class="reference internal" href="#deferred-dispatching" id="id10">Deferred dispatching</a></p></li>
<li><p><a class="reference internal" href="#direct-dispatching" id="id11">Direct dispatching</a></p></li>
<li><p><a class="reference internal" href="#pausing-and-resuming" id="id12">Pausing and resuming</a></p></li>
<li><p><a class="reference internal" href="#wildcard-filter" id="id13">Wildcard filter</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#api-documentation" id="id14">API documentation</a></p></li>
</ul>
</div>
<p>The AT monitor library is used to define AT monitors, which consist of a handler function that receives AT notifications from the <span class="xref std std-ref">nrfxlib:nrf_modem</span>, based on a filter.
The handler is executed from the system workqueue or from an ISR, depending on the type of monitor.</p>
<section id="overview">
<h2><a class="toc-backref" href="#id7">Overview</a><a class="headerlink" href="#overview" title="Permalink to this heading"></a></h2>
<p>The Modem library <span class="xref std std-ref">nrfxlib:nrf_modem_at</span> supports only a single handler function that can receive AT notifications.
The handler is executed in an interrupt service routine (ISR).
It is likely that multiple parts of the application might require AT notifications, and that the processing of the notification is done outside an ISR.</p>
<p>The AT monitor library facilitates the integration of the Modem library in nRF Connect SDK applications in two ways:</p>
<ol class="arabic simple">
<li><p>It handles the copying of notifications and reschedules their processing in a thread.</p></li>
<li><p>It dispatches notifications to multiple parts of the application.</p></li>
</ol>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>When the AT monitor library is enabled, the application must not call <code class="xref c c-func docutils literal notranslate"><span class="pre">nrf_modem_at_notif_handler_set()</span></code> as that will override the handler set by the AT monitor library.
The application must instead define an AT monitor with a filter set to <a class="reference internal" href="#c.ANY" title="ANY"><code class="xref c c-macro docutils literal notranslate"><span class="pre">ANY</span></code></a> to achieve the same behavior of registering a handler for AT notifications with the Modem library.</p>
</div>
</section>
<section id="initialization">
<h2><a class="toc-backref" href="#id8">Initialization</a><a class="headerlink" href="#initialization" title="Permalink to this heading"></a></h2>
<p>The AT monitor library initializes automatically when enabled using <code class="xref kconfig kconfig-option docutils literal notranslate"><span class="pre">CONFIG_AT_MONITOR</span></code>.
Upon initialization, the AT monitor library registers itself as the receiver of AT notifications from the Modem library (using <code class="xref c c-func docutils literal notranslate"><span class="pre">nrf_modem_at_notif_handler_set()</span></code>).</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>When the AT monitor library is initialized, it will override the handler set previously with the Modem library to receive the AT notifications.</p>
</div>
</section>
<section id="usage">
<h2><a class="toc-backref" href="#id9">Usage</a><a class="headerlink" href="#usage" title="Permalink to this heading"></a></h2>
<p>The application can define an AT monitor to receive notifications through the <a class="reference internal" href="#c.AT_MONITOR" title="AT_MONITOR"><code class="xref c c-macro docutils literal notranslate"><span class="pre">AT_MONITOR</span></code></a> and <a class="reference internal" href="#c.AT_MONITOR_ISR" title="AT_MONITOR_ISR"><code class="xref c c-macro docutils literal notranslate"><span class="pre">AT_MONITOR_ISR</span></code></a> macros.
An AT monitor has a name, a filter string, and a callback function.
In addition, it can be paused or activated (using <a class="reference internal" href="#c.PAUSED" title="PAUSED"><code class="xref c c-macro docutils literal notranslate"><span class="pre">PAUSED</span></code></a> and <a class="reference internal" href="#c.ACTIVE" title="ACTIVE"><code class="xref c c-macro docutils literal notranslate"><span class="pre">ACTIVE</span></code></a> respectively).
Multiple parts of the application can define their own AT monitor with the same filter as another AT monitor, and thus receive the same notifications, if desired.</p>
<section id="deferred-dispatching">
<h3><a class="toc-backref" href="#id10">Deferred dispatching</a><a class="headerlink" href="#deferred-dispatching" title="Permalink to this heading"></a></h3>
<p>The application can define an AT monitor to receive AT notifications in the system workqueue using the <a class="reference internal" href="#c.AT_MONITOR" title="AT_MONITOR"><code class="xref c c-macro docutils literal notranslate"><span class="pre">AT_MONITOR</span></code></a> macro.
When the AT monitor library receives an AT notification from the Modem library, the notification is copied on the AT monitor library heap and is dispatched using the system workqueue to all monitors whose filter matches (even partially) the contents of the notification.</p>
<p>The following code snippet shows how to register a handler that receives <code class="docutils literal notranslate"><span class="pre">+CEREG</span></code> notifications from the Modem library:</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="cm">/* AT monitor for +CEREG notifications */</span>
<span class="n">AT_MONITOR</span><span class="p">(</span><span class="n">network_registration</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;+CEREG&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">cereg_mon</span><span class="p">);</span>

<span class="kt">int</span><span class="w"> </span><span class="nf">cereg_mon</span><span class="p">(</span><span class="k">const</span><span class="w"> </span><span class="kt">char</span><span class="w"> </span><span class="o">*</span><span class="n">notif</span><span class="p">)</span>
<span class="p">{</span>
<span class="w">        </span><span class="n">printf</span><span class="p">(</span><span class="s">&quot;Received +CEREG notification: %s&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">notif</span><span class="p">);</span>
<span class="p">}</span>
</pre></div>
</div>
<p>The size of the AT monitor library heap can be configured using the <code class="xref kconfig kconfig-option docutils literal notranslate"><span class="pre">CONFIG_AT_MONITOR_HEAP_SIZE</span></code> option.</p>
</section>
<section id="direct-dispatching">
<h3><a class="toc-backref" href="#id11">Direct dispatching</a><a class="headerlink" href="#direct-dispatching" title="Permalink to this heading"></a></h3>
<p>The AT monitor library supports defining a particular type of monitor that receives the AT notifications in an interrupt service routine.
Because notifications dispatched to AT monitors in an ISR are not copied onto the AT monitor library heap, the application is guaranteed that the library will not be out of memory to copy the notification.
This can be useful for some particularly large AT notifications or AT notifications that the application must reply to, for example, SMS notifications.</p>
<p>The following code snippet shows how to register a handler that receives <code class="docutils literal notranslate"><span class="pre">+CEREG</span></code> notifications from the Modem library:</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="cm">/* AT monitor for +CEREG notifications, dispatched in ISR */</span>
<span class="n">AT_MONITOR_ISR</span><span class="p">(</span><span class="n">network_registration</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;+CEREG&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">cereg_mon</span><span class="p">);</span>

<span class="kt">int</span><span class="w"> </span><span class="nf">cereg_mon</span><span class="p">(</span><span class="k">const</span><span class="w"> </span><span class="kt">char</span><span class="w"> </span><span class="o">*</span><span class="n">notif</span><span class="p">)</span>
<span class="p">{</span>
<span class="w">        </span><span class="n">printf</span><span class="p">(</span><span class="s">&quot;Received +CEREG notification in ISR&quot;</span><span class="p">);</span>
<span class="p">}</span>
</pre></div>
</div>
</section>
<section id="pausing-and-resuming">
<h3><a class="toc-backref" href="#id12">Pausing and resuming</a><a class="headerlink" href="#pausing-and-resuming" title="Permalink to this heading"></a></h3>
<p>When defined, an AT monitor is in active state by default.
An AT monitor can be paused and resumed with the <a class="reference internal" href="#c.at_monitor_pause" title="at_monitor_pause"><code class="xref c c-func docutils literal notranslate"><span class="pre">at_monitor_pause()</span></code></a> and <a class="reference internal" href="#c.at_monitor_resume" title="at_monitor_resume"><code class="xref c c-func docutils literal notranslate"><span class="pre">at_monitor_resume()</span></code></a> functions respectively.
If desired, an AT monitor can be defined to be in paused state at compile time by appending <a class="reference internal" href="#c.PAUSED" title="PAUSED"><code class="xref c c-macro docutils literal notranslate"><span class="pre">PAUSED</span></code></a> to the monitor definition.</p>
<p>The following code snippet shows how to define an AT monitor for <code class="docutils literal notranslate"><span class="pre">+CEREG</span></code> notifications that is paused at boot and resumed later:</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="cm">/* AT monitor for +CEREG notifications, paused until manually activated */</span>
<span class="n">AT_MONITOR</span><span class="p">(</span><span class="n">network_registration</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;+CEREG&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">cereg_mon</span><span class="p">,</span><span class="w"> </span><span class="n">PAUSED</span><span class="p">);</span>

<span class="kt">void</span><span class="w"> </span><span class="nf">foo</span><span class="p">(</span><span class="kt">void</span><span class="p">)</span>
<span class="p">{</span>
<span class="w">        </span><span class="cm">/* let&#39;s resume the monitor */</span>
<span class="w">        </span><span class="n">at_monitor_resume</span><span class="p">(</span><span class="o">&amp;</span><span class="n">network_registration</span><span class="p">);</span>
<span class="p">}</span>
</pre></div>
</div>
</section>
<section id="wildcard-filter">
<h3><a class="toc-backref" href="#id13">Wildcard filter</a><a class="headerlink" href="#wildcard-filter" title="Permalink to this heading"></a></h3>
<p>It is possible to define an AT monitor that will receive all AT notifications, by passing <a class="reference internal" href="#c.ANY" title="ANY"><code class="xref c c-macro docutils literal notranslate"><span class="pre">ANY</span></code></a> as the AT monitor filter string.</p>
<p>The following code snippet shows how to define an AT monitor that will receive all AT notifications:</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="cm">/* AT monitor for all notifications */</span>
<span class="n">AT_MONITOR</span><span class="p">(</span><span class="n">catch_all</span><span class="p">,</span><span class="w"> </span><span class="n">ANY</span><span class="p">,</span><span class="w"> </span><span class="n">at_notif_handler</span><span class="p">);</span>

<span class="kt">int</span><span class="w"> </span><span class="nf">at_notif_handler</span><span class="p">(</span><span class="k">const</span><span class="w"> </span><span class="kt">char</span><span class="w"> </span><span class="o">*</span><span class="n">notif</span><span class="p">)</span>
<span class="p">{</span>
<span class="w">        </span><span class="n">printf</span><span class="p">(</span><span class="s">&quot;Received a notification: %s&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">notif</span><span class="p">);</span>
<span class="p">}</span>
</pre></div>
</div>
</section>
</section>
<section id="api-documentation">
<h2><a class="toc-backref" href="#id14">API documentation</a><a class="headerlink" href="#api-documentation" title="Permalink to this heading"></a></h2>
<div class="line-block">
<div class="line">Header file: <code class="file docutils literal notranslate"><span class="pre">include/modem/at_monitor.h</span></code></div>
<div class="line">Source file: <code class="file docutils literal notranslate"><span class="pre">lib/at_monitor/at_monitor.c</span></code></div>
</div>
<dl>
<dt class="sig sig-object cpp">
<span class="target" id="group__at__monitor"></span><em><span class="pre">group</span></em> <span class="sig-name descname"><span class="pre">at_monitor</span></span></dt>
<dd><p>Public APIs for the AT monitor library. </p>
<div class="breathe-sectiondef docutils container">
<p class="breathe-sectiondef-title rubric" id="breathe-section-title-defines">Defines</p>
<dl class="c macro">
<dt class="sig sig-object c" id="c.ANY">
<span class="target" id="group__at__monitor_1ga756cb5435a9a4479ee2066ab9da0dbae"></span><span class="sig-name descname"><span class="n"><span class="pre">ANY</span></span></span><a class="headerlink" href="#c.ANY" title="Permalink to this definition"></a><br /></dt>
<dd><p>Wildcard. Match any notifications. </p>
</dd></dl>

<dl class="c macro">
<dt class="sig sig-object c" id="c.PAUSED">
<span class="target" id="group__at__monitor_1ga734b46dfd78fbf6fc938a6f9115f2cc7"></span><span class="sig-name descname"><span class="n"><span class="pre">PAUSED</span></span></span><a class="headerlink" href="#c.PAUSED" title="Permalink to this definition"></a><br /></dt>
<dd><p>Monitor is paused. </p>
</dd></dl>

<dl class="c macro">
<dt class="sig sig-object c" id="c.ACTIVE">
<span class="target" id="group__at__monitor_1ga3a6d3cd70078e6046471ec528a09cd19"></span><span class="sig-name descname"><span class="n"><span class="pre">ACTIVE</span></span></span><a class="headerlink" href="#c.ACTIVE" title="Permalink to this definition"></a><br /></dt>
<dd><p>Monitor is active, default </p>
</dd></dl>

<dl class="c macro">
<dt class="sig sig-object c" id="c.AT_MONITOR">
<span class="target" id="group__at__monitor_1ga67e4b241cac410639d33722b4ec512ed"></span><span class="sig-name descname"><span class="n"><span class="pre">AT_MONITOR</span></span></span><span class="sig-paren">(</span><span class="n"><span class="pre">name</span></span>, <span class="n"><span class="pre">_filter</span></span>, <span class="n"><span class="pre">_handler</span></span>, <span class="p"><span class="pre">...</span></span><span class="sig-paren">)</span><a class="headerlink" href="#c.AT_MONITOR" title="Permalink to this definition"></a><br /></dt>
<dd><p>Define an AT monitor to receive notifications in the system workqueue thread. </p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>name</strong> – The monitor name. </p></li>
<li><p><strong>_filter</strong> – The filter for AT notification the monitor should receive, or <code class="docutils literal notranslate"><span class="pre">ANY</span></code> to receive all notifications. </p></li>
<li><p><strong>_handler</strong> – The monitor callback. </p></li>
<li><p><strong>...</strong> – Optional monitor initial state (<code class="docutils literal notranslate"><span class="pre">PAUSED</span></code> or <code class="docutils literal notranslate"><span class="pre">ACTIVE</span></code>). The default initial state of a monitor is active. </p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="c macro">
<dt class="sig sig-object c" id="c.AT_MONITOR_ISR">
<span class="target" id="group__at__monitor_1ga9362a61326acbe6f3d13ce751b3a9101"></span><span class="sig-name descname"><span class="n"><span class="pre">AT_MONITOR_ISR</span></span></span><span class="sig-paren">(</span><span class="n"><span class="pre">name</span></span>, <span class="n"><span class="pre">_filter</span></span>, <span class="n"><span class="pre">_handler</span></span>, <span class="p"><span class="pre">...</span></span><span class="sig-paren">)</span><a class="headerlink" href="#c.AT_MONITOR_ISR" title="Permalink to this definition"></a><br /></dt>
<dd><p>Define an AT monitor to receive AT notifications in an ISR. </p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>name</strong> – The monitor name. </p></li>
<li><p><strong>_filter</strong> – The filter for AT notification the monitor should receive, or <code class="docutils literal notranslate"><span class="pre">ANY</span></code> to receive all notifications. </p></li>
<li><p><strong>_handler</strong> – The monitor callback. </p></li>
<li><p><strong>...</strong> – Optional monitor initial state (<code class="docutils literal notranslate"><span class="pre">PAUSED</span></code> or <code class="docutils literal notranslate"><span class="pre">ACTIVE</span></code>). The default initial state of a monitor is active. </p></li>
</ul>
</dd>
</dl>
</dd></dl>

</div>
<div class="breathe-sectiondef docutils container">
<p class="breathe-sectiondef-title rubric" id="breathe-section-title-typedefs">Typedefs</p>
<dl class="c type">
<dt class="sig sig-object c" id="c.at_monitor_handler_t">
<span class="target" id="group__at__monitor_1ga170f3e1648f03d53eb7c8bc9eb6091cc"></span><span class="k"><span class="pre">typedef</span></span><span class="w"> </span><span class="kt"><span class="pre">void</span></span><span class="w"> </span><span class="p"><span class="pre">(</span></span><span class="p"><span class="pre">*</span></span><span class="sig-name descname"><span class="n"><span class="pre">at_monitor_handler_t</span></span></span><span class="p"><span class="pre">)</span></span><span class="p"><span class="pre">(</span></span><span class="k"><span class="pre">const</span></span><span class="w"> </span><span class="kt"><span class="pre">char</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">notif</span></span><span class="p"><span class="pre">)</span></span><a class="headerlink" href="#c.at_monitor_handler_t" title="Permalink to this definition"></a><br /></dt>
<dd><p>AT monitor callback. </p>
<dl class="field-list simple">
<dt class="field-odd">Param notif</dt>
<dd class="field-odd"><p>The AT notification. </p>
</dd>
</dl>
</dd></dl>

</div>
<div class="breathe-sectiondef docutils container">
<p class="breathe-sectiondef-title rubric" id="breathe-section-title-functions">Functions</p>
<dl class="c function">
<dt class="sig sig-object c" id="c.at_monitor_pause">
<span class="target" id="group__at__monitor_1ga1e0f87130a6296a7c9e6b4edd7b855bf"></span><span class="k"><span class="pre">static</span></span><span class="w"> </span><span class="k"><span class="pre">inline</span></span><span class="w"> </span><span class="kt"><span class="pre">void</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">at_monitor_pause</span></span></span><span class="sig-paren">(</span><span class="k"><span class="pre">struct</span></span><span class="w"> </span><a class="reference internal" href="#c.at_monitor_entry" title="at_monitor_entry"><span class="n"><span class="pre">at_monitor_entry</span></span></a><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">mon</span></span><span class="sig-paren">)</span><a class="headerlink" href="#c.at_monitor_pause" title="Permalink to this definition"></a><br /></dt>
<dd><p>Pause monitor. </p>
<p>Pause monitor <code class="docutils literal notranslate"><span class="pre">mon</span></code> from receiving notifications.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>mon</strong> – The monitor to pause. </p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="c function">
<dt class="sig sig-object c" id="c.at_monitor_resume">
<span class="target" id="group__at__monitor_1ga7fdc00ffd860cc80359f7e621f6cc83d"></span><span class="k"><span class="pre">static</span></span><span class="w"> </span><span class="k"><span class="pre">inline</span></span><span class="w"> </span><span class="kt"><span class="pre">void</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">at_monitor_resume</span></span></span><span class="sig-paren">(</span><span class="k"><span class="pre">struct</span></span><span class="w"> </span><a class="reference internal" href="#c.at_monitor_entry" title="at_monitor_entry"><span class="n"><span class="pre">at_monitor_entry</span></span></a><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">mon</span></span><span class="sig-paren">)</span><a class="headerlink" href="#c.at_monitor_resume" title="Permalink to this definition"></a><br /></dt>
<dd><p>Resume monitor. </p>
<p>Resume forwarding notifications to monitor <code class="docutils literal notranslate"><span class="pre">mon</span></code>.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>mon</strong> – The monitor to resume. </p></li>
</ul>
</dd>
</dl>
</dd></dl>

</div>
<dl class="c struct">
<dt class="sig sig-object c" id="c.at_monitor_entry">
<span class="target" id="structat__monitor__entry"></span><span class="k"><span class="pre">struct</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">at_monitor_entry</span></span></span><a class="headerlink" href="#c.at_monitor_entry" title="Permalink to this definition"></a><br /></dt>
<dd><div class="docutils container">
<em>#include &lt;at_monitor.h&gt;</em></div>
<p>AT monitor entry. </p>
<div class="breathe-sectiondef docutils container">
<p class="breathe-sectiondef-title rubric" id="breathe-section-title-public-members">Public Members</p>
<dl class="c var">
<dt class="sig sig-object c" id="c.at_monitor_entry.filter">
<span class="target" id="structat__monitor__entry_1a50006aa8b21fe86a0210b43b701dae24"></span><span class="k"><span class="pre">const</span></span><span class="w"> </span><span class="kt"><span class="pre">char</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="sig-name descname"><span class="n"><span class="pre">filter</span></span></span><a class="headerlink" href="#c.at_monitor_entry.filter" title="Permalink to this definition"></a><br /></dt>
<dd><p>The filter for this monitor. </p>
</dd></dl>

<dl class="c var">
<dt class="sig sig-object c" id="c.at_monitor_entry.handler">
<span class="target" id="structat__monitor__entry_1a904c3a71e9d3bdb65041847d4b63d74c"></span><span class="k"><span class="pre">const</span></span><span class="w"> </span><a class="reference internal" href="#c.at_monitor_handler_t" title="at_monitor_handler_t"><span class="n"><span class="pre">at_monitor_handler_t</span></span></a><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">handler</span></span></span><a class="headerlink" href="#c.at_monitor_entry.handler" title="Permalink to this definition"></a><br /></dt>
<dd><p>Monitor callback. </p>
</dd></dl>

</div>
</dd></dl>

</dd></dl>

</section>
</section>


           </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="at_params.html" class="btn btn-neutral float-right" title="AT parameters" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="at_host.html" class="btn btn-neutral" title="AT Host" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">

<table>
<tr>
<td>
    <p>
        &copy; Copyright 2019-2023, Nordic Semiconductor.
      Last updated on Mar 20, 2023.

    </p>
</td>
<td id="nordiclogo">
  <a href="https://www.nordicsemi.com/"><img src="../../_static/images/nordic-logo.png" border="0"/></a>
</td>
</tr>
</table>
  </div> 


</footer>

<div id="scroll-container">
  <button type="button" id="scroll-btn" class="btn">
    <svg xmlns="http://www.w3.org/2000/svg" height="24" viewBox="0 0 24 24" width="24"><path d="M0 0h24v24H0z" fill="none"/><path d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z" fill="#fff"/></svg>
  </button>
</div>

<script>
  const scrollBtn = document.querySelector("#scroll-btn");

  document.addEventListener("scroll", () => {
    if (window.scrollY > 400) {
          scrollBtn.style.visibility = "visible";
      } else {
          scrollBtn.style.visibility = "hidden";
      }
  });

  scrollBtn.addEventListener("click", () => {
      window.scrollTo({ top: 0, behavior: "smooth" });
  });
</script>
        </div>
      </div>
    </section>
  </div>
  
  <div class="rst-versions" data-toggle="rst-versions" role="note" aria-label="versions">
    <span class="rst-current-version" data-toggle="rst-current-version">
      <span class="fa fa-book"> nRF Connect SDK</span>
       <span class="fa fa-caret-down"></span>
    </span>
    <div class="rst-other-versions">
      
      <div class="rst-other-version ncs">
        <a href="../../../nrf/index.html">nRF Connect SDK</a>
      </div>
      
      <div class="rst-other-version nrfx">
        <a href="../../../nrfx/index.html">nrfx</a>
      </div>
      
      <div class="rst-other-version nrfxlib">
        <a href="../../../nrfxlib/README.html">nrfxlib</a>
      </div>
      
      <div class="rst-other-version zephyr">
        <a href="../../../zephyr/index.html">Zephyr Project</a>
      </div>
      
      <div class="rst-other-version mcuboot">
        <a href="../../../mcuboot/wrapper.html">MCUboot</a>
      </div>
      
      <div class="rst-other-version tfm">
        <a href="../../../tfm/index.html">Trusted Firmware-M</a>
      </div>
      
      <div class="rst-other-version matter">
        <a href="../../../matter/index.html">Matter</a>
      </div>
      
      <div class="rst-other-version kconfig">
        <a href="../../../kconfig/index.html">Kconfig Reference</a>
      </div>
    </div>
  </div><script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>