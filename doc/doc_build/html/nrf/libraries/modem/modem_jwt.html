<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Modem JWT &mdash; nRF Connect SDK 2.3.99 documentation</title>
      <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="../../_static/css/nordic.css" type="text/css" />
      <link rel="stylesheet" href="../../_static/togglebutton.css" type="text/css" />
      <link rel="stylesheet" href="../../_static/css/nrf.css" type="text/css" />
      <link rel="stylesheet" href="../../_static/tabs.css" type="text/css" /> 
  <!--[if lt IE 9]>
    <script src="../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="../../" id="documentation_options" src="../../_static/documentation_options.js"></script>
        <script src="../../_static/jquery.js"></script>
        <script src="../../_static/underscore.js"></script>
        <script src="../../_static/_sphinx_javascript_frameworks_compat.js"></script>
        <script src="../../_static/doctools.js"></script>
        <script src="../../_static/sphinx_highlight.js"></script>
        <script src="https://www.googletagmanager.com/gtag/js?id=G-ZPVZRKFQJR"></script>
        <script src="../../_static/js/ga-tracker.js"></script>
        <script data-culture="EN" id="CookieConsent" type="text/javascript" src="https://policy.app.cookieinformation.com/uc.js"></script>
        <script>let toggleHintShow = 'Click to show';</script>
        <script>let toggleHintHide = 'Click to hide';</script>
        <script>let toggleOpenOnPrint = 'true';</script>
        <script src="../../_static/togglebutton.js"></script>
        <script>var togglebuttonSelector = '.toggle, .admonition.dropdown';</script>
    <script src="../../_static/js/theme.js"></script>
<script
  type="text/javascript"
  src="../../_static/js/ncs.js"
></script>
<script src="../../_static/js/bootstrap.bundle.min.js"></script>

    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="Modem key management" href="modem_key_mgmt.html" />
    <link rel="prev" title="Modem information" href="modem_info.html" />
<link
  href="../../_static/css/bootstrap.min.css"
  rel="stylesheet"
/>
<link
  rel="shortcut icon"
  href="../../_static/images/favicon.ico"
/>

</head>

<body class="wy-body-for-nav">
<div class="announcement"></div>
<div class="d-print-none ncs-header">
  <div class="container-xl ncs-header-top">
    <div class="row h-100">
      <div class="d-none d-md-block col-2">
        <div class="bg-white py-4 px-3 ml-2 ncs-header-logo">
          <img
            class="ncs-header-logo"
            src="../../_static/images/nordic-logo.png"
            alt=""
          />
        </div>
      </div>
      <div
        class="col-8 col-md-7 pl-md-4 d-flex align-self-center justify-content-center"
      >
        <form class="w-75" action="../../search.html" method="get">
          <div class="form-group">
            <input
              type="text"
              name="q"
              class="ncs-search-input form-control"
              placeholder="Search all docs..."
            />
          </div>
        </form>
      </div>
      <div class="col-4 col-md-3 d-md-block p-3 text-end">
        <div class="dropdown">
          <button
            class="btn dropdown-toggle ncs-btn-versions"
            type="button"
            id="dropdownMenuButton1"
            data-bs-toggle="dropdown"
            aria-expanded="false"
          >
            <span class="d-none d-md-inline">nRF Connect SDK</span>
            <span id="ncsversion" class="d-inline"></span>
          </button>
          <div class="dropdown-menu" aria-labelledby="dropdownMenuButton"></div>
        </div>
      </div>
    </div>
  </div>
  <div class="ncs-header-nav">
    <div class="container-xl">
      <div class="row">
        <div class="col col-12 d-flex justify-content-center">
          <nav class="navbar navbar-dark navbar-expand-lg p-0">
            <span class="navbar-brand d-block d-lg-none py-2 pl-1"
              >Documentation sets</span
            >
            <button
              class="navbar-toggler"
              type="button"
              data-bs-toggle="collapse"
              data-bs-target="#navbarNavAltMarkup"
              aria-controls="navbarNavAltMarkup"
              aria-expanded="false"
              aria-label="Toggle navigation"
            >
              <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="navbarNavAltMarkup">
              <ul class="navbar-nav">
                <li class="nav-item active py-1 px-3">
                  <a
                    class="nav-link"
                    href="../../../nrf/index.html"
                    >nRF Connect SDK</a
                  >
                </li>
                <li><hr class="dropdown-divider" /></li>
                <li class="nav-item  py-1 px-3">
                  <a
                    class="nav-link"
                    href="../../../nrfx/index.html"
                    >nrfx</a
                  >
                </li>
                <li><hr class="dropdown-divider" /></li>
                <li class="nav-item  py-1 px-3">
                  <a
                    class="nav-link"
                    href="../../../nrfxlib/README.html"
                    >nrfxlib</a
                  >
                </li>
                <li><hr class="dropdown-divider" /></li>
                <li class="nav-item  py-1 px-3">
                  <a
                    class="nav-link"
                    href="../../../zephyr/index.html"
                    >Zephyr Project</a
                  >
                </li>
                <li><hr class="dropdown-divider" /></li>
                <li class="nav-item  py-1 px-3">
                  <a
                    class="nav-link"
                    href="../../../mcuboot/wrapper.html"
                    >MCUboot</a
                  >
                </li>
                <li><hr class="dropdown-divider" /></li>
                <li class="nav-item  py-1 px-3">
                  <a
                    class="nav-link"
                    href="../../../tfm/index.html"
                    >Trusted Firmware-M</a
                  >
                </li>
                <li><hr class="dropdown-divider" /></li>
                <li class="nav-item  py-1 px-3">
                  <a
                    class="nav-link"
                    href="../../../matter/index.html"
                    >Matter</a
                  >
                </li>
                <li><hr class="dropdown-divider" /></li>
                <li class="nav-item  py-1 px-3">
                  <a
                    class="nav-link"
                    href="../../../kconfig/index.html"
                    >Kconfig Reference</a
                  >
                </li>
                <li><hr class="dropdown-divider" /></li>
              </ul>
            </div>
          </nav>
        </div>
      </div>
    </div>
  </div>
</div>

  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
            <a href="../../index.html" class="icon icon-home"> nRF Connect SDK
          </a>
              <div class="version">
                2.3.99
              </div>
<div id="searchbox" role="search">
  <div class="searchformwrapper">
    <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
      <input type="text" name="q" placeholder="Search docs" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
  </div>
</div>
<script>$('#searchbox').show(0);</script>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Contents</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../introduction.html">Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../getting_started.html">Getting started</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../dev_model.html">Development model</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../app_dev.html">Application development</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../security.html">Security</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../ecosystem_integration.html">Ecosystems integration</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../nrf91.html">Working with nRF91 Series</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../nrf70.html">Working with nRF70 Series</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../nrf53.html">Working with nRF53 Series</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../nrf52.html">Working with nRF52 Series</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../protocols.html">Protocols</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../applications.html">Applications</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../samples.html">Samples</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../drivers.html">Drivers</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../index.html">Libraries</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../bin/index.html">Binary libraries</a></li>
<li class="toctree-l2"><a class="reference internal" href="../bluetooth_services/index.html">Bluetooth libraries and services</a></li>
<li class="toctree-l2"><a class="reference internal" href="../bootloader/index.html">Bootloader libraries</a></li>
<li class="toctree-l2"><a class="reference internal" href="../caf/index.html">Common Application Framework</a></li>
<li class="toctree-l2"><a class="reference internal" href="../debug/index.html">Debug libraries</a></li>
<li class="toctree-l2"><a class="reference internal" href="../dfu/index.html">DFU libraries</a></li>
<li class="toctree-l2"><a class="reference internal" href="../gazell/index.html">Gazell libraries</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="index.html">Modem libraries</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="at_cmd_parser.html">AT command parser</a></li>
<li class="toctree-l3"><a class="reference internal" href="at_custom_cmd.html">Custom AT commands</a></li>
<li class="toctree-l3"><a class="reference internal" href="at_host.html">AT Host</a></li>
<li class="toctree-l3"><a class="reference internal" href="at_monitor.html">AT monitor</a></li>
<li class="toctree-l3"><a class="reference internal" href="at_params.html">AT parameters</a></li>
<li class="toctree-l3"><a class="reference internal" href="at_shell.html">AT shell</a></li>
<li class="toctree-l3"><a class="reference internal" href="gcf_sms_lib.html">GCF SMS</a></li>
<li class="toctree-l3"><a class="reference internal" href="location.html">Location</a></li>
<li class="toctree-l3"><a class="reference internal" href="lte_lc.html">LTE link controller</a></li>
<li class="toctree-l3"><a class="reference internal" href="modem_antenna.html">Modem antenna</a></li>
<li class="toctree-l3"><a class="reference internal" href="modem_attest_token.html">Modem attestation token</a></li>
<li class="toctree-l3"><a class="reference internal" href="modem_info.html">Modem information</a></li>
<li class="toctree-l3 current"><a class="current reference internal" href="#">Modem JWT</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#configuration">Configuration</a></li>
<li class="toctree-l4"><a class="reference internal" href="#api-documentation">API documentation</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="modem_key_mgmt.html">Modem key management</a></li>
<li class="toctree-l3"><a class="reference internal" href="modem_slm.html">Modem SLM</a></li>
<li class="toctree-l3"><a class="reference internal" href="nrf_modem_lib.html">Modem library integration layer</a></li>
<li class="toctree-l3"><a class="reference internal" href="pdn.html">PDN</a></li>
<li class="toctree-l3"><a class="reference internal" href="sms.html">SMS subscriber</a></li>
<li class="toctree-l3"><a class="reference internal" href="zzhc.html">China Telecom ZZHC library</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../mpsl/index.html">Multiprotocol Service Layer libraries</a></li>
<li class="toctree-l2"><a class="reference internal" href="../networking/index.html">Libraries for networking</a></li>
<li class="toctree-l2"><a class="reference internal" href="../nfc/index.html">Libraries for NFC</a></li>
<li class="toctree-l2"><a class="reference internal" href="../nrf_rpc/index.html">nRF RPC libraries</a></li>
<li class="toctree-l2"><a class="reference internal" href="../others/index.html">Other libraries</a></li>
<li class="toctree-l2"><a class="reference internal" href="../shell/index.html">Shell libraries</a></li>
<li class="toctree-l2"><a class="reference internal" href="../tfm/index.html">TF-M libraries</a></li>
<li class="toctree-l2"><a class="reference internal" href="../zigbee/index.html">Libraries for Zigbee</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../scripts.html">Scripts</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../release_notes.html">Release notes</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../known_issues.html">Known issues</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../software_maturity.html">Software maturity levels</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../documentation.html">About this documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../glossary.html">Glossary</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">nRF Connect SDK</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../../index.html" class="icon icon-home"></a></li>
          <li class="breadcrumb-item"><a href="../index.html">Libraries</a></li>
          <li class="breadcrumb-item"><a href="index.html">Modem libraries</a></li>
      <li class="breadcrumb-item active">Modem JWT</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../../_sources/libraries/modem/modem_jwt.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="modem-jwt">
<span id="lib-modem-jwt"></span><h1>Modem JWT<a class="headerlink" href="#modem-jwt" title="Permalink to this heading"></a></h1>
<div class="contents local topic" id="contents">
<ul class="simple">
<li><p><a class="reference internal" href="#configuration" id="id7">Configuration</a></p>
<ul>
<li><p><a class="reference internal" href="#possible-structure-values" id="id8">Possible structure values</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#api-documentation" id="id9">API documentation</a></p></li>
</ul>
</div>
<p>The Modem JWT library provides access to the modem’s <a class="reference external" href="https://jwt.io/introduction">JSON Web Token (JWT)</a> generation feature, which is available in modem firmware v1.3.0 or higher.</p>
<section id="configuration">
<h2><a class="toc-backref" href="#id7">Configuration</a><a class="headerlink" href="#configuration" title="Permalink to this heading"></a></h2>
<p>To use the library to request a JWT, complete the following steps:</p>
<ol class="arabic simple">
<li><p>Set the following Kconfig options to enable the library:</p>
<ul class="simple">
<li><p><code class="xref kconfig kconfig-option docutils literal notranslate"><span class="pre">CONFIG_MODEM_JWT</span></code></p></li>
<li><p><code class="xref kconfig kconfig-option docutils literal notranslate"><span class="pre">CONFIG_MODEM_JWT_MAX_LEN</span></code></p></li>
</ul>
</li>
<li><p>Populate the <a class="reference internal" href="#c.jwt_data" title="jwt_data"><code class="xref c c-struct docutils literal notranslate"><span class="pre">jwt_data</span></code></a> structure with your desired values.
See <a class="reference internal" href="#possible-structure-values">Possible structure values</a> for more information.</p></li>
<li><p>Pass the structure to the function that generates JWT (<a class="reference internal" href="#c.modem_jwt_generate" title="modem_jwt_generate"><code class="xref c c-func docutils literal notranslate"><span class="pre">modem_jwt_generate()</span></code></a>).</p></li>
</ol>
<p>If the function executes successfully, <a class="reference internal" href="#c.jwt_data.jwt_buf" title="jwt_data.jwt_buf"><code class="xref c c-member docutils literal notranslate"><span class="pre">jwt_data.jwt_buf</span></code></a> will contain the JSON Web Token.</p>
<section id="possible-structure-values">
<h3><a class="toc-backref" href="#id8">Possible structure values</a><a class="headerlink" href="#possible-structure-values" title="Permalink to this heading"></a></h3>
<p>You can configure the following values in the <a class="reference internal" href="#c.jwt_data" title="jwt_data"><code class="xref c c-struct docutils literal notranslate"><span class="pre">jwt_data</span></code></a> structure:</p>
<ul class="simple">
<li><p><a class="reference internal" href="#c.jwt_data.sec_tag" title="jwt_data.sec_tag"><code class="xref c c-member docutils literal notranslate"><span class="pre">jwt_data.sec_tag</span></code></a> - Optional.
The <code class="docutils literal notranslate"><span class="pre">sec_tag</span></code> must contain a valid signing key.
If zero is given, the modem uses its own key for signing.</p></li>
<li><p><a class="reference internal" href="#c.jwt_data.key" title="jwt_data.key"><code class="xref c c-member docutils literal notranslate"><span class="pre">jwt_data.key</span></code></a> - Required if <code class="docutils literal notranslate"><span class="pre">sec_tag</span></code> is not zero.
Defines the type of key in the sec tag.</p></li>
<li><p><a class="reference internal" href="#c.jwt_data.alg" title="jwt_data.alg"><code class="xref c c-member docutils literal notranslate"><span class="pre">jwt_data.alg</span></code></a> - Required if <code class="docutils literal notranslate"><span class="pre">sec_tag</span></code> is not zero.
Defines the JWT signing algorithm. Currently, only ECDSA 256 is supported.</p></li>
<li><p><a class="reference internal" href="#c.jwt_data.exp_delta_s" title="jwt_data.exp_delta_s"><code class="xref c c-member docutils literal notranslate"><span class="pre">jwt_data.exp_delta_s</span></code></a> - Optional.
If set, and if the modem has a valid date and time, the <code class="docutils literal notranslate"><span class="pre">iat</span></code> and <code class="docutils literal notranslate"><span class="pre">exp</span></code> claims are populated.</p></li>
<li><p><a class="reference internal" href="#c.jwt_data.subject" title="jwt_data.subject"><code class="xref c c-member docutils literal notranslate"><span class="pre">jwt_data.subject</span></code></a> - Optional.
Corresponds to <code class="docutils literal notranslate"><span class="pre">sub</span></code> claim.
Use <code class="docutils literal notranslate"><span class="pre">NULL</span></code> if you want to leave out this field.</p></li>
<li><p><a class="reference internal" href="#c.jwt_data.audience" title="jwt_data.audience"><code class="xref c c-member docutils literal notranslate"><span class="pre">jwt_data.audience</span></code></a> - Optional.
Corresponds to <code class="docutils literal notranslate"><span class="pre">aud</span></code> claim.
Use <code class="docutils literal notranslate"><span class="pre">NULL</span></code> if you want to leave out this field.</p></li>
<li><p><a class="reference internal" href="#c.jwt_data.jwt_buf" title="jwt_data.jwt_buf"><code class="xref c c-member docutils literal notranslate"><span class="pre">jwt_data.jwt_buf</span></code></a> - Optional.
Buffer for the generated, null-terminated, JWT string.
If a buffer is not provided, the library will allocate memory.</p></li>
<li><p><a class="reference internal" href="#c.jwt_data.jwt_sz" title="jwt_data.jwt_sz"><code class="xref c c-member docutils literal notranslate"><span class="pre">jwt_data.jwt_sz</span></code></a> - Size of JWT buffer.
Required if <a class="reference internal" href="#c.jwt_data.jwt_buf" title="jwt_data.jwt_buf"><code class="xref c c-member docutils literal notranslate"><span class="pre">jwt_data.jwt_buf</span></code></a> is set.</p></li>
</ul>
</section>
</section>
<section id="api-documentation">
<h2><a class="toc-backref" href="#id9">API documentation</a><a class="headerlink" href="#api-documentation" title="Permalink to this heading"></a></h2>
<div class="line-block">
<div class="line">Header file: <code class="file docutils literal notranslate"><span class="pre">include/modem/modem_jwt.h</span></code></div>
<div class="line">Source file: <code class="file docutils literal notranslate"><span class="pre">lib/modem/modem_jwt.c</span></code></div>
</div>
<dl>
<dt class="sig sig-object cpp">
<span class="target" id="group__modem__jwt"></span><em><span class="pre">group</span></em> <span class="sig-name descname"><span class="pre">modem_jwt</span></span></dt>
<dd><div class="breathe-sectiondef docutils container">
<p class="breathe-sectiondef-title rubric" id="breathe-section-title-enums">Enums</p>
<dl class="c enum">
<dt class="sig sig-object c" id="c.jwt_key_type">
<span class="target" id="group__modem__jwt_1gab3fc100bfe9885bc7d6cd5011d487eeb"></span><span class="k"><span class="pre">enum</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">jwt_key_type</span></span></span><a class="headerlink" href="#c.jwt_key_type" title="Permalink to this definition"></a><br /></dt>
<dd><p>The type of key to be used for signing the JWT. </p>
<p><em>Values:</em></p>
<dl class="c enumerator">
<dt class="sig sig-object c" id="c.jwt_key_type.JWT_KEY_TYPE_CLIENT_PRIV">
<span class="target" id="group__modem__jwt_1ggab3fc100bfe9885bc7d6cd5011d487eeba96ed1861a4dba83ebe3855440bedb20b"></span><span class="k"><span class="pre">enumerator</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">JWT_KEY_TYPE_CLIENT_PRIV</span></span></span><a class="headerlink" href="#c.jwt_key_type.JWT_KEY_TYPE_CLIENT_PRIV" title="Permalink to this definition"></a><br /></dt>
<dd></dd></dl>

<dl class="c enumerator">
<dt class="sig sig-object c" id="c.jwt_key_type.JWT_KEY_TYPE_ENDORSEMENT">
<span class="target" id="group__modem__jwt_1ggab3fc100bfe9885bc7d6cd5011d487eeba7c55c6c5501cd87eed290e65c5de3b2c"></span><span class="k"><span class="pre">enumerator</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">JWT_KEY_TYPE_ENDORSEMENT</span></span></span><a class="headerlink" href="#c.jwt_key_type.JWT_KEY_TYPE_ENDORSEMENT" title="Permalink to this definition"></a><br /></dt>
<dd></dd></dl>

</dd></dl>

<dl class="c enum">
<dt class="sig sig-object c" id="c.jwt_alg_type">
<span class="target" id="group__modem__jwt_1gacaa7ea0e840121ee3ae0180cda78db0a"></span><span class="k"><span class="pre">enum</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">jwt_alg_type</span></span></span><a class="headerlink" href="#c.jwt_alg_type" title="Permalink to this definition"></a><br /></dt>
<dd><p>JWT signing algorithm. </p>
<p><em>Values:</em></p>
<dl class="c enumerator">
<dt class="sig sig-object c" id="c.jwt_alg_type.JWT_ALG_TYPE_ES256">
<span class="target" id="group__modem__jwt_1ggacaa7ea0e840121ee3ae0180cda78db0aaba356159c1a90fbcd9d40b63f5bf6c92"></span><span class="k"><span class="pre">enumerator</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">JWT_ALG_TYPE_ES256</span></span></span><a class="headerlink" href="#c.jwt_alg_type.JWT_ALG_TYPE_ES256" title="Permalink to this definition"></a><br /></dt>
<dd></dd></dl>

</dd></dl>

</div>
<div class="breathe-sectiondef docutils container">
<p class="breathe-sectiondef-title rubric" id="breathe-section-title-functions">Functions</p>
<dl class="c function">
<dt class="sig sig-object c" id="c.modem_jwt_generate">
<span class="target" id="group__modem__jwt_1ga3acc163ac07c90facc3a135931422a81"></span><span class="kt"><span class="pre">int</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">modem_jwt_generate</span></span></span><span class="sig-paren">(</span><span class="k"><span class="pre">struct</span></span><span class="w"> </span><a class="reference internal" href="#c.jwt_data" title="jwt_data"><span class="n"><span class="pre">jwt_data</span></span></a><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="k"><span class="pre">const</span></span><span class="w"> </span><span class="n"><span class="pre">jwt</span></span><span class="sig-paren">)</span><a class="headerlink" href="#c.modem_jwt_generate" title="Permalink to this definition"></a><br /></dt>
<dd><p>Generates a JWT using the supplied parameters. If successful, the JWT string will be stored in the supplied struct. This function will allocate memory for the JWT if the user does not provide a buffer. In that case, the user is responsible for freeing the memory by calling <a class="reference internal" href="#group__modem__jwt_1gadfe0c31924fb6b9f35ac772a9771e729"><span class="std std-ref">modem_jwt_free</span></a>. </p>
<p>Subject and audience fields may be NULL in which case those fields are left out from generated JWT token.</p>
<p>If sec_tag value is given as zero, JWT is signed with Nordic’s own keys that already exist in the modem.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>jwt</strong> – <strong>[inout]</strong> Pointer to struct containing JWT parameters and result.</p></li>
</ul>
</dd>
<dt class="field-even">Return values</dt>
<dd class="field-even"><p><strong>0</strong> – If the operation was successful. Otherwise, a (negative) error code is returned. </p>
</dd>
</dl>
</dd></dl>

<dl class="c function">
<dt class="sig sig-object c" id="c.modem_jwt_get_uuids">
<span class="target" id="group__modem__jwt_1ga037cdb2b8be6c6900836efacf8c7598e"></span><span class="kt"><span class="pre">int</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">modem_jwt_get_uuids</span></span></span><span class="sig-paren">(</span><span class="k"><span class="pre">struct</span></span><span class="w"> </span><a class="reference internal" href="modem_attest_token.html#c.nrf_device_uuid" title="nrf_device_uuid"><span class="n"><span class="pre">nrf_device_uuid</span></span></a><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">dev</span></span>, <span class="k"><span class="pre">struct</span></span><span class="w"> </span><a class="reference internal" href="modem_attest_token.html#c.nrf_modem_fw_uuid" title="nrf_modem_fw_uuid"><span class="n"><span class="pre">nrf_modem_fw_uuid</span></span></a><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">mfw</span></span><span class="sig-paren">)</span><a class="headerlink" href="#c.modem_jwt_get_uuids" title="Permalink to this definition"></a><br /></dt>
<dd><p>Gets the device and/or modem firmware UUID from the modem and returns it as a NULL terminated string in the supplied struct(s). </p>
<p>Uses internally <a class="reference internal" href="#group__modem__jwt_1ga3acc163ac07c90facc3a135931422a81"><span class="std std-ref">modem_jwt_generate</span></a> and parses JWT token for “iss” “jti” fields which contains given UUID values.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>dev</strong> – <strong>[out]</strong> Pointer to struct containing device UUID string. Can be NULL if UUID is not wanted. </p></li>
<li><p><strong>mfw</strong> – <strong>[out]</strong> Pointer to struct containing modem fw UUID string. Can be NULL if UUID is not wanted.</p></li>
</ul>
</dd>
<dt class="field-even">Return values</dt>
<dd class="field-even"><p><strong>0</strong> – If the operation was successful. Otherwise, a (negative) error code is returned. </p>
</dd>
</dl>
</dd></dl>

<dl class="c function">
<dt class="sig sig-object c" id="c.modem_jwt_free">
<span class="target" id="group__modem__jwt_1gadfe0c31924fb6b9f35ac772a9771e729"></span><span class="kt"><span class="pre">void</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">modem_jwt_free</span></span></span><span class="sig-paren">(</span><span class="kt"><span class="pre">char</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="k"><span class="pre">const</span></span><span class="w"> </span><span class="n"><span class="pre">jwt_buf</span></span><span class="sig-paren">)</span><a class="headerlink" href="#c.modem_jwt_free" title="Permalink to this definition"></a><br /></dt>
<dd><p>Frees the JWT buffer allocated by <a class="reference internal" href="#group__modem__jwt_1ga3acc163ac07c90facc3a135931422a81"><span class="std std-ref">modem_jwt_generate</span></a>. </p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>jwt_buf</strong> – <strong>[in]</strong> Pointer to JWT buffer; see <a class="reference internal" href="#structjwt__data"><span class="std std-ref">jwt_data</span></a>. </p></li>
</ul>
</dd>
</dl>
</dd></dl>

</div>
<dl class="c struct">
<dt class="sig sig-object c" id="c.jwt_data">
<span class="target" id="structjwt__data"></span><span class="k"><span class="pre">struct</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">jwt_data</span></span></span><a class="headerlink" href="#c.jwt_data" title="Permalink to this definition"></a><br /></dt>
<dd><div class="docutils container">
<em>#include &lt;modem_jwt.h&gt;</em></div>
<p>JWT parameters required for JWT generation and pointer to generated JWT. </p>
<div class="breathe-sectiondef docutils container">
<p class="breathe-sectiondef-title rubric" id="breathe-section-title-public-members">Public Members</p>
<dl class="c var">
<dt class="sig sig-object c" id="c.jwt_data.sec_tag">
<span class="target" id="structjwt__data_1aeaab9f2d9e3a76b3773bbb1bbea3c4aa"></span><span class="kt"><span class="pre">int</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">sec_tag</span></span></span><a class="headerlink" href="#c.jwt_data.sec_tag" title="Permalink to this definition"></a><br /></dt>
<dd><p>Modem sec tag to use for JWT signing </p>
</dd></dl>

<dl class="c var">
<dt class="sig sig-object c" id="c.jwt_data.key">
<span class="target" id="structjwt__data_1ae0e136655fe72b13b1ae7b8201ef60e9"></span><span class="k"><span class="pre">enum</span></span><span class="w"> </span><a class="reference internal" href="#c.jwt_key_type" title="jwt_key_type"><span class="n"><span class="pre">jwt_key_type</span></span></a><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">key</span></span></span><a class="headerlink" href="#c.jwt_data.key" title="Permalink to this definition"></a><br /></dt>
<dd><p>Key type in the specified sec tag </p>
</dd></dl>

<dl class="c var">
<dt class="sig sig-object c" id="c.jwt_data.alg">
<span class="target" id="structjwt__data_1ac656dfc92627ab46af1b67c2a5969d39"></span><span class="k"><span class="pre">enum</span></span><span class="w"> </span><a class="reference internal" href="#c.jwt_alg_type" title="jwt_alg_type"><span class="n"><span class="pre">jwt_alg_type</span></span></a><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">alg</span></span></span><a class="headerlink" href="#c.jwt_data.alg" title="Permalink to this definition"></a><br /></dt>
<dd><p>JWT signing algorithm </p>
</dd></dl>

<dl class="c var">
<dt class="sig sig-object c" id="c.jwt_data.exp_delta_s">
<span class="target" id="structjwt__data_1a4cd223d74c13e6e6c73d121894eebcd9"></span><span class="n"><span class="pre">uint32_t</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">exp_delta_s</span></span></span><a class="headerlink" href="#c.jwt_data.exp_delta_s" title="Permalink to this definition"></a><br /></dt>
<dd><p>Defines how long the JWT will be valid; in seconds (from generation). The ‘iat’ and ‘exp’ claims will be populated only if the modem has a valid date and time. </p>
</dd></dl>

<dl class="c var">
<dt class="sig sig-object c" id="c.jwt_data.subject">
<span class="target" id="structjwt__data_1a5f2664058b272d1c1044a430548040b6"></span><span class="k"><span class="pre">const</span></span><span class="w"> </span><span class="kt"><span class="pre">char</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="sig-name descname"><span class="n"><span class="pre">subject</span></span></span><a class="headerlink" href="#c.jwt_data.subject" title="Permalink to this definition"></a><br /></dt>
<dd><p>NULL terminated ‘sub’ claim; the principal that is the subject of the JWT </p>
</dd></dl>

<dl class="c var">
<dt class="sig sig-object c" id="c.jwt_data.audience">
<span class="target" id="structjwt__data_1a9a082f33fbc700d07f0a0634df1f07a4"></span><span class="k"><span class="pre">const</span></span><span class="w"> </span><span class="kt"><span class="pre">char</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="sig-name descname"><span class="n"><span class="pre">audience</span></span></span><a class="headerlink" href="#c.jwt_data.audience" title="Permalink to this definition"></a><br /></dt>
<dd><p>NULL terminated ‘aud’ claim; intended recipient of the JWT </p>
</dd></dl>

<dl class="c var">
<dt class="sig sig-object c" id="c.jwt_data.jwt_buf">
<span class="target" id="structjwt__data_1a1aab66c0d1580ff5cf144f783286502c"></span><span class="kt"><span class="pre">char</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="sig-name descname"><span class="n"><span class="pre">jwt_buf</span></span></span><a class="headerlink" href="#c.jwt_data.jwt_buf" title="Permalink to this definition"></a><br /></dt>
<dd><p>Buffer to which the NULL terminated JWT will be copied. If a buffer is provided by the user, the size must also be set. If buffer is NULL, memory will be allocated and user must free memory when finished by calling <a class="reference internal" href="#group__modem__jwt_1gadfe0c31924fb6b9f35ac772a9771e729"><span class="std std-ref">modem_jwt_free</span></a>. </p>
</dd></dl>

<dl class="c var">
<dt class="sig sig-object c" id="c.jwt_data.jwt_sz">
<span class="target" id="structjwt__data_1a0a41a664199f2ec5a3c061189811b7f9"></span><span class="n"><span class="pre">size_t</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">jwt_sz</span></span></span><a class="headerlink" href="#c.jwt_data.jwt_sz" title="Permalink to this definition"></a><br /></dt>
<dd><p>Size of the user provided buffer or size of the allocated buffer </p>
</dd></dl>

</div>
</dd></dl>

</dd></dl>

</section>
</section>


           </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="modem_key_mgmt.html" class="btn btn-neutral float-right" title="Modem key management" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="modem_info.html" class="btn btn-neutral" title="Modem information" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">

<table>
<tr>
<td>
    <p>
        &copy; Copyright 2019-2023, Nordic Semiconductor.
      Last updated on Mar 20, 2023.

    </p>
</td>
<td id="nordiclogo">
  <a href="https://www.nordicsemi.com/"><img src="../../_static/images/nordic-logo.png" border="0"/></a>
</td>
</tr>
</table>
  </div> 


</footer>

<div id="scroll-container">
  <button type="button" id="scroll-btn" class="btn">
    <svg xmlns="http://www.w3.org/2000/svg" height="24" viewBox="0 0 24 24" width="24"><path d="M0 0h24v24H0z" fill="none"/><path d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z" fill="#fff"/></svg>
  </button>
</div>

<script>
  const scrollBtn = document.querySelector("#scroll-btn");

  document.addEventListener("scroll", () => {
    if (window.scrollY > 400) {
          scrollBtn.style.visibility = "visible";
      } else {
          scrollBtn.style.visibility = "hidden";
      }
  });

  scrollBtn.addEventListener("click", () => {
      window.scrollTo({ top: 0, behavior: "smooth" });
  });
</script>
        </div>
      </div>
    </section>
  </div>
  
  <div class="rst-versions" data-toggle="rst-versions" role="note" aria-label="versions">
    <span class="rst-current-version" data-toggle="rst-current-version">
      <span class="fa fa-book"> nRF Connect SDK</span>
       <span class="fa fa-caret-down"></span>
    </span>
    <div class="rst-other-versions">
      
      <div class="rst-other-version ncs">
        <a href="../../../nrf/index.html">nRF Connect SDK</a>
      </div>
      
      <div class="rst-other-version nrfx">
        <a href="../../../nrfx/index.html">nrfx</a>
      </div>
      
      <div class="rst-other-version nrfxlib">
        <a href="../../../nrfxlib/README.html">nrfxlib</a>
      </div>
      
      <div class="rst-other-version zephyr">
        <a href="../../../zephyr/index.html">Zephyr Project</a>
      </div>
      
      <div class="rst-other-version mcuboot">
        <a href="../../../mcuboot/wrapper.html">MCUboot</a>
      </div>
      
      <div class="rst-other-version tfm">
        <a href="../../../tfm/index.html">Trusted Firmware-M</a>
      </div>
      
      <div class="rst-other-version matter">
        <a href="../../../matter/index.html">Matter</a>
      </div>
      
      <div class="rst-other-version kconfig">
        <a href="../../../kconfig/index.html">Kconfig Reference</a>
      </div>
    </div>
  </div><script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>