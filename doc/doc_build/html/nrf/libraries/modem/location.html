<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Location &mdash; nRF Connect SDK 2.3.99 documentation</title>
      <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="../../_static/css/nordic.css" type="text/css" />
      <link rel="stylesheet" href="../../_static/togglebutton.css" type="text/css" />
      <link rel="stylesheet" href="../../_static/css/nrf.css" type="text/css" />
      <link rel="stylesheet" href="../../_static/tabs.css" type="text/css" /> 
  <!--[if lt IE 9]>
    <script src="../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="../../" id="documentation_options" src="../../_static/documentation_options.js"></script>
        <script src="../../_static/jquery.js"></script>
        <script src="../../_static/underscore.js"></script>
        <script src="../../_static/_sphinx_javascript_frameworks_compat.js"></script>
        <script src="../../_static/doctools.js"></script>
        <script src="../../_static/sphinx_highlight.js"></script>
        <script src="https://www.googletagmanager.com/gtag/js?id=G-ZPVZRKFQJR"></script>
        <script src="../../_static/js/ga-tracker.js"></script>
        <script data-culture="EN" id="CookieConsent" type="text/javascript" src="https://policy.app.cookieinformation.com/uc.js"></script>
        <script>let toggleHintShow = 'Click to show';</script>
        <script>let toggleHintHide = 'Click to hide';</script>
        <script>let toggleOpenOnPrint = 'true';</script>
        <script src="../../_static/togglebutton.js"></script>
        <script>var togglebuttonSelector = '.toggle, .admonition.dropdown';</script>
    <script src="../../_static/js/theme.js"></script>
<script
  type="text/javascript"
  src="../../_static/js/ncs.js"
></script>
<script src="../../_static/js/bootstrap.bundle.min.js"></script>

    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="LTE link controller" href="lte_lc.html" />
    <link rel="prev" title="GCF SMS" href="gcf_sms_lib.html" />
<link
  href="../../_static/css/bootstrap.min.css"
  rel="stylesheet"
/>
<link
  rel="shortcut icon"
  href="../../_static/images/favicon.ico"
/>

</head>

<body class="wy-body-for-nav">
<div class="announcement"></div>
<div class="d-print-none ncs-header">
  <div class="container-xl ncs-header-top">
    <div class="row h-100">
      <div class="d-none d-md-block col-2">
        <div class="bg-white py-4 px-3 ml-2 ncs-header-logo">
          <img
            class="ncs-header-logo"
            src="../../_static/images/nordic-logo.png"
            alt=""
          />
        </div>
      </div>
      <div
        class="col-8 col-md-7 pl-md-4 d-flex align-self-center justify-content-center"
      >
        <form class="w-75" action="../../search.html" method="get">
          <div class="form-group">
            <input
              type="text"
              name="q"
              class="ncs-search-input form-control"
              placeholder="Search all docs..."
            />
          </div>
        </form>
      </div>
      <div class="col-4 col-md-3 d-md-block p-3 text-end">
        <div class="dropdown">
          <button
            class="btn dropdown-toggle ncs-btn-versions"
            type="button"
            id="dropdownMenuButton1"
            data-bs-toggle="dropdown"
            aria-expanded="false"
          >
            <span class="d-none d-md-inline">nRF Connect SDK</span>
            <span id="ncsversion" class="d-inline"></span>
          </button>
          <div class="dropdown-menu" aria-labelledby="dropdownMenuButton"></div>
        </div>
      </div>
    </div>
  </div>
  <div class="ncs-header-nav">
    <div class="container-xl">
      <div class="row">
        <div class="col col-12 d-flex justify-content-center">
          <nav class="navbar navbar-dark navbar-expand-lg p-0">
            <span class="navbar-brand d-block d-lg-none py-2 pl-1"
              >Documentation sets</span
            >
            <button
              class="navbar-toggler"
              type="button"
              data-bs-toggle="collapse"
              data-bs-target="#navbarNavAltMarkup"
              aria-controls="navbarNavAltMarkup"
              aria-expanded="false"
              aria-label="Toggle navigation"
            >
              <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="navbarNavAltMarkup">
              <ul class="navbar-nav">
                <li class="nav-item active py-1 px-3">
                  <a
                    class="nav-link"
                    href="../../../nrf/index.html"
                    >nRF Connect SDK</a
                  >
                </li>
                <li><hr class="dropdown-divider" /></li>
                <li class="nav-item  py-1 px-3">
                  <a
                    class="nav-link"
                    href="../../../nrfx/index.html"
                    >nrfx</a
                  >
                </li>
                <li><hr class="dropdown-divider" /></li>
                <li class="nav-item  py-1 px-3">
                  <a
                    class="nav-link"
                    href="../../../nrfxlib/README.html"
                    >nrfxlib</a
                  >
                </li>
                <li><hr class="dropdown-divider" /></li>
                <li class="nav-item  py-1 px-3">
                  <a
                    class="nav-link"
                    href="../../../zephyr/index.html"
                    >Zephyr Project</a
                  >
                </li>
                <li><hr class="dropdown-divider" /></li>
                <li class="nav-item  py-1 px-3">
                  <a
                    class="nav-link"
                    href="../../../mcuboot/wrapper.html"
                    >MCUboot</a
                  >
                </li>
                <li><hr class="dropdown-divider" /></li>
                <li class="nav-item  py-1 px-3">
                  <a
                    class="nav-link"
                    href="../../../tfm/index.html"
                    >Trusted Firmware-M</a
                  >
                </li>
                <li><hr class="dropdown-divider" /></li>
                <li class="nav-item  py-1 px-3">
                  <a
                    class="nav-link"
                    href="../../../matter/index.html"
                    >Matter</a
                  >
                </li>
                <li><hr class="dropdown-divider" /></li>
                <li class="nav-item  py-1 px-3">
                  <a
                    class="nav-link"
                    href="../../../kconfig/index.html"
                    >Kconfig Reference</a
                  >
                </li>
                <li><hr class="dropdown-divider" /></li>
              </ul>
            </div>
          </nav>
        </div>
      </div>
    </div>
  </div>
</div>

  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
            <a href="../../index.html" class="icon icon-home"> nRF Connect SDK
          </a>
              <div class="version">
                2.3.99
              </div>
<div id="searchbox" role="search">
  <div class="searchformwrapper">
    <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
      <input type="text" name="q" placeholder="Search docs" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
  </div>
</div>
<script>$('#searchbox').show(0);</script>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Contents</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../introduction.html">Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../getting_started.html">Getting started</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../dev_model.html">Development model</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../app_dev.html">Application development</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../security.html">Security</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../ecosystem_integration.html">Ecosystems integration</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../nrf91.html">Working with nRF91 Series</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../nrf70.html">Working with nRF70 Series</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../nrf53.html">Working with nRF53 Series</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../nrf52.html">Working with nRF52 Series</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../protocols.html">Protocols</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../applications.html">Applications</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../samples.html">Samples</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../drivers.html">Drivers</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../index.html">Libraries</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../bin/index.html">Binary libraries</a></li>
<li class="toctree-l2"><a class="reference internal" href="../bluetooth_services/index.html">Bluetooth libraries and services</a></li>
<li class="toctree-l2"><a class="reference internal" href="../bootloader/index.html">Bootloader libraries</a></li>
<li class="toctree-l2"><a class="reference internal" href="../caf/index.html">Common Application Framework</a></li>
<li class="toctree-l2"><a class="reference internal" href="../debug/index.html">Debug libraries</a></li>
<li class="toctree-l2"><a class="reference internal" href="../dfu/index.html">DFU libraries</a></li>
<li class="toctree-l2"><a class="reference internal" href="../gazell/index.html">Gazell libraries</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="index.html">Modem libraries</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="at_cmd_parser.html">AT command parser</a></li>
<li class="toctree-l3"><a class="reference internal" href="at_custom_cmd.html">Custom AT commands</a></li>
<li class="toctree-l3"><a class="reference internal" href="at_host.html">AT Host</a></li>
<li class="toctree-l3"><a class="reference internal" href="at_monitor.html">AT monitor</a></li>
<li class="toctree-l3"><a class="reference internal" href="at_params.html">AT parameters</a></li>
<li class="toctree-l3"><a class="reference internal" href="at_shell.html">AT shell</a></li>
<li class="toctree-l3"><a class="reference internal" href="gcf_sms_lib.html">GCF SMS</a></li>
<li class="toctree-l3 current"><a class="current reference internal" href="#">Location</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#overview">Overview</a></li>
<li class="toctree-l4"><a class="reference internal" href="#requirements">Requirements</a></li>
<li class="toctree-l4"><a class="reference internal" href="#library-files">Library files</a></li>
<li class="toctree-l4"><a class="reference internal" href="#configuration">Configuration</a></li>
<li class="toctree-l4"><a class="reference internal" href="#usage">Usage</a></li>
<li class="toctree-l4"><a class="reference internal" href="#samples-using-the-library">Samples using the library</a></li>
<li class="toctree-l4"><a class="reference internal" href="#limitations">Limitations</a></li>
<li class="toctree-l4"><a class="reference internal" href="#dependencies">Dependencies</a></li>
<li class="toctree-l4"><a class="reference internal" href="#api-documentation">API documentation</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="lte_lc.html">LTE link controller</a></li>
<li class="toctree-l3"><a class="reference internal" href="modem_antenna.html">Modem antenna</a></li>
<li class="toctree-l3"><a class="reference internal" href="modem_attest_token.html">Modem attestation token</a></li>
<li class="toctree-l3"><a class="reference internal" href="modem_info.html">Modem information</a></li>
<li class="toctree-l3"><a class="reference internal" href="modem_jwt.html">Modem JWT</a></li>
<li class="toctree-l3"><a class="reference internal" href="modem_key_mgmt.html">Modem key management</a></li>
<li class="toctree-l3"><a class="reference internal" href="modem_slm.html">Modem SLM</a></li>
<li class="toctree-l3"><a class="reference internal" href="nrf_modem_lib.html">Modem library integration layer</a></li>
<li class="toctree-l3"><a class="reference internal" href="pdn.html">PDN</a></li>
<li class="toctree-l3"><a class="reference internal" href="sms.html">SMS subscriber</a></li>
<li class="toctree-l3"><a class="reference internal" href="zzhc.html">China Telecom ZZHC library</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../mpsl/index.html">Multiprotocol Service Layer libraries</a></li>
<li class="toctree-l2"><a class="reference internal" href="../networking/index.html">Libraries for networking</a></li>
<li class="toctree-l2"><a class="reference internal" href="../nfc/index.html">Libraries for NFC</a></li>
<li class="toctree-l2"><a class="reference internal" href="../nrf_rpc/index.html">nRF RPC libraries</a></li>
<li class="toctree-l2"><a class="reference internal" href="../others/index.html">Other libraries</a></li>
<li class="toctree-l2"><a class="reference internal" href="../shell/index.html">Shell libraries</a></li>
<li class="toctree-l2"><a class="reference internal" href="../tfm/index.html">TF-M libraries</a></li>
<li class="toctree-l2"><a class="reference internal" href="../zigbee/index.html">Libraries for Zigbee</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../scripts.html">Scripts</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../release_notes.html">Release notes</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../known_issues.html">Known issues</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../software_maturity.html">Software maturity levels</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../documentation.html">About this documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../glossary.html">Glossary</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">nRF Connect SDK</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../../index.html" class="icon icon-home"></a></li>
          <li class="breadcrumb-item"><a href="../index.html">Libraries</a></li>
          <li class="breadcrumb-item"><a href="index.html">Modem libraries</a></li>
      <li class="breadcrumb-item active">Location</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../../_sources/libraries/modem/location.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="location">
<span id="lib-location"></span><h1>Location<a class="headerlink" href="#location" title="Permalink to this heading"></a></h1>
<div class="contents local topic" id="contents">
<ul class="simple">
<li><p><a class="reference internal" href="#overview" id="id7">Overview</a></p>
<ul>
<li><p><a class="reference internal" href="#implementation" id="id8">Implementation</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#requirements" id="id9">Requirements</a></p>
<ul>
<li><p><a class="reference internal" href="#nrf-cloud-certificates" id="id10">nRF Cloud certificates</a></p></li>
<li><p><a class="reference internal" href="#location-service-accounts" id="id11">Location service accounts</a></p></li>
<li><p><a class="reference internal" href="#wi-fi-chip" id="id12">Wi-Fi chip</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#library-files" id="id13">Library files</a></p></li>
<li><p><a class="reference internal" href="#configuration" id="id14">Configuration</a></p></li>
<li><p><a class="reference internal" href="#usage" id="id15">Usage</a></p></li>
<li><p><a class="reference internal" href="#samples-using-the-library" id="id16">Samples using the library</a></p></li>
<li><p><a class="reference internal" href="#limitations" id="id17">Limitations</a></p></li>
<li><p><a class="reference internal" href="#dependencies" id="id18">Dependencies</a></p></li>
<li><p><a class="reference internal" href="#api-documentation" id="id19">API documentation</a></p></li>
</ul>
</div>
<p>The location library provides functionality for retrieving the location of a device using different positioning methods such as:</p>
<ul class="simple">
<li><p>GNSS satellite positioning including Assisted GPS (A-GPS) and Predicted GPS (P-GPS) data.</p></li>
<li><p>Cellular positioning.</p></li>
<li><p>Wi-Fi positioning.</p></li>
</ul>
<section id="overview">
<h2><a class="toc-backref" href="#id7">Overview</a><a class="headerlink" href="#overview" title="Permalink to this heading"></a></h2>
<p>This library provides an API for applications to request the location of a device.
The application can determine the preferred order of the location methods to be used along with other configuration information.
If a method fails to provide the location, the library performs a fallback to the next preferred method.</p>
<p>Both cellular and Wi-Fi positioning detect the base stations and use web services for retrieving the location.
GNSS positioning uses satellites to compute the location of the device.
This library can use the assistance data (A-GPS and P-GPS) to find the satellites faster.</p>
<section id="implementation">
<h3><a class="toc-backref" href="#id8">Implementation</a><a class="headerlink" href="#implementation" title="Permalink to this heading"></a></h3>
<p>The location library has a compact API and a location core that handles the functionality that is independent of the location method, such as fallback to the next preferred method and timeouts.
The supported location methods are as follows:</p>
<ul>
<li><p>GNSS positioning</p>
<ul>
<li><p><span class="xref std std-ref">gnss_interface</span> for getting the location.</p></li>
<li><p>A-GPS and P-GPS are managed with <a class="reference internal" href="../networking/nrf_cloud_agps.html#lib-nrf-cloud-agps"><span class="std std-ref">nRF Cloud A-GPS</span></a> and <a class="reference internal" href="../networking/nrf_cloud_pgps.html#lib-nrf-cloud-pgps"><span class="std std-ref">nRF Cloud P-GPS</span></a>.</p></li>
<li><p>The application may also use some other source for the data and use <a class="reference internal" href="#c.location_agps_data_process" title="location_agps_data_process"><code class="xref c c-func docutils literal notranslate"><span class="pre">location_agps_data_process()</span></code></a> and <a class="reference internal" href="#c.location_pgps_data_process" title="location_pgps_data_process"><code class="xref c c-func docutils literal notranslate"><span class="pre">location_pgps_data_process()</span></code></a> to pass the data to the location library.</p></li>
<li><p>The data format of A-GPS or P-GPS must be as received from <a class="reference internal" href="../networking/nrf_cloud_agps.html#lib-nrf-cloud-agps"><span class="std std-ref">nRF Cloud A-GPS</span></a>.</p></li>
<li><p>The data transport method for <a class="reference internal" href="../networking/nrf_cloud_agps.html#lib-nrf-cloud-agps"><span class="std std-ref">nRF Cloud A-GPS</span></a> and <a class="reference internal" href="../networking/nrf_cloud_pgps.html#lib-nrf-cloud-pgps"><span class="std std-ref">nRF Cloud P-GPS</span></a> can be configured to be either MQTT (<code class="xref kconfig kconfig-option docutils literal notranslate"><span class="pre">CONFIG_NRF_CLOUD_MQTT</span></code>) or REST (<code class="xref kconfig kconfig-option docutils literal notranslate"><span class="pre">CONFIG_NRF_CLOUD_REST</span></code>).</p>
<p>If different transport is desired for different location methods, (<code class="xref kconfig kconfig-option docutils literal notranslate"><span class="pre">CONFIG_NRF_CLOUD_MQTT</span></code>) and (<code class="xref kconfig kconfig-option docutils literal notranslate"><span class="pre">CONFIG_NRF_CLOUD_REST</span></code>) can be enabled simultaneously. In such a case, MQTT takes
precedence as the transport method of GNSS assistance data.</p>
</li>
<li><p>Note that acquiring GNSS fix only starts when LTE connection, more specifically Radio Resource Control (RRC) connection, is idle.</p>
<p>Also, if A-GPS is not used and Power Saving Mode (PSM) is enabled, Location library will wait for the modem to enter PSM.</p>
</li>
<li><p>Selectable location accuracy (low/normal/high).</p></li>
</ul>
</li>
<li><p>Cellular positioning</p>
<ul class="simple">
<li><p><a class="reference internal" href="lte_lc.html#lte-lc-readme"><span class="std std-ref">LTE link controller</span></a> for getting visible cellular base stations.</p></li>
<li><p>The <code class="docutils literal notranslate"><span class="pre">cloud</span> <span class="pre">location</span></code> method handles sending cell information to the selected location service and getting the calculated location back to the device.</p></li>
</ul>
</li>
<li><p>Wi-Fi positioning</p>
<ul class="simple">
<li><p>Zephyr’s Network Management API <span class="xref std std-ref">zephyr:net_mgmt_interface</span> for getting the visible Wi-Fi access points.</p></li>
<li><p>The <code class="docutils literal notranslate"><span class="pre">cloud</span> <span class="pre">location</span></code> method handles sending access point information to the selected location service and getting the calculated location back to the device.</p></li>
</ul>
</li>
</ul>
<p>The <code class="docutils literal notranslate"><span class="pre">cloud</span> <span class="pre">location</span></code> method handles the location methods (cellular and Wi-Fi positioning)
that scan for technology-specific information and sends it over to the cloud service for location resolution.</p>
<p>The default priority order of location methods is GNSS positioning, Wi-Fi positioning and Cellular positioning.
If any of these methods are disabled, the method is simply omitted from the list.</p>
<p>Here are details related to the services handling cell information for cellular positioning, or access point information for Wi-Fi positioning:</p>
<blockquote>
<div><ul class="simple">
<li><p>Services can be handled by the application by enabling the <code class="xref kconfig kconfig-option docutils literal notranslate"><span class="pre">CONFIG_LOCATION_SERVICE_EXTERNAL</span></code> Kconfig option, in which case rest of the service configurations are ignored.</p></li>
<li><p>The service is selected in the <a class="reference internal" href="#c.location_method_config" title="location_method_config"><code class="xref c c-struct docutils literal notranslate"><span class="pre">location_method_config</span></code></a> structure when requesting for location.</p></li>
<li><p>The services available are <a class="reference external" href="https://docs.nrfcloud.com/LocationServices/LocationServicesOverview/">nRF Cloud Location Services</a> and <a class="reference external" href="https://www.here.com/platform/positioning">HERE Positioning</a>.</p></li>
<li><p>The data transport method for the <a class="reference external" href="https://docs.nrfcloud.com/LocationServices/LocationServicesOverview/">nRF Cloud Location Services</a> can be configured to either MQTT (<code class="xref kconfig kconfig-option docutils literal notranslate"><span class="pre">CONFIG_NRF_CLOUD_MQTT</span></code>) or REST (<code class="xref kconfig kconfig-option docutils literal notranslate"><span class="pre">CONFIG_NRF_CLOUD_REST</span></code>).</p></li>
<li><p>The only data transport method with <a class="reference external" href="https://www.here.com/platform/positioning">HERE Positioning</a> service is REST.</p></li>
</ul>
</div></blockquote>
</section>
</section>
<section id="requirements">
<h2><a class="toc-backref" href="#id9">Requirements</a><a class="headerlink" href="#requirements" title="Permalink to this heading"></a></h2>
<section id="nrf-cloud-certificates">
<h3><a class="toc-backref" href="#id10">nRF Cloud certificates</a><a class="headerlink" href="#nrf-cloud-certificates" title="Permalink to this heading"></a></h3>
<p>When using nRF Cloud for any location data, you must have the certificate provisioned.
See <a class="reference internal" href="../../working_with_nrf/nrf91/nrf9160.html#nrf9160-ug-updating-cloud-certificate"><span class="std std-ref">Updating the nRF Cloud certificate</span></a> for more information.
nRF9160 DK comes pre-provisioned with certificates for nRF Cloud.</p>
</section>
<section id="location-service-accounts">
<h3><a class="toc-backref" href="#id11">Location service accounts</a><a class="headerlink" href="#location-service-accounts" title="Permalink to this heading"></a></h3>
<p>To use the location services that provide A-GPS or P-GPS, cellular or Wi-Fi positioning data, see the respective documentation for setting up your account and getting the required credentials for authentication:</p>
<ul class="simple">
<li><p><a class="reference external" href="https://docs.nrfcloud.com/LocationServices/LocationServicesOverview/">nRF Cloud Location Services</a></p></li>
<li><p><a class="reference external" href="https://www.here.com/platform/positioning">HERE Positioning</a></p></li>
</ul>
<p>You can configure the required credentials for the location services using Kconfig options.</p>
</section>
<section id="wi-fi-chip">
<h3><a class="toc-backref" href="#id12">Wi-Fi chip</a><a class="headerlink" href="#wi-fi-chip" title="Permalink to this heading"></a></h3>
<p>None of the supported DKs have an integrated Wi-Fi chip.
You can use an external Wi-Fi chip, such as nRF7002 EK, and connect it to the nRF9160 DK.</p>
</section>
</section>
<section id="library-files">
<h2><a class="toc-backref" href="#id13">Library files</a><a class="headerlink" href="#library-files" title="Permalink to this heading"></a></h2>
<p>This library is found under <code class="file docutils literal notranslate"><span class="pre">lib/location</span></code> in the nRF Connect SDK folder structure.</p>
</section>
<section id="configuration">
<h2><a class="toc-backref" href="#id14">Configuration</a><a class="headerlink" href="#configuration" title="Permalink to this heading"></a></h2>
<p>Configure the following Kconfig options to enable this library:</p>
<ul class="simple">
<li><p><code class="xref kconfig kconfig-option docutils literal notranslate"><span class="pre">CONFIG_LOCATION</span></code> - Enables the Location library.</p></li>
<li><p><code class="xref kconfig kconfig-option docutils literal notranslate"><span class="pre">CONFIG_NRF_MODEM_LIB</span></code> - Enable modem library.</p></li>
<li><p><code class="xref kconfig kconfig-option docutils literal notranslate"><span class="pre">CONFIG_LTE_LINK_CONTROL</span></code> - Enable LTE link control.</p></li>
</ul>
<p>Configure the following Kconfig options to enable Wi-Fi interface:</p>
<ul class="simple">
<li><p><code class="xref kconfig kconfig-option docutils literal notranslate"><span class="pre">CONFIG_WIFI</span></code> - Enable Wi-Fi for Zephyr.</p></li>
</ul>
<p>The chosen Wi-Fi device needs to be set in Devicetree:</p>
<div class="highlight-devicetree notranslate"><div class="highlight"><pre><span></span><span class="nf">chosen</span><span class="cm"> </span><span class="p">{</span>
<span class="w">  </span><span class="n">ncs</span><span class="p">,</span><span class="n">location-wifi</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">&amp;</span><span class="n">mywifi</span><span class="p">;</span>
<span class="p">};</span>
</pre></div>
</div>
<p>Configure the following options to enable location methods of your choice:</p>
<ul class="simple">
<li><p><code class="xref kconfig kconfig-option docutils literal notranslate"><span class="pre">CONFIG_LOCATION_METHOD_GNSS</span></code> - Enables GNSS location method.</p></li>
<li><p><code class="xref kconfig kconfig-option docutils literal notranslate"><span class="pre">CONFIG_LOCATION_METHOD_CELLULAR</span></code> - Enables cellular location method.</p></li>
<li><p><code class="xref kconfig kconfig-option docutils literal notranslate"><span class="pre">CONFIG_LOCATION_METHOD_WIFI</span></code> - Enables Wi-Fi location method.</p></li>
</ul>
<p>The following options control the use of GNSS assistance data:</p>
<ul class="simple">
<li><p><code class="xref kconfig kconfig-option docutils literal notranslate"><span class="pre">CONFIG_LOCATION_SERVICE_EXTERNAL</span></code> - Enables A-GPS and P-GPS data retrieval from an external source, implemented separately by the application.
If enabled, the library triggers a <a class="reference internal" href="#c.location_event_id.LOCATION_EVT_GNSS_ASSISTANCE_REQUEST" title="LOCATION_EVT_GNSS_ASSISTANCE_REQUEST"><code class="xref c c-enum docutils literal notranslate"><span class="pre">LOCATION_EVT_GNSS_ASSISTANCE_REQUEST</span></code></a> or <a class="reference internal" href="#c.location_event_id.LOCATION_EVT_GNSS_PREDICTION_REQUEST" title="LOCATION_EVT_GNSS_PREDICTION_REQUEST"><code class="xref c c-enum docutils literal notranslate"><span class="pre">LOCATION_EVT_GNSS_PREDICTION_REQUEST</span></code></a> event when assistance is needed.
Once the application has obtained the assistance data, it should call the <a class="reference internal" href="#c.location_agps_data_process" title="location_agps_data_process"><code class="xref c c-func docutils literal notranslate"><span class="pre">location_agps_data_process()</span></code></a> or the <a class="reference internal" href="#c.location_pgps_data_process" title="location_pgps_data_process"><code class="xref c c-func docutils literal notranslate"><span class="pre">location_pgps_data_process()</span></code></a> function to feed it into the library.</p></li>
<li><p><code class="xref kconfig kconfig-option docutils literal notranslate"><span class="pre">CONFIG_NRF_CLOUD_AGPS</span></code> - Enables A-GPS data retrieval from <a class="reference external" href="https://nrfcloud.com/">nRF Cloud</a>.</p></li>
<li><p><code class="xref kconfig kconfig-option docutils literal notranslate"><span class="pre">CONFIG_NRF_CLOUD_PGPS</span></code> - Enables P-GPS data retrieval from <a class="reference external" href="https://nrfcloud.com/">nRF Cloud</a>.</p></li>
<li><p><code class="xref kconfig kconfig-option docutils literal notranslate"><span class="pre">CONFIG_NRF_CLOUD_AGPS_FILTERED</span></code> - Reduces assistance size by only downloading ephemerides for visible satellites.
See <a class="reference internal" href="../networking/nrf_cloud_agps.html#agps-filtered-ephemerides"><span class="std std-ref">Optimizing cloud data downloads</span></a> for more details.</p></li>
</ul>
<p>The following option is useful when setting <code class="xref kconfig kconfig-option docutils literal notranslate"><span class="pre">CONFIG_NRF_CLOUD_AGPS_FILTERED</span></code>:</p>
<ul class="simple">
<li><p><code class="xref kconfig kconfig-option docutils literal notranslate"><span class="pre">CONFIG_NRF_CLOUD_AGPS_ELEVATION_MASK</span></code> - Sets elevation threshold angle.</p></li>
</ul>
<p>The following options control the transport method used with <a class="reference external" href="https://nrfcloud.com/">nRF Cloud</a>:</p>
<ul class="simple">
<li><p><code class="xref kconfig kconfig-option docutils literal notranslate"><span class="pre">CONFIG_NRF_CLOUD_REST</span></code> - Uses REST APIs to communicate with <a class="reference external" href="https://nrfcloud.com/">nRF Cloud</a> if <code class="xref kconfig kconfig-option docutils literal notranslate"><span class="pre">CONFIG_NRF_CLOUD_MQTT</span></code> is not set.</p></li>
<li><p><code class="xref kconfig kconfig-option docutils literal notranslate"><span class="pre">CONFIG_NRF_CLOUD_MQTT</span></code> - Uses MQTT transport to communicate with <a class="reference external" href="https://nrfcloud.com/">nRF Cloud</a>.</p></li>
</ul>
<p>Both cellular and Wi-Fi location services are handled externally by the application or selected using the runtime configuration, in which case you must first configure the available services.
Use at least one of the following sets of options:</p>
<ul class="simple">
<li><p><code class="xref kconfig kconfig-option docutils literal notranslate"><span class="pre">CONFIG_LOCATION_SERVICE_EXTERNAL</span></code></p></li>
<li><p><code class="xref kconfig kconfig-option docutils literal notranslate"><span class="pre">CONFIG_LOCATION_SERVICE_NRF_CLOUD</span></code></p></li>
<li><p><code class="xref kconfig kconfig-option docutils literal notranslate"><span class="pre">CONFIG_LOCATION_SERVICE_HERE</span></code> and <code class="xref kconfig kconfig-option docutils literal notranslate"><span class="pre">CONFIG_LOCATION_SERVICE_HERE_API_KEY</span></code></p></li>
</ul>
<p>The following options are related to the HERE service and can usually have the default values:</p>
<ul class="simple">
<li><p><code class="xref kconfig kconfig-option docutils literal notranslate"><span class="pre">CONFIG_LOCATION_SERVICE_HERE_HOSTNAME</span></code></p></li>
<li><p><code class="xref kconfig kconfig-option docutils literal notranslate"><span class="pre">CONFIG_LOCATION_SERVICE_HERE_TLS_SEC_TAG</span></code></p></li>
</ul>
<p>The following options control the default location request configurations and are applied
when <a class="reference internal" href="#c.location_config_defaults_set" title="location_config_defaults_set"><code class="xref c c-func docutils literal notranslate"><span class="pre">location_config_defaults_set()</span></code></a> function is called:</p>
<ul class="simple">
<li><p><code class="xref kconfig kconfig-option docutils literal notranslate"><span class="pre">CONFIG_LOCATION_REQUEST_DEFAULT_METHOD_FIRST</span></code> - Choice symbol for first priority location method.</p></li>
<li><p><code class="xref kconfig kconfig-option docutils literal notranslate"><span class="pre">CONFIG_LOCATION_REQUEST_DEFAULT_METHOD_SECOND</span></code> - Choice symbol for second priority location method.</p></li>
<li><p><code class="xref kconfig kconfig-option docutils literal notranslate"><span class="pre">CONFIG_LOCATION_REQUEST_DEFAULT_METHOD_THIRD</span></code> - Choice symbol for third priority location method.</p></li>
<li><p><code class="xref kconfig kconfig-option docutils literal notranslate"><span class="pre">CONFIG_LOCATION_REQUEST_DEFAULT_INTERVAL</span></code></p></li>
<li><p><code class="xref kconfig kconfig-option docutils literal notranslate"><span class="pre">CONFIG_LOCATION_REQUEST_DEFAULT_TIMEOUT</span></code></p></li>
<li><p><code class="xref kconfig kconfig-option docutils literal notranslate"><span class="pre">CONFIG_LOCATION_REQUEST_DEFAULT_GNSS_TIMEOUT</span></code></p></li>
<li><p><code class="xref kconfig kconfig-option docutils literal notranslate"><span class="pre">CONFIG_LOCATION_REQUEST_DEFAULT_GNSS_ACCURACY</span></code></p></li>
<li><p><code class="xref kconfig kconfig-option docutils literal notranslate"><span class="pre">CONFIG_LOCATION_REQUEST_DEFAULT_GNSS_NUM_CONSECUTIVE_FIXES</span></code></p></li>
<li><p><code class="xref kconfig kconfig-option docutils literal notranslate"><span class="pre">CONFIG_LOCATION_REQUEST_DEFAULT_GNSS_VISIBILITY_DETECTION</span></code></p></li>
<li><p><code class="xref kconfig kconfig-option docutils literal notranslate"><span class="pre">CONFIG_LOCATION_REQUEST_DEFAULT_GNSS_PRIORITY_MODE</span></code></p></li>
<li><p><code class="xref kconfig kconfig-option docutils literal notranslate"><span class="pre">CONFIG_LOCATION_REQUEST_DEFAULT_CELLULAR_TIMEOUT</span></code></p></li>
<li><p><code class="xref kconfig kconfig-option docutils literal notranslate"><span class="pre">CONFIG_LOCATION_REQUEST_DEFAULT_WIFI_TIMEOUT</span></code></p></li>
</ul>
</section>
<section id="usage">
<h2><a class="toc-backref" href="#id15">Usage</a><a class="headerlink" href="#usage" title="Permalink to this heading"></a></h2>
<p>To use the Location library, perform the following steps:</p>
<ol class="arabic simple">
<li><p>Initialize the library with the <a class="reference internal" href="#c.location_init" title="location_init"><code class="xref c c-func docutils literal notranslate"><span class="pre">location_init()</span></code></a> function.</p></li>
<li><p>Create the configuration (<a class="reference internal" href="#c.location_config" title="location_config"><code class="xref c c-struct docutils literal notranslate"><span class="pre">location_config</span></code></a> structure).</p></li>
<li><p>Set the default values by passing the configuration to the <a class="reference internal" href="#c.location_config_defaults_set" title="location_config_defaults_set"><code class="xref c c-func docutils literal notranslate"><span class="pre">location_config_defaults_set()</span></code></a> function together with the list of method types.</p></li>
<li><p>Set any required non-default values to the structures.</p></li>
<li><p>Call the <a class="reference internal" href="#c.location_request" title="location_request"><code class="xref c c-func docutils literal notranslate"><span class="pre">location_request()</span></code></a> function with the configuration.</p></li>
</ol>
<p>You can use the <a class="reference internal" href="#c.location_request" title="location_request"><code class="xref c c-func docutils literal notranslate"><span class="pre">location_request()</span></code></a> function in different ways, as in the following examples.</p>
<p>Use default values for location configuration:</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="kt">int</span><span class="w"> </span><span class="n">err</span><span class="p">;</span>

<span class="n">err</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">location_request</span><span class="p">(</span><span class="nb">NULL</span><span class="p">);</span>
</pre></div>
</div>
<p>Use GNSS and cellular and set custom timeout values for them:</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="kt">int</span><span class="w"> </span><span class="n">err</span><span class="p">;</span>
<span class="k">struct</span><span class="w"> </span><span class="nc">location_config</span><span class="w"> </span><span class="n">config</span><span class="p">;</span>
<span class="k">enum</span><span class="w"> </span><span class="n">location_method</span><span class="w"> </span><span class="n">methods</span><span class="p">[]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="n">LOCATION_METHOD_GNSS</span><span class="p">,</span><span class="w"> </span><span class="n">LOCATION_METHOD_CELLULAR</span><span class="p">};</span>

<span class="n">location_config_defaults_set</span><span class="p">(</span><span class="o">&amp;</span><span class="n">config</span><span class="p">,</span><span class="w"> </span><span class="n">ARRAY_SIZE</span><span class="p">(</span><span class="n">methods</span><span class="p">),</span><span class="w"> </span><span class="n">methods</span><span class="p">);</span>

<span class="cm">/* Now you have default values set and here you can modify the parameters you want */</span>
<span class="n">config</span><span class="p">.</span><span class="n">timeout</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">180</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="n">MSEC_PER_SEC</span><span class="p">;</span>
<span class="n">config</span><span class="p">.</span><span class="n">methods</span><span class="p">[</span><span class="mi">0</span><span class="p">].</span><span class="n">gnss</span><span class="p">.</span><span class="n">timeout</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">90</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="n">MSEC_PER_SEC</span><span class="p">;</span>
<span class="n">config</span><span class="p">.</span><span class="n">methods</span><span class="p">[</span><span class="mi">1</span><span class="p">].</span><span class="n">cellular</span><span class="p">.</span><span class="n">timeout</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">15</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="n">MSEC_PER_SEC</span><span class="p">;</span>

<span class="n">err</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">location_request</span><span class="p">(</span><span class="o">&amp;</span><span class="n">config</span><span class="p">);</span>
</pre></div>
</div>
<p>Use method priority list defined by Kconfig options and set custom timeout values for entire <a class="reference internal" href="#c.location_request" title="location_request"><code class="xref c c-func docutils literal notranslate"><span class="pre">location_request()</span></code></a> operation and cellular positioning:</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="kt">int</span><span class="w"> </span><span class="n">err</span><span class="p">;</span>
<span class="k">struct</span><span class="w"> </span><span class="nc">location_config</span><span class="w"> </span><span class="n">config</span><span class="p">;</span>

<span class="n">location_config_defaults_set</span><span class="p">(</span><span class="o">&amp;</span><span class="n">config</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="nb">NULL</span><span class="p">);</span>

<span class="cm">/* Now you have default values set and you can modify the parameters you want but you</span>
<span class="cm"> * need to iterate through the method list as the order is defined by Kconfig options.</span>
<span class="cm"> */</span>
<span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="n">config</span><span class="p">.</span><span class="n">methods_count</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="o">++</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">config</span><span class="p">.</span><span class="n">methods</span><span class="p">[</span><span class="n">i</span><span class="p">].</span><span class="n">method</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="n">LOCATION_METHOD_GNSS</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">config</span><span class="p">.</span><span class="n">methods</span><span class="p">[</span><span class="n">i</span><span class="p">].</span><span class="n">cellular</span><span class="p">.</span><span class="n">timeout</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">15</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="n">MSEC_PER_SEC</span><span class="p">;</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>

<span class="n">err</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">location_request</span><span class="p">(</span><span class="o">&amp;</span><span class="n">config</span><span class="p">);</span>
</pre></div>
</div>
</section>
<section id="samples-using-the-library">
<h2><a class="toc-backref" href="#id16">Samples using the library</a><a class="headerlink" href="#samples-using-the-library" title="Permalink to this heading"></a></h2>
<p>The following nRF Connect SDK applications and samples use this library:</p>
<ul class="simple">
<li><p><a class="reference internal" href="../../applications/asset_tracker_v2/README.html#asset-tracker-v2"><span class="std std-ref">nRF9160: Asset Tracker v2</span></a></p></li>
<li><p><a class="reference internal" href="../../samples/nrf9160/location/README.html#location-sample"><span class="std std-ref">nRF9160: Location</span></a></p></li>
<li><p><a class="reference internal" href="../../samples/nrf9160/modem_shell/README.html#modem-shell-application"><span class="std std-ref">nRF9160: Modem Shell</span></a></p></li>
<li><p><a class="reference internal" href="../../samples/nrf9160/nrf_cloud_mqtt_multi_service/README.html#nrf-cloud-mqtt-multi-service"><span class="std std-ref">nRF9160: nRF Cloud MQTT multi-service</span></a></p></li>
</ul>
</section>
<section id="limitations">
<h2><a class="toc-backref" href="#id17">Limitations</a><a class="headerlink" href="#limitations" title="Permalink to this heading"></a></h2>
<ul class="simple">
<li><p>The Location library can only have one application registered at a time. If there is already an application handler registered, another initialization will override the existing handler.</p></li>
<li><p>Cellular neighbor information used for cellular positioning is more accurate on modem firmware (MFW) 1.3.0 compared to earlier MFW releases that do not have an API for scanning the neighboring cells.
For MFW releases older than 1.3.0, only serving cell information is provided and it can be hours or days old, or even older, depending on the modem sleep states.</p></li>
</ul>
</section>
<section id="dependencies">
<h2><a class="toc-backref" href="#id18">Dependencies</a><a class="headerlink" href="#dependencies" title="Permalink to this heading"></a></h2>
<p>This library uses the following nRF Connect SDK libraries:</p>
<ul class="simple">
<li><p><a class="reference internal" href="nrf_modem_lib.html#nrf-modem-lib-readme"><span class="std std-ref">Modem library integration layer</span></a></p></li>
<li><p><a class="reference internal" href="lte_lc.html#lte-lc-readme"><span class="std std-ref">LTE link controller</span></a></p></li>
<li><p><a class="reference internal" href="../networking/rest_client.html#lib-rest-client"><span class="std std-ref">REST client</span></a></p></li>
<li><p><a class="reference internal" href="../networking/nrf_cloud.html#lib-nrf-cloud"><span class="std std-ref">nRF Cloud</span></a></p></li>
<li><p><a class="reference internal" href="../networking/nrf_cloud_agps.html#lib-nrf-cloud-agps"><span class="std std-ref">nRF Cloud A-GPS</span></a></p></li>
<li><p><a class="reference internal" href="../networking/nrf_cloud_pgps.html#lib-nrf-cloud-pgps"><span class="std std-ref">nRF Cloud P-GPS</span></a></p></li>
<li><p><a class="reference internal" href="../networking/nrf_cloud_rest.html#lib-nrf-cloud-rest"><span class="std std-ref">nRF Cloud REST</span></a></p></li>
<li><p><a class="reference internal" href="modem_jwt.html#lib-modem-jwt"><span class="std std-ref">Modem JWT</span></a></p></li>
</ul>
<p>It uses the following <a class="reference external" href="https://github.com/nrfconnect/sdk-nrfxlib">sdk-nrfxlib</a> library:</p>
<ul class="simple">
<li><p><span class="xref std std-ref">nrfxlib:gnss_interface</span></p></li>
</ul>
<p>It uses the following Zephyr libraries:</p>
<ul class="simple">
<li><p><span class="xref std std-ref">zephyr:net_mgmt_interface</span></p></li>
<li><p><span class="xref std std-ref">zephyr:net_if_interface</span></p></li>
</ul>
</section>
<section id="api-documentation">
<h2><a class="toc-backref" href="#id19">API documentation</a><a class="headerlink" href="#api-documentation" title="Permalink to this heading"></a></h2>
<div class="line-block">
<div class="line">Header file: <code class="file docutils literal notranslate"><span class="pre">include/modem/location.h</span></code></div>
<div class="line">Source files: <code class="file docutils literal notranslate"><span class="pre">lib/location</span></code></div>
</div>
<dl>
<dt class="sig sig-object cpp">
<span class="target" id="group__location"></span><em><span class="pre">group</span></em> <span class="sig-name descname"><span class="pre">location</span></span></dt>
<dd><div class="breathe-sectiondef docutils container">
<p class="breathe-sectiondef-title rubric" id="breathe-section-title-typedefs">Typedefs</p>
<dl class="c type">
<dt class="sig sig-object c" id="c.location_event_handler_t">
<span class="target" id="group__location_1gab537a6011cb1d01b5aaf30c770b2dfb9"></span><span class="k"><span class="pre">typedef</span></span><span class="w"> </span><span class="kt"><span class="pre">void</span></span><span class="w"> </span><span class="p"><span class="pre">(</span></span><span class="p"><span class="pre">*</span></span><span class="sig-name descname"><span class="n"><span class="pre">location_event_handler_t</span></span></span><span class="p"><span class="pre">)</span></span><span class="p"><span class="pre">(</span></span><span class="k"><span class="pre">const</span></span><span class="w"> </span><span class="k"><span class="pre">struct</span></span><span class="w"> </span><a class="reference internal" href="#c.location_event_data" title="location_event_data"><span class="n"><span class="pre">location_event_data</span></span></a><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">event_data</span></span><span class="p"><span class="pre">)</span></span><a class="headerlink" href="#c.location_event_handler_t" title="Permalink to this definition"></a><br /></dt>
<dd><p>Event handler prototype. </p>
<dl class="field-list simple">
<dt class="field-odd">Param event_data</dt>
<dd class="field-odd"><p><strong>[in]</strong> Event data. </p>
</dd>
</dl>
</dd></dl>

</div>
<div class="breathe-sectiondef docutils container">
<p class="breathe-sectiondef-title rubric" id="breathe-section-title-enums">Enums</p>
<dl class="c enum">
<dt class="sig sig-object c" id="c.location_method">
<span class="target" id="group__location_1gaf90edf6d88c090d3e8276ce08903aa23"></span><span class="k"><span class="pre">enum</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">location_method</span></span></span><a class="headerlink" href="#c.location_method" title="Permalink to this definition"></a><br /></dt>
<dd><p>Location method. </p>
<p><em>Values:</em></p>
<dl class="c enumerator">
<dt class="sig sig-object c" id="c.location_method.LOCATION_METHOD_CELLULAR">
<span class="target" id="group__location_1ggaf90edf6d88c090d3e8276ce08903aa23a053f7548cda4066dc441b505e7519e38"></span><span class="k"><span class="pre">enumerator</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">LOCATION_METHOD_CELLULAR</span></span></span><a class="headerlink" href="#c.location_method.LOCATION_METHOD_CELLULAR" title="Permalink to this definition"></a><br /></dt>
<dd><p>LTE cellular positioning. </p>
</dd></dl>

<dl class="c enumerator">
<dt class="sig sig-object c" id="c.location_method.LOCATION_METHOD_GNSS">
<span class="target" id="group__location_1ggaf90edf6d88c090d3e8276ce08903aa23ad1acb2a85e993474589e59a3cc7f8385"></span><span class="k"><span class="pre">enumerator</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">LOCATION_METHOD_GNSS</span></span></span><a class="headerlink" href="#c.location_method.LOCATION_METHOD_GNSS" title="Permalink to this definition"></a><br /></dt>
<dd><p>Global Navigation Satellite System (GNSS). </p>
</dd></dl>

<dl class="c enumerator">
<dt class="sig sig-object c" id="c.location_method.LOCATION_METHOD_WIFI">
<span class="target" id="group__location_1ggaf90edf6d88c090d3e8276ce08903aa23aab98ee76ddf33adef6e1b48e69ff9e8f"></span><span class="k"><span class="pre">enumerator</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">LOCATION_METHOD_WIFI</span></span></span><a class="headerlink" href="#c.location_method.LOCATION_METHOD_WIFI" title="Permalink to this definition"></a><br /></dt>
<dd><p>Wi-Fi positioning. </p>
</dd></dl>

</dd></dl>

<dl class="c enum">
<dt class="sig sig-object c" id="c.location_req_mode">
<span class="target" id="group__location_1ga70bedfb0f220f3b571e8e2dfbcf87b28"></span><span class="k"><span class="pre">enum</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">location_req_mode</span></span></span><a class="headerlink" href="#c.location_req_mode" title="Permalink to this definition"></a><br /></dt>
<dd><p>Location acquisition mode. </p>
<p><em>Values:</em></p>
<dl class="c enumerator">
<dt class="sig sig-object c" id="c.location_req_mode.LOCATION_REQ_MODE_FALLBACK">
<span class="target" id="group__location_1gga70bedfb0f220f3b571e8e2dfbcf87b28a06c4903d71241bf5fa8f1727d537c5a0"></span><span class="k"><span class="pre">enumerator</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">LOCATION_REQ_MODE_FALLBACK</span></span></span><a class="headerlink" href="#c.location_req_mode.LOCATION_REQ_MODE_FALLBACK" title="Permalink to this definition"></a><br /></dt>
<dd><p>Fallback to next preferred method (default). </p>
</dd></dl>

<dl class="c enumerator">
<dt class="sig sig-object c" id="c.location_req_mode.LOCATION_REQ_MODE_ALL">
<span class="target" id="group__location_1gga70bedfb0f220f3b571e8e2dfbcf87b28aa946dace9de4df4b0bbe79c261e08096"></span><span class="k"><span class="pre">enumerator</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">LOCATION_REQ_MODE_ALL</span></span></span><a class="headerlink" href="#c.location_req_mode.LOCATION_REQ_MODE_ALL" title="Permalink to this definition"></a><br /></dt>
<dd><p>All requested methods are used sequentially. </p>
</dd></dl>

</dd></dl>

<dl class="c enum">
<dt class="sig sig-object c" id="c.location_event_id">
<span class="target" id="group__location_1gaf80a37a2073df0cebf87479799e2e9b2"></span><span class="k"><span class="pre">enum</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">location_event_id</span></span></span><a class="headerlink" href="#c.location_event_id" title="Permalink to this definition"></a><br /></dt>
<dd><p>Event IDs. </p>
<p><em>Values:</em></p>
<dl class="c enumerator">
<dt class="sig sig-object c" id="c.location_event_id.LOCATION_EVT_LOCATION">
<span class="target" id="group__location_1ggaf80a37a2073df0cebf87479799e2e9b2a9965b6c4b604a2e8692a7b2ef03b20bb"></span><span class="k"><span class="pre">enumerator</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">LOCATION_EVT_LOCATION</span></span></span><a class="headerlink" href="#c.location_event_id.LOCATION_EVT_LOCATION" title="Permalink to this definition"></a><br /></dt>
<dd><p>Location update. </p>
</dd></dl>

<dl class="c enumerator">
<dt class="sig sig-object c" id="c.location_event_id.LOCATION_EVT_TIMEOUT">
<span class="target" id="group__location_1ggaf80a37a2073df0cebf87479799e2e9b2aed7f3594fb89a73d73b92de3c2320510"></span><span class="k"><span class="pre">enumerator</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">LOCATION_EVT_TIMEOUT</span></span></span><a class="headerlink" href="#c.location_event_id.LOCATION_EVT_TIMEOUT" title="Permalink to this definition"></a><br /></dt>
<dd><p>Getting location timed out. </p>
</dd></dl>

<dl class="c enumerator">
<dt class="sig sig-object c" id="c.location_event_id.LOCATION_EVT_ERROR">
<span class="target" id="group__location_1ggaf80a37a2073df0cebf87479799e2e9b2a7afe51200524d1b6fbd9d51f8deaf9d9"></span><span class="k"><span class="pre">enumerator</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">LOCATION_EVT_ERROR</span></span></span><a class="headerlink" href="#c.location_event_id.LOCATION_EVT_ERROR" title="Permalink to this definition"></a><br /></dt>
<dd><p>An error occurred when trying to get the location. </p>
</dd></dl>

<dl class="c enumerator">
<dt class="sig sig-object c" id="c.location_event_id.LOCATION_EVT_RESULT_UNKNOWN">
<span class="target" id="group__location_1ggaf80a37a2073df0cebf87479799e2e9b2a5dccb1a3d32a48767f235538ebe6275e"></span><span class="k"><span class="pre">enumerator</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">LOCATION_EVT_RESULT_UNKNOWN</span></span></span><a class="headerlink" href="#c.location_event_id.LOCATION_EVT_RESULT_UNKNOWN" title="Permalink to this definition"></a><br /></dt>
<dd><p>Application has indicated that getting location has been completed, the result is not known, and the Location library does not need to care about it. This event can occur only if CONFIG_LOCATION_SERVICE_EXTERNAL is set. </p>
</dd></dl>

<dl class="c enumerator">
<dt class="sig sig-object c" id="c.location_event_id.LOCATION_EVT_GNSS_ASSISTANCE_REQUEST">
<span class="target" id="group__location_1ggaf80a37a2073df0cebf87479799e2e9b2a68f849167bb110099b8e7dd024486c35"></span><span class="k"><span class="pre">enumerator</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">LOCATION_EVT_GNSS_ASSISTANCE_REQUEST</span></span></span><a class="headerlink" href="#c.location_event_id.LOCATION_EVT_GNSS_ASSISTANCE_REQUEST" title="Permalink to this definition"></a><br /></dt>
<dd><p>GNSS is requesting A-GPS data. Application should obtain the data and send it to <a class="reference internal" href="#group__location_1ga7541c07045e27a3fd556c6064c3059a9"><span class="std std-ref">location_agps_data_process()</span></a>. </p>
</dd></dl>

<dl class="c enumerator">
<dt class="sig sig-object c" id="c.location_event_id.LOCATION_EVT_GNSS_PREDICTION_REQUEST">
<span class="target" id="group__location_1ggaf80a37a2073df0cebf87479799e2e9b2ab64ba1974e36a88251edb7f62cc25d74"></span><span class="k"><span class="pre">enumerator</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">LOCATION_EVT_GNSS_PREDICTION_REQUEST</span></span></span><a class="headerlink" href="#c.location_event_id.LOCATION_EVT_GNSS_PREDICTION_REQUEST" title="Permalink to this definition"></a><br /></dt>
<dd><p>GNSS is requesting P-GPS data. Application should obtain the data and send it to <a class="reference internal" href="#group__location_1ga27a1392c923437017e1710e6887e1cbd"><span class="std std-ref">location_pgps_data_process()</span></a>. </p>
</dd></dl>

<dl class="c enumerator">
<dt class="sig sig-object c" id="c.location_event_id.LOCATION_EVT_CLOUD_LOCATION_EXT_REQUEST">
<span class="target" id="group__location_1ggaf80a37a2073df0cebf87479799e2e9b2ac6844d3fcb7190329f78db980714b1d0"></span><span class="k"><span class="pre">enumerator</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">LOCATION_EVT_CLOUD_LOCATION_EXT_REQUEST</span></span></span><a class="headerlink" href="#c.location_event_id.LOCATION_EVT_CLOUD_LOCATION_EXT_REQUEST" title="Permalink to this definition"></a><br /></dt>
<dd><p>Cloud location request with neighbor cell and/or Wi-Fi access point information is available. The application should send the information to cloud services and then call <a class="reference internal" href="#group__location_1ga11361c1491a080f94cef0b6a44614feb"><span class="std std-ref">location_cloud_location_ext_result_set()</span></a>. </p>
</dd></dl>

</dd></dl>

<dl class="c enum">
<dt class="sig sig-object c" id="c.location_ext_result">
<span class="target" id="group__location_1ga622c9012a8a5aafb7015e90c6c3a1920"></span><span class="k"><span class="pre">enum</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">location_ext_result</span></span></span><a class="headerlink" href="#c.location_ext_result" title="Permalink to this definition"></a><br /></dt>
<dd><p>Result of the external request. </p>
<p><em>Values:</em></p>
<dl class="c enumerator">
<dt class="sig sig-object c" id="c.location_ext_result.LOCATION_EXT_RESULT_SUCCESS">
<span class="target" id="group__location_1gga622c9012a8a5aafb7015e90c6c3a1920a07d07af42b2771dfd0de5e4660773dce"></span><span class="k"><span class="pre">enumerator</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">LOCATION_EXT_RESULT_SUCCESS</span></span></span><a class="headerlink" href="#c.location_ext_result.LOCATION_EXT_RESULT_SUCCESS" title="Permalink to this definition"></a><br /></dt>
<dd></dd></dl>

<dl class="c enumerator">
<dt class="sig sig-object c" id="c.location_ext_result.LOCATION_EXT_RESULT_UNKNOWN">
<span class="target" id="group__location_1gga622c9012a8a5aafb7015e90c6c3a1920a81fbea7e762db5ce44005b57f69ee3bf"></span><span class="k"><span class="pre">enumerator</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">LOCATION_EXT_RESULT_UNKNOWN</span></span></span><a class="headerlink" href="#c.location_ext_result.LOCATION_EXT_RESULT_UNKNOWN" title="Permalink to this definition"></a><br /></dt>
<dd></dd></dl>

<dl class="c enumerator">
<dt class="sig sig-object c" id="c.location_ext_result.LOCATION_EXT_RESULT_ERROR">
<span class="target" id="group__location_1gga622c9012a8a5aafb7015e90c6c3a1920abe357f9948b6f23f564c6d3715284304"></span><span class="k"><span class="pre">enumerator</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">LOCATION_EXT_RESULT_ERROR</span></span></span><a class="headerlink" href="#c.location_ext_result.LOCATION_EXT_RESULT_ERROR" title="Permalink to this definition"></a><br /></dt>
<dd></dd></dl>

</dd></dl>

<dl class="c enum">
<dt class="sig sig-object c" id="c.location_accuracy">
<span class="target" id="group__location_1gaedb56e1b41aaf462ff8f1382a82ee498"></span><span class="k"><span class="pre">enum</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">location_accuracy</span></span></span><a class="headerlink" href="#c.location_accuracy" title="Permalink to this definition"></a><br /></dt>
<dd><p>Location accuracy. </p>
<p><em>Values:</em></p>
<dl class="c enumerator">
<dt class="sig sig-object c" id="c.location_accuracy.LOCATION_ACCURACY_LOW">
<span class="target" id="group__location_1ggaedb56e1b41aaf462ff8f1382a82ee498a021f82f21d726b60fe502b89c6a0b8e1"></span><span class="k"><span class="pre">enumerator</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">LOCATION_ACCURACY_LOW</span></span></span><a class="headerlink" href="#c.location_accuracy.LOCATION_ACCURACY_LOW" title="Permalink to this definition"></a><br /></dt>
<dd><p>Allow lower accuracy to conserve power. </p>
</dd></dl>

<dl class="c enumerator">
<dt class="sig sig-object c" id="c.location_accuracy.LOCATION_ACCURACY_NORMAL">
<span class="target" id="group__location_1ggaedb56e1b41aaf462ff8f1382a82ee498adb68f95b909cc74390e4971e07a5d8f2"></span><span class="k"><span class="pre">enumerator</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">LOCATION_ACCURACY_NORMAL</span></span></span><a class="headerlink" href="#c.location_accuracy.LOCATION_ACCURACY_NORMAL" title="Permalink to this definition"></a><br /></dt>
<dd><p>Normal accuracy. </p>
</dd></dl>

<dl class="c enumerator">
<dt class="sig sig-object c" id="c.location_accuracy.LOCATION_ACCURACY_HIGH">
<span class="target" id="group__location_1ggaedb56e1b41aaf462ff8f1382a82ee498adc887fdbbc2bce92339df33ef9848454"></span><span class="k"><span class="pre">enumerator</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">LOCATION_ACCURACY_HIGH</span></span></span><a class="headerlink" href="#c.location_accuracy.LOCATION_ACCURACY_HIGH" title="Permalink to this definition"></a><br /></dt>
<dd><p>Try to improve accuracy. Increases power consumption. </p>
</dd></dl>

</dd></dl>

<dl class="c enum">
<dt class="sig sig-object c" id="c.location_service">
<span class="target" id="group__location_1ga065818dd61883219339120739cf46c7d"></span><span class="k"><span class="pre">enum</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">location_service</span></span></span><a class="headerlink" href="#c.location_service" title="Permalink to this definition"></a><br /></dt>
<dd><p>Location service. </p>
<p><em>Values:</em></p>
<dl class="c enumerator">
<dt class="sig sig-object c" id="c.location_service.LOCATION_SERVICE_ANY">
<span class="target" id="group__location_1gga065818dd61883219339120739cf46c7da7a9f6b274dd868e2207018caead4abdb"></span><span class="k"><span class="pre">enumerator</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">LOCATION_SERVICE_ANY</span></span></span><a class="headerlink" href="#c.location_service.LOCATION_SERVICE_ANY" title="Permalink to this definition"></a><br /></dt>
<dd><p>Use any location service that has been configured to be available. This is useful when only one service is configured but can also be used even if several services are available. </p>
</dd></dl>

<dl class="c enumerator">
<dt class="sig sig-object c" id="c.location_service.LOCATION_SERVICE_NRF_CLOUD">
<span class="target" id="group__location_1gga065818dd61883219339120739cf46c7da531179b7dfe592985920bc42f536f24a"></span><span class="k"><span class="pre">enumerator</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">LOCATION_SERVICE_NRF_CLOUD</span></span></span><a class="headerlink" href="#c.location_service.LOCATION_SERVICE_NRF_CLOUD" title="Permalink to this definition"></a><br /></dt>
<dd><p>nRF Cloud location service. </p>
</dd></dl>

<dl class="c enumerator">
<dt class="sig sig-object c" id="c.location_service.LOCATION_SERVICE_HERE">
<span class="target" id="group__location_1gga065818dd61883219339120739cf46c7dadbc3fe150a93c16f35f9ebd27f4d80dd"></span><span class="k"><span class="pre">enumerator</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">LOCATION_SERVICE_HERE</span></span></span><a class="headerlink" href="#c.location_service.LOCATION_SERVICE_HERE" title="Permalink to this definition"></a><br /></dt>
<dd><p>HERE location service. </p>
</dd></dl>

</dd></dl>

</div>
<div class="breathe-sectiondef docutils container">
<p class="breathe-sectiondef-title rubric" id="breathe-section-title-functions">Functions</p>
<dl class="c function">
<dt class="sig sig-object c" id="c.location_init">
<span class="target" id="group__location_1gaf2694b8546f0ca5ba8fe8d5a8fcc5ffa"></span><span class="kt"><span class="pre">int</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">location_init</span></span></span><span class="sig-paren">(</span><a class="reference internal" href="#c.location_event_handler_t" title="location_event_handler_t"><span class="n"><span class="pre">location_event_handler_t</span></span></a><span class="w"> </span><span class="n"><span class="pre">event_handler</span></span><span class="sig-paren">)</span><a class="headerlink" href="#c.location_init" title="Permalink to this definition"></a><br /></dt>
<dd><p>Initializes the library. </p>
<p>Initializes the library and sets the event handler function. The first call to this function must be called before going to LTE normal mode. This can be called multiple times, which sets the event handler again.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>event_handler</strong> – <strong>[in]</strong> Event handler function.</p></li>
</ul>
</dd>
<dt class="field-even">Return values</dt>
<dd class="field-even"><ul class="simple">
<li><p><strong>-EINVAL</strong> – Given event_handler is NULL. </p></li>
<li><p><strong>-EFAULT</strong> – Failed to obtain Wi-Fi interface. </p></li>
</ul>
</dd>
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>0 on success, or negative error code on failure. </p>
</dd>
</dl>
</dd></dl>

<dl class="c function">
<dt class="sig sig-object c" id="c.location_request">
<span class="target" id="group__location_1gad240207e5dec3509c1e07db80e15953f"></span><span class="kt"><span class="pre">int</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">location_request</span></span></span><span class="sig-paren">(</span><span class="k"><span class="pre">const</span></span><span class="w"> </span><span class="k"><span class="pre">struct</span></span><span class="w"> </span><a class="reference internal" href="#c.location_config" title="location_config"><span class="n"><span class="pre">location_config</span></span></a><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">config</span></span><span class="sig-paren">)</span><a class="headerlink" href="#c.location_request" title="Permalink to this definition"></a><br /></dt>
<dd><p>Requests the current position or starts periodic position updates. </p>
<p>Requests the current position using the given configuration. Depending on the configuration, a single position or periodic position updates are given. If the position request is successful, the results are delivered to the event handler function in LOCATION_EVT_LOCATION event. Otherwise LOCATION_EVT_TIMEOUT or LOCATION_EVT_ERROR event is triggered.</p>
<p>In periodic mode, position update is always attempted after the configured interval regardless of the outcome of any previous attempt. Periodic position updates can be stopped by calling location_cancel().</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>config</strong> – <strong>[in]</strong> Used configuration or NULL to get a single position update with the default configuration. Default configuration has the following location methods in priority order (if they are enabled in library configuration): GNSS, Wi-Fi and Cellular.</p></li>
</ul>
</dd>
<dt class="field-even">Return values</dt>
<dd class="field-even"><ul class="simple">
<li><p><strong>-EPERM</strong> – Library not initialized. </p></li>
<li><p><strong>-EBUSY</strong> – Previous location request still ongoing. </p></li>
<li><p><strong>-EINVAL</strong> – Invalid configuration given. </p></li>
</ul>
</dd>
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>0 on success, or negative error code on failure. </p>
</dd>
</dl>
</dd></dl>

<dl class="c function">
<dt class="sig sig-object c" id="c.location_request_cancel">
<span class="target" id="group__location_1ga7ccc76b7895707d67b64fa516c029c4f"></span><span class="kt"><span class="pre">int</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">location_request_cancel</span></span></span><span class="sig-paren">(</span><span class="kt"><span class="pre">void</span></span><span class="sig-paren">)</span><a class="headerlink" href="#c.location_request_cancel" title="Permalink to this definition"></a><br /></dt>
<dd><p>Cancels periodic position updates. </p>
<dl class="field-list simple">
<dt class="field-odd">Return values</dt>
<dd class="field-odd"><p><strong>-EPERM</strong> – Library not initialized. </p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>0 on success, or negative error code on failure. </p>
</dd>
</dl>
</dd></dl>

<dl class="c function">
<dt class="sig sig-object c" id="c.location_config_defaults_set">
<span class="target" id="group__location_1gaa2acf9a8fab52e2ee4b60c3677a016f8"></span><span class="kt"><span class="pre">void</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">location_config_defaults_set</span></span></span><span class="sig-paren">(</span><span class="k"><span class="pre">struct</span></span><span class="w"> </span><a class="reference internal" href="#c.location_config" title="location_config"><span class="n"><span class="pre">location_config</span></span></a><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">config</span></span>, <span class="n"><span class="pre">uint8_t</span></span><span class="w"> </span><span class="n"><span class="pre">methods_count</span></span>, <span class="k"><span class="pre">enum</span></span><span class="w"> </span><a class="reference internal" href="#c.location_method" title="location_method"><span class="n"><span class="pre">location_method</span></span></a><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">method_types</span></span><span class="sig-paren">)</span><a class="headerlink" href="#c.location_config_defaults_set" title="Permalink to this definition"></a><br /></dt>
<dd><p>Sets the default values to a given configuration. </p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>config</strong> – <strong>[inout]</strong> Configuration to be supplied with default values. </p></li>
<li><p><strong>methods_count</strong> – <strong>[in]</strong> Number of location methods. This must not exceed CONFIG_LOCATION_METHODS_LIST_SIZE. </p></li>
<li><p><strong>method_types</strong> – <strong>[in]</strong> List of location method types in priority order. Location methods with these types are initialized with default values into given configuration. List size must be as given in ‘methods_count’. </p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="c function">
<dt class="sig sig-object c" id="c.location_method_str">
<span class="target" id="group__location_1ga0f7a08af7858dbaf76e750334482a59d"></span><span class="k"><span class="pre">const</span></span><span class="w"> </span><span class="kt"><span class="pre">char</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="sig-name descname"><span class="n"><span class="pre">location_method_str</span></span></span><span class="sig-paren">(</span><span class="k"><span class="pre">enum</span></span><span class="w"> </span><a class="reference internal" href="#c.location_method" title="location_method"><span class="n"><span class="pre">location_method</span></span></a><span class="w"> </span><span class="n"><span class="pre">method</span></span><span class="sig-paren">)</span><a class="headerlink" href="#c.location_method_str" title="Permalink to this definition"></a><br /></dt>
<dd><p>Return location method as a string. </p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>method</strong> – <strong>[in]</strong> Location method.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Location method in string format. Returns “Unknown” if given method is not known. </p>
</dd>
</dl>
</dd></dl>

<dl class="c function">
<dt class="sig sig-object c" id="c.location_agps_data_process">
<span class="target" id="group__location_1ga7541c07045e27a3fd556c6064c3059a9"></span><span class="kt"><span class="pre">int</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">location_agps_data_process</span></span></span><span class="sig-paren">(</span><span class="k"><span class="pre">const</span></span><span class="w"> </span><span class="kt"><span class="pre">char</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">buf</span></span>, <span class="n"><span class="pre">size_t</span></span><span class="w"> </span><span class="n"><span class="pre">buf_len</span></span><span class="sig-paren">)</span><a class="headerlink" href="#c.location_agps_data_process" title="Permalink to this definition"></a><br /></dt>
<dd><p>Feed in A-GPS data to be processed by library. </p>
<p>If Location library is not receiving A-GPS assistance data directly from nRF Cloud, it triggers the LOCATION_EVT_GNSS_ASSISTANCE_REQUEST event when assistance is needed. Once application has obtained the assistance data it can be handed over to Location library using this function.</p>
<p>Note that the data must be formatted similarly to the nRF Cloud A-GPS data, see for example nrf_cloud_agps_schema_v1.h.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>buf</strong> – <strong>[in]</strong> Data received. </p></li>
<li><p><strong>buf_len</strong> – <strong>[in]</strong> Buffer size of data to be processed.</p></li>
</ul>
</dd>
<dt class="field-even">Return values</dt>
<dd class="field-even"><ul class="simple">
<li><p><strong>-EINVAL</strong> – Given buffer is NULL or buffer length zero. </p></li>
<li><p><strong>-ENOTSUP</strong> – CONFIG_LOCATION_GNSS_AGPS_EXTERNAL is not set. </p></li>
</ul>
</dd>
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>0 on success, or negative error code on failure. </p>
</dd>
</dl>
</dd></dl>

<dl class="c function">
<dt class="sig sig-object c" id="c.location_pgps_data_process">
<span class="target" id="group__location_1ga27a1392c923437017e1710e6887e1cbd"></span><span class="kt"><span class="pre">int</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">location_pgps_data_process</span></span></span><span class="sig-paren">(</span><span class="k"><span class="pre">const</span></span><span class="w"> </span><span class="kt"><span class="pre">char</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">buf</span></span>, <span class="n"><span class="pre">size_t</span></span><span class="w"> </span><span class="n"><span class="pre">buf_len</span></span><span class="sig-paren">)</span><a class="headerlink" href="#c.location_pgps_data_process" title="Permalink to this definition"></a><br /></dt>
<dd><p>Feed in P-GPS data to be processed by library. </p>
<p>If Location library is not receiving P-GPS assistance data directly from nRF Cloud, it triggers the LOCATION_EVT_GNSS_PREDICTION_REQUEST event when assistance is needed. Once application has obtained the assistance data it can be handed over to Location library using this function.</p>
<p>Note that the data must be formatted similarly to the nRF Cloud P-GPS data, see for example nrf_cloud_pgps_schema_v1.h.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>buf</strong> – <strong>[in]</strong> Data received. </p></li>
<li><p><strong>buf_len</strong> – <strong>[in]</strong> Buffer size of data to be processed.</p></li>
</ul>
</dd>
<dt class="field-even">Return values</dt>
<dd class="field-even"><ul class="simple">
<li><p><strong>-EINVAL</strong> – Given buffer is NULL or buffer length zero. </p></li>
<li><p><strong>-ENOTSUP</strong> – CONFIG_LOCATION_GNSS_PGPS_EXTERNAL is not set. </p></li>
</ul>
</dd>
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>0 on success, or negative error code on failure. </p>
</dd>
</dl>
</dd></dl>

<dl class="c function">
<dt class="sig sig-object c" id="c.location_cloud_location_ext_result_set">
<span class="target" id="group__location_1ga11361c1491a080f94cef0b6a44614feb"></span><span class="kt"><span class="pre">void</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">location_cloud_location_ext_result_set</span></span></span><span class="sig-paren">(</span><span class="k"><span class="pre">enum</span></span><span class="w"> </span><a class="reference internal" href="#c.location_ext_result" title="location_ext_result"><span class="n"><span class="pre">location_ext_result</span></span></a><span class="w"> </span><span class="n"><span class="pre">result</span></span>, <span class="k"><span class="pre">struct</span></span><span class="w"> </span><a class="reference internal" href="#c.location_data" title="location_data"><span class="n"><span class="pre">location_data</span></span></a><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">location</span></span><span class="sig-paren">)</span><a class="headerlink" href="#c.location_cloud_location_ext_result_set" title="Permalink to this definition"></a><br /></dt>
<dd><p>Pass cloud location result to the library. </p>
<p>If the Location library is not receiving cloud location directly from the services, it triggers the <a class="reference internal" href="#group__location_1ggaf80a37a2073df0cebf87479799e2e9b2ac6844d3fcb7190329f78db980714b1d0"><span class="std std-ref">LOCATION_EVT_CLOUD_LOCATION_EXT_REQUEST</span></a> event, that indicates the LTE neighbor cell and/or Wi-Fi access point information is ready to be sent to cloud services for location resolution. Then, the application responds with the result.</p>
<p>In addition to ‘success’ and ‘error’ results, the application can indicate that the result is unknown with <a class="reference internal" href="#group__location_1gga622c9012a8a5aafb7015e90c6c3a1920a81fbea7e762db5ce44005b57f69ee3bf"><span class="std std-ref">LOCATION_EXT_RESULT_UNKNOWN</span></a>. This is useful when the application wants the Location library to proceed irrespective of the outcome. The Location library will try to perform a fallback to the next method, if available, just like in a failure case. If there are no more methods, LOCATION_EVT_RESULT_UNKNOWN event will be sent to the application.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>result</strong> – <strong>[in]</strong> Result of the external cloud location request. </p></li>
<li><p><strong>location</strong> – <strong>[in]</strong> Cloud location data. Will be used only if <code class="docutils literal notranslate"><span class="pre">result</span></code> is LOCATION_EXT_RESULT_SUCCESS. </p></li>
</ul>
</dd>
</dl>
</dd></dl>

</div>
<dl class="c struct">
<dt class="sig sig-object c" id="c.location_datetime">
<span class="target" id="structlocation__datetime"></span><span class="k"><span class="pre">struct</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">location_datetime</span></span></span><a class="headerlink" href="#c.location_datetime" title="Permalink to this definition"></a><br /></dt>
<dd><div class="docutils container">
<em>#include &lt;location.h&gt;</em></div>
<p>Date and time (UTC). </p>
<div class="breathe-sectiondef docutils container">
<p class="breathe-sectiondef-title rubric" id="breathe-section-title-public-members">Public Members</p>
<dl class="c var">
<dt class="sig sig-object c" id="c.location_datetime.valid">
<span class="target" id="structlocation__datetime_1aa125d2ddf67f7bd0c8a99b92dbc50c84"></span><span class="kt"><span class="pre">bool</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">valid</span></span></span><a class="headerlink" href="#c.location_datetime.valid" title="Permalink to this definition"></a><br /></dt>
<dd><p>True if date and time are valid, false if not. </p>
</dd></dl>

<dl class="c var">
<dt class="sig sig-object c" id="c.location_datetime.year">
<span class="target" id="structlocation__datetime_1ad3c9beb7686511631aeddf2fc865bbf9"></span><span class="n"><span class="pre">uint16_t</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">year</span></span></span><a class="headerlink" href="#c.location_datetime.year" title="Permalink to this definition"></a><br /></dt>
<dd><p>4-digit representation (Gregorian calendar). </p>
</dd></dl>

<dl class="c var">
<dt class="sig sig-object c" id="c.location_datetime.month">
<span class="target" id="structlocation__datetime_1af5ea25d0d24a74c87e7377a5f25b19d8"></span><span class="n"><span class="pre">uint8_t</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">month</span></span></span><a class="headerlink" href="#c.location_datetime.month" title="Permalink to this definition"></a><br /></dt>
<dd><p>1…12 </p>
</dd></dl>

<dl class="c var">
<dt class="sig sig-object c" id="c.location_datetime.day">
<span class="target" id="structlocation__datetime_1a078da19bfdc91c3bbb25ec36e58c0d18"></span><span class="n"><span class="pre">uint8_t</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">day</span></span></span><a class="headerlink" href="#c.location_datetime.day" title="Permalink to this definition"></a><br /></dt>
<dd><p>1…31 </p>
</dd></dl>

<dl class="c var">
<dt class="sig sig-object c" id="c.location_datetime.hour">
<span class="target" id="structlocation__datetime_1acf066c55ed0c225defb18912110b2b4e"></span><span class="n"><span class="pre">uint8_t</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">hour</span></span></span><a class="headerlink" href="#c.location_datetime.hour" title="Permalink to this definition"></a><br /></dt>
<dd><p>0…23 </p>
</dd></dl>

<dl class="c var">
<dt class="sig sig-object c" id="c.location_datetime.minute">
<span class="target" id="structlocation__datetime_1aab3ffaa02bc6fbcfe9bb62c099df3551"></span><span class="n"><span class="pre">uint8_t</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">minute</span></span></span><a class="headerlink" href="#c.location_datetime.minute" title="Permalink to this definition"></a><br /></dt>
<dd><p>0…59 </p>
</dd></dl>

<dl class="c var">
<dt class="sig sig-object c" id="c.location_datetime.second">
<span class="target" id="structlocation__datetime_1a0ac984f75db1b2b8dea62671f4ce0fca"></span><span class="n"><span class="pre">uint8_t</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">second</span></span></span><a class="headerlink" href="#c.location_datetime.second" title="Permalink to this definition"></a><br /></dt>
<dd><p>0…59 </p>
</dd></dl>

<dl class="c var">
<dt class="sig sig-object c" id="c.location_datetime.ms">
<span class="target" id="structlocation__datetime_1a9098ac7d7f97182a364a43246bfbcd7c"></span><span class="n"><span class="pre">uint16_t</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">ms</span></span></span><a class="headerlink" href="#c.location_datetime.ms" title="Permalink to this definition"></a><br /></dt>
<dd><p>0…999 </p>
</dd></dl>

</div>
</dd></dl>

<dl class="c struct">
<dt class="sig sig-object c" id="c.location_data">
<span class="target" id="structlocation__data"></span><span class="k"><span class="pre">struct</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">location_data</span></span></span><a class="headerlink" href="#c.location_data" title="Permalink to this definition"></a><br /></dt>
<dd><div class="docutils container">
<em>#include &lt;location.h&gt;</em></div>
<p>Location data. </p>
<div class="breathe-sectiondef docutils container">
<p class="breathe-sectiondef-title rubric" id="breathe-section-title-public-members">Public Members</p>
<dl class="c var">
<dt class="sig sig-object c" id="c.location_data.latitude">
<span class="target" id="structlocation__data_1a04c85e8103a7db5503370f4a820e51da"></span><span class="kt"><span class="pre">double</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">latitude</span></span></span><a class="headerlink" href="#c.location_data.latitude" title="Permalink to this definition"></a><br /></dt>
<dd><p>Geodetic latitude (deg) in WGS-84. </p>
</dd></dl>

<dl class="c var">
<dt class="sig sig-object c" id="c.location_data.longitude">
<span class="target" id="structlocation__data_1a584a33b7a163f69795c9bd80b05730ed"></span><span class="kt"><span class="pre">double</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">longitude</span></span></span><a class="headerlink" href="#c.location_data.longitude" title="Permalink to this definition"></a><br /></dt>
<dd><p>Geodetic longitude (deg) in WGS-84. </p>
</dd></dl>

<dl class="c var">
<dt class="sig sig-object c" id="c.location_data.accuracy">
<span class="target" id="structlocation__data_1a359b0f79b3c05804a5c7fdc4eb9b6ac5"></span><span class="kt"><span class="pre">float</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">accuracy</span></span></span><a class="headerlink" href="#c.location_data.accuracy" title="Permalink to this definition"></a><br /></dt>
<dd><p>Location accuracy in meters (1-sigma). </p>
</dd></dl>

<dl class="c var">
<dt class="sig sig-object c" id="c.location_data.datetime">
<span class="target" id="structlocation__data_1ae97fdfebf485ff401351ab9de5665a90"></span><span class="k"><span class="pre">struct</span></span><span class="w"> </span><a class="reference internal" href="#c.location_datetime" title="location_datetime"><span class="n"><span class="pre">location_datetime</span></span></a><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">datetime</span></span></span><a class="headerlink" href="#c.location_data.datetime" title="Permalink to this definition"></a><br /></dt>
<dd><p>Date and time (UTC). </p>
</dd></dl>

</div>
</dd></dl>

<dl class="c struct">
<dt class="sig sig-object c" id="c.location_data_cloud">
<span class="target" id="structlocation__data__cloud"></span><span class="k"><span class="pre">struct</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">location_data_cloud</span></span></span><a class="headerlink" href="#c.location_data_cloud" title="Permalink to this definition"></a><br /></dt>
<dd><div class="docutils container">
<em>#include &lt;location.h&gt;</em></div>
<p>Cloud location information. </p>
</dd></dl>

<dl class="c struct">
<dt class="sig sig-object c" id="c.location_event_data">
<span class="target" id="structlocation__event__data"></span><span class="k"><span class="pre">struct</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">location_event_data</span></span></span><a class="headerlink" href="#c.location_event_data" title="Permalink to this definition"></a><br /></dt>
<dd><div class="docutils container">
<em>#include &lt;location.h&gt;</em></div>
<p>Location event data. </p>
<div class="breathe-sectiondef docutils container">
<p class="breathe-sectiondef-title rubric" id="breathe-section-title-public-members">Public Members</p>
<dl class="c var">
<dt class="sig sig-object c" id="c.location_event_data.id">
<span class="target" id="structlocation__event__data_1ae79b6cc39c056d9601f186610ab33473"></span><span class="k"><span class="pre">enum</span></span><span class="w"> </span><a class="reference internal" href="#c.location_event_id" title="location_event_id"><span class="n"><span class="pre">location_event_id</span></span></a><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">id</span></span></span><a class="headerlink" href="#c.location_event_data.id" title="Permalink to this definition"></a><br /></dt>
<dd><p>Event ID. </p>
</dd></dl>

<dl class="c var">
<dt class="sig sig-object c" id="c.location_event_data.method">
<span class="target" id="structlocation__event__data_1a902b5b26bdf91431333e95d7e61e1366"></span><span class="k"><span class="pre">enum</span></span><span class="w"> </span><a class="reference internal" href="#c.location_method" title="location_method"><span class="n"><span class="pre">location_method</span></span></a><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">method</span></span></span><a class="headerlink" href="#c.location_event_data.method" title="Permalink to this definition"></a><br /></dt>
<dd><p>Used location method.</p>
<p>When cellular and Wi-Fi positioning are used and they are combined into a single cloud request by the library, the method is not known so there is some uncertainty on the reported location method. </p>
</dd></dl>

<dl class="c var">
<dt class="sig sig-object c" id="c.location_event_data.location">
<span class="target" id="structlocation__event__data_1afe6bbab7060513a40a732ff0108e79e9"></span><span class="k"><span class="pre">struct</span></span><span class="w"> </span><a class="reference internal" href="#c.location_data" title="location_data"><span class="n"><span class="pre">location_data</span></span></a><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">location</span></span></span><a class="headerlink" href="#c.location_event_data.location" title="Permalink to this definition"></a><br /></dt>
<dd><p>Current location, used with event LOCATION_EVT_LOCATION. </p>
</dd></dl>

<dl class="c var">
<dt class="sig sig-object c" id="c.location_event_data.&#64;149">
<span class="target" id="structlocation__event__data_1ad3db3a32749288010196d4e75892ac02"></span><span class="k"><span class="pre">union</span></span><span class="w"> </span><a class="reference internal" href="#c.location_event_data" title="location_event_data"><span class="n"><span class="pre">location_event_data</span></span></a><span class="p"><span class="pre">.</span></span><span class="n"><span class="pre">[anonymous]</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">[anonymous]</span></span></span><a class="headerlink" href="#c.location_event_data.@149" title="Permalink to this definition"></a><br /></dt>
<dd><p>Event specific data. </p>
</dd></dl>

</div>
</dd></dl>

<dl class="c struct">
<dt class="sig sig-object c" id="c.location_gnss_config">
<span class="target" id="structlocation__gnss__config"></span><span class="k"><span class="pre">struct</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">location_gnss_config</span></span></span><a class="headerlink" href="#c.location_gnss_config" title="Permalink to this definition"></a><br /></dt>
<dd><div class="docutils container">
<em>#include &lt;location.h&gt;</em></div>
<p>GNSS configuration. </p>
<div class="breathe-sectiondef docutils container">
<p class="breathe-sectiondef-title rubric" id="breathe-section-title-public-members">Public Members</p>
<dl class="c var">
<dt class="sig sig-object c" id="c.location_gnss_config.timeout">
<span class="target" id="structlocation__gnss__config_1a2181db0bcb8ddf2edf8da650f475c146"></span><span class="n"><span class="pre">int32_t</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">timeout</span></span></span><a class="headerlink" href="#c.location_gnss_config.timeout" title="Permalink to this definition"></a><br /></dt>
<dd><p>Timeout (in milliseconds), meaning how long GNSS is allowed to run when trying to acquire a fix. SYS_FOREVER_MS means that the timer is disabled, meaning that GNSS will continue to search until it gets a fix or the application calls cancel. </p>
<p>Note that this is not real time as experienced by the user. Since GNSS cannot run while LTE is operating, the running time is counted from the instant when GNSS is allowed to start. Library waits until RRC connection is inactive before starting GNSS. If LTE power saving mode (PSM) is enabled and A-GPS is disabled, library waits until modem enters PSM before starting GNSS, thus maximizing uninterrupted operating window and minimizing power consumption.</p>
<p>Default value is 120000 (2 minutes). It is applied when <a class="reference internal" href="#group__location_1gaa2acf9a8fab52e2ee4b60c3677a016f8"><span class="std std-ref">location_config_defaults_set</span></a> function is called and can be changed at build time with CONFIG_LOCATION_REQUEST_DEFAULT_GNSS_TIMEOUT configuration. </p>
</dd></dl>

<dl class="c var">
<dt class="sig sig-object c" id="c.location_gnss_config.accuracy">
<span class="target" id="structlocation__gnss__config_1a43c2987d4accda47ff0ad2ebf2488a63"></span><span class="k"><span class="pre">enum</span></span><span class="w"> </span><a class="reference internal" href="#c.location_accuracy" title="location_accuracy"><span class="n"><span class="pre">location_accuracy</span></span></a><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">accuracy</span></span></span><a class="headerlink" href="#c.location_gnss_config.accuracy" title="Permalink to this definition"></a><br /></dt>
<dd><p>Desired accuracy level. </p>
<p>If accuracy is set to LOCATION_ACCURACY_LOW, GNSS relaxes the criteria for a qualifying fix and may produce fixes using only three satellites.</p>
<p>If accuracy is set to LOCATION_ACCURACY_HIGH, instead of using the first fix, GNSS is allowed to run for a longer time. This typically improves the location accuracy.</p>
<p>Default value is LOCATION_ACCURACY_NORMAL. It is applied when <a class="reference internal" href="#group__location_1gaa2acf9a8fab52e2ee4b60c3677a016f8"><span class="std std-ref">location_config_defaults_set</span></a> function is called and can be changed at build time with CONFIG_LOCATION_REQUEST_DEFAULT_GNSS_ACCURACY choice configuration. </p>
</dd></dl>

<dl class="c var">
<dt class="sig sig-object c" id="c.location_gnss_config.num_consecutive_fixes">
<span class="target" id="structlocation__gnss__config_1ad53cfc55465bc832b76f314e099bf4d6"></span><span class="n"><span class="pre">uint8_t</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">num_consecutive_fixes</span></span></span><a class="headerlink" href="#c.location_gnss_config.num_consecutive_fixes" title="Permalink to this definition"></a><br /></dt>
<dd><p>The number of fixes GNSS is allowed to produce before the library outputs the current location when accuracy is set to LOCATION_ACCURACY_HIGH. </p>
<p>If accuracy is set to LOCATION_ACCURACY_NORMAL or LOCATION_ACCURACY_LOW this parameter has no effect.</p>
<p>Default value is 3. It is applied when <a class="reference internal" href="#group__location_1gaa2acf9a8fab52e2ee4b60c3677a016f8"><span class="std std-ref">location_config_defaults_set</span></a> function is called and can be changed at build time with CONFIG_LOCATION_REQUEST_DEFAULT_GNSS_NUM_CONSECUTIVE_FIXES configuration. </p>
</dd></dl>

<dl class="c var">
<dt class="sig sig-object c" id="c.location_gnss_config.visibility_detection">
<span class="target" id="structlocation__gnss__config_1ad4f2b874adda6d6e807b68ec3547dc68"></span><span class="kt"><span class="pre">bool</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">visibility_detection</span></span></span><a class="headerlink" href="#c.location_gnss_config.visibility_detection" title="Permalink to this definition"></a><br /></dt>
<dd><p>Obstructed visibility detection. If set to true, the library tries to detect situations where getting a GNSS fix is unlikely or would consume a lot of energy. When such a situation is detected, GNSS is stopped without waiting for a fix or a timeout. </p>
<p>See Kconfig for related configuration options.</p>
<p>Default value is false. It is applied when <a class="reference internal" href="#group__location_1gaa2acf9a8fab52e2ee4b60c3677a016f8"><span class="std std-ref">location_config_defaults_set</span></a> function is called and can be changed at build time with CONFIG_LOCATION_REQUEST_DEFAULT_GNSS_VISIBILITY_DETECTION configuration.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Only supported with modem firmware v1.3.2 or later. </p>
</div>
</dd></dl>

<dl class="c var">
<dt class="sig sig-object c" id="c.location_gnss_config.priority_mode">
<span class="target" id="structlocation__gnss__config_1a87ef058dc2bb1f01f4a0f15cc2ec07ba"></span><span class="kt"><span class="pre">bool</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">priority_mode</span></span></span><a class="headerlink" href="#c.location_gnss_config.priority_mode" title="Permalink to this definition"></a><br /></dt>
<dd><p>Enable GNSS priority mode if GNSS does not get enough runtime due to LTE idle mode operations. </p>
<p>If set to true, the library triggers GNSS priority mode if five consecutive PVT messages indicate that GNSS is blocked by LTE idle mode operations. This is especially helpful if A-GPS or P-GPS is not enabled or downloading assistance data fails and GNSS module has to decode navigation data from the satellite broadcast. Priority mode is disabled automatically after the first fix or after 40 seconds.</p>
<p>If the device attempts to send data during the priority mode, it will be buffered and sent after the priority time window ends. In case of mobile terminated data reception during the priority mode the network will typically buffer the data and sent them to the device once the priority time window ends. However, it is possible that the network drops the data, or some protocol timer expires causing data transfer to fail.</p>
<p>Default value is false. It is applied when <a class="reference internal" href="#group__location_1gaa2acf9a8fab52e2ee4b60c3677a016f8"><span class="std std-ref">location_config_defaults_set</span></a> function is called and can be changed at build time with CONFIG_LOCATION_REQUEST_DEFAULT_GNSS_PRIORITY_MODE configuration. </p>
</dd></dl>

</div>
</dd></dl>

<dl class="c struct">
<dt class="sig sig-object c" id="c.location_cellular_config">
<span class="target" id="structlocation__cellular__config"></span><span class="k"><span class="pre">struct</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">location_cellular_config</span></span></span><a class="headerlink" href="#c.location_cellular_config" title="Permalink to this definition"></a><br /></dt>
<dd><div class="docutils container">
<em>#include &lt;location.h&gt;</em></div>
<p>LTE cellular positioning configuration. </p>
<div class="breathe-sectiondef docutils container">
<p class="breathe-sectiondef-title rubric" id="breathe-section-title-public-members">Public Members</p>
<dl class="c var">
<dt class="sig sig-object c" id="c.location_cellular_config.timeout">
<span class="target" id="structlocation__cellular__config_1a8c8c82512bcbe413b22633ea70586479"></span><span class="n"><span class="pre">int32_t</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">timeout</span></span></span><a class="headerlink" href="#c.location_cellular_config.timeout" title="Permalink to this definition"></a><br /></dt>
<dd><p>Timeout (in milliseconds) of how long the cellular positioning procedure can take. SYS_FOREVER_MS means that the timer is disabled. </p>
<p>Default value is 30000 (30 seconds). It is applied when <a class="reference internal" href="#group__location_1gaa2acf9a8fab52e2ee4b60c3677a016f8"><span class="std std-ref">location_config_defaults_set</span></a> function is called and can be changed at build time with CONFIG_LOCATION_REQUEST_DEFAULT_CELLULAR_TIMEOUT configuration.</p>
<p>When CONFIG_LOCATION_SERVICE_EXTERNAL is enabled, this timeout stops when event LOCATION_EVT_CLOUD_LOCATION_EXT_REQUEST is sent. However, timeout specified in <a class="reference internal" href="#structlocation__config"><span class="std std-ref">location_config</span></a> structure is still valid. </p>
</dd></dl>

<dl class="c var">
<dt class="sig sig-object c" id="c.location_cellular_config.service">
<span class="target" id="structlocation__cellular__config_1a18262f8b0a4910e80348e67ff337601b"></span><span class="k"><span class="pre">enum</span></span><span class="w"> </span><a class="reference internal" href="#c.location_service" title="location_service"><span class="n"><span class="pre">location_service</span></span></a><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">service</span></span></span><a class="headerlink" href="#c.location_cellular_config.service" title="Permalink to this definition"></a><br /></dt>
<dd><p>Used cellular positioning service. </p>
<p>Default value is LOCATION_SERVICE_ANY. It is applied when <a class="reference internal" href="#group__location_1gaa2acf9a8fab52e2ee4b60c3677a016f8"><span class="std std-ref">location_config_defaults_set</span></a> function is called.</p>
<p>This parameter is ignored when CONFIG_LOCATION_SERVICE_EXTERNAL is enabled. </p>
</dd></dl>

</div>
</dd></dl>

<dl class="c struct">
<dt class="sig sig-object c" id="c.location_wifi_config">
<span class="target" id="structlocation__wifi__config"></span><span class="k"><span class="pre">struct</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">location_wifi_config</span></span></span><a class="headerlink" href="#c.location_wifi_config" title="Permalink to this definition"></a><br /></dt>
<dd><div class="docutils container">
<em>#include &lt;location.h&gt;</em></div>
<p>Wi-Fi positioning configuration. </p>
<div class="breathe-sectiondef docutils container">
<p class="breathe-sectiondef-title rubric" id="breathe-section-title-public-members">Public Members</p>
<dl class="c var">
<dt class="sig sig-object c" id="c.location_wifi_config.timeout">
<span class="target" id="structlocation__wifi__config_1af5f959245c03a64610f9d642bc596dd2"></span><span class="n"><span class="pre">int32_t</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">timeout</span></span></span><a class="headerlink" href="#c.location_wifi_config.timeout" title="Permalink to this definition"></a><br /></dt>
<dd><p>Timeout (in milliseconds) of how long the Wi-Fi positioning procedure can take. SYS_FOREVER_MS means that the timer is disabled. </p>
<p>Default value is 30000 (30 seconds). It is applied when <a class="reference internal" href="#group__location_1gaa2acf9a8fab52e2ee4b60c3677a016f8"><span class="std std-ref">location_config_defaults_set</span></a> function is called and can be changed at build time with CONFIG_LOCATION_REQUEST_DEFAULT_WIFI_TIMEOUT configuration.</p>
<p>When CONFIG_LOCATION_SERVICE_EXTERNAL is enabled, this timeout stops when event LOCATION_EVT_CLOUD_LOCATION_EXT_REQUEST is sent. However, timeout specified in <a class="reference internal" href="#structlocation__config"><span class="std std-ref">location_config</span></a> structure is still valid. </p>
</dd></dl>

<dl class="c var">
<dt class="sig sig-object c" id="c.location_wifi_config.service">
<span class="target" id="structlocation__wifi__config_1a5066e1ef753736683c0585904091aaad"></span><span class="k"><span class="pre">enum</span></span><span class="w"> </span><a class="reference internal" href="#c.location_service" title="location_service"><span class="n"><span class="pre">location_service</span></span></a><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">service</span></span></span><a class="headerlink" href="#c.location_wifi_config.service" title="Permalink to this definition"></a><br /></dt>
<dd><p>Used Wi-Fi positioning service. </p>
<p>Default value is LOCATION_SERVICE_ANY. It is applied when <a class="reference internal" href="#group__location_1gaa2acf9a8fab52e2ee4b60c3677a016f8"><span class="std std-ref">location_config_defaults_set</span></a> function is called.</p>
<p>This parameter is ignored when CONFIG_LOCATION_SERVICE_EXTERNAL is enabled. </p>
</dd></dl>

</div>
</dd></dl>

<dl class="c struct">
<dt class="sig sig-object c" id="c.location_method_config">
<span class="target" id="structlocation__method__config"></span><span class="k"><span class="pre">struct</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">location_method_config</span></span></span><a class="headerlink" href="#c.location_method_config" title="Permalink to this definition"></a><br /></dt>
<dd><div class="docutils container">
<em>#include &lt;location.h&gt;</em></div>
<p>Location method configuration. </p>
<div class="breathe-sectiondef docutils container">
<p class="breathe-sectiondef-title rubric" id="breathe-section-title-public-members">Public Members</p>
<dl class="c var">
<dt class="sig sig-object c" id="c.location_method_config.method">
<span class="target" id="structlocation__method__config_1a543124295142a64d18d0c20734087945"></span><span class="k"><span class="pre">enum</span></span><span class="w"> </span><a class="reference internal" href="#c.location_method" title="location_method"><span class="n"><span class="pre">location_method</span></span></a><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">method</span></span></span><a class="headerlink" href="#c.location_method_config.method" title="Permalink to this definition"></a><br /></dt>
<dd><p>Location method. </p>
</dd></dl>

<dl class="c var">
<dt class="sig sig-object c" id="c.location_method_config.cellular">
<span class="target" id="structlocation__method__config_1a8d7a32020e259dd1921130bb6f6a8876"></span><span class="k"><span class="pre">struct</span></span><span class="w"> </span><a class="reference internal" href="#c.location_cellular_config" title="location_cellular_config"><span class="n"><span class="pre">location_cellular_config</span></span></a><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">cellular</span></span></span><a class="headerlink" href="#c.location_method_config.cellular" title="Permalink to this definition"></a><br /></dt>
<dd><p>Configuration for LOCATION_METHOD_CELLULAR. </p>
</dd></dl>

<dl class="c var">
<dt class="sig sig-object c" id="c.location_method_config.gnss">
<span class="target" id="structlocation__method__config_1a5b0a004260eba4542a5934f974235fed"></span><span class="k"><span class="pre">struct</span></span><span class="w"> </span><a class="reference internal" href="#c.location_gnss_config" title="location_gnss_config"><span class="n"><span class="pre">location_gnss_config</span></span></a><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">gnss</span></span></span><a class="headerlink" href="#c.location_method_config.gnss" title="Permalink to this definition"></a><br /></dt>
<dd><p>Configuration for LOCATION_METHOD_GNSS. </p>
</dd></dl>

<dl class="c var">
<dt class="sig sig-object c" id="c.location_method_config.wifi">
<span class="target" id="structlocation__method__config_1ab9fc4256284a7d286355bed63ff8511f"></span><span class="k"><span class="pre">struct</span></span><span class="w"> </span><a class="reference internal" href="#c.location_wifi_config" title="location_wifi_config"><span class="n"><span class="pre">location_wifi_config</span></span></a><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">wifi</span></span></span><a class="headerlink" href="#c.location_method_config.wifi" title="Permalink to this definition"></a><br /></dt>
<dd><p>Configuration for LOCATION_METHOD_WIFI. </p>
</dd></dl>

</div>
</dd></dl>

<dl class="c struct">
<dt class="sig sig-object c" id="c.location_config">
<span class="target" id="structlocation__config"></span><span class="k"><span class="pre">struct</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">location_config</span></span></span><a class="headerlink" href="#c.location_config" title="Permalink to this definition"></a><br /></dt>
<dd><div class="docutils container">
<em>#include &lt;location.h&gt;</em></div>
<p>Location request configuration. </p>
<div class="breathe-sectiondef docutils container">
<p class="breathe-sectiondef-title rubric" id="breathe-section-title-public-members">Public Members</p>
<dl class="c var">
<dt class="sig sig-object c" id="c.location_config.methods_count">
<span class="target" id="structlocation__config_1a818fc777fbd1297cb7c584cf8f3bb1ae"></span><span class="n"><span class="pre">uint8_t</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">methods_count</span></span></span><a class="headerlink" href="#c.location_config.methods_count" title="Permalink to this definition"></a><br /></dt>
<dd><p>Number of location methods in ‘methods’. </p>
</dd></dl>

<dl class="c var">
<dt class="sig sig-object c" id="c.location_config.methods">
<span class="target" id="structlocation__config_1a06a6714b2ecbcdf4ad04b91337cef7d0"></span><span class="k"><span class="pre">struct</span></span><span class="w"> </span><a class="reference internal" href="#c.location_method_config" title="location_method_config"><span class="n"><span class="pre">location_method_config</span></span></a><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">methods</span></span></span><span class="p"><span class="pre">[</span></span><span class="n"><span class="pre">CONFIG_LOCATION_METHODS_LIST_SIZE</span></span><span class="p"><span class="pre">]</span></span><a class="headerlink" href="#c.location_config.methods" title="Permalink to this definition"></a><br /></dt>
<dd><p>Selected location methods and associated configurations in priority order. </p>
<p>Index 0 has the highest priority. Number of used methods is indicated in ‘methods_count’ and it can be smaller than the size of this table.</p>
<p>Wi-Fi and cellular scan results are combined into single cloud request, that is, these methods are handled together, if the following conditions are met:<ul class="simple">
<li><p>Methods are one after the other in location request method list</p></li>
<li><p><a class="reference internal" href="#structlocation__config_1a0e078a06ef972eb80ec43a64201dd800"><span class="std std-ref">mode</span></a> is <a class="reference internal" href="#group__location_1gga70bedfb0f220f3b571e8e2dfbcf87b28a06c4903d71241bf5fa8f1727d537c5a0"><span class="std std-ref">LOCATION_REQ_MODE_FALLBACK</span></a></p></li>
<li><p>Requested cloud service for Wi-Fi and cellular is the same </p></li>
</ul>
</p>
</dd></dl>

<dl class="c var">
<dt class="sig sig-object c" id="c.location_config.interval">
<span class="target" id="structlocation__config_1aff21c2ca8d733007bfdc0739bfa2cdd6"></span><span class="n"><span class="pre">uint16_t</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">interval</span></span></span><a class="headerlink" href="#c.location_config.interval" title="Permalink to this definition"></a><br /></dt>
<dd><p>Position update interval in seconds. </p>
<p>Set to 0 for a single position update. For periodic position updates the valid range is 1…65535 seconds.</p>
<p>Default value is 0. It is applied when <a class="reference internal" href="#group__location_1gaa2acf9a8fab52e2ee4b60c3677a016f8"><span class="std std-ref">location_config_defaults_set</span></a> function is called and can be changed at build time with CONFIG_LOCATION_REQUEST_DEFAULT_INTERVAL configuration. </p>
</dd></dl>

<dl class="c var">
<dt class="sig sig-object c" id="c.location_config.timeout">
<span class="target" id="structlocation__config_1a63df0ddbfbc7feba564b478612e7a27e"></span><span class="n"><span class="pre">int32_t</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">timeout</span></span></span><a class="headerlink" href="#c.location_config.timeout" title="Permalink to this definition"></a><br /></dt>
<dd><p>Timeout (in milliseconds) for the entire location request. </p>
<p>SYS_FOREVER_MS means that the timer is disabled.</p>
<p>Default value is 300000 (5 minutes). It is applied when <a class="reference internal" href="#group__location_1gaa2acf9a8fab52e2ee4b60c3677a016f8"><span class="std std-ref">location_config_defaults_set</span></a> function is called and can be changed at build time with CONFIG_LOCATION_REQUEST_DEFAULT_TIMEOUT configuration. </p>
</dd></dl>

<dl class="c var">
<dt class="sig sig-object c" id="c.location_config.mode">
<span class="target" id="structlocation__config_1a0e078a06ef972eb80ec43a64201dd800"></span><span class="k"><span class="pre">enum</span></span><span class="w"> </span><a class="reference internal" href="#c.location_req_mode" title="location_req_mode"><span class="n"><span class="pre">location_req_mode</span></span></a><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">mode</span></span></span><a class="headerlink" href="#c.location_config.mode" title="Permalink to this definition"></a><br /></dt>
<dd><p>Location acquisition mode. </p>
<p>Default value is LOCATION_REQ_MODE_FALLBACK. It is applied when <a class="reference internal" href="#group__location_1gaa2acf9a8fab52e2ee4b60c3677a016f8"><span class="std std-ref">location_config_defaults_set</span></a> function is called. </p>
</dd></dl>

</div>
</dd></dl>

</dd></dl>

</section>
</section>


           </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="lte_lc.html" class="btn btn-neutral float-right" title="LTE link controller" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="gcf_sms_lib.html" class="btn btn-neutral" title="GCF SMS" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">

<table>
<tr>
<td>
    <p>
        &copy; Copyright 2019-2023, Nordic Semiconductor.
      Last updated on Mar 20, 2023.

    </p>
</td>
<td id="nordiclogo">
  <a href="https://www.nordicsemi.com/"><img src="../../_static/images/nordic-logo.png" border="0"/></a>
</td>
</tr>
</table>
  </div> 


</footer>

<div id="scroll-container">
  <button type="button" id="scroll-btn" class="btn">
    <svg xmlns="http://www.w3.org/2000/svg" height="24" viewBox="0 0 24 24" width="24"><path d="M0 0h24v24H0z" fill="none"/><path d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z" fill="#fff"/></svg>
  </button>
</div>

<script>
  const scrollBtn = document.querySelector("#scroll-btn");

  document.addEventListener("scroll", () => {
    if (window.scrollY > 400) {
          scrollBtn.style.visibility = "visible";
      } else {
          scrollBtn.style.visibility = "hidden";
      }
  });

  scrollBtn.addEventListener("click", () => {
      window.scrollTo({ top: 0, behavior: "smooth" });
  });
</script>
        </div>
      </div>
    </section>
  </div>
  
  <div class="rst-versions" data-toggle="rst-versions" role="note" aria-label="versions">
    <span class="rst-current-version" data-toggle="rst-current-version">
      <span class="fa fa-book"> nRF Connect SDK</span>
       <span class="fa fa-caret-down"></span>
    </span>
    <div class="rst-other-versions">
      
      <div class="rst-other-version ncs">
        <a href="../../../nrf/index.html">nRF Connect SDK</a>
      </div>
      
      <div class="rst-other-version nrfx">
        <a href="../../../nrfx/index.html">nrfx</a>
      </div>
      
      <div class="rst-other-version nrfxlib">
        <a href="../../../nrfxlib/README.html">nrfxlib</a>
      </div>
      
      <div class="rst-other-version zephyr">
        <a href="../../../zephyr/index.html">Zephyr Project</a>
      </div>
      
      <div class="rst-other-version mcuboot">
        <a href="../../../mcuboot/wrapper.html">MCUboot</a>
      </div>
      
      <div class="rst-other-version tfm">
        <a href="../../../tfm/index.html">Trusted Firmware-M</a>
      </div>
      
      <div class="rst-other-version matter">
        <a href="../../../matter/index.html">Matter</a>
      </div>
      
      <div class="rst-other-version kconfig">
        <a href="../../../kconfig/index.html">Kconfig Reference</a>
      </div>
    </div>
  </div><script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>