<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>nRF Cloud P-GPS &mdash; nRF Connect SDK 2.3.99 documentation</title>
      <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="../../_static/css/nordic.css" type="text/css" />
      <link rel="stylesheet" href="../../_static/togglebutton.css" type="text/css" />
      <link rel="stylesheet" href="../../_static/css/nrf.css" type="text/css" />
      <link rel="stylesheet" href="../../_static/tabs.css" type="text/css" /> 
  <!--[if lt IE 9]>
    <script src="../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="../../" id="documentation_options" src="../../_static/documentation_options.js"></script>
        <script src="../../_static/jquery.js"></script>
        <script src="../../_static/underscore.js"></script>
        <script src="../../_static/_sphinx_javascript_frameworks_compat.js"></script>
        <script src="../../_static/doctools.js"></script>
        <script src="../../_static/sphinx_highlight.js"></script>
        <script src="https://www.googletagmanager.com/gtag/js?id=G-ZPVZRKFQJR"></script>
        <script src="../../_static/js/ga-tracker.js"></script>
        <script data-culture="EN" id="CookieConsent" type="text/javascript" src="https://policy.app.cookieinformation.com/uc.js"></script>
        <script>let toggleHintShow = 'Click to show';</script>
        <script>let toggleHintHide = 'Click to hide';</script>
        <script>let toggleOpenOnPrint = 'true';</script>
        <script src="../../_static/togglebutton.js"></script>
        <script>var togglebuttonSelector = '.toggle, .admonition.dropdown';</script>
    <script src="../../_static/js/theme.js"></script>
<script
  type="text/javascript"
  src="../../_static/js/ncs.js"
></script>
<script src="../../_static/js/bootstrap.bundle.min.js"></script>

    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="nRF Cloud REST" href="nrf_cloud_rest.html" />
    <link rel="prev" title="nRF Cloud location" href="nrf_cloud_location.html" />
<link
  href="../../_static/css/bootstrap.min.css"
  rel="stylesheet"
/>
<link
  rel="shortcut icon"
  href="../../_static/images/favicon.ico"
/>

</head>

<body class="wy-body-for-nav">
<div class="announcement"></div>
<div class="d-print-none ncs-header">
  <div class="container-xl ncs-header-top">
    <div class="row h-100">
      <div class="d-none d-md-block col-2">
        <div class="bg-white py-4 px-3 ml-2 ncs-header-logo">
          <img
            class="ncs-header-logo"
            src="../../_static/images/nordic-logo.png"
            alt=""
          />
        </div>
      </div>
      <div
        class="col-8 col-md-7 pl-md-4 d-flex align-self-center justify-content-center"
      >
        <form class="w-75" action="../../search.html" method="get">
          <div class="form-group">
            <input
              type="text"
              name="q"
              class="ncs-search-input form-control"
              placeholder="Search all docs..."
            />
          </div>
        </form>
      </div>
      <div class="col-4 col-md-3 d-md-block p-3 text-end">
        <div class="dropdown">
          <button
            class="btn dropdown-toggle ncs-btn-versions"
            type="button"
            id="dropdownMenuButton1"
            data-bs-toggle="dropdown"
            aria-expanded="false"
          >
            <span class="d-none d-md-inline">nRF Connect SDK</span>
            <span id="ncsversion" class="d-inline"></span>
          </button>
          <div class="dropdown-menu" aria-labelledby="dropdownMenuButton"></div>
        </div>
      </div>
    </div>
  </div>
  <div class="ncs-header-nav">
    <div class="container-xl">
      <div class="row">
        <div class="col col-12 d-flex justify-content-center">
          <nav class="navbar navbar-dark navbar-expand-lg p-0">
            <span class="navbar-brand d-block d-lg-none py-2 pl-1"
              >Documentation sets</span
            >
            <button
              class="navbar-toggler"
              type="button"
              data-bs-toggle="collapse"
              data-bs-target="#navbarNavAltMarkup"
              aria-controls="navbarNavAltMarkup"
              aria-expanded="false"
              aria-label="Toggle navigation"
            >
              <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="navbarNavAltMarkup">
              <ul class="navbar-nav">
                <li class="nav-item active py-1 px-3">
                  <a
                    class="nav-link"
                    href="../../../nrf/index.html"
                    >nRF Connect SDK</a
                  >
                </li>
                <li><hr class="dropdown-divider" /></li>
                <li class="nav-item  py-1 px-3">
                  <a
                    class="nav-link"
                    href="../../../nrfx/index.html"
                    >nrfx</a
                  >
                </li>
                <li><hr class="dropdown-divider" /></li>
                <li class="nav-item  py-1 px-3">
                  <a
                    class="nav-link"
                    href="../../../nrfxlib/README.html"
                    >nrfxlib</a
                  >
                </li>
                <li><hr class="dropdown-divider" /></li>
                <li class="nav-item  py-1 px-3">
                  <a
                    class="nav-link"
                    href="../../../zephyr/index.html"
                    >Zephyr Project</a
                  >
                </li>
                <li><hr class="dropdown-divider" /></li>
                <li class="nav-item  py-1 px-3">
                  <a
                    class="nav-link"
                    href="../../../mcuboot/wrapper.html"
                    >MCUboot</a
                  >
                </li>
                <li><hr class="dropdown-divider" /></li>
                <li class="nav-item  py-1 px-3">
                  <a
                    class="nav-link"
                    href="../../../tfm/index.html"
                    >Trusted Firmware-M</a
                  >
                </li>
                <li><hr class="dropdown-divider" /></li>
                <li class="nav-item  py-1 px-3">
                  <a
                    class="nav-link"
                    href="../../../matter/index.html"
                    >Matter</a
                  >
                </li>
                <li><hr class="dropdown-divider" /></li>
                <li class="nav-item  py-1 px-3">
                  <a
                    class="nav-link"
                    href="../../../kconfig/index.html"
                    >Kconfig Reference</a
                  >
                </li>
                <li><hr class="dropdown-divider" /></li>
              </ul>
            </div>
          </nav>
        </div>
      </div>
    </div>
  </div>
</div>

  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
            <a href="../../index.html" class="icon icon-home"> nRF Connect SDK
          </a>
              <div class="version">
                2.3.99
              </div>
<div id="searchbox" role="search">
  <div class="searchformwrapper">
    <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
      <input type="text" name="q" placeholder="Search docs" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
  </div>
</div>
<script>$('#searchbox').show(0);</script>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Contents</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../introduction.html">Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../getting_started.html">Getting started</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../dev_model.html">Development model</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../app_dev.html">Application development</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../security.html">Security</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../ecosystem_integration.html">Ecosystems integration</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../nrf91.html">Working with nRF91 Series</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../nrf70.html">Working with nRF70 Series</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../nrf53.html">Working with nRF53 Series</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../nrf52.html">Working with nRF52 Series</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../protocols.html">Protocols</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../applications.html">Applications</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../samples.html">Samples</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../drivers.html">Drivers</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../index.html">Libraries</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../bin/index.html">Binary libraries</a></li>
<li class="toctree-l2"><a class="reference internal" href="../bluetooth_services/index.html">Bluetooth libraries and services</a></li>
<li class="toctree-l2"><a class="reference internal" href="../bootloader/index.html">Bootloader libraries</a></li>
<li class="toctree-l2"><a class="reference internal" href="../caf/index.html">Common Application Framework</a></li>
<li class="toctree-l2"><a class="reference internal" href="../debug/index.html">Debug libraries</a></li>
<li class="toctree-l2"><a class="reference internal" href="../dfu/index.html">DFU libraries</a></li>
<li class="toctree-l2"><a class="reference internal" href="../gazell/index.html">Gazell libraries</a></li>
<li class="toctree-l2"><a class="reference internal" href="../modem/index.html">Modem libraries</a></li>
<li class="toctree-l2"><a class="reference internal" href="../mpsl/index.html">Multiprotocol Service Layer libraries</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="index.html">Libraries for networking</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="aws_fota.html">AWS FOTA</a></li>
<li class="toctree-l3"><a class="reference internal" href="aws_iot.html">AWS IoT</a></li>
<li class="toctree-l3"><a class="reference internal" href="aws_jobs.html">AWS jobs</a></li>
<li class="toctree-l3"><a class="reference internal" href="azure_fota.html">Azure FOTA</a></li>
<li class="toctree-l3"><a class="reference internal" href="azure_iot_hub.html">Azure IoT Hub</a></li>
<li class="toctree-l3"><a class="reference internal" href="coap_utils.html">CoAP utils</a></li>
<li class="toctree-l3"><a class="reference internal" href="download_client.html">Download client</a></li>
<li class="toctree-l3"><a class="reference internal" href="fota_download.html">FOTA download</a></li>
<li class="toctree-l3"><a class="reference internal" href="ftp_client.html">FTP client</a></li>
<li class="toctree-l3"><a class="reference internal" href="icalendar_parser.html">iCalendar parser</a></li>
<li class="toctree-l3"><a class="reference internal" href="lwm2m_client_utils.html">LwM2M client utils</a></li>
<li class="toctree-l3"><a class="reference internal" href="lwm2m_location_assistance.html">LwM2M location assistance</a></li>
<li class="toctree-l3"><a class="reference internal" href="mqtt_helper.html">MQTT helper</a></li>
<li class="toctree-l3"><a class="reference internal" href="multicell_location.html">Multicell location</a></li>
<li class="toctree-l3"><a class="reference internal" href="nrf_cloud.html">nRF Cloud</a></li>
<li class="toctree-l3"><a class="reference internal" href="nrf_cloud_agps.html">nRF Cloud A-GPS</a></li>
<li class="toctree-l3"><a class="reference internal" href="nrf_cloud_alerts.html">nRF Cloud Alerts</a></li>
<li class="toctree-l3"><a class="reference internal" href="nrf_cloud_location.html">nRF Cloud location</a></li>
<li class="toctree-l3 current"><a class="current reference internal" href="#">nRF Cloud P-GPS</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#overview">Overview</a></li>
<li class="toctree-l4"><a class="reference internal" href="#configuration">Configuration</a></li>
<li class="toctree-l4"><a class="reference internal" href="#initialization">Initialization</a></li>
<li class="toctree-l4"><a class="reference internal" href="#time">Time</a></li>
<li class="toctree-l4"><a class="reference internal" href="#transport-mechanisms">Transport mechanisms</a></li>
<li class="toctree-l4"><a class="reference internal" href="#requesting-and-processing-p-gps-data">Requesting and processing P-GPS data</a></li>
<li class="toctree-l4"><a class="reference internal" href="#finding-a-prediction-and-injecting-to-modem">Finding a prediction and injecting to modem</a></li>
<li class="toctree-l4"><a class="reference internal" href="#interaction-with-the-gnss-interface">Interaction with the GNSS interface</a></li>
<li class="toctree-l4"><a class="reference internal" href="#api-documentation">API documentation</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="nrf_cloud_rest.html">nRF Cloud REST</a></li>
<li class="toctree-l3"><a class="reference internal" href="rest_client.html">REST client</a></li>
<li class="toctree-l3"><a class="reference internal" href="wifi_credentials.html">Wi-Fi credentials</a></li>
<li class="toctree-l3"><a class="reference internal" href="wifi_mgmt_ext.html">Wi-Fi management extension</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../nfc/index.html">Libraries for NFC</a></li>
<li class="toctree-l2"><a class="reference internal" href="../nrf_rpc/index.html">nRF RPC libraries</a></li>
<li class="toctree-l2"><a class="reference internal" href="../others/index.html">Other libraries</a></li>
<li class="toctree-l2"><a class="reference internal" href="../shell/index.html">Shell libraries</a></li>
<li class="toctree-l2"><a class="reference internal" href="../tfm/index.html">TF-M libraries</a></li>
<li class="toctree-l2"><a class="reference internal" href="../zigbee/index.html">Libraries for Zigbee</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../scripts.html">Scripts</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../release_notes.html">Release notes</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../known_issues.html">Known issues</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../software_maturity.html">Software maturity levels</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../documentation.html">About this documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../glossary.html">Glossary</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">nRF Connect SDK</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../../index.html" class="icon icon-home"></a></li>
          <li class="breadcrumb-item"><a href="../index.html">Libraries</a></li>
          <li class="breadcrumb-item"><a href="index.html">Libraries for networking</a></li>
      <li class="breadcrumb-item active">nRF Cloud P-GPS</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../../_sources/libraries/networking/nrf_cloud_pgps.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="nrf-cloud-p-gps">
<span id="lib-nrf-cloud-pgps"></span><h1>nRF Cloud P-GPS<a class="headerlink" href="#nrf-cloud-p-gps" title="Permalink to this heading"></a></h1>
<div class="contents local topic" id="contents">
<ul class="simple">
<li><p><a class="reference internal" href="#overview" id="id7">Overview</a></p></li>
<li><p><a class="reference internal" href="#configuration" id="id8">Configuration</a></p></li>
<li><p><a class="reference internal" href="#initialization" id="id9">Initialization</a></p></li>
<li><p><a class="reference internal" href="#time" id="id10">Time</a></p></li>
<li><p><a class="reference internal" href="#transport-mechanisms" id="id11">Transport mechanisms</a></p></li>
<li><p><a class="reference internal" href="#requesting-and-processing-p-gps-data" id="id12">Requesting and processing P-GPS data</a></p></li>
<li><p><a class="reference internal" href="#finding-a-prediction-and-injecting-to-modem" id="id13">Finding a prediction and injecting to modem</a></p></li>
<li><p><a class="reference internal" href="#interaction-with-the-gnss-interface" id="id14">Interaction with the GNSS interface</a></p></li>
<li><p><a class="reference internal" href="#api-documentation" id="id15">API documentation</a></p></li>
</ul>
</div>
<p>The nRF Cloud P-GPS library enables applications to request and process <a class="reference internal" href="../../glossary.html#term-Predicted-GPS-P-GPS"><span class="xref std std-term">Predicted GPS (P-GPS)</span></a> data from <a class="reference external" href="https://nrfcloud.com/">nRF Cloud</a> to be used with the nRF9160 SiP.
This library is an enhancement to the <a class="reference internal" href="nrf_cloud.html#lib-nrf-cloud"><span class="std std-ref">nRF Cloud</span></a> library.
It can be used with or without <a class="reference internal" href="../../glossary.html#term-Assisted-GPS-A-GPS"><span class="xref std std-term">Assisted GPS (A-GPS)</span></a> data from nRF Cloud.</p>
<section id="overview">
<h2><a class="toc-backref" href="#id7">Overview</a><a class="headerlink" href="#overview" title="Permalink to this heading"></a></h2>
<p>To get a position fix, a <a class="reference internal" href="../../glossary.html#term-Global-Navigation-Satellite-System-GNSS"><span class="xref std std-term">Global Navigation Satellite System (GNSS)</span></a> receiver needs information such as the satellite orbital data, exact date and time of the day, and accurate hardware clock frequency data.
GPS satellites broadcast this information in a pattern that repeats every 12.5 minutes.</p>
<p>Predicted GPS (P-GPS) is a form of assistance that reduces the <a class="reference internal" href="../../glossary.html#term-Time-to-First-Fix-TTFF"><span class="xref std std-term">Time to First Fix (TTFF)</span></a>, the time needed by a GNSS module to estimate its position.
It is provided through <a class="reference internal" href="../../glossary.html#term-nRF-Cloud"><span class="xref std std-term">nRF Cloud</span></a> services.
In P-GPS, nRF Cloud provides data containing information about the estimated orbits (<a class="reference external" href="https://en.wikipedia.org/wiki/Ephemeris">Ephemerides</a>) of the 32 GPS satellites for up to two weeks.
Each set of ephemerides predictions is valid for a specific four-hour period within the set of all provided predictions.
A device using P-GPS downloads the ephemeris predictions from the cloud, stores them in its flash memory, and later injects them into the GNSS module when needed.</p>
<p>P-GPS is designed for devices that are frequently disconnected from the cloud but need periodic GNSS fixes as quickly as possible to save power.
This is possible because a device can download the broadcasted information and predictions of satellite data provided through P-GPS (or also A-GPS) at a faster rate from nRF Cloud than from the data links of the satellites.
However, P-GPS should not be used for general use cases that already work with <a class="reference internal" href="../../glossary.html#term-Assisted-GPS-A-GPS"><span class="xref std std-term">Assisted GPS (A-GPS)</span></a> only.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>When using two-week ephemeris prediction sets, the TTFF towards the end of the second week increases due to the accumulated errors in the predictions and the decreases in the number of satellite ephemerides in the later prediction periods.</p>
</div>
<p>P-GPS requires a cloud connection approximately once a week, depending on the configuration settings.
A-GPS assistance data expires after two hours.
A-GPS downloads new assistance data from the cloud to replace expired data when your application requests a position fix.</p>
<p>A device can use P-GPS together with A-GPS.
This provides the following advantages:</p>
<ul class="simple">
<li><p>It shortens TTFF compared to using only P-GPS.</p></li>
<li><p>It requires less cloud data during each fix compared to using only A-GPS.</p></li>
</ul>
<p>With proper configuration, A-GPS can be used with P-GPS when a cloud connection is available, and it can acquire fast fixes even without a cloud connection.
This is possible as long as the stored P-GPS data is still valid, and the current date and time (accurate to a few seconds) and the most recent location (accurate to a few dozen kilometers) are known.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>To use the nRF Cloud P-GPS service, you need an nRF Cloud account, and the device needs to be associated with the account.</p>
</div>
</section>
<section id="configuration">
<h2><a class="toc-backref" href="#id8">Configuration</a><a class="headerlink" href="#configuration" title="Permalink to this heading"></a></h2>
<p>Configure the <code class="xref kconfig kconfig-option docutils literal notranslate"><span class="pre">CONFIG_NRF_CLOUD_PGPS</span></code> Kconfig option to enable or disable the use of this library.</p>
<p>Configure one of the following options to control the network transport for P-GPS requests and responses:</p>
<ul class="simple">
<li><p><code class="xref kconfig kconfig-option docutils literal notranslate"><span class="pre">CONFIG_NRF_CLOUD_PGPS_TRANSPORT_MQTT</span></code></p></li>
<li><p><code class="xref kconfig kconfig-option docutils literal notranslate"><span class="pre">CONFIG_NRF_CLOUD_PGPS_TRANSPORT_NONE</span></code></p></li>
</ul>
<p>Configure one of the following options to control the network transport for downloading P-GPS predictions:</p>
<ul class="simple">
<li><p><code class="xref kconfig kconfig-option docutils literal notranslate"><span class="pre">CONFIG_NRF_CLOUD_PGPS_DOWNLOAD_TRANSPORT_HTTP</span></code></p></li>
<li><p><code class="xref kconfig kconfig-option docutils literal notranslate"><span class="pre">CONFIG_NRF_CLOUD_PGPS_DOWNLOAD_TRANSPORT_CUSTOM</span></code></p></li>
</ul>
<p>Configure these additional options to refine the behavior of P-GPS:</p>
<ul class="simple">
<li><p><code class="xref kconfig kconfig-option docutils literal notranslate"><span class="pre">CONFIG_NRF_CLOUD_PGPS_PREDICTION_PERIOD</span></code></p></li>
<li><p><code class="xref kconfig kconfig-option docutils literal notranslate"><span class="pre">CONFIG_NRF_CLOUD_PGPS_NUM_PREDICTIONS</span></code></p></li>
<li><p><code class="xref kconfig kconfig-option docutils literal notranslate"><span class="pre">CONFIG_NRF_CLOUD_PGPS_REPLACEMENT_THRESHOLD</span></code></p></li>
<li><p><code class="xref kconfig kconfig-option docutils literal notranslate"><span class="pre">CONFIG_NRF_CLOUD_PGPS_DOWNLOAD_FRAGMENT_SIZE</span></code></p></li>
<li><p><code class="xref kconfig kconfig-option docutils literal notranslate"><span class="pre">CONFIG_NRF_CLOUD_PGPS_REQUEST_UPON_INIT</span></code></p></li>
</ul>
<p>Configure the <code class="xref kconfig kconfig-option docutils literal notranslate"><span class="pre">CONFIG_NRF_CLOUD_AGPS</span></code> option if you need your application to also use A-GPS, for time and coarse position data and to get the fastest TTFF.
Using A-GPS also improves the accuracy because of ionospheric corrections.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Disable this option if you do not want to use A-GPS (due to data costs or expected frequent loss of cloud connectivity).</p>
</div>
<p>You must also configure the following options for storing settings, for having accurate clock time, and for having a location to store predictions:</p>
<ul class="simple">
<li><p><code class="xref kconfig kconfig-option docutils literal notranslate"><span class="pre">CONFIG_FLASH</span></code></p></li>
<li><p><code class="xref kconfig kconfig-option docutils literal notranslate"><span class="pre">CONFIG_FCB</span></code></p></li>
<li><p><code class="xref kconfig kconfig-option docutils literal notranslate"><span class="pre">CONFIG_SETTINGS_FCB</span></code></p></li>
<li><p><code class="xref kconfig kconfig-option docutils literal notranslate"><span class="pre">CONFIG_DATE_TIME</span></code></p></li>
</ul>
<p>The P-GPS library requires a storage location in the flash memory for storing the P-GPS prediction data.
There are three ways to define this storage location:</p>
<ul>
<li><p>To use a dedicated partition, enable the <code class="xref kconfig kconfig-option docutils literal notranslate"><span class="pre">CONFIG_NRF_CLOUD_PGPS_STORAGE_PARTITION</span></code> option.</p>
<p>By default, this partition is stored in the main SoC flash.
This partition can optionally be located in external flash for the nRF9160 development kit version 0.14.0 and later.
This conserves space in the main flash for storing code or other data.</p>
<p>To use an external flash partition, enable the following options in your project’s configuration file or place them in a configuration overlay file (for example <code class="file docutils literal notranslate"><span class="pre">samples/nrf9160/nrf_cloud_mqtt_multi_service/overlay_pgps_ext_flash.conf</span></code>):</p>
</li>
<li><p><code class="xref kconfig kconfig-option docutils literal notranslate"><span class="pre">CONFIG_SPI</span></code></p></li>
<li><p><code class="xref kconfig kconfig-option docutils literal notranslate"><span class="pre">CONFIG_SPI_NOR</span></code></p></li>
<li><p><code class="xref kconfig kconfig-option docutils literal notranslate"><span class="pre">CONFIG_PM_OVERRIDE_EXTERNAL_DRIVER_CHECK</span></code></p></li>
<li><p><code class="xref kconfig kconfig-option docutils literal notranslate"><span class="pre">CONFIG_NRF_CLOUD_PGPS_STORAGE_PARTITION</span></code></p></li>
<li><p><code class="xref kconfig kconfig-option docutils literal notranslate"><span class="pre">CONFIG_PM_PARTITION_REGION_PGPS_EXTERNAL</span></code></p></li>
<li><p><code class="xref kconfig kconfig-option docutils literal notranslate"><span class="pre">CONFIG_SPI_NOR_FLASH_LAYOUT_PAGE_SIZE</span></code> set to 4096</p>
<p>If you are using the P-GPS external flash partition and full modem FOTA, ensure the FMFU partition is also enabled:</p>
</li>
<li><p><code class="xref kconfig kconfig-option docutils literal notranslate"><span class="pre">CONFIG_DFU_TARGET_FULL_MODEM_USE_EXT_PARTITION</span></code></p>
<p>Also, specify your development kit version by appending it to the board name.
For example, if your development kit version is 1.0.1, use the following board name in your build command:</p>
<p><code class="docutils literal notranslate"><span class="pre">nrf9160dk_nrf9160_ns&#64;1_0_1</span></code></p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>If you fail to specify the version, the build system selects a baseline board version which does not include external flash.
This results in a build failure:</p>
<div class="highlight highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">devicetree</span> <span class="n">error</span><span class="p">:</span> <span class="o">/</span><span class="n">chosen</span><span class="p">:</span> <span class="n">undefined</span> <span class="n">node</span> <span class="n">label</span> <span class="s1">&#39;mx25r64&#39;</span>
</pre></div>
</div>
</div>
<p>Finally, add the following to a device tree overlay for your board.</p>
</li>
</ul>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">/ {</span>
<span class="go">  chosen {</span>
<span class="go">    nordic,pm-ext-flash = &amp;mx25r64;</span>
<span class="go">  };</span>
<span class="go">};</span>

<span class="go">/* Enable high drive mode for the SPI3 pins to get a square signal at 8 MHz */</span>
<span class="go">&amp;spi3_default {</span>
<span class="go">  group1 {</span>
<span class="go">    nordic,drive-mode = &lt;NRF_DRIVE_H0H1&gt;;</span>
<span class="go">  };</span>
<span class="go">};</span>
</pre></div>
</div>
<p>This is typically placed in a file within your application’s source folder in a <code class="file docutils literal notranslate"><span class="pre">boards</span></code> subfolder.
See an example provided in the file <code class="file docutils literal notranslate"><span class="pre">samples/nrf9160/nrf_cloud_mqtt_multi_service/boards/nrf9160dk_nrf9160_ns_0_14_0.overlay</span></code>.</p>
<ul>
<li><p>To use the MCUboot secondary partition as storage, enable the <code class="xref kconfig kconfig-option docutils literal notranslate"><span class="pre">CONFIG_NRF_CLOUD_PGPS_STORAGE_MCUBOOT_SECONDARY</span></code> option.</p>
<p>Use this option if the flash memory for your application is too full to use a dedicated partition, and the application uses MCUboot for FOTA updates but not for MCUboot itself.</p>
<p>Do not use this option if you are using MCUboot as a second-stage upgradable bootloader and also have FOTA updates enabled for MCUboot itself, not just the application (using <code class="xref kconfig kconfig-option docutils literal notranslate"><span class="pre">CONFIG_SECURE_BOOT</span></code> and <code class="xref kconfig kconfig-option docutils literal notranslate"><span class="pre">CONFIG_BUILD_S1_VARIANT</span></code>).
Otherwise, the P-GPS library prevents the full completion of MCUboot update, and the first-stage immutable bootloader reverts MCUboot to its previous image.</p>
</li>
<li><p>To use an application-specific storage, enable the <code class="xref kconfig kconfig-option docutils literal notranslate"><span class="pre">CONFIG_NRF_CLOUD_PGPS_STORAGE_CUSTOM</span></code> option.</p>
<p>You must also pass the address and the size of your custom location in the flash memory to the <a class="reference internal" href="#c.nrf_cloud_pgps_init" title="nrf_cloud_pgps_init"><code class="xref c c-func docutils literal notranslate"><span class="pre">nrf_cloud_pgps_init()</span></code></a> function.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The address must be aligned to a flash page boundary, and the size must be equal to or greater than 2048 bytes times the <code class="xref kconfig kconfig-option docutils literal notranslate"><span class="pre">CONFIG_NRF_CLOUD_PGPS_NUM_PREDICTIONS</span></code> option.</p>
</div>
<p>Use the third option if you do not use MCUboot and you want complete control over the storing location of P-GPS data in the flash memory.</p>
</li>
</ul>
<p>See <a class="reference internal" href="../../getting_started/modifying.html#configure-application"><span class="std std-ref">Configuring your application</span></a> for information on how to change configuration options.</p>
</section>
<section id="initialization">
<h2><a class="toc-backref" href="#id9">Initialization</a><a class="headerlink" href="#initialization" title="Permalink to this heading"></a></h2>
<p>Ideally, once the device has connected to the cloud, the application must call the P-GPS initialization function.
If a connection is not available, initialization must still be called.
If the <code class="xref kconfig kconfig-option docutils literal notranslate"><span class="pre">CONFIG_NRF_CLOUD_PGPS_REQUEST_UPON_INIT</span></code> option is disabled, the initialization function does not automatically download missing P-GPS data.
In these cases, predictions might be unavailable until a connection is established to the cloud.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Each prediction requires 2 kB of flash.
For prediction period of 240 minutes (four hours), and with 42 predictions in a week, the flash requirement adds up to 84 kB.</p>
</div>
<p>The P-GPS subsystem’s <a class="reference internal" href="#c.nrf_cloud_pgps_init" title="nrf_cloud_pgps_init"><code class="xref c c-func docutils literal notranslate"><span class="pre">nrf_cloud_pgps_init()</span></code></a> function takes a pointer to a <a class="reference internal" href="#c.nrf_cloud_pgps_init_param" title="nrf_cloud_pgps_init_param"><code class="xref c c-struct docutils literal notranslate"><span class="pre">nrf_cloud_pgps_init_param</span></code></a> structure.
If the <code class="xref kconfig kconfig-option docutils literal notranslate"><span class="pre">CONFIG_NRF_CLOUD_PGPS_STORAGE_CUSTOM</span></code> option is enabled, the structure must specify the storage base address and the storage size in the flash memory where the P-GPS subsystem stores predictions.
It can optionally pass a pointer to a <a class="reference internal" href="#c.pgps_event_handler_t" title="pgps_event_handler_t"><code class="xref c c-func docutils literal notranslate"><span class="pre">pgps_event_handler_t()</span></code></a> callback function.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The storage base address must be aligned to the flash memory page boundary.</p>
</div>
</section>
<section id="time">
<h2><a class="toc-backref" href="#id10">Time</a><a class="headerlink" href="#time" title="Permalink to this heading"></a></h2>
<p>The proper operation of the P-GPS subsystem depends on an accurate sense of time.
For use cases where a cloud connection can be established easily, use the <a class="reference internal" href="../others/date_time.html#lib-date-time"><span class="std std-ref">Date-Time</span></a> library with NTP enabled.
Otherwise, use a battery-backed real-time clock calendar chip so that accurate time is available regardless of cloud availability after reset.</p>
</section>
<section id="transport-mechanisms">
<h2><a class="toc-backref" href="#id11">Transport mechanisms</a><a class="headerlink" href="#transport-mechanisms" title="Permalink to this heading"></a></h2>
<p>Complete these three steps to request and store P-GPS data in the device:</p>
<ol class="arabic simple">
<li><p>Send the request to <a class="reference external" href="https://nrfcloud.com/">nRF Cloud</a>.</p></li>
<li><p>Receive a URL from nRF Cloud pointing to the prediction set.</p></li>
<li><p>Download the predictions from the URL.</p></li>
</ol>
<p>The first two steps use the network transport defined by the <code class="xref kconfig kconfig-option docutils literal notranslate"><span class="pre">CONFIG_NRF_CLOUD_PGPS_TRANSPORT</span></code> option.</p>
<p>The default configuration selects the <code class="xref kconfig kconfig-option docutils literal notranslate"><span class="pre">CONFIG_NRF_CLOUD_PGPS_TRANSPORT_MQTT</span></code> option if the <code class="xref kconfig kconfig-option docutils literal notranslate"><span class="pre">CONFIG_NRF_CLOUD_MQTT</span></code> option is active.
MQTT use is built into the P-GPS library.</p>
<p>The library uses REST or other transports by means of the <code class="xref kconfig kconfig-option docutils literal notranslate"><span class="pre">CONFIG_NRF_CLOUD_PGPS_TRANSPORT_NONE</span></code> option.
REST support is not built into the P-GPS library and must be provided by the application.
The <a class="reference internal" href="../../samples/nrf9160/gnss/README.html#gnss-sample"><span class="std std-ref">nRF9160: GNSS</span></a> sample is one example of using REST.</p>
<p>The third step uses the network transport defined by the <code class="xref kconfig kconfig-option docutils literal notranslate"><span class="pre">CONFIG_NRF_CLOUD_PGPS_DOWNLOAD_TRANSPORT</span></code> option.</p>
<p>The P-GPS library uses the <code class="xref kconfig kconfig-option docutils literal notranslate"><span class="pre">CONFIG_NRF_CLOUD_PGPS_DOWNLOAD_TRANSPORT_HTTP</span></code> option when using MQTT for the main transport.
Applications that use REST for the main transport usually use the HTTP option for the download transport.
This download transport is built into the P-GPS library.</p>
<p>Alternatively, use the <code class="xref kconfig kconfig-option docutils literal notranslate"><span class="pre">CONFIG_NRF_CLOUD_PGPS_DOWNLOAD_TRANSPORT_CUSTOM</span></code> with <code class="xref kconfig kconfig-option docutils literal notranslate"><span class="pre">CONFIG_NRF_CLOUD_PGPS_TRANSPORT_NONE</span></code> to manage the full flow of data outside of the P-GPS library.
Call the following functions when using this configuration:</p>
<ol class="arabic simple">
<li><p><a class="reference internal" href="#c.nrf_cloud_pgps_begin_update" title="nrf_cloud_pgps_begin_update"><code class="xref c c-func docutils literal notranslate"><span class="pre">nrf_cloud_pgps_begin_update()</span></code></a></p></li>
<li><p><a class="reference internal" href="#c.nrf_cloud_pgps_process_update" title="nrf_cloud_pgps_process_update"><code class="xref c c-func docutils literal notranslate"><span class="pre">nrf_cloud_pgps_process_update()</span></code></a></p></li>
<li><p><a class="reference internal" href="#c.nrf_cloud_pgps_finish_update" title="nrf_cloud_pgps_finish_update"><code class="xref c c-func docutils literal notranslate"><span class="pre">nrf_cloud_pgps_finish_update()</span></code></a></p></li>
</ol>
</section>
<section id="requesting-and-processing-p-gps-data">
<h2><a class="toc-backref" href="#id12">Requesting and processing P-GPS data</a><a class="headerlink" href="#requesting-and-processing-p-gps-data" title="Permalink to this heading"></a></h2>
<p>The library offers two different ways to control the timing of P-GPS cloud requests:</p>
<ul>
<li><p>Direct</p>
<ul class="simple">
<li><p>If <code class="xref kconfig kconfig-option docutils literal notranslate"><span class="pre">CONFIG_NRF_CLOUD_PGPS_TRANSPORT_MQTT</span></code> is enabled:</p>
<ul>
<li><p>Call the function <a class="reference internal" href="#c.nrf_cloud_pgps_request_all" title="nrf_cloud_pgps_request_all"><code class="xref c c-func docutils literal notranslate"><span class="pre">nrf_cloud_pgps_request_all()</span></code></a> to request a full set of predictions.</p></li>
<li><p>Alternatively, pass a properly initialized <a class="reference internal" href="#c.gps_pgps_request" title="gps_pgps_request"><code class="xref c c-struct docutils literal notranslate"><span class="pre">gps_pgps_request</span></code></a> structure to the <a class="reference internal" href="#c.nrf_cloud_pgps_request" title="nrf_cloud_pgps_request"><code class="xref c c-func docutils literal notranslate"><span class="pre">nrf_cloud_pgps_request()</span></code></a> function.</p></li>
</ul>
</li>
<li><p>If <code class="xref kconfig kconfig-option docutils literal notranslate"><span class="pre">CONFIG_NRF_CLOUD_PGPS_TRANSPORT_NONE</span></code> and <code class="xref kconfig kconfig-option docutils literal notranslate"><span class="pre">CONFIG_NRF_CLOUD_REST</span></code> are enabled:</p>
<ul>
<li><p>Pass a properly initialized <a class="reference internal" href="nrf_cloud_rest.html#c.nrf_cloud_rest_pgps_request" title="nrf_cloud_rest_pgps_request"><code class="xref c c-struct docutils literal notranslate"><span class="pre">nrf_cloud_rest_pgps_request</span></code></a> structure to the <a class="reference internal" href="nrf_cloud_rest.html#c.nrf_cloud_rest_pgps_data_get" title="nrf_cloud_rest_pgps_data_get"><code class="xref c c-func docutils literal notranslate"><span class="pre">nrf_cloud_rest_pgps_data_get()</span></code></a> function.</p></li>
<li><p>Pass the response to the <a class="reference internal" href="#c.nrf_cloud_pgps_process" title="nrf_cloud_pgps_process"><code class="xref c c-func docutils literal notranslate"><span class="pre">nrf_cloud_pgps_process()</span></code></a> function.</p></li>
<li><p>If either call fails, call the <a class="reference internal" href="#c.nrf_cloud_pgps_request_reset" title="nrf_cloud_pgps_request_reset"><code class="xref c c-func docutils literal notranslate"><span class="pre">nrf_cloud_pgps_request_reset()</span></code></a> function.</p></li>
</ul>
</li>
</ul>
</li>
<li><p>Indirect</p>
<blockquote>
<div><ul class="simple">
<li><p>Call <a class="reference internal" href="#c.nrf_cloud_pgps_init" title="nrf_cloud_pgps_init"><code class="xref c c-func docutils literal notranslate"><span class="pre">nrf_cloud_pgps_init()</span></code></a>.</p></li>
<li><p>Call <a class="reference internal" href="#c.nrf_cloud_pgps_preemptive_updates" title="nrf_cloud_pgps_preemptive_updates"><code class="xref c c-func docutils literal notranslate"><span class="pre">nrf_cloud_pgps_preemptive_updates()</span></code></a>.</p></li>
<li><p>Call <a class="reference internal" href="#c.nrf_cloud_pgps_notify_prediction" title="nrf_cloud_pgps_notify_prediction"><code class="xref c c-func docutils literal notranslate"><span class="pre">nrf_cloud_pgps_notify_prediction()</span></code></a>.</p></li>
</ul>
</div></blockquote>
</li>
</ul>
<p>The indirect methods are used in the <a class="reference internal" href="../../applications/asset_tracker_v2/README.html#asset-tracker-v2"><span class="std std-ref">nRF9160: Asset Tracker v2</span></a> application.
They are simpler to use than the direct methods.
The direct method is used in the <a class="reference internal" href="../../samples/nrf9160/gnss/README.html#gnss-sample"><span class="std std-ref">nRF9160: GNSS</span></a> sample.</p>
<p>When nRF Cloud responds with the requested P-GPS data, the library sends the <code class="xref c c-enum docutils literal notranslate"><span class="pre">CLOUD_EVT_DATA_RECEIVED</span></code> event.
The application’s <code class="xref c c-func docutils literal notranslate"><span class="pre">cloud_evt_handler_t()</span></code> function receives this event.
The handler calls the <a class="reference internal" href="#c.nrf_cloud_pgps_process" title="nrf_cloud_pgps_process"><code class="xref c c-func docutils literal notranslate"><span class="pre">nrf_cloud_pgps_process()</span></code></a> function that parses the data and stores it.</p>
</section>
<section id="finding-a-prediction-and-injecting-to-modem">
<h2><a class="toc-backref" href="#id13">Finding a prediction and injecting to modem</a><a class="headerlink" href="#finding-a-prediction-and-injecting-to-modem" title="Permalink to this heading"></a></h2>
<p>A P-GPS prediction for the current date and time can be retrieved using one of the following methods:</p>
<ul class="simple">
<li><p>Directly, by calling the function <a class="reference internal" href="#c.nrf_cloud_pgps_find_prediction" title="nrf_cloud_pgps_find_prediction"><code class="xref c c-func docutils literal notranslate"><span class="pre">nrf_cloud_pgps_find_prediction()</span></code></a></p></li>
<li><p>Indirectly, by calling the function <a class="reference internal" href="#c.nrf_cloud_pgps_notify_prediction" title="nrf_cloud_pgps_notify_prediction"><code class="xref c c-func docutils literal notranslate"><span class="pre">nrf_cloud_pgps_notify_prediction()</span></code></a></p></li>
</ul>
<p>The indirect method is used in the <a class="reference internal" href="../../samples/nrf9160/gnss/README.html#gnss-sample"><span class="std std-ref">nRF9160: GNSS</span></a> sample and in the <a class="reference internal" href="../../applications/asset_tracker_v2/README.html#asset-tracker-v2"><span class="std std-ref">nRF9160: Asset Tracker v2</span></a> application.</p>
<p>The application can inject the data contained in the prediction to the GNSS module in the modem by calling the <a class="reference internal" href="#c.nrf_cloud_pgps_inject" title="nrf_cloud_pgps_inject"><code class="xref c c-func docutils literal notranslate"><span class="pre">nrf_cloud_pgps_inject()</span></code></a> function.
This must be done when event <code class="xref c c-enumerator docutils literal notranslate"><span class="pre">NRF_MODEM_GNSS_EVT_AGPS_REQ</span></code> is received from the GNSS interface.
After injecting the prediction, call the <a class="reference internal" href="#c.nrf_cloud_pgps_preemptive_updates" title="nrf_cloud_pgps_preemptive_updates"><code class="xref c c-func docutils literal notranslate"><span class="pre">nrf_cloud_pgps_preemptive_updates()</span></code></a> function to update the prediction set as needed.</p>
<p>A prediction is also automatically injected to the modem every four hours whenever the current prediction expires and the next one begins (if the next one is available in flash).</p>
</section>
<section id="interaction-with-the-gnss-interface">
<h2><a class="toc-backref" href="#id14">Interaction with the GNSS interface</a><a class="headerlink" href="#interaction-with-the-gnss-interface" title="Permalink to this heading"></a></h2>
<p>The P-GPS subsystem, like several other nRF Cloud subsystems, is event driven.</p>
<p>Following are the two GNSS events relating to P-GPS that an application receives through the GNSS interface:</p>
<ul class="simple">
<li><p><code class="xref c c-enumerator docutils literal notranslate"><span class="pre">NRF_MODEM_GNSS_EVT_AGPS_REQ</span></code> - Occurs when the GNSS module requires assistance data.</p></li>
<li><p><code class="xref c c-enumerator docutils literal notranslate"><span class="pre">NRF_MODEM_GNSS_EVT_FIX</span></code> - Occurs once a fix is attained.</p></li>
</ul>
<p>When the application receives the <code class="xref c c-enumerator docutils literal notranslate"><span class="pre">NRF_MODEM_GNSS_EVT_AGPS_REQ</span></code> event, it must call the <a class="reference internal" href="#c.nrf_cloud_pgps_notify_prediction" title="nrf_cloud_pgps_notify_prediction"><code class="xref c c-func docutils literal notranslate"><span class="pre">nrf_cloud_pgps_notify_prediction()</span></code></a> function.
This event results in the callback of the application’s <a class="reference internal" href="#c.pgps_event_handler_t" title="pgps_event_handler_t"><code class="xref c c-func docutils literal notranslate"><span class="pre">pgps_event_handler_t()</span></code></a> function when a valid P-GPS prediction set is available.
It passes the <a class="reference internal" href="#c.nrf_cloud_pgps_event_type.PGPS_EVT_AVAILABLE" title="PGPS_EVT_AVAILABLE"><code class="xref c c-enum docutils literal notranslate"><span class="pre">PGPS_EVT_AVAILABLE</span></code></a> event and a pointer to the <a class="reference internal" href="#c.nrf_cloud_pgps_prediction" title="nrf_cloud_pgps_prediction"><code class="xref c c-struct docutils literal notranslate"><span class="pre">nrf_cloud_pgps_prediction</span></code></a> structure to the handler.</p>
<p>The application must pass this prediction to the <a class="reference internal" href="#c.nrf_cloud_pgps_inject" title="nrf_cloud_pgps_inject"><code class="xref c c-func docutils literal notranslate"><span class="pre">nrf_cloud_pgps_inject()</span></code></a> function, along with either the <code class="xref c c-struct docutils literal notranslate"><span class="pre">nrf_modem_gnss_agps_data_frame</span></code> structure read from the GNSS interface after the <code class="xref c c-enumerator docutils literal notranslate"><span class="pre">NRF_MODEM_GNSS_EVT_AGPS_REQ</span></code> event or NULL.</p>
<p>If the device does not move distances longer than a few dozen kilometers before it gets a new GNSS fix, it can pass the latitude and longitude read after the <code class="xref c c-enumerator docutils literal notranslate"><span class="pre">NRF_MODEM_GNSS_EVT_FIX</span></code> event to the <a class="reference internal" href="#c.nrf_cloud_pgps_set_location" title="nrf_cloud_pgps_set_location"><code class="xref c c-func docutils literal notranslate"><span class="pre">nrf_cloud_pgps_set_location()</span></code></a> function.
The P-GPS subsystem uses this stored location for the next GNSS request for position assistance when A-GPS assistance is not enabled or is unavailable.
If the device moves further between fix attempts, such a mechanism can be detrimental to short TTFF, as the saved position might be too inaccurate to be useful.</p>
<p>The application can also call the <a class="reference internal" href="#c.nrf_cloud_pgps_preemptive_updates" title="nrf_cloud_pgps_preemptive_updates"><code class="xref c c-func docutils literal notranslate"><span class="pre">nrf_cloud_pgps_preemptive_updates()</span></code></a> function to discard expired predictions and replace them with newer ones, before the expiration of the entire set of predictions.
This can be useful in use cases where cloud connections are available infrequently.
The <code class="xref kconfig kconfig-option docutils literal notranslate"><span class="pre">CONFIG_NRF_CLOUD_PGPS_REPLACEMENT_THRESHOLD</span></code> option sets the minimum number of valid predictions remaining before such an update occurs.</p>
<p>For best performance, applications can call the P-GPS functions mentioned in this section from workqueue handlers rather than directly from various callback functions.</p>
<p>The P-GPS subsystem itself generates events that can be passed to a registered callback function.
See <a class="reference internal" href="#c.nrf_cloud_pgps_event_type" title="nrf_cloud_pgps_event_type"><code class="xref c c-enum docutils literal notranslate"><span class="pre">nrf_cloud_pgps_event_type</span></code></a>.</p>
</section>
<section id="api-documentation">
<h2><a class="toc-backref" href="#id15">API documentation</a><a class="headerlink" href="#api-documentation" title="Permalink to this heading"></a></h2>
<div class="line-block">
<div class="line">Header file: <code class="file docutils literal notranslate"><span class="pre">include/net/nrf_cloud_pgps.h</span></code></div>
<div class="line">Source files: <code class="file docutils literal notranslate"><span class="pre">subsys/net/lib/nrf_cloud/src/</span></code></div>
</div>
<dl>
<dt class="sig sig-object cpp">
<span class="target" id="group__nrf__cloud__pgps"></span><em><span class="pre">group</span></em> <span class="sig-name descname"><span class="pre">nrf_cloud_pgps</span></span></dt>
<dd><div class="breathe-sectiondef docutils container">
<p class="breathe-sectiondef-title rubric" id="breathe-section-title-defines">Defines</p>
<dl class="c macro">
<dt class="sig sig-object c" id="c.NRF_CLOUD_PGPS_NUM_SV">
<span class="target" id="group__nrf__cloud__pgps_1ga3fe5498c156d44668fadc1840f34a220"></span><span class="sig-name descname"><span class="n"><span class="pre">NRF_CLOUD_PGPS_NUM_SV</span></span></span><a class="headerlink" href="#c.NRF_CLOUD_PGPS_NUM_SV" title="Permalink to this definition"></a><br /></dt>
<dd></dd></dl>

<dl class="c macro">
<dt class="sig sig-object c" id="c.ETIMEUNKNOWN">
<span class="target" id="group__nrf__cloud__pgps_1ga4cabaf0e111e6c8c3ff00890ce66a435"></span><span class="sig-name descname"><span class="n"><span class="pre">ETIMEUNKNOWN</span></span></span><a class="headerlink" href="#c.ETIMEUNKNOWN" title="Permalink to this definition"></a><br /></dt>
<dd><p>P-GPS error code: current time unknown. </p>
</dd></dl>

<dl class="c macro">
<dt class="sig sig-object c" id="c.ELOADING">
<span class="target" id="group__nrf__cloud__pgps_1gaa47c8eb7d17845871eeb8ffbefaa078a"></span><span class="sig-name descname"><span class="n"><span class="pre">ELOADING</span></span></span><a class="headerlink" href="#c.ELOADING" title="Permalink to this definition"></a><br /></dt>
<dd><p>P-GPS error code: not found but loading in progress. </p>
</dd></dl>

<dl class="c macro">
<dt class="sig sig-object c" id="c.NRF_CLOUD_PGPS_EMPTY_EPHEM_HEALTH">
<span class="target" id="group__nrf__cloud__pgps_1ga083f6e019e6d7de58678c9640ed99908"></span><span class="sig-name descname"><span class="n"><span class="pre">NRF_CLOUD_PGPS_EMPTY_EPHEM_HEALTH</span></span></span><a class="headerlink" href="#c.NRF_CLOUD_PGPS_EMPTY_EPHEM_HEALTH" title="Permalink to this definition"></a><br /></dt>
<dd><p>Value to mark the ephemeris as unavailable for satellites for which no predictions are available from the cloud. </p>
</dd></dl>

</div>
<div class="breathe-sectiondef docutils container">
<p class="breathe-sectiondef-title rubric" id="breathe-section-title-typedefs">Typedefs</p>
<dl class="c type">
<dt class="sig sig-object c" id="c.pgps_event_handler_t">
<span class="target" id="group__nrf__cloud__pgps_1ga7ad2ea3e7e17c17ed3aad15ec722e8c1"></span><span class="k"><span class="pre">typedef</span></span><span class="w"> </span><span class="kt"><span class="pre">void</span></span><span class="w"> </span><span class="p"><span class="pre">(</span></span><span class="p"><span class="pre">*</span></span><span class="sig-name descname"><span class="n"><span class="pre">pgps_event_handler_t</span></span></span><span class="p"><span class="pre">)</span></span><span class="p"><span class="pre">(</span></span><span class="k"><span class="pre">struct</span></span><span class="w"> </span><a class="reference internal" href="#c.nrf_cloud_pgps_event" title="nrf_cloud_pgps_event"><span class="n"><span class="pre">nrf_cloud_pgps_event</span></span></a><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">event</span></span><span class="p"><span class="pre">)</span></span><a class="headerlink" href="#c.pgps_event_handler_t" title="Permalink to this definition"></a><br /></dt>
<dd><p>Event handler registered with the module to handle asynchronous events from the module. </p>
<dl class="field-list simple">
<dt class="field-odd">Param event</dt>
<dd class="field-odd"><p><strong>[in]</strong> The event that just occurred. </p>
</dd>
</dl>
</dd></dl>

</div>
<div class="breathe-sectiondef docutils container">
<p class="breathe-sectiondef-title rubric" id="breathe-section-title-enums">Enums</p>
<dl class="c enum">
<dt class="sig sig-object c" id="c.nrf_cloud_pgps_event_type">
<span class="target" id="group__nrf__cloud__pgps_1ga9067506754060c359049f5fb95be68a2"></span><span class="k"><span class="pre">enum</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">nrf_cloud_pgps_event_type</span></span></span><a class="headerlink" href="#c.nrf_cloud_pgps_event_type" title="Permalink to this definition"></a><br /></dt>
<dd><p>P-GPS event passed to the registered pgps_event_handler. </p>
<p><em>Values:</em></p>
<dl class="c enumerator">
<dt class="sig sig-object c" id="c.nrf_cloud_pgps_event_type.PGPS_EVT_INIT">
<span class="target" id="group__nrf__cloud__pgps_1gga9067506754060c359049f5fb95be68a2a8da5f6663b11a4e60e1d37cd84cff0ca"></span><span class="k"><span class="pre">enumerator</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">PGPS_EVT_INIT</span></span></span><a class="headerlink" href="#c.nrf_cloud_pgps_event_type.PGPS_EVT_INIT" title="Permalink to this definition"></a><br /></dt>
<dd><p>P-GPS initialization beginning. </p>
</dd></dl>

<dl class="c enumerator">
<dt class="sig sig-object c" id="c.nrf_cloud_pgps_event_type.PGPS_EVT_UNAVAILABLE">
<span class="target" id="group__nrf__cloud__pgps_1gga9067506754060c359049f5fb95be68a2a569377c066858fe774ce7c770d315135"></span><span class="k"><span class="pre">enumerator</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">PGPS_EVT_UNAVAILABLE</span></span></span><a class="headerlink" href="#c.nrf_cloud_pgps_event_type.PGPS_EVT_UNAVAILABLE" title="Permalink to this definition"></a><br /></dt>
<dd><p>There are currently no P-GPS predictions available. </p>
</dd></dl>

<dl class="c enumerator">
<dt class="sig sig-object c" id="c.nrf_cloud_pgps_event_type.PGPS_EVT_LOADING">
<span class="target" id="group__nrf__cloud__pgps_1gga9067506754060c359049f5fb95be68a2a4eee3c1d21a948a8a9a33a78c3d60d9a"></span><span class="k"><span class="pre">enumerator</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">PGPS_EVT_LOADING</span></span></span><a class="headerlink" href="#c.nrf_cloud_pgps_event_type.PGPS_EVT_LOADING" title="Permalink to this definition"></a><br /></dt>
<dd><p>P-GPS predictions are being loaded from the cloud. </p>
</dd></dl>

<dl class="c enumerator">
<dt class="sig sig-object c" id="c.nrf_cloud_pgps_event_type.PGPS_EVT_AVAILABLE">
<span class="target" id="group__nrf__cloud__pgps_1gga9067506754060c359049f5fb95be68a2a9a25706f4a77764993a550412ac53900"></span><span class="k"><span class="pre">enumerator</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">PGPS_EVT_AVAILABLE</span></span></span><a class="headerlink" href="#c.nrf_cloud_pgps_event_type.PGPS_EVT_AVAILABLE" title="Permalink to this definition"></a><br /></dt>
<dd><p>A P-GPS prediction is available now for the current date and time. The prediction pointer in the associated <a class="reference internal" href="#structnrf__cloud__pgps__event"><span class="std std-ref">nrf_cloud_pgps_event</span></a> structure points to the prediction. </p>
</dd></dl>

<dl class="c enumerator">
<dt class="sig sig-object c" id="c.nrf_cloud_pgps_event_type.PGPS_EVT_READY">
<span class="target" id="group__nrf__cloud__pgps_1gga9067506754060c359049f5fb95be68a2ac22427df240c95724e97ac43b18fc629"></span><span class="k"><span class="pre">enumerator</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">PGPS_EVT_READY</span></span></span><a class="headerlink" href="#c.nrf_cloud_pgps_event_type.PGPS_EVT_READY" title="Permalink to this definition"></a><br /></dt>
<dd><p>All P-GPS predictions are available. </p>
</dd></dl>

<dl class="c enumerator">
<dt class="sig sig-object c" id="c.nrf_cloud_pgps_event_type.PGPS_EVT_REQUEST">
<span class="target" id="group__nrf__cloud__pgps_1gga9067506754060c359049f5fb95be68a2a58c0adf808d09dc1a0f562607c8676da"></span><span class="k"><span class="pre">enumerator</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">PGPS_EVT_REQUEST</span></span></span><a class="headerlink" href="#c.nrf_cloud_pgps_event_type.PGPS_EVT_REQUEST" title="Permalink to this definition"></a><br /></dt>
<dd><p>A P-GPS request has been created for missing predictions. The event has payload in the form of <a class="reference internal" href="#structgps__pgps__request"><span class="std std-ref">gps_pgps_request</span></a>. The event is intended to be used when CONFIG_NRF_CLOUD_PGPS_TRANSPORT_MQTT is disabled to let the application decide when and how to use the request information. This event type is not received if CONFIG_NRF_CLOUD_PGPS_TRANSPORT_MQTT is enabled. </p>
</dd></dl>

</dd></dl>

</div>
<div class="breathe-sectiondef docutils container">
<p class="breathe-sectiondef-title rubric" id="breathe-section-title-functions">Functions</p>
<dl class="c function">
<dt class="sig sig-object c" id="c.nrf_cloud_pgps_set_location_normalized">
<span class="target" id="group__nrf__cloud__pgps_1gadb8f13aa83fa6f92854a8a0a216a3098"></span><span class="kt"><span class="pre">void</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">nrf_cloud_pgps_set_location_normalized</span></span></span><span class="sig-paren">(</span><span class="n"><span class="pre">int32_t</span></span><span class="w"> </span><span class="n"><span class="pre">latitude</span></span>, <span class="n"><span class="pre">int32_t</span></span><span class="w"> </span><span class="n"><span class="pre">longitude</span></span><span class="sig-paren">)</span><a class="headerlink" href="#c.nrf_cloud_pgps_set_location_normalized" title="Permalink to this definition"></a><br /></dt>
<dd><p>Update storage of the most recent known location, in modem-specific normalized format (int32_t). Current time is also stored. Normalization: (latitude / 90.0) * (1 &lt;&lt; 23) (longitude / 360.0) * (1 &lt;&lt; 24) </p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>latitude</strong> – Current latitude normalized. </p></li>
<li><p><strong>longitude</strong> – Current longitude in normalized. </p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="c function">
<dt class="sig sig-object c" id="c.nrf_cloud_pgps_set_location">
<span class="target" id="group__nrf__cloud__pgps_1gaf29a7a0c52d92927f4a013e40e41fc83"></span><span class="kt"><span class="pre">void</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">nrf_cloud_pgps_set_location</span></span></span><span class="sig-paren">(</span><span class="kt"><span class="pre">double</span></span><span class="w"> </span><span class="n"><span class="pre">latitude</span></span>, <span class="kt"><span class="pre">double</span></span><span class="w"> </span><span class="n"><span class="pre">longitude</span></span><span class="sig-paren">)</span><a class="headerlink" href="#c.nrf_cloud_pgps_set_location" title="Permalink to this definition"></a><br /></dt>
<dd><p>Update the storage of the most recent known location in degrees. This will be injected along with the current time and relevant predicted ephemerides to the GPS unit in order to get the fastest possible fix, when the P-GPS subsystem is built with A-GPS disabled, or when A-GPS data is unavailable due to lack of a cloud connection. Current time is also stored. </p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>latitude</strong> – Current latitude in degrees. </p></li>
<li><p><strong>longitude</strong> – Current longitude in degrees. </p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="c function">
<dt class="sig sig-object c" id="c.nrf_cloud_pgps_clear_location">
<span class="target" id="group__nrf__cloud__pgps_1ga78813e5fd14bdcc2520c490698d95b58"></span><span class="kt"><span class="pre">void</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">nrf_cloud_pgps_clear_location</span></span></span><span class="sig-paren">(</span><span class="kt"><span class="pre">void</span></span><span class="sig-paren">)</span><a class="headerlink" href="#c.nrf_cloud_pgps_clear_location" title="Permalink to this definition"></a><br /></dt>
<dd><p>If location has previously been set, clear it. The application should do this if significant distances might have been travelled since the previous location was saved. </p>
</dd></dl>

<dl class="c function">
<dt class="sig sig-object c" id="c.nrf_cloud_pgps_set_leap_seconds">
<span class="target" id="group__nrf__cloud__pgps_1ga603581ced037947814377e093d5e80df"></span><span class="kt"><span class="pre">void</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">nrf_cloud_pgps_set_leap_seconds</span></span></span><span class="sig-paren">(</span><span class="kt"><span class="pre">int</span></span><span class="w"> </span><span class="n"><span class="pre">leap_seconds</span></span><span class="sig-paren">)</span><a class="headerlink" href="#c.nrf_cloud_pgps_set_leap_seconds" title="Permalink to this definition"></a><br /></dt>
<dd><p>Update the storage of the leap second offset between GPS time and UTC. This called automatically by the A-GPS subsystem (if enabled) when it receives a UTC assistance element, setting leap_seconds to the delta_tls field. </p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>leap_seconds</strong> – Offset in seconds. </p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="c function">
<dt class="sig sig-object c" id="c.nrf_cloud_pgps_notify_prediction">
<span class="target" id="group__nrf__cloud__pgps_1ga84ecdc347d93b591c8723f43f7d422ae"></span><span class="kt"><span class="pre">int</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">nrf_cloud_pgps_notify_prediction</span></span></span><span class="sig-paren">(</span><span class="kt"><span class="pre">void</span></span><span class="sig-paren">)</span><a class="headerlink" href="#c.nrf_cloud_pgps_notify_prediction" title="Permalink to this definition"></a><br /></dt>
<dd><p>Schedule a callback when prediction for current time is available. Callback could be immediate, if data already stored in Flash, or later, after loading from the cloud. </p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>0 if scheduled successfully, or negative error code if could not send request to cloud. </p>
</dd>
</dl>
</dd></dl>

<dl class="c function">
<dt class="sig sig-object c" id="c.nrf_cloud_pgps_find_prediction">
<span class="target" id="group__nrf__cloud__pgps_1gac2a7ea3c51d520a4254a03e6831e6c06"></span><span class="kt"><span class="pre">int</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">nrf_cloud_pgps_find_prediction</span></span></span><span class="sig-paren">(</span><span class="k"><span class="pre">struct</span></span><span class="w"> </span><a class="reference internal" href="#c.nrf_cloud_pgps_prediction" title="nrf_cloud_pgps_prediction"><span class="n"><span class="pre">nrf_cloud_pgps_prediction</span></span></a><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">prediction</span></span><span class="sig-paren">)</span><a class="headerlink" href="#c.nrf_cloud_pgps_find_prediction" title="Permalink to this definition"></a><br /></dt>
<dd><p>Tries to find an appropriate GPS prediction for the current time. </p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>prediction</strong> – Pointer to a pointer to a prediction; the pointer at this pointer will be modified to point to the prediction if the return value is 0. Will be set to NULL on failure.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>0..NumPredictions-1 if successful; -ETIMEUNKNOWN if current date and time not known; -ETIMEDOUT if all predictions stored are expired; -EINVAL if prediction for the current time is invalid. </p>
</dd>
</dl>
</dd></dl>

<dl class="c function">
<dt class="sig sig-object c" id="c.nrf_cloud_pgps_request">
<span class="target" id="group__nrf__cloud__pgps_1gab4603fca0b5c9a06b3fa536908b71e25"></span><span class="kt"><span class="pre">int</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">nrf_cloud_pgps_request</span></span></span><span class="sig-paren">(</span><span class="k"><span class="pre">const</span></span><span class="w"> </span><span class="k"><span class="pre">struct</span></span><span class="w"> </span><a class="reference internal" href="#c.gps_pgps_request" title="gps_pgps_request"><span class="n"><span class="pre">gps_pgps_request</span></span></a><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">request</span></span><span class="sig-paren">)</span><a class="headerlink" href="#c.nrf_cloud_pgps_request" title="Permalink to this definition"></a><br /></dt>
<dd><p>Requests specified P-GPS data from nRF Cloud via MQTT. Not used for other transports. </p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>request</strong> – Pointer to structure specifying what P-GPS data is desired. The request may fail if there no cloud connection; if the specified GPS day and GPS time of day is in the past or more than 2 weeks in the future; if the GPS time of day is larger than 86339; or if the prediction_period_min field is not within the range 120 to 480.</p></li>
</ul>
</dd>
<dt class="field-even">Return values</dt>
<dd class="field-even"><ul class="simple">
<li><p><strong>0</strong> – Request sent successfully. </p></li>
<li><p><strong>-EACCES</strong> – Cloud connection is not established; wait for <a class="reference internal" href="nrf_cloud.html#group__nrf__cloud_1ggabfa69ba752561f778c2f055e1ef7c46faefde723fbee891cc13ce5d016f9eeac2"><span class="std std-ref">NRF_CLOUD_EVT_READY</span></a>. </p></li>
</ul>
</dd>
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>A negative value indicates an error. </p>
</dd>
</dl>
</dd></dl>

<dl class="c function">
<dt class="sig sig-object c" id="c.nrf_cloud_pgps_request_all">
<span class="target" id="group__nrf__cloud__pgps_1ga89930137d32fa254423ebe1184e122bb"></span><span class="kt"><span class="pre">int</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">nrf_cloud_pgps_request_all</span></span></span><span class="sig-paren">(</span><span class="kt"><span class="pre">void</span></span><span class="sig-paren">)</span><a class="headerlink" href="#c.nrf_cloud_pgps_request_all" title="Permalink to this definition"></a><br /></dt>
<dd><p>Requests all available P-GPS data from nRF Cloud via MQTT. Not used for other transports. </p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>0 if successful, otherwise a (negative) error code. </p>
</dd>
</dl>
</dd></dl>

<dl class="c function">
<dt class="sig sig-object c" id="c.nrf_cloud_pgps_begin_update">
<span class="target" id="group__nrf__cloud__pgps_1ga705247e1dc647a8130fdbc5cfaa247d1"></span><span class="kt"><span class="pre">int</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">nrf_cloud_pgps_begin_update</span></span></span><span class="sig-paren">(</span><span class="kt"><span class="pre">void</span></span><span class="sig-paren">)</span><a class="headerlink" href="#c.nrf_cloud_pgps_begin_update" title="Permalink to this definition"></a><br /></dt>
<dd><p>Use this function when you use a custom transport mechanism for downloading prediction data. When your pgps_event_handler_t receives a PGPS_EVT_REQUEST event, send the P-GPS request to the cloud over your transport, then call this function. This function resets the internal state of the library and prepares the flash storage to receive incoming data. </p>
<p>The library calls this automatically for HTTP(S) transports.</p>
<dl class="field-list simple">
<dt class="field-odd">Return values</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>0</strong> – Ready for updating. </p></li>
<li><p><strong>-ENOMEM</strong> – No free space in P-GPS flash storage area. </p></li>
<li><p><strong>-EBUSY</strong> – P-GPS download already in progress. </p></li>
<li><p><strong>-ENODEV</strong> – Flash device is not ready. </p></li>
<li><p><strong>-EFAULT</strong> – Error accessing flash stream. </p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>a negative value indicates an error. </p>
</dd>
</dl>
</dd></dl>

<dl class="c function">
<dt class="sig sig-object c" id="c.nrf_cloud_pgps_process_update">
<span class="target" id="group__nrf__cloud__pgps_1ga21b4ac5d6d281864adab846dd11dc370"></span><span class="kt"><span class="pre">int</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">nrf_cloud_pgps_process_update</span></span></span><span class="sig-paren">(</span><span class="n"><span class="pre">uint8_t</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">buf</span></span>, <span class="n"><span class="pre">size_t</span></span><span class="w"> </span><span class="n"><span class="pre">len</span></span><span class="sig-paren">)</span><a class="headerlink" href="#c.nrf_cloud_pgps_process_update" title="Permalink to this definition"></a><br /></dt>
<dd><p>Call this function when your transport receives a block of prediction data. Prediction data must be received in file order. </p>
<p>The library calls this automatically for HTTP(S) transports.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>buf</strong> – Pointer to P-GPS data received from transport. </p></li>
<li><p><strong>len</strong> – Size of P-GPS data chunk received from transport. </p></li>
</ul>
</dd>
<dt class="field-even">Return values</dt>
<dd class="field-even"><ul class="simple">
<li><p><strong>0</strong> – Buffer processed. </p></li>
<li><p><strong>-EINVAL</strong> – Invalid parameter to function or invalid header in P-GPS data received. </p></li>
<li><p><strong>-ENODATA</strong> – Unable to determine current date and time. </p></li>
<li><p><strong>-ENOMEM</strong> – No free flash in P-GPS storage area. </p></li>
<li><p><strong>-EFAULT</strong> – Error writing to flash stream. </p></li>
</ul>
</dd>
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>a negative value indicates an error. </p>
</dd>
</dl>
</dd></dl>

<dl class="c function">
<dt class="sig sig-object c" id="c.nrf_cloud_pgps_finish_update">
<span class="target" id="group__nrf__cloud__pgps_1ga576bd7fdf3506829429900e2727317c2"></span><span class="kt"><span class="pre">int</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">nrf_cloud_pgps_finish_update</span></span></span><span class="sig-paren">(</span><span class="kt"><span class="pre">void</span></span><span class="sig-paren">)</span><a class="headerlink" href="#c.nrf_cloud_pgps_finish_update" title="Permalink to this definition"></a><br /></dt>
<dd><p>Call this function regardless of whether the download succeeded or failed. </p>
<p>The library calls this automatically for HTTP(S) transports.</p>
<p>For custom transports, the application must call this for transport error, error from a call to <a class="reference internal" href="#group__nrf__cloud__pgps_1ga21b4ac5d6d281864adab846dd11dc370"><span class="std std-ref">nrf_cloud_pgps_process_update()</span></a>, as well as successful completion. Further, when an error occurs, the application must terminate the transfer.</p>
<dl class="field-list simple">
<dt class="field-odd">Return values</dt>
<dd class="field-odd"><p><strong>0</strong> – No failure. </p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>a negative value indicates an error. </p>
</dd>
</dl>
</dd></dl>

<dl class="c function">
<dt class="sig sig-object c" id="c.nrf_cloud_pgps_request_reset">
<span class="target" id="group__nrf__cloud__pgps_1ga6d3c7a8a93e5af1f74036cd88c26eb1a"></span><span class="kt"><span class="pre">void</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">nrf_cloud_pgps_request_reset</span></span></span><span class="sig-paren">(</span><span class="kt"><span class="pre">void</span></span><span class="sig-paren">)</span><a class="headerlink" href="#c.nrf_cloud_pgps_request_reset" title="Permalink to this definition"></a><br /></dt>
<dd><p>If previous request for P-GPS data failed, re-enable future retries. This should be called by the application after it attempts to handle PGPS_EVT_REQUEST, but is unable to complete it successfully. For example, it should be called if the cloud connection being used to transmit the request is temporarily unavailable. </p>
<p>No need to call when using the MQTT transport. </p>
</dd></dl>

<dl class="c function">
<dt class="sig sig-object c" id="c.nrf_cloud_pgps_process">
<span class="target" id="group__nrf__cloud__pgps_1gae5554df8baf4bb437a59a4d0a4d86b56"></span><span class="kt"><span class="pre">int</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">nrf_cloud_pgps_process</span></span></span><span class="sig-paren">(</span><span class="k"><span class="pre">const</span></span><span class="w"> </span><span class="kt"><span class="pre">char</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">buf</span></span>, <span class="n"><span class="pre">size_t</span></span><span class="w"> </span><span class="n"><span class="pre">buf_len</span></span><span class="sig-paren">)</span><a class="headerlink" href="#c.nrf_cloud_pgps_process" title="Permalink to this definition"></a><br /></dt>
<dd><p>Processes binary P-GPS data received from nRF Cloud over MQTT or REST. </p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>buf</strong> – Pointer to data received from nRF Cloud. </p></li>
<li><p><strong>buf_len</strong> – Buffer size of data to be processed.</p></li>
</ul>
</dd>
<dt class="field-even">Return values</dt>
<dd class="field-even"><ul class="simple">
<li><p><strong>0</strong> – A-GPS data successfully processed. </p></li>
<li><p><strong>-EFAULT</strong> – An nRF Cloud P-GPS error code was processed. </p></li>
</ul>
</dd>
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>A negative value indicates an error. </p>
</dd>
</dl>
</dd></dl>

<dl class="c function">
<dt class="sig sig-object c" id="c.nrf_cloud_pgps_inject">
<span class="target" id="group__nrf__cloud__pgps_1ga791c41d96c969f31e76fd98d8bcd04ab"></span><span class="kt"><span class="pre">int</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">nrf_cloud_pgps_inject</span></span></span><span class="sig-paren">(</span><span class="k"><span class="pre">struct</span></span><span class="w"> </span><a class="reference internal" href="#c.nrf_cloud_pgps_prediction" title="nrf_cloud_pgps_prediction"><span class="n"><span class="pre">nrf_cloud_pgps_prediction</span></span></a><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">p</span></span>, <span class="k"><span class="pre">const</span></span><span class="w"> </span><span class="k"><span class="pre">struct</span></span><span class="w"> </span><span class="n"><span class="pre">nrf_modem_gnss_agps_data_frame</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">request</span></span><span class="sig-paren">)</span><a class="headerlink" href="#c.nrf_cloud_pgps_inject" title="Permalink to this definition"></a><br /></dt>
<dd><p>Injects binary P-GPS data to the modem. If request is NULL, it is assumed that only ephemerides assistance should be injected. </p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>p</strong> – Pointer to a prediction. </p></li>
<li><p><strong>request</strong> – Which assistance elements the modem needs. May be NULL.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>0 if successful, otherwise a (negative) error code. </p>
</dd>
</dl>
</dd></dl>

<dl class="c function">
<dt class="sig sig-object c" id="c.nrf_cloud_pgps_loading">
<span class="target" id="group__nrf__cloud__pgps_1ga47c0ae7499f9295c074105cb49caa075"></span><span class="kt"><span class="pre">bool</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">nrf_cloud_pgps_loading</span></span></span><span class="sig-paren">(</span><span class="kt"><span class="pre">void</span></span><span class="sig-paren">)</span><a class="headerlink" href="#c.nrf_cloud_pgps_loading" title="Permalink to this definition"></a><br /></dt>
<dd><p>Find out if P-GPS update is in progress. </p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>True if request sent but loading not yet completed. </p>
</dd>
</dl>
</dd></dl>

<dl class="c function">
<dt class="sig sig-object c" id="c.nrf_cloud_pgps_preemptive_updates">
<span class="target" id="group__nrf__cloud__pgps_1ga967df3ae450fc68a1d3d645206f921f3"></span><span class="kt"><span class="pre">int</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">nrf_cloud_pgps_preemptive_updates</span></span></span><span class="sig-paren">(</span><span class="kt"><span class="pre">void</span></span><span class="sig-paren">)</span><a class="headerlink" href="#c.nrf_cloud_pgps_preemptive_updates" title="Permalink to this definition"></a><br /></dt>
<dd><p>Download more predictions if less than CONFIG_NRF_CLOUD_PGPS_REPLACEMENT_THRESHOLD predictions remain which are still valid. </p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>0 if successful, otherwise a (negative) error code. </p>
</dd>
</dl>
</dd></dl>

<dl class="c function">
<dt class="sig sig-object c" id="c.nrf_cloud_pgps_init">
<span class="target" id="group__nrf__cloud__pgps_1gaa3760641b9c349f8331a57a03c6f714e"></span><span class="kt"><span class="pre">int</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">nrf_cloud_pgps_init</span></span></span><span class="sig-paren">(</span><span class="k"><span class="pre">struct</span></span><span class="w"> </span><a class="reference internal" href="#c.nrf_cloud_pgps_init_param" title="nrf_cloud_pgps_init_param"><span class="n"><span class="pre">nrf_cloud_pgps_init_param</span></span></a><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">param</span></span><span class="sig-paren">)</span><a class="headerlink" href="#c.nrf_cloud_pgps_init" title="Permalink to this definition"></a><br /></dt>
<dd><p>Initialize P-GPS subsystem. Validates what is stored, then requests any missing predictions, or full set if expired or missing. When successful, it is ready to provide valid ephemeris predictions. </p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>It must return successfully before using P-GPS services.</p>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>param</strong> – <strong>[in]</strong> Initialization parameters.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>0 if valid or request begun; nonzero on error. </p>
</dd>
</dl>
</dd></dl>

</div>
<dl class="c struct">
<dt class="sig sig-object c" id="c.nrf_cloud_pgps_system_time">
<span class="target" id="structnrf__cloud__pgps__system__time"></span><span class="k"><span class="pre">struct</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">nrf_cloud_pgps_system_time</span></span></span><a class="headerlink" href="#c.nrf_cloud_pgps_system_time" title="Permalink to this definition"></a><br /></dt>
<dd><div class="docutils container">
<em>#include &lt;nrf_cloud_pgps.h&gt;</em></div>
<p><a class="reference internal" href="#structnrf__cloud__pgps__system__time"><span class="std std-ref">nrf_cloud_pgps_system_time</span></a> is a special version of nrf_cloud_agps_system_time that does not include the full array of sv_tow values; this is transferred from the cloud as part of each prediction, to indicate the date_day and time_full_s for the center of each prediction’s validity period. </p>
<div class="breathe-sectiondef docutils container">
<p class="breathe-sectiondef-title rubric" id="breathe-section-title-public-members">Public Members</p>
<dl class="c var">
<dt class="sig sig-object c" id="c.nrf_cloud_pgps_system_time.date_day">
<span class="target" id="structnrf__cloud__pgps__system__time_1a78b01910533a6130189ee6a676ad4304"></span><span class="n"><span class="pre">uint16_t</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">date_day</span></span></span><a class="headerlink" href="#c.nrf_cloud_pgps_system_time.date_day" title="Permalink to this definition"></a><br /></dt>
<dd><p>Number of days since GPS time began on 6 Jan 1980 for the center of a prediction’s validity period. </p>
</dd></dl>

<dl class="c var">
<dt class="sig sig-object c" id="c.nrf_cloud_pgps_system_time.time_full_s">
<span class="target" id="structnrf__cloud__pgps__system__time_1a0765a1c4f092ae8b1470dbb9fbd98887"></span><span class="n"><span class="pre">uint32_t</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">time_full_s</span></span></span><a class="headerlink" href="#c.nrf_cloud_pgps_system_time.time_full_s" title="Permalink to this definition"></a><br /></dt>
<dd><p>Seconds into GPS day for center of validity period. </p>
</dd></dl>

<dl class="c var">
<dt class="sig sig-object c" id="c.nrf_cloud_pgps_system_time.time_frac_ms">
<span class="target" id="structnrf__cloud__pgps__system__time_1ae9d13fa06cae85c5cfb74d04bff9ae8e"></span><span class="n"><span class="pre">uint16_t</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">time_frac_ms</span></span></span><a class="headerlink" href="#c.nrf_cloud_pgps_system_time.time_frac_ms" title="Permalink to this definition"></a><br /></dt>
<dd><p>Will be 0. </p>
</dd></dl>

<dl class="c var">
<dt class="sig sig-object c" id="c.nrf_cloud_pgps_system_time.sv_mask">
<span class="target" id="structnrf__cloud__pgps__system__time_1aa0471057caa1a3927afb947a56b1ef1a"></span><span class="n"><span class="pre">uint32_t</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">sv_mask</span></span></span><a class="headerlink" href="#c.nrf_cloud_pgps_system_time.sv_mask" title="Permalink to this definition"></a><br /></dt>
<dd><p>Will be 0. </p>
</dd></dl>

<dl class="c var">
<dt class="sig sig-object c" id="c.nrf_cloud_pgps_system_time.pad">
<span class="target" id="structnrf__cloud__pgps__system__time_1a7fabac5fc5076bec527308a8fc8be201"></span><span class="n"><span class="pre">uint32_t</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">pad</span></span></span><a class="headerlink" href="#c.nrf_cloud_pgps_system_time.pad" title="Permalink to this definition"></a><br /></dt>
<dd><p>Placeholder where sv_tow[32] is for A-GPS. </p>
</dd></dl>

</div>
</dd></dl>

<dl class="c struct">
<dt class="sig sig-object c" id="c.nrf_cloud_pgps_prediction">
<span class="target" id="structnrf__cloud__pgps__prediction"></span><span class="k"><span class="pre">struct</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">nrf_cloud_pgps_prediction</span></span></span><a class="headerlink" href="#c.nrf_cloud_pgps_prediction" title="Permalink to this definition"></a><br /></dt>
<dd><div class="docutils container">
<em>#include &lt;nrf_cloud_pgps.h&gt;</em></div>
<p>P-GPS prediction Flash storage format. </p>
<div class="breathe-sectiondef docutils container">
<p class="breathe-sectiondef-title rubric" id="breathe-section-title-public-members">Public Members</p>
<dl class="c var">
<dt class="sig sig-object c" id="c.nrf_cloud_pgps_prediction.time_type">
<span class="target" id="structnrf__cloud__pgps__prediction_1a37e044730c1fa1dfbd88fce3ce54bd7a"></span><span class="n"><span class="pre">uint8_t</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">time_type</span></span></span><a class="headerlink" href="#c.nrf_cloud_pgps_prediction.time_type" title="Permalink to this definition"></a><br /></dt>
<dd><p>Set to NRF_CLOUD_AGPS_GPS_SYSTEM_CLOCK. </p>
</dd></dl>

<dl class="c var">
<dt class="sig sig-object c" id="c.nrf_cloud_pgps_prediction.time_count">
<span class="target" id="structnrf__cloud__pgps__prediction_1a508bc55d2d48550d8ee77162d0a67b40"></span><span class="n"><span class="pre">uint16_t</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">time_count</span></span></span><a class="headerlink" href="#c.nrf_cloud_pgps_prediction.time_count" title="Permalink to this definition"></a><br /></dt>
<dd><p>Will be 1. </p>
</dd></dl>

<dl class="c var">
<dt class="sig sig-object c" id="c.nrf_cloud_pgps_prediction.time">
<span class="target" id="structnrf__cloud__pgps__prediction_1a4a4bd288e49543c68cc8ce4c930fe1ff"></span><span class="k"><span class="pre">struct</span></span><span class="w"> </span><a class="reference internal" href="#c.nrf_cloud_pgps_system_time" title="nrf_cloud_pgps_system_time"><span class="n"><span class="pre">nrf_cloud_pgps_system_time</span></span></a><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">time</span></span></span><a class="headerlink" href="#c.nrf_cloud_pgps_prediction.time" title="Permalink to this definition"></a><br /></dt>
<dd><p>Information about when this prediction is applicable. </p>
</dd></dl>

<dl class="c var">
<dt class="sig sig-object c" id="c.nrf_cloud_pgps_prediction.schema_version">
<span class="target" id="structnrf__cloud__pgps__prediction_1a7397f1ad6e06d17a7828ac2839e53c20"></span><span class="n"><span class="pre">uint8_t</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">schema_version</span></span></span><a class="headerlink" href="#c.nrf_cloud_pgps_prediction.schema_version" title="Permalink to this definition"></a><br /></dt>
<dd><p>Not from cloud; inserted during storage to ease reusing A-GPS code. </p>
</dd></dl>

<dl class="c var">
<dt class="sig sig-object c" id="c.nrf_cloud_pgps_prediction.ephemeris_type">
<span class="target" id="structnrf__cloud__pgps__prediction_1a622ccf560882f7920d164341abd36bd9"></span><span class="n"><span class="pre">uint8_t</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">ephemeris_type</span></span></span><a class="headerlink" href="#c.nrf_cloud_pgps_prediction.ephemeris_type" title="Permalink to this definition"></a><br /></dt>
<dd><p>Set to NRF_CLOUD_AGPS_EPHEMERIDES. </p>
</dd></dl>

<dl class="c var">
<dt class="sig sig-object c" id="c.nrf_cloud_pgps_prediction.ephemeris_count">
<span class="target" id="structnrf__cloud__pgps__prediction_1a1feb2ffa9db7ec82987429b4dbbe6499"></span><span class="n"><span class="pre">uint16_t</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">ephemeris_count</span></span></span><a class="headerlink" href="#c.nrf_cloud_pgps_prediction.ephemeris_count" title="Permalink to this definition"></a><br /></dt>
<dd><p>Usually will be NRF_CLOUD_PGPS_NUM_SV. </p>
</dd></dl>

<dl class="c var">
<dt class="sig sig-object c" id="c.nrf_cloud_pgps_prediction.ephemerii">
<span class="target" id="structnrf__cloud__pgps__prediction_1a071eb8a3737f5cee37930cdb84b73304"></span><span class="k"><span class="pre">struct</span></span><span class="w"> </span><span class="n"><span class="pre">nrf_cloud_agps_ephemeris</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">ephemerii</span></span></span><span class="p"><span class="pre">[</span></span><span class="p"><span class="pre">(</span></span><span class="m"><span class="pre">32U</span></span><span class="p"><span class="pre">)</span></span><span class="p"><span class="pre">]</span></span><a class="headerlink" href="#c.nrf_cloud_pgps_prediction.ephemerii" title="Permalink to this definition"></a><br /></dt>
<dd><p>Array of satellite orbital equation coefficients. </p>
</dd></dl>

<dl class="c var">
<dt class="sig sig-object c" id="c.nrf_cloud_pgps_prediction.sentinel">
<span class="target" id="structnrf__cloud__pgps__prediction_1afca9f4d9b66200ab71424ab27ecc6cc5"></span><span class="n"><span class="pre">uint32_t</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">sentinel</span></span></span><a class="headerlink" href="#c.nrf_cloud_pgps_prediction.sentinel" title="Permalink to this definition"></a><br /></dt>
<dd><p>Not from cloud; appended during storage to verify integrity on retrieval. </p>
</dd></dl>

</div>
</dd></dl>

<dl class="c struct">
<dt class="sig sig-object c" id="c.gps_pgps_request">
<span class="target" id="structgps__pgps__request"></span><span class="k"><span class="pre">struct</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">gps_pgps_request</span></span></span><a class="headerlink" href="#c.gps_pgps_request" title="Permalink to this definition"></a><br /></dt>
<dd><div class="docutils container">
<em>#include &lt;nrf_cloud_pgps.h&gt;</em></div>
<p>P-GPS request type. </p>
<div class="breathe-sectiondef docutils container">
<p class="breathe-sectiondef-title rubric" id="breathe-section-title-public-members">Public Members</p>
<dl class="c var">
<dt class="sig sig-object c" id="c.gps_pgps_request.prediction_count">
<span class="target" id="structgps__pgps__request_1a3344f862cf91dbc79811a6257d81eca8"></span><span class="n"><span class="pre">uint16_t</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">prediction_count</span></span></span><a class="headerlink" href="#c.gps_pgps_request.prediction_count" title="Permalink to this definition"></a><br /></dt>
<dd><p>Number of predictions desired. </p>
</dd></dl>

<dl class="c var">
<dt class="sig sig-object c" id="c.gps_pgps_request.prediction_period_min">
<span class="target" id="structgps__pgps__request_1af14790d7451092de15dce82cb11c6962"></span><span class="n"><span class="pre">uint16_t</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">prediction_period_min</span></span></span><a class="headerlink" href="#c.gps_pgps_request.prediction_period_min" title="Permalink to this definition"></a><br /></dt>
<dd><p>Validity time per prediction, in minutes. Valid range 120 to 480. </p>
</dd></dl>

<dl class="c var">
<dt class="sig sig-object c" id="c.gps_pgps_request.gps_day">
<span class="target" id="structgps__pgps__request_1a75e6ee4b7f044cc1810640b4c998daa6"></span><span class="n"><span class="pre">uint16_t</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">gps_day</span></span></span><a class="headerlink" href="#c.gps_pgps_request.gps_day" title="Permalink to this definition"></a><br /></dt>
<dd><p>Number of days since GPS time began on 6 Jan 1980 for the center of the first prediction desired. </p>
</dd></dl>

<dl class="c var">
<dt class="sig sig-object c" id="c.gps_pgps_request.gps_time_of_day">
<span class="target" id="structgps__pgps__request_1a5df595eeaf24585f79bc6f1925ea7acb"></span><span class="n"><span class="pre">uint32_t</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">gps_time_of_day</span></span></span><a class="headerlink" href="#c.gps_pgps_request.gps_time_of_day" title="Permalink to this definition"></a><br /></dt>
<dd><p>Number of seconds since the start of this GPS day for the center of the first prediction desired. Valid range 0 to 86399. </p>
</dd></dl>

</div>
</dd></dl>

<dl class="c struct">
<dt class="sig sig-object c" id="c.nrf_cloud_pgps_result">
<span class="target" id="structnrf__cloud__pgps__result"></span><span class="k"><span class="pre">struct</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">nrf_cloud_pgps_result</span></span></span><a class="headerlink" href="#c.nrf_cloud_pgps_result" title="Permalink to this definition"></a><br /></dt>
<dd><div class="docutils container">
<em>#include &lt;nrf_cloud_pgps.h&gt;</em></div>
<p>nRF Cloud Predicted GPS (P-GPS) result; the location of the P-GPS data file which is to be downloaded and provided to <a class="reference internal" href="#group__nrf__cloud__pgps_1gae5554df8baf4bb437a59a4d0a4d86b56"><span class="std std-ref">nrf_cloud_pgps_process()</span></a>. </p>
<div class="breathe-sectiondef docutils container">
<p class="breathe-sectiondef-title rubric" id="breathe-section-title-public-members">Public Members</p>
<dl class="c var">
<dt class="sig sig-object c" id="c.nrf_cloud_pgps_result.host">
<span class="target" id="structnrf__cloud__pgps__result_1a0411cd9486dc33ee51890e4c60f4c5ca"></span><span class="kt"><span class="pre">char</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="sig-name descname"><span class="n"><span class="pre">host</span></span></span><a class="headerlink" href="#c.nrf_cloud_pgps_result.host" title="Permalink to this definition"></a><br /></dt>
<dd><p>User-provided buffer to hold download host name </p>
</dd></dl>

<dl class="c var">
<dt class="sig sig-object c" id="c.nrf_cloud_pgps_result.host_sz">
<span class="target" id="structnrf__cloud__pgps__result_1a9026033aceec2d1c028326f696cda2b7"></span><span class="n"><span class="pre">size_t</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">host_sz</span></span></span><a class="headerlink" href="#c.nrf_cloud_pgps_result.host_sz" title="Permalink to this definition"></a><br /></dt>
<dd><p>Size of user-provided host buffer </p>
</dd></dl>

<dl class="c var">
<dt class="sig sig-object c" id="c.nrf_cloud_pgps_result.path">
<span class="target" id="structnrf__cloud__pgps__result_1aad532cb0046cea4830ce1218185d4426"></span><span class="kt"><span class="pre">char</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="sig-name descname"><span class="n"><span class="pre">path</span></span></span><a class="headerlink" href="#c.nrf_cloud_pgps_result.path" title="Permalink to this definition"></a><br /></dt>
<dd><p>User-provided buffer to hold download path/file name </p>
</dd></dl>

<dl class="c var">
<dt class="sig sig-object c" id="c.nrf_cloud_pgps_result.path_sz">
<span class="target" id="structnrf__cloud__pgps__result_1a72dabce042ccf5b43b5e3ee42afca56f"></span><span class="n"><span class="pre">size_t</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">path_sz</span></span></span><a class="headerlink" href="#c.nrf_cloud_pgps_result.path_sz" title="Permalink to this definition"></a><br /></dt>
<dd><p>Size of user-provided path buffer </p>
</dd></dl>

</div>
</dd></dl>

<dl class="c struct">
<dt class="sig sig-object c" id="c.nrf_cloud_pgps_event">
<span class="target" id="structnrf__cloud__pgps__event"></span><span class="k"><span class="pre">struct</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">nrf_cloud_pgps_event</span></span></span><a class="headerlink" href="#c.nrf_cloud_pgps_event" title="Permalink to this definition"></a><br /></dt>
<dd><div class="docutils container">
<em>#include &lt;nrf_cloud_pgps.h&gt;</em></div>
</dd></dl>

<dl class="c struct">
<dt class="sig sig-object c" id="c.nrf_cloud_pgps_init_param">
<span class="target" id="structnrf__cloud__pgps__init__param"></span><span class="k"><span class="pre">struct</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">nrf_cloud_pgps_init_param</span></span></span><a class="headerlink" href="#c.nrf_cloud_pgps_init_param" title="Permalink to this definition"></a><br /></dt>
<dd><div class="docutils container">
<em>#include &lt;nrf_cloud_pgps.h&gt;</em></div>
<p>Initialization parameters for the module. </p>
<div class="breathe-sectiondef docutils container">
<p class="breathe-sectiondef-title rubric" id="breathe-section-title-public-members">Public Members</p>
<dl class="c var">
<dt class="sig sig-object c" id="c.nrf_cloud_pgps_init_param.event_handler">
<span class="target" id="structnrf__cloud__pgps__init__param_1a8cab3736938df5ef4a0ad21196d83ba5"></span><a class="reference internal" href="#c.pgps_event_handler_t" title="pgps_event_handler_t"><span class="n"><span class="pre">pgps_event_handler_t</span></span></a><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">event_handler</span></span></span><a class="headerlink" href="#c.nrf_cloud_pgps_init_param.event_handler" title="Permalink to this definition"></a><br /></dt>
<dd><p>Event handler that is registered with the module. </p>
</dd></dl>

<dl class="c var">
<dt class="sig sig-object c" id="c.nrf_cloud_pgps_init_param.storage_base">
<span class="target" id="structnrf__cloud__pgps__init__param_1a2206572ae2f756230497a3bb93256368"></span><span class="n"><span class="pre">uint32_t</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">storage_base</span></span></span><a class="headerlink" href="#c.nrf_cloud_pgps_init_param.storage_base" title="Permalink to this definition"></a><br /></dt>
<dd><p>Flash storage address. Must be on a Flash page boundary. </p>
</dd></dl>

<dl class="c var">
<dt class="sig sig-object c" id="c.nrf_cloud_pgps_init_param.storage_size">
<span class="target" id="structnrf__cloud__pgps__init__param_1ae1b7b9d9059604644c208b0db93830f7"></span><span class="n"><span class="pre">uint32_t</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">storage_size</span></span></span><a class="headerlink" href="#c.nrf_cloud_pgps_init_param.storage_size" title="Permalink to this definition"></a><br /></dt>
<dd><p>Flash storage size. Must be a multiple of a Flash page in size, in bytes. </p>
</dd></dl>

</div>
</dd></dl>

</dd></dl>

</section>
</section>


           </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="nrf_cloud_rest.html" class="btn btn-neutral float-right" title="nRF Cloud REST" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="nrf_cloud_location.html" class="btn btn-neutral" title="nRF Cloud location" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">

<table>
<tr>
<td>
    <p>
        &copy; Copyright 2019-2023, Nordic Semiconductor.
      Last updated on Mar 20, 2023.

    </p>
</td>
<td id="nordiclogo">
  <a href="https://www.nordicsemi.com/"><img src="../../_static/images/nordic-logo.png" border="0"/></a>
</td>
</tr>
</table>
  </div> 


</footer>

<div id="scroll-container">
  <button type="button" id="scroll-btn" class="btn">
    <svg xmlns="http://www.w3.org/2000/svg" height="24" viewBox="0 0 24 24" width="24"><path d="M0 0h24v24H0z" fill="none"/><path d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z" fill="#fff"/></svg>
  </button>
</div>

<script>
  const scrollBtn = document.querySelector("#scroll-btn");

  document.addEventListener("scroll", () => {
    if (window.scrollY > 400) {
          scrollBtn.style.visibility = "visible";
      } else {
          scrollBtn.style.visibility = "hidden";
      }
  });

  scrollBtn.addEventListener("click", () => {
      window.scrollTo({ top: 0, behavior: "smooth" });
  });
</script>
        </div>
      </div>
    </section>
  </div>
  
  <div class="rst-versions" data-toggle="rst-versions" role="note" aria-label="versions">
    <span class="rst-current-version" data-toggle="rst-current-version">
      <span class="fa fa-book"> nRF Connect SDK</span>
       <span class="fa fa-caret-down"></span>
    </span>
    <div class="rst-other-versions">
      
      <div class="rst-other-version ncs">
        <a href="../../../nrf/index.html">nRF Connect SDK</a>
      </div>
      
      <div class="rst-other-version nrfx">
        <a href="../../../nrfx/index.html">nrfx</a>
      </div>
      
      <div class="rst-other-version nrfxlib">
        <a href="../../../nrfxlib/README.html">nrfxlib</a>
      </div>
      
      <div class="rst-other-version zephyr">
        <a href="../../../zephyr/index.html">Zephyr Project</a>
      </div>
      
      <div class="rst-other-version mcuboot">
        <a href="../../../mcuboot/wrapper.html">MCUboot</a>
      </div>
      
      <div class="rst-other-version tfm">
        <a href="../../../tfm/index.html">Trusted Firmware-M</a>
      </div>
      
      <div class="rst-other-version matter">
        <a href="../../../matter/index.html">Matter</a>
      </div>
      
      <div class="rst-other-version kconfig">
        <a href="../../../kconfig/index.html">Kconfig Reference</a>
      </div>
    </div>
  </div><script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>