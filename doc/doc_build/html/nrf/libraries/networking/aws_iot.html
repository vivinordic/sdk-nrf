<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>AWS IoT &mdash; nRF Connect SDK 2.3.99 documentation</title>
      <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="../../_static/css/nordic.css" type="text/css" />
      <link rel="stylesheet" href="../../_static/togglebutton.css" type="text/css" />
      <link rel="stylesheet" href="../../_static/css/nrf.css" type="text/css" />
      <link rel="stylesheet" href="../../_static/tabs.css" type="text/css" /> 
  <!--[if lt IE 9]>
    <script src="../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="../../" id="documentation_options" src="../../_static/documentation_options.js"></script>
        <script src="../../_static/jquery.js"></script>
        <script src="../../_static/underscore.js"></script>
        <script src="../../_static/_sphinx_javascript_frameworks_compat.js"></script>
        <script src="../../_static/doctools.js"></script>
        <script src="../../_static/sphinx_highlight.js"></script>
        <script src="https://www.googletagmanager.com/gtag/js?id=G-ZPVZRKFQJR"></script>
        <script src="../../_static/js/ga-tracker.js"></script>
        <script data-culture="EN" id="CookieConsent" type="text/javascript" src="https://policy.app.cookieinformation.com/uc.js"></script>
        <script>let toggleHintShow = 'Click to show';</script>
        <script>let toggleHintHide = 'Click to hide';</script>
        <script>let toggleOpenOnPrint = 'true';</script>
        <script src="../../_static/togglebutton.js"></script>
        <script>var togglebuttonSelector = '.toggle, .admonition.dropdown';</script>
    <script src="../../_static/js/theme.js"></script>
<script
  type="text/javascript"
  src="../../_static/js/ncs.js"
></script>
<script src="../../_static/js/bootstrap.bundle.min.js"></script>

    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="AWS jobs" href="aws_jobs.html" />
    <link rel="prev" title="AWS FOTA" href="aws_fota.html" />
<link
  href="../../_static/css/bootstrap.min.css"
  rel="stylesheet"
/>
<link
  rel="shortcut icon"
  href="../../_static/images/favicon.ico"
/>

</head>

<body class="wy-body-for-nav">
<div class="announcement"></div>
<div class="d-print-none ncs-header">
  <div class="container-xl ncs-header-top">
    <div class="row h-100">
      <div class="d-none d-md-block col-2">
        <div class="bg-white py-4 px-3 ml-2 ncs-header-logo">
          <img
            class="ncs-header-logo"
            src="../../_static/images/nordic-logo.png"
            alt=""
          />
        </div>
      </div>
      <div
        class="col-8 col-md-7 pl-md-4 d-flex align-self-center justify-content-center"
      >
        <form class="w-75" action="../../search.html" method="get">
          <div class="form-group">
            <input
              type="text"
              name="q"
              class="ncs-search-input form-control"
              placeholder="Search all docs..."
            />
          </div>
        </form>
      </div>
      <div class="col-4 col-md-3 d-md-block p-3 text-end">
        <div class="dropdown">
          <button
            class="btn dropdown-toggle ncs-btn-versions"
            type="button"
            id="dropdownMenuButton1"
            data-bs-toggle="dropdown"
            aria-expanded="false"
          >
            <span class="d-none d-md-inline">nRF Connect SDK</span>
            <span id="ncsversion" class="d-inline"></span>
          </button>
          <div class="dropdown-menu" aria-labelledby="dropdownMenuButton"></div>
        </div>
      </div>
    </div>
  </div>
  <div class="ncs-header-nav">
    <div class="container-xl">
      <div class="row">
        <div class="col col-12 d-flex justify-content-center">
          <nav class="navbar navbar-dark navbar-expand-lg p-0">
            <span class="navbar-brand d-block d-lg-none py-2 pl-1"
              >Documentation sets</span
            >
            <button
              class="navbar-toggler"
              type="button"
              data-bs-toggle="collapse"
              data-bs-target="#navbarNavAltMarkup"
              aria-controls="navbarNavAltMarkup"
              aria-expanded="false"
              aria-label="Toggle navigation"
            >
              <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="navbarNavAltMarkup">
              <ul class="navbar-nav">
                <li class="nav-item active py-1 px-3">
                  <a
                    class="nav-link"
                    href="../../../nrf/index.html"
                    >nRF Connect SDK</a
                  >
                </li>
                <li><hr class="dropdown-divider" /></li>
                <li class="nav-item  py-1 px-3">
                  <a
                    class="nav-link"
                    href="../../../nrfx/index.html"
                    >nrfx</a
                  >
                </li>
                <li><hr class="dropdown-divider" /></li>
                <li class="nav-item  py-1 px-3">
                  <a
                    class="nav-link"
                    href="../../../nrfxlib/README.html"
                    >nrfxlib</a
                  >
                </li>
                <li><hr class="dropdown-divider" /></li>
                <li class="nav-item  py-1 px-3">
                  <a
                    class="nav-link"
                    href="../../../zephyr/index.html"
                    >Zephyr Project</a
                  >
                </li>
                <li><hr class="dropdown-divider" /></li>
                <li class="nav-item  py-1 px-3">
                  <a
                    class="nav-link"
                    href="../../../mcuboot/wrapper.html"
                    >MCUboot</a
                  >
                </li>
                <li><hr class="dropdown-divider" /></li>
                <li class="nav-item  py-1 px-3">
                  <a
                    class="nav-link"
                    href="../../../tfm/index.html"
                    >Trusted Firmware-M</a
                  >
                </li>
                <li><hr class="dropdown-divider" /></li>
                <li class="nav-item  py-1 px-3">
                  <a
                    class="nav-link"
                    href="../../../matter/index.html"
                    >Matter</a
                  >
                </li>
                <li><hr class="dropdown-divider" /></li>
                <li class="nav-item  py-1 px-3">
                  <a
                    class="nav-link"
                    href="../../../kconfig/index.html"
                    >Kconfig Reference</a
                  >
                </li>
                <li><hr class="dropdown-divider" /></li>
              </ul>
            </div>
          </nav>
        </div>
      </div>
    </div>
  </div>
</div>

  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
            <a href="../../index.html" class="icon icon-home"> nRF Connect SDK
          </a>
              <div class="version">
                2.3.99
              </div>
<div id="searchbox" role="search">
  <div class="searchformwrapper">
    <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
      <input type="text" name="q" placeholder="Search docs" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
  </div>
</div>
<script>$('#searchbox').show(0);</script>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Contents</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../introduction.html">Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../getting_started.html">Getting started</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../dev_model.html">Development model</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../app_dev.html">Application development</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../security.html">Security</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../ecosystem_integration.html">Ecosystems integration</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../nrf91.html">Working with nRF91 Series</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../nrf70.html">Working with nRF70 Series</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../nrf53.html">Working with nRF53 Series</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../nrf52.html">Working with nRF52 Series</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../protocols.html">Protocols</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../applications.html">Applications</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../samples.html">Samples</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../drivers.html">Drivers</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../index.html">Libraries</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../bin/index.html">Binary libraries</a></li>
<li class="toctree-l2"><a class="reference internal" href="../bluetooth_services/index.html">Bluetooth libraries and services</a></li>
<li class="toctree-l2"><a class="reference internal" href="../bootloader/index.html">Bootloader libraries</a></li>
<li class="toctree-l2"><a class="reference internal" href="../caf/index.html">Common Application Framework</a></li>
<li class="toctree-l2"><a class="reference internal" href="../debug/index.html">Debug libraries</a></li>
<li class="toctree-l2"><a class="reference internal" href="../dfu/index.html">DFU libraries</a></li>
<li class="toctree-l2"><a class="reference internal" href="../gazell/index.html">Gazell libraries</a></li>
<li class="toctree-l2"><a class="reference internal" href="../modem/index.html">Modem libraries</a></li>
<li class="toctree-l2"><a class="reference internal" href="../mpsl/index.html">Multiprotocol Service Layer libraries</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="index.html">Libraries for networking</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="aws_fota.html">AWS FOTA</a></li>
<li class="toctree-l3 current"><a class="current reference internal" href="#">AWS IoT</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#set-up-your-aws-account-and-permissions">Set up your AWS account and permissions</a></li>
<li class="toctree-l4"><a class="reference internal" href="#create-a-thing-in-aws-iot">Create a Thing in AWS IoT</a></li>
<li class="toctree-l4"><a class="reference internal" href="#provisioning-of-the-certificates">Provisioning of the certificates</a></li>
<li class="toctree-l4"><a class="reference internal" href="#configuration">Configuration</a></li>
<li class="toctree-l4"><a class="reference internal" href="#usage">Usage</a></li>
<li class="toctree-l4"><a class="reference internal" href="#api-documentation">API documentation</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="aws_jobs.html">AWS jobs</a></li>
<li class="toctree-l3"><a class="reference internal" href="azure_fota.html">Azure FOTA</a></li>
<li class="toctree-l3"><a class="reference internal" href="azure_iot_hub.html">Azure IoT Hub</a></li>
<li class="toctree-l3"><a class="reference internal" href="coap_utils.html">CoAP utils</a></li>
<li class="toctree-l3"><a class="reference internal" href="download_client.html">Download client</a></li>
<li class="toctree-l3"><a class="reference internal" href="fota_download.html">FOTA download</a></li>
<li class="toctree-l3"><a class="reference internal" href="ftp_client.html">FTP client</a></li>
<li class="toctree-l3"><a class="reference internal" href="icalendar_parser.html">iCalendar parser</a></li>
<li class="toctree-l3"><a class="reference internal" href="lwm2m_client_utils.html">LwM2M client utils</a></li>
<li class="toctree-l3"><a class="reference internal" href="lwm2m_location_assistance.html">LwM2M location assistance</a></li>
<li class="toctree-l3"><a class="reference internal" href="mqtt_helper.html">MQTT helper</a></li>
<li class="toctree-l3"><a class="reference internal" href="multicell_location.html">Multicell location</a></li>
<li class="toctree-l3"><a class="reference internal" href="nrf_cloud.html">nRF Cloud</a></li>
<li class="toctree-l3"><a class="reference internal" href="nrf_cloud_agps.html">nRF Cloud A-GPS</a></li>
<li class="toctree-l3"><a class="reference internal" href="nrf_cloud_alerts.html">nRF Cloud Alerts</a></li>
<li class="toctree-l3"><a class="reference internal" href="nrf_cloud_location.html">nRF Cloud location</a></li>
<li class="toctree-l3"><a class="reference internal" href="nrf_cloud_pgps.html">nRF Cloud P-GPS</a></li>
<li class="toctree-l3"><a class="reference internal" href="nrf_cloud_rest.html">nRF Cloud REST</a></li>
<li class="toctree-l3"><a class="reference internal" href="rest_client.html">REST client</a></li>
<li class="toctree-l3"><a class="reference internal" href="wifi_credentials.html">Wi-Fi credentials</a></li>
<li class="toctree-l3"><a class="reference internal" href="wifi_mgmt_ext.html">Wi-Fi management extension</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../nfc/index.html">Libraries for NFC</a></li>
<li class="toctree-l2"><a class="reference internal" href="../nrf_rpc/index.html">nRF RPC libraries</a></li>
<li class="toctree-l2"><a class="reference internal" href="../others/index.html">Other libraries</a></li>
<li class="toctree-l2"><a class="reference internal" href="../shell/index.html">Shell libraries</a></li>
<li class="toctree-l2"><a class="reference internal" href="../tfm/index.html">TF-M libraries</a></li>
<li class="toctree-l2"><a class="reference internal" href="../zigbee/index.html">Libraries for Zigbee</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../scripts.html">Scripts</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../release_notes.html">Release notes</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../known_issues.html">Known issues</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../software_maturity.html">Software maturity levels</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../documentation.html">About this documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../glossary.html">Glossary</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">nRF Connect SDK</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../../index.html" class="icon icon-home"></a></li>
          <li class="breadcrumb-item"><a href="../index.html">Libraries</a></li>
          <li class="breadcrumb-item"><a href="index.html">Libraries for networking</a></li>
      <li class="breadcrumb-item active">AWS IoT</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../../_sources/libraries/networking/aws_iot.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="aws-iot">
<span id="lib-aws-iot"></span><h1>AWS IoT<a class="headerlink" href="#aws-iot" title="Permalink to this heading"></a></h1>
<div class="contents local topic" id="contents">
<ul class="simple">
<li><p><a class="reference internal" href="#set-up-your-aws-account-and-permissions" id="id7">Set up your AWS account and permissions</a></p></li>
<li><p><a class="reference internal" href="#create-a-thing-in-aws-iot" id="id8">Create a Thing in AWS IoT</a></p></li>
<li><p><a class="reference internal" href="#provisioning-of-the-certificates" id="id9">Provisioning of the certificates</a></p></li>
<li><p><a class="reference internal" href="#configuration" id="id10">Configuration</a></p>
<ul>
<li><p><a class="reference internal" href="#optional-library-options" id="id11">Optional library options</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#usage" id="id12">Usage</a></p>
<ul>
<li><p><a class="reference internal" href="#initializing-the-library" id="id13">Initializing the library</a></p></li>
<li><p><a class="reference internal" href="#connecting-to-the-aws-iot-message-broker" id="id14">Connecting to the AWS IoT message broker</a></p></li>
<li><p><a class="reference internal" href="#subscribing-to-non-aws-specific-topics" id="id15">Subscribing to non-AWS specific topics</a></p></li>
<li><p><a class="reference internal" href="#publishing-to-non-aws-specific-topics" id="id16">Publishing to non-AWS specific topics</a></p></li>
<li><p><a class="reference internal" href="#setting-client-id-at-run-time" id="id17">Setting client ID at run-time</a></p></li>
<li><p><a class="reference internal" href="#setting-the-aws-host-name-at-runtime" id="id18">Setting the AWS host name at runtime</a></p></li>
<li><p><a class="reference internal" href="#testing-and-debugging" id="id19">Testing and debugging</a></p></li>
<li><p><a class="reference internal" href="#troubleshooting" id="id20">Troubleshooting</a></p></li>
<li><p><a class="reference internal" href="#aws-fota" id="id21">AWS FOTA</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#api-documentation" id="id22">API documentation</a></p></li>
</ul>
</div>
<p>The Amazon Web Services Internet-of-Things (AWS IoT) library enables applications to connect to, and exchange messages with the <a class="reference external" href="https://aws.amazon.com/iot-core/">AWS IoT Core</a> service.
The library supports the following technologies:</p>
<ul class="simple">
<li><p>TLS secured MQTT transmission protocol</p></li>
<li><p>Firmware-Over-The-Air (FOTA)</p></li>
</ul>
<p>To connect to AWS IoT, complete the following steps:</p>
<ol class="arabic simple">
<li><p><a class="reference internal" href="#setup-aws-and-permissions"><span class="std std-ref">Set up your AWS account and permissions</span></a></p></li>
<li><p><a class="reference internal" href="#creating-a-thing-in-aws-iot"><span class="std std-ref">Create a Thing in AWS IoT</span></a></p></li>
<li><p><a class="reference internal" href="#flash-certi-device"><span class="std std-ref">Provisioning of the certificates</span></a></p></li>
<li><p><a class="reference internal" href="#configuring"><span class="std std-ref">Configuring the application</span></a></p></li>
</ol>
<p>See <a class="reference external" href="https://docs.aws.amazon.com/iot/latest/developerguide/what-is-aws-iot.html">AWS IoT Developer Guide</a> for general information about the Amazon Web Services IoT service.</p>
<section id="set-up-your-aws-account-and-permissions">
<span id="setup-aws-and-permissions"></span><h2><a class="toc-backref" href="#id7">Set up your AWS account and permissions</a><a class="headerlink" href="#set-up-your-aws-account-and-permissions" title="Permalink to this heading"></a></h2>
<p>To connect to AWS IoT, you need to set up an AWS account with the appropriate permissions.
Complete the steps documented in <a class="reference external" href="https://docs.aws.amazon.com/iot/latest/developerguide/setting-up.html">Set up your AWS account</a>.</p>
</section>
<section id="create-a-thing-in-aws-iot">
<span id="creating-a-thing-in-aws-iot"></span><h2><a class="toc-backref" href="#id8">Create a Thing in AWS IoT</a><a class="headerlink" href="#create-a-thing-in-aws-iot" title="Permalink to this heading"></a></h2>
<p>Before you can use this library, you must create a <em>Thing</em> for your client in AWS IoT.
The <em>Thing</em> must be connected to a security policy.
For testing, you can use a permissive policy, but make sure to update the policy to be more restrictive before you go into production.
See <a class="reference external" href="https://docs.aws.amazon.com/iot/latest/developerguide/basic-policy-variables.html">AWS IoT Developer Guide: Basic Policy Variables</a> and <a class="reference external" href="https://docs.aws.amazon.com/iot/latest/developerguide/security-best-practices.html">AWS IoT Developer Guide: Security Best Practices</a> for more information about policies.</p>
<p>To create a Thing for your device:</p>
<ol class="arabic">
<li><p>Log in to the <a class="reference external" href="https://console.aws.amazon.com/iot/home">AWS IoT console</a>.</p></li>
<li><p>Go to <span class="guilabel">Security</span> &gt; <span class="guilabel">Policies</span> and select <span class="guilabel">Create policy</span>.</p></li>
<li><p>Enter a name and define your policy.
For testing purposes, you can use the following policy (click on <span class="guilabel">JSON</span>, copy, and paste it):</p>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
<span class="w">   </span><span class="s2">&quot;Version&quot;</span><span class="o">:</span><span class="w"> </span><span class="s2">&quot;2012-10-17&quot;</span><span class="p">,</span>
<span class="w">   </span><span class="s2">&quot;Statement&quot;</span><span class="o">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">       </span><span class="p">{</span>
<span class="w">         </span><span class="s2">&quot;Effect&quot;</span><span class="o">:</span><span class="w"> </span><span class="s2">&quot;Allow&quot;</span><span class="p">,</span>
<span class="w">         </span><span class="s2">&quot;Action&quot;</span><span class="o">:</span><span class="w"> </span><span class="s2">&quot;iot:*&quot;</span><span class="p">,</span>
<span class="w">         </span><span class="s2">&quot;Resource&quot;</span><span class="o">:</span><span class="w"> </span><span class="s2">&quot;*&quot;</span>
<span class="w">       </span><span class="p">}</span>
<span class="w">    </span><span class="p">]</span>
<span class="w"> </span><span class="p">}</span>
</pre></div>
</div>
</li>
</ol>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The policy example is only intended for development environments.
All devices in your production fleet must have credentials with privileges that authorize only intended actions on specific resources.
The specific permission policies can vary depending on the use case and should meet business and security requirements.
For more information, refer to the example policies listed in <a class="reference external" href="https://docs.aws.amazon.com/iot/latest/developerguide/example-iot-policies.html">AWS IoT Core policy examples</a> and <a class="reference external" href="https://docs.aws.amazon.com/iot/latest/developerguide/security-best-practices.html">Security best practices in AWS IoT Core</a>.</p>
</div>
<ol class="arabic">
<li><p>Click <span class="guilabel">Create</span>.</p></li>
<li><p>Go to <span class="guilabel">Manage</span> &gt; <span class="guilabel">All devices</span>&gt; <span class="guilabel">Things</span> and select <span class="guilabel">Create things</span>.</p></li>
<li><p>Click <span class="guilabel">Create Thing</span>.</p></li>
<li><p>Enter a name.
The default name used by the library is <code class="docutils literal notranslate"><span class="pre">my-thing</span></code>.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>If you are working with an application, that automatically sets the client ID to the IMEI of the device at run-time, you must locate the IMEI of the device and use that as the <em>Thing name</em>.
If you choose a different name, make sure to <a class="reference internal" href="#configuring"><span class="std std-ref">configure a custom client ID</span></a> before building.</p>
</div>
</li>
<li><p>Accept the defaults and continue to the next step.</p></li>
<li><p>Select <span class="guilabel">Auto-generate a new certificate</span> to generate new certificates.</p></li>
<li><p>Select the policy that you created in a previous step.</p></li>
<li><p>Click on <span class="guilabel">Create Thing</span>.</p></li>
<li><p>Download the following certificates and keys for later use:</p>
<ul class="simple">
<li><p>Thing certificate (<code class="file docutils literal notranslate"><span class="pre">*-certificate.pem.crt</span></code>)</p></li>
<li><p>The private key (<code class="file docutils literal notranslate"><span class="pre">*.private.pem.key</span></code>)</p></li>
<li><p>The root CA (choose the Amazon Root CA 1, <code class="file docutils literal notranslate"><span class="pre">AmazonRootCA1.pem</span></code>)</p></li>
</ul>
</li>
<li><p>Click <span class="guilabel">Done</span>.</p></li>
</ol>
<p>The certificates that you created or added for your Thing in AWS IoT must be stored on your device so that it can successfully connect to AWS IoT.</p>
</section>
<section id="provisioning-of-the-certificates">
<span id="flash-certi-device"></span><h2><a class="toc-backref" href="#id9">Provisioning of the certificates</a><a class="headerlink" href="#provisioning-of-the-certificates" title="Permalink to this heading"></a></h2>
<p>To provision the certificates and the private key to the nRF9160 modem, complete the following steps:</p>
<ol class="arabic simple">
<li><p><a class="reference external" href="https://www.nordicsemi.com/Software-and-Tools/Development-Tools/nRF-Connect-for-desktop/Download#infotabs">Download nRF Connect for Desktop</a>.</p></li>
<li><p>Update the modem firmware on the onboard modem of the nRF9160-based device to the latest version by following the steps in <a class="reference internal" href="../../working_with_nrf/nrf91/nrf9160_gs.html#nrf9160-gs-updating-fw-modem"><span class="std std-ref">Updating the modem firmware</span></a>.</p></li>
<li><p>Build and program the <a class="reference internal" href="../../samples/nrf9160/at_client/README.html#at-client-sample"><span class="std std-ref">nRF9160: AT Client</span></a> sample to the nRF9160-based device as explained in <a class="reference internal" href="../../getting_started/programming.html#gs-programming"><span class="std std-ref">Building and programming an application</span></a>.</p></li>
<li><p>Launch the <a class="reference external" href="https://infocenter.nordicsemi.com/topic/ug_link_monitor/UG/link_monitor/lm_intro.html">LTE Link Monitor</a> application, which is part of <a class="reference external" href="https://www.nordicsemi.com/Software-and-Tools/Development-Tools/nRF-Connect-for-desktop">nRF Connect for Desktop</a>.</p></li>
<li><p>Click <span class="guilabel">CERTIFICATE MANAGER</span> located at the upper right corner.</p></li>
<li><p>Copy the server root certificate into the <code class="docutils literal notranslate"><span class="pre">CA</span> <span class="pre">certificate</span></code> entry.</p></li>
<li><p>Copy and paste the device certificate and the private key into the respective entries (<code class="docutils literal notranslate"><span class="pre">Client</span> <span class="pre">certificate</span></code>, <code class="docutils literal notranslate"><span class="pre">Private</span> <span class="pre">key</span></code>).</p></li>
<li><p>Select a desired security tag (any positive integer in the range of 0 to 2147483647) and click <span class="guilabel">Update certificates</span>.</p></li>
</ol>
<div class="admonition important">
<p class="admonition-title">Important</p>
<p>The default security tag set by the <strong>CERTIFICATE MANAGER</strong> <em>16842753</em> is reserved for communications with <a class="reference internal" href="nrf_cloud.html#lib-nrf-cloud"><span class="std std-ref">nRF Cloud</span></a>.
Overwriting this security tag entry will require you to flash new certificates if you want to establish a connection to the nRF Cloud.</p>
</div>
</section>
<section id="configuration">
<span id="configuring"></span><h2><a class="toc-backref" href="#id10">Configuration</a><a class="headerlink" href="#configuration" title="Permalink to this heading"></a></h2>
<p>Complete the following steps to set the required library options:</p>
<ol class="arabic simple">
<li><p>In the <a class="reference external" href="https://console.aws.amazon.com/iot/home">AWS IoT console</a>, navigate to <span class="guilabel">IoT core</span> &gt; <span class="guilabel">Settings</span>.</p></li>
<li><p>Find the <code class="docutils literal notranslate"><span class="pre">Device</span> <span class="pre">data</span> <span class="pre">endpoint</span></code> address and set <code class="xref kconfig kconfig-option docutils literal notranslate"><span class="pre">CONFIG_AWS_IOT_BROKER_HOST_NAME</span></code> to this address string.
The address can also be provided at runtime by setting the <code class="xref kconfig kconfig-option docutils literal notranslate"><span class="pre">CONFIG_AWS_IOT_BROKER_HOST_NAME_APP</span></code> option.
See <a class="reference internal" href="#lib-set-aws-hostname"><span class="std std-ref">Setting the AWS host name at runtime</span></a> for more details.</p></li>
<li><p>Set the option <code class="xref kconfig kconfig-option docutils literal notranslate"><span class="pre">CONFIG_AWS_IOT_CLIENT_ID_STATIC</span></code> to the name of the <em>Thing</em> created earlier in the process.
This is not needed if the application sets the client ID at run time.
If you still want to set a custom client ID, make sure that the <code class="xref kconfig kconfig-option docutils literal notranslate"><span class="pre">CONFIG_AWS_IOT_CLIENT_ID_APP</span></code> is disabled and set the <code class="xref kconfig kconfig-option docutils literal notranslate"><span class="pre">CONFIG_AWS_IOT_CLIENT_ID_STATIC</span></code> option to your desired client ID.</p></li>
<li><p>Set the security tag configuration <code class="xref kconfig kconfig-option docutils literal notranslate"><span class="pre">CONFIG_AWS_IOT_SEC_TAG</span></code> to the security tag, chosen while you <a class="reference internal" href="#flash-certi-device"><span class="std std-ref">provisioned the certificates to the modem</span></a>.</p></li>
</ol>
<section id="optional-library-options">
<h3><a class="toc-backref" href="#id11">Optional library options</a><a class="headerlink" href="#optional-library-options" title="Permalink to this heading"></a></h3>
<p>To subscribe to the various <a class="reference external" href="https://docs.aws.amazon.com/iot/latest/developerguide/device-shadow-mqtt.html">AWS IoT Device Shadow Topics</a>, set the following options:</p>
<ul class="simple">
<li><p><code class="xref kconfig kconfig-option docutils literal notranslate"><span class="pre">CONFIG_AWS_IOT_TOPIC_GET_ACCEPTED_SUBSCRIBE</span></code></p></li>
<li><p><code class="xref kconfig kconfig-option docutils literal notranslate"><span class="pre">CONFIG_AWS_IOT_TOPIC_GET_REJECTED_SUBSCRIBE</span></code></p></li>
<li><p><code class="xref kconfig kconfig-option docutils literal notranslate"><span class="pre">CONFIG_AWS_IOT_TOPIC_UPDATE_ACCEPTED_SUBSCRIBE</span></code></p></li>
<li><p><code class="xref kconfig kconfig-option docutils literal notranslate"><span class="pre">CONFIG_AWS_IOT_TOPIC_UPDATE_REJECTED_SUBSCRIBE</span></code></p></li>
<li><p><code class="xref kconfig kconfig-option docutils literal notranslate"><span class="pre">CONFIG_AWS_IOT_TOPIC_UPDATE_DELTA_SUBSCRIBE</span></code></p></li>
<li><p><code class="xref kconfig kconfig-option docutils literal notranslate"><span class="pre">CONFIG_AWS_IOT_TOPIC_DELETE_ACCEPTED_SUBSCRIBE</span></code></p></li>
<li><p><code class="xref kconfig kconfig-option docutils literal notranslate"><span class="pre">CONFIG_AWS_IOT_TOPIC_DELETE_REJECTED_SUBSCRIBE</span></code></p></li>
</ul>
<p>Other options:</p>
<ul class="simple">
<li><p><code class="xref kconfig kconfig-option docutils literal notranslate"><span class="pre">CONFIG_AWS_IOT_LAST_WILL</span></code></p></li>
<li><p><code class="xref kconfig kconfig-option docutils literal notranslate"><span class="pre">CONFIG_AWS_IOT_LAST_WILL_TOPIC</span></code></p></li>
<li><p><code class="xref kconfig kconfig-option docutils literal notranslate"><span class="pre">CONFIG_AWS_IOT_LAST_WILL_MESSAGE</span></code></p></li>
<li><p><code class="xref kconfig kconfig-option docutils literal notranslate"><span class="pre">CONFIG_AWS_IOT_MQTT_RX_TX_BUFFER_LEN</span></code></p></li>
<li><p><code class="xref kconfig kconfig-option docutils literal notranslate"><span class="pre">CONFIG_AWS_IOT_MQTT_PAYLOAD_BUFFER_LEN</span></code></p></li>
<li><p><code class="xref kconfig kconfig-option docutils literal notranslate"><span class="pre">CONFIG_AWS_IOT_CLIENT_ID_APP</span></code></p></li>
<li><p><code class="xref kconfig kconfig-option docutils literal notranslate"><span class="pre">CONFIG_AWS_IOT_CLIENT_ID_STATIC</span></code></p></li>
<li><p><code class="xref kconfig kconfig-option docutils literal notranslate"><span class="pre">CONFIG_AWS_IOT_CLIENT_ID_MAX_LEN</span></code></p></li>
<li><p><code class="xref kconfig kconfig-option docutils literal notranslate"><span class="pre">CONFIG_AWS_IOT_BROKER_HOST_NAME_MAX_LEN</span></code></p></li>
<li><p><code class="xref kconfig kconfig-option docutils literal notranslate"><span class="pre">CONFIG_AWS_IOT_BROKER_HOST_NAME_APP</span></code></p></li>
</ul>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>If you are using a longer device ID that is either set by the option <code class="xref kconfig kconfig-option docutils literal notranslate"><span class="pre">CONFIG_AWS_IOT_CLIENT_ID_STATIC</span></code> or passed in during initialization, it might be required to increase the value of the option <code class="xref kconfig kconfig-option docutils literal notranslate"><span class="pre">CONFIG_AWS_IOT_CLIENT_ID_MAX_LEN</span></code> for proper initialization of the library.</p>
</div>
</section>
</section>
<section id="usage">
<h2><a class="toc-backref" href="#id12">Usage</a><a class="headerlink" href="#usage" title="Permalink to this heading"></a></h2>
<p>The <a class="reference internal" href="../../samples/nrf9160/aws_iot/README.html#aws-iot"><span class="std std-ref">nRF9160: AWS IoT</span></a> sample showcases the use of this library and can be used to verify a connection to AWS IoT.
To configure and run the sample, complete the steps described in <a class="reference internal" href="../../samples/nrf9160/aws_iot/README.html#setup-awsiot"><span class="std std-ref">Setup</span></a> and <a class="reference internal" href="../../samples/nrf9160/aws_iot/README.html#aws-iot-sample-building-and-running"><span class="std std-ref">Building and running</span></a>.</p>
<section id="initializing-the-library">
<h3><a class="toc-backref" href="#id13">Initializing the library</a><a class="headerlink" href="#initializing-the-library" title="Permalink to this heading"></a></h3>
<p>The library is initialized by calling the <a class="reference internal" href="#c.aws_iot_init" title="aws_iot_init"><code class="xref c c-func docutils literal notranslate"><span class="pre">aws_iot_init()</span></code></a> function.
If this API call fails, the application must not make any other API calls to the library.</p>
</section>
<section id="connecting-to-the-aws-iot-message-broker">
<h3><a class="toc-backref" href="#id14">Connecting to the AWS IoT message broker</a><a class="headerlink" href="#connecting-to-the-aws-iot-message-broker" title="Permalink to this heading"></a></h3>
<p>After the initialization, the <a class="reference internal" href="#c.aws_iot_connect" title="aws_iot_connect"><code class="xref c c-func docutils literal notranslate"><span class="pre">aws_iot_connect()</span></code></a> function must be called to connect to the AWS IoT broker.
If this API call fails, the application must retry the connection by calling <a class="reference internal" href="#c.aws_iot_connect" title="aws_iot_connect"><code class="xref c c-func docutils literal notranslate"><span class="pre">aws_iot_connect()</span></code></a> again.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The connection attempt can fail due to several reasons related to the network.
Due to this its recommended to implement a routine that tries to reconnect the device upon a disconnect.</p>
</div>
<p>During an attempt to connect to the AWS IoT broker, the library tries to establish a connection using a TLS handshake, which usually spans a few seconds.
When the library has established a connection and subscribed to all the configured and passed-in topics, it will propagate the <a class="reference internal" href="#c.aws_iot_evt_type.AWS_IOT_EVT_READY" title="AWS_IOT_EVT_READY"><code class="xref c c-enumerator docutils literal notranslate"><span class="pre">AWS_IOT_EVT_READY</span></code></a> event to signify that the library is ready to be used.</p>
</section>
<section id="subscribing-to-non-aws-specific-topics">
<h3><a class="toc-backref" href="#id15">Subscribing to non-AWS specific topics</a><a class="headerlink" href="#subscribing-to-non-aws-specific-topics" title="Permalink to this heading"></a></h3>
<p>To subscribe to non-AWS specific topics, complete the following steps:</p>
<ul class="simple">
<li><p>Specify the number of additional topics that needs to be subscribed to, by setting the <code class="xref kconfig kconfig-option docutils literal notranslate"><span class="pre">CONFIG_AWS_IOT_APP_SUBSCRIPTION_LIST_COUNT</span></code> option.</p></li>
<li><p>Pass a list containing application specific topics in the <a class="reference internal" href="#c.aws_iot_subscription_topics_add" title="aws_iot_subscription_topics_add"><code class="xref c c-func docutils literal notranslate"><span class="pre">aws_iot_subscription_topics_add()</span></code></a> function, after the <a class="reference internal" href="#c.aws_iot_init" title="aws_iot_init"><code class="xref c c-func docutils literal notranslate"><span class="pre">aws_iot_init()</span></code></a> function call and before the <a class="reference internal" href="#c.aws_iot_connect" title="aws_iot_connect"><code class="xref c c-func docutils literal notranslate"><span class="pre">aws_iot_connect()</span></code></a> function call.</p></li>
</ul>
<p>The following code example shows how to subscribe to non-AWS specific topics:</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="cp">#define CUSTOM_TOPIC_1  &quot;my-custom-topic/example&quot;</span>
<span class="cp">#define CUSTOM_TOPIC_2  &quot;my-custom-topic/example2&quot;</span>

<span class="k">const</span><span class="w"> </span><span class="k">struct</span><span class="w"> </span><span class="nc">aws_iot_topic_data</span><span class="w"> </span><span class="n">topics_list</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="p">[</span><span class="mi">0</span><span class="p">].</span><span class="n">str</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">CUSTOM_TOPIC_1</span><span class="p">,</span>
<span class="w">        </span><span class="p">[</span><span class="mi">0</span><span class="p">].</span><span class="n">len</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">strlen</span><span class="p">(</span><span class="n">CUSTOM_TOPIC_1</span><span class="p">),</span>
<span class="w">        </span><span class="p">[</span><span class="mi">1</span><span class="p">].</span><span class="n">str</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">CUSTOM_TOPIC_2</span><span class="p">,</span>
<span class="w">        </span><span class="p">[</span><span class="mi">1</span><span class="p">].</span><span class="n">len</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">strlen</span><span class="p">(</span><span class="n">CUSTOM_TOPIC_2</span><span class="p">)</span>
<span class="p">};</span>

<span class="n">err</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">aws_iot_subscription_topics_add</span><span class="p">(</span><span class="n">topics_list</span><span class="p">,</span><span class="w"> </span><span class="n">ARRAY_SIZE</span><span class="p">(</span><span class="n">topics_list</span><span class="p">));</span>
<span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">err</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">LOG_ERR</span><span class="p">(</span><span class="s">&quot;aws_iot_subscription_topics_add, error: %d&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">err</span><span class="p">);</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="n">err</span><span class="p">;</span>
<span class="p">}</span>

<span class="n">err</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">aws_iot_init</span><span class="p">(</span><span class="nb">NULL</span><span class="p">,</span><span class="w"> </span><span class="n">aws_iot_event_handler</span><span class="p">);</span>
<span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">err</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">LOG_ERR</span><span class="p">(</span><span class="s">&quot;AWS IoT library could not be initialized, error: %d&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">err</span><span class="p">);</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="n">err</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
</div>
</section>
<section id="publishing-to-non-aws-specific-topics">
<h3><a class="toc-backref" href="#id16">Publishing to non-AWS specific topics</a><a class="headerlink" href="#publishing-to-non-aws-specific-topics" title="Permalink to this heading"></a></h3>
<p>To publish to a non-AWS specific topic, complete the following steps:</p>
<ul class="simple">
<li><p>Populate a <a class="reference internal" href="#c.aws_iot_topic_data" title="aws_iot_topic_data"><code class="xref c c-struct docutils literal notranslate"><span class="pre">aws_iot_topic_data</span></code></a> with the custom topics that you want to publish to.
It is not necessary to set the topic type when populating the <a class="reference internal" href="#c.aws_iot_topic_data" title="aws_iot_topic_data"><code class="xref c c-struct docutils literal notranslate"><span class="pre">aws_iot_topic_data</span></code></a> structure.
This type is reserved for AWS IoT shadow topics.</p></li>
<li><p>Pass in the entry that corresponds to the topic that the payload is to be published to in the message structure <a class="reference internal" href="#c.aws_iot_data" title="aws_iot_data"><code class="xref c c-struct docutils literal notranslate"><span class="pre">aws_iot_data</span></code></a>.
This structure is then passed into the <a class="reference internal" href="#c.aws_iot_send" title="aws_iot_send"><code class="xref c c-func docutils literal notranslate"><span class="pre">aws_iot_send()</span></code></a> function.</p></li>
</ul>
<p>The following code example shows how to publish to non-AWS specific topics:</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="cp">#define MY_CUSTOM_TOPIC_1 &quot;my-custom-topic/example&quot;</span>
<span class="cp">#define MY_CUSTOM_TOPIC_1_IDX 0</span>

<span class="k">static</span><span class="w"> </span><span class="k">struct</span><span class="w"> </span><span class="nc">aws_iot_topic_data</span><span class="w"> </span><span class="n">pub_topics</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="p">[</span><span class="n">MY_CUSTOM_TOPIC_1_IDX</span><span class="p">].</span><span class="n">str</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">MY_CUSTOM_TOPIC_1</span><span class="p">,</span>
<span class="w">        </span><span class="p">[</span><span class="n">MY_CUSTOM_TOPIC_1_IDX</span><span class="p">].</span><span class="n">len</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">strlen</span><span class="p">(</span><span class="n">MY_CUSTOM_TOPIC_1</span><span class="p">),</span>
<span class="p">};</span>

<span class="k">struct</span><span class="w"> </span><span class="nc">aws_iot_data</span><span class="w"> </span><span class="n">msg</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="cm">/* Pointer to payload */</span>
<span class="w">        </span><span class="p">.</span><span class="n">ptr</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">buf</span><span class="p">,</span>

<span class="w">        </span><span class="cm">/* Length of payload */</span>
<span class="w">        </span><span class="p">.</span><span class="n">len</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">len</span><span class="p">,</span>

<span class="w">         </span><span class="cm">/* Message ID , if not set it will be provided by the AWS IoT library */</span>
<span class="w">        </span><span class="p">.</span><span class="n">message_id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">id</span><span class="p">,</span>

<span class="w">        </span><span class="cm">/* Quality of Service level */</span>
<span class="w">        </span><span class="p">.</span><span class="n">qos</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">MQTT_QOS_0_AT_MOST_ONCE</span><span class="p">,</span>

<span class="w">        </span><span class="cm">/* &quot;my-custom-topic/example&quot; */</span>
<span class="w">        </span><span class="p">.</span><span class="n">topic</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">pub_topics</span><span class="p">[</span><span class="n">MY_CUSTOM_TOPIC_1_IDX</span><span class="p">]</span>
<span class="p">};</span>

<span class="n">err</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">aws_iot_send</span><span class="p">(</span><span class="o">&amp;</span><span class="n">msg</span><span class="p">);</span>
<span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">err</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">LOG_ERR</span><span class="p">(</span><span class="s">&quot;aws_iot_send, error: %d&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">err</span><span class="p">);</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="n">err</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
</div>
</section>
<section id="setting-client-id-at-run-time">
<h3><a class="toc-backref" href="#id17">Setting client ID at run-time</a><a class="headerlink" href="#setting-client-id-at-run-time" title="Permalink to this heading"></a></h3>
<p>The AWS IoT library also supports passing in the client ID at run time.
To enable this feature, set the <code class="docutils literal notranslate"><span class="pre">client_id</span></code> entry in the <a class="reference internal" href="#c.aws_iot_config" title="aws_iot_config"><code class="xref c c-struct docutils literal notranslate"><span class="pre">aws_iot_config</span></code></a> structure that is passed in the <a class="reference internal" href="#c.aws_iot_init" title="aws_iot_init"><code class="xref c c-func docutils literal notranslate"><span class="pre">aws_iot_init()</span></code></a> function when initializing the library, and set the <code class="xref kconfig kconfig-option docutils literal notranslate"><span class="pre">CONFIG_AWS_IOT_CLIENT_ID_APP</span></code> Kconfig option.</p>
</section>
<section id="setting-the-aws-host-name-at-runtime">
<span id="lib-set-aws-hostname"></span><h3><a class="toc-backref" href="#id18">Setting the AWS host name at runtime</a><a class="headerlink" href="#setting-the-aws-host-name-at-runtime" title="Permalink to this heading"></a></h3>
<p>The AWS IoT library also supports passing the endpoint address at runtime by setting the <code class="xref kconfig kconfig-option docutils literal notranslate"><span class="pre">CONFIG_AWS_IOT_BROKER_HOST_NAME_APP</span></code> option.
If this option is set, the <code class="docutils literal notranslate"><span class="pre">host_name</span></code> and <code class="docutils literal notranslate"><span class="pre">host_name_len</span></code> must be set in the <a class="reference internal" href="#c.aws_iot_config" title="aws_iot_config"><code class="xref c c-struct docutils literal notranslate"><span class="pre">aws_iot_config</span></code></a> structure before it is passed into the <a class="reference internal" href="#c.aws_iot_init" title="aws_iot_init"><code class="xref c c-func docutils literal notranslate"><span class="pre">aws_iot_init()</span></code></a> function.
The length of your AWS host name (<code class="xref kconfig kconfig-option docutils literal notranslate"><span class="pre">CONFIG_AWS_IOT_BROKER_HOST_NAME</span></code>) must be shorter than the default value of <code class="xref kconfig kconfig-option docutils literal notranslate"><span class="pre">CONFIG_AWS_IOT_BROKER_HOST_NAME_MAX_LEN</span></code>, for proper initialization of the library.</p>
</section>
<section id="testing-and-debugging">
<h3><a class="toc-backref" href="#id19">Testing and debugging</a><a class="headerlink" href="#testing-and-debugging" title="Permalink to this heading"></a></h3>
<p>If you have issues with the library or sample, refer to <a class="reference internal" href="../../getting_started/testing.html#gs-testing"><span class="std std-ref">Testing and debugging an application</span></a>.</p>
</section>
<section id="troubleshooting">
<h3><a class="toc-backref" href="#id20">Troubleshooting</a><a class="headerlink" href="#troubleshooting" title="Permalink to this heading"></a></h3>
<p>For issues related to the library and nRF Connect SDK in general, refer to <a class="reference internal" href="../../known_issues.html#known-issues"><span class="std std-ref">Known issues</span></a>.</p>
</section>
<section id="aws-fota">
<h3><a class="toc-backref" href="#id21">AWS FOTA</a><a class="headerlink" href="#aws-fota" title="Permalink to this heading"></a></h3>
<p>The library automatically includes and enables support for FOTA using the <a class="reference internal" href="aws_fota.html#lib-aws-fota"><span class="std std-ref">AWS FOTA</span></a> library.
To create a FOTA job, refer to the <a class="reference internal" href="aws_fota.html#lib-aws-fota"><span class="std std-ref">AWS FOTA</span></a> documentation.</p>
</section>
</section>
<section id="api-documentation">
<h2><a class="toc-backref" href="#id22">API documentation</a><a class="headerlink" href="#api-documentation" title="Permalink to this heading"></a></h2>
<div class="line-block">
<div class="line">Header file: <code class="file docutils literal notranslate"><span class="pre">include/net/aws_iot.h</span></code></div>
<div class="line">Source files: <code class="file docutils literal notranslate"><span class="pre">subsys/net/lib/aws_iot/src/</span></code></div>
</div>
<dl>
<dt class="sig sig-object cpp">
<span class="target" id="group__aws__iot"></span><em><span class="pre">group</span></em> <span class="sig-name descname"><span class="pre">aws_iot</span></span></dt>
<dd><p>Library to connect the device to the AWS IoT message broker. </p>
<div class="breathe-sectiondef docutils container">
<p class="breathe-sectiondef-title rubric" id="breathe-section-title-typedefs">Typedefs</p>
<dl class="c type">
<dt class="sig sig-object c" id="c.aws_iot_evt_handler_t">
<span class="target" id="group__aws__iot_1ga8ca449b8869e8b51bc3a16081ba93c06"></span><span class="k"><span class="pre">typedef</span></span><span class="w"> </span><span class="kt"><span class="pre">void</span></span><span class="w"> </span><span class="p"><span class="pre">(</span></span><span class="p"><span class="pre">*</span></span><span class="sig-name descname"><span class="n"><span class="pre">aws_iot_evt_handler_t</span></span></span><span class="p"><span class="pre">)</span></span><span class="p"><span class="pre">(</span></span><span class="k"><span class="pre">const</span></span><span class="w"> </span><span class="k"><span class="pre">struct</span></span><span class="w"> </span><a class="reference internal" href="#c.aws_iot_evt" title="aws_iot_evt"><span class="n"><span class="pre">aws_iot_evt</span></span></a><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">evt</span></span><span class="p"><span class="pre">)</span></span><a class="headerlink" href="#c.aws_iot_evt_handler_t" title="Permalink to this definition"></a><br /></dt>
<dd><p>AWS IoT library asynchronous event handler. </p>
<dl class="field-list simple">
<dt class="field-odd">Param evt</dt>
<dd class="field-odd"><p><strong>[in]</strong> The event and any associated parameters. </p>
</dd>
</dl>
</dd></dl>

</div>
<div class="breathe-sectiondef docutils container">
<p class="breathe-sectiondef-title rubric" id="breathe-section-title-enums">Enums</p>
<dl class="c enum">
<dt class="sig sig-object c" id="c.aws_iot_shadow_topic_type">
<span class="target" id="group__aws__iot_1ga8595e946a4c2503d0649de884e103bf6"></span><span class="k"><span class="pre">enum</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">aws_iot_shadow_topic_type</span></span></span><a class="headerlink" href="#c.aws_iot_shadow_topic_type" title="Permalink to this definition"></a><br /></dt>
<dd><p>AWS IoT shadow topics, used in messages to specify which shadow topic that will be published to. </p>
<p><em>Values:</em></p>
<dl class="c enumerator">
<dt class="sig sig-object c" id="c.aws_iot_shadow_topic_type.AWS_IOT_SHADOW_TOPIC_NONE">
<span class="target" id="group__aws__iot_1gga8595e946a4c2503d0649de884e103bf6a2e956396f80c30beb7a185732dad6859"></span><span class="k"><span class="pre">enumerator</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">AWS_IOT_SHADOW_TOPIC_NONE</span></span></span><a class="headerlink" href="#c.aws_iot_shadow_topic_type.AWS_IOT_SHADOW_TOPIC_NONE" title="Permalink to this definition"></a><br /></dt>
<dd><p>Unused default value. </p>
</dd></dl>

<dl class="c enumerator">
<dt class="sig sig-object c" id="c.aws_iot_shadow_topic_type.AWS_IOT_SHADOW_TOPIC_GET">
<span class="target" id="group__aws__iot_1gga8595e946a4c2503d0649de884e103bf6a496fa67e8877bd82a4b3f164451a9ffd"></span><span class="k"><span class="pre">enumerator</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">AWS_IOT_SHADOW_TOPIC_GET</span></span></span><a class="headerlink" href="#c.aws_iot_shadow_topic_type.AWS_IOT_SHADOW_TOPIC_GET" title="Permalink to this definition"></a><br /></dt>
<dd><p>This topic type corresponds to $aws/things/&lt;thing-name&gt;/shadow/get, publishing an empty message to this topic requests the device shadow document. </p>
</dd></dl>

<dl class="c enumerator">
<dt class="sig sig-object c" id="c.aws_iot_shadow_topic_type.AWS_IOT_SHADOW_TOPIC_UPDATE">
<span class="target" id="group__aws__iot_1gga8595e946a4c2503d0649de884e103bf6a054dc4a4ad8206fce1f0577c49ff847c"></span><span class="k"><span class="pre">enumerator</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">AWS_IOT_SHADOW_TOPIC_UPDATE</span></span></span><a class="headerlink" href="#c.aws_iot_shadow_topic_type.AWS_IOT_SHADOW_TOPIC_UPDATE" title="Permalink to this definition"></a><br /></dt>
<dd><p>This topic type corresponds to $aws/things/&lt;thing-name&gt;/shadow/update, publishing data to this topic updates the device shadow document. </p>
</dd></dl>

<dl class="c enumerator">
<dt class="sig sig-object c" id="c.aws_iot_shadow_topic_type.AWS_IOT_SHADOW_TOPIC_DELETE">
<span class="target" id="group__aws__iot_1gga8595e946a4c2503d0649de884e103bf6ab6c478ac80d764badcf5674158df71b0"></span><span class="k"><span class="pre">enumerator</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">AWS_IOT_SHADOW_TOPIC_DELETE</span></span></span><a class="headerlink" href="#c.aws_iot_shadow_topic_type.AWS_IOT_SHADOW_TOPIC_DELETE" title="Permalink to this definition"></a><br /></dt>
<dd><p>This topic type corresponds to $aws/things/&lt;thing-name&gt;/shadow/delete, publishing an empty message to this topic deletes the device Shadow document. </p>
</dd></dl>

</dd></dl>

<dl class="c enum">
<dt class="sig sig-object c" id="c.aws_disconnect_result">
<span class="target" id="group__aws__iot_1ga1c599b6654c6c82352c5e66fa6e98765"></span><span class="k"><span class="pre">enum</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">aws_disconnect_result</span></span></span><a class="headerlink" href="#c.aws_disconnect_result" title="Permalink to this definition"></a><br /></dt>
<dd><p>&#64; AWS broker disconnect results. </p>
<p><em>Values:</em></p>
<dl class="c enumerator">
<dt class="sig sig-object c" id="c.aws_disconnect_result.AWS_IOT_DISCONNECT_USER_REQUEST">
<span class="target" id="group__aws__iot_1gga1c599b6654c6c82352c5e66fa6e98765ad6bdb20113bbbb8f29d12f0f69e56c69"></span><span class="k"><span class="pre">enumerator</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">AWS_IOT_DISCONNECT_USER_REQUEST</span></span></span><a class="headerlink" href="#c.aws_disconnect_result.AWS_IOT_DISCONNECT_USER_REQUEST" title="Permalink to this definition"></a><br /></dt>
<dd></dd></dl>

<dl class="c enumerator">
<dt class="sig sig-object c" id="c.aws_disconnect_result.AWS_IOT_DISCONNECT_CLOSED_BY_REMOTE">
<span class="target" id="group__aws__iot_1gga1c599b6654c6c82352c5e66fa6e98765af60b8544eec0ac7cfd23a43c1dff0b69"></span><span class="k"><span class="pre">enumerator</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">AWS_IOT_DISCONNECT_CLOSED_BY_REMOTE</span></span></span><a class="headerlink" href="#c.aws_disconnect_result.AWS_IOT_DISCONNECT_CLOSED_BY_REMOTE" title="Permalink to this definition"></a><br /></dt>
<dd></dd></dl>

<dl class="c enumerator">
<dt class="sig sig-object c" id="c.aws_disconnect_result.AWS_IOT_DISCONNECT_INVALID_REQUEST">
<span class="target" id="group__aws__iot_1gga1c599b6654c6c82352c5e66fa6e98765acbab07d93fc25c3e593c6716a451156c"></span><span class="k"><span class="pre">enumerator</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">AWS_IOT_DISCONNECT_INVALID_REQUEST</span></span></span><a class="headerlink" href="#c.aws_disconnect_result.AWS_IOT_DISCONNECT_INVALID_REQUEST" title="Permalink to this definition"></a><br /></dt>
<dd></dd></dl>

<dl class="c enumerator">
<dt class="sig sig-object c" id="c.aws_disconnect_result.AWS_IOT_DISCONNECT_MISC">
<span class="target" id="group__aws__iot_1gga1c599b6654c6c82352c5e66fa6e98765a3629dcd561a852961ae7d289b42a0405"></span><span class="k"><span class="pre">enumerator</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">AWS_IOT_DISCONNECT_MISC</span></span></span><a class="headerlink" href="#c.aws_disconnect_result.AWS_IOT_DISCONNECT_MISC" title="Permalink to this definition"></a><br /></dt>
<dd></dd></dl>

<dl class="c enumerator">
<dt class="sig sig-object c" id="c.aws_disconnect_result.AWS_IOT_DISCONNECT_COUNT">
<span class="target" id="group__aws__iot_1gga1c599b6654c6c82352c5e66fa6e98765ad3fed0848d1ec354be15822eb2d58870"></span><span class="k"><span class="pre">enumerator</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">AWS_IOT_DISCONNECT_COUNT</span></span></span><a class="headerlink" href="#c.aws_disconnect_result.AWS_IOT_DISCONNECT_COUNT" title="Permalink to this definition"></a><br /></dt>
<dd></dd></dl>

</dd></dl>

<dl class="c enum">
<dt class="sig sig-object c" id="c.aws_connect_result">
<span class="target" id="group__aws__iot_1ga456586665996aa221dcdf0c289c3c746"></span><span class="k"><span class="pre">enum</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">aws_connect_result</span></span></span><a class="headerlink" href="#c.aws_connect_result" title="Permalink to this definition"></a><br /></dt>
<dd><p>AWS broker connect results. </p>
<p><em>Values:</em></p>
<dl class="c enumerator">
<dt class="sig sig-object c" id="c.aws_connect_result.AWS_IOT_CONNECT_RES_SUCCESS">
<span class="target" id="group__aws__iot_1gga456586665996aa221dcdf0c289c3c746a969c0fd65239fc91469d77d5d1e84fba"></span><span class="k"><span class="pre">enumerator</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">AWS_IOT_CONNECT_RES_SUCCESS</span></span></span><a class="headerlink" href="#c.aws_connect_result.AWS_IOT_CONNECT_RES_SUCCESS" title="Permalink to this definition"></a><br /></dt>
<dd></dd></dl>

<dl class="c enumerator">
<dt class="sig sig-object c" id="c.aws_connect_result.AWS_IOT_CONNECT_RES_ERR_NOT_INITD">
<span class="target" id="group__aws__iot_1gga456586665996aa221dcdf0c289c3c746a751cf2431cec67733223320531fc4b81"></span><span class="k"><span class="pre">enumerator</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">AWS_IOT_CONNECT_RES_ERR_NOT_INITD</span></span></span><a class="headerlink" href="#c.aws_connect_result.AWS_IOT_CONNECT_RES_ERR_NOT_INITD" title="Permalink to this definition"></a><br /></dt>
<dd></dd></dl>

<dl class="c enumerator">
<dt class="sig sig-object c" id="c.aws_connect_result.AWS_IOT_CONNECT_RES_ERR_INVALID_PARAM">
<span class="target" id="group__aws__iot_1gga456586665996aa221dcdf0c289c3c746ab9b98696ab37ae11dc87ad07f32722f5"></span><span class="k"><span class="pre">enumerator</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">AWS_IOT_CONNECT_RES_ERR_INVALID_PARAM</span></span></span><a class="headerlink" href="#c.aws_connect_result.AWS_IOT_CONNECT_RES_ERR_INVALID_PARAM" title="Permalink to this definition"></a><br /></dt>
<dd></dd></dl>

<dl class="c enumerator">
<dt class="sig sig-object c" id="c.aws_connect_result.AWS_IOT_CONNECT_RES_ERR_NETWORK">
<span class="target" id="group__aws__iot_1gga456586665996aa221dcdf0c289c3c746a421dbc5e11500c2f8b0c4e3a9fc0a2c6"></span><span class="k"><span class="pre">enumerator</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">AWS_IOT_CONNECT_RES_ERR_NETWORK</span></span></span><a class="headerlink" href="#c.aws_connect_result.AWS_IOT_CONNECT_RES_ERR_NETWORK" title="Permalink to this definition"></a><br /></dt>
<dd></dd></dl>

<dl class="c enumerator">
<dt class="sig sig-object c" id="c.aws_connect_result.AWS_IOT_CONNECT_RES_ERR_BACKEND">
<span class="target" id="group__aws__iot_1gga456586665996aa221dcdf0c289c3c746aae5cf6f66942283ad3fb7e494d19adad"></span><span class="k"><span class="pre">enumerator</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">AWS_IOT_CONNECT_RES_ERR_BACKEND</span></span></span><a class="headerlink" href="#c.aws_connect_result.AWS_IOT_CONNECT_RES_ERR_BACKEND" title="Permalink to this definition"></a><br /></dt>
<dd></dd></dl>

<dl class="c enumerator">
<dt class="sig sig-object c" id="c.aws_connect_result.AWS_IOT_CONNECT_RES_ERR_MISC">
<span class="target" id="group__aws__iot_1gga456586665996aa221dcdf0c289c3c746a90954fec385d4952e242d26053882c39"></span><span class="k"><span class="pre">enumerator</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">AWS_IOT_CONNECT_RES_ERR_MISC</span></span></span><a class="headerlink" href="#c.aws_connect_result.AWS_IOT_CONNECT_RES_ERR_MISC" title="Permalink to this definition"></a><br /></dt>
<dd></dd></dl>

<dl class="c enumerator">
<dt class="sig sig-object c" id="c.aws_connect_result.AWS_IOT_CONNECT_RES_ERR_NO_MEM">
<span class="target" id="group__aws__iot_1gga456586665996aa221dcdf0c289c3c746acd8648d89fe0127f54ef690632960ad8"></span><span class="k"><span class="pre">enumerator</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">AWS_IOT_CONNECT_RES_ERR_NO_MEM</span></span></span><a class="headerlink" href="#c.aws_connect_result.AWS_IOT_CONNECT_RES_ERR_NO_MEM" title="Permalink to this definition"></a><br /></dt>
<dd></dd></dl>

<dl class="c enumerator">
<dt class="sig sig-object c" id="c.aws_connect_result.AWS_IOT_CONNECT_RES_ERR_PRV_KEY">
<span class="target" id="group__aws__iot_1gga456586665996aa221dcdf0c289c3c746ae221e96602f0acab8fa0df6a663c69ae"></span><span class="k"><span class="pre">enumerator</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">AWS_IOT_CONNECT_RES_ERR_PRV_KEY</span></span></span><a class="headerlink" href="#c.aws_connect_result.AWS_IOT_CONNECT_RES_ERR_PRV_KEY" title="Permalink to this definition"></a><br /></dt>
<dd></dd></dl>

<dl class="c enumerator">
<dt class="sig sig-object c" id="c.aws_connect_result.AWS_IOT_CONNECT_RES_ERR_CERT">
<span class="target" id="group__aws__iot_1gga456586665996aa221dcdf0c289c3c746a41d898630184849c55550fe550d2cfee"></span><span class="k"><span class="pre">enumerator</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">AWS_IOT_CONNECT_RES_ERR_CERT</span></span></span><a class="headerlink" href="#c.aws_connect_result.AWS_IOT_CONNECT_RES_ERR_CERT" title="Permalink to this definition"></a><br /></dt>
<dd></dd></dl>

<dl class="c enumerator">
<dt class="sig sig-object c" id="c.aws_connect_result.AWS_IOT_CONNECT_RES_ERR_CERT_MISC">
<span class="target" id="group__aws__iot_1gga456586665996aa221dcdf0c289c3c746a0d8ee60f2098a496ec924f99849a19b0"></span><span class="k"><span class="pre">enumerator</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">AWS_IOT_CONNECT_RES_ERR_CERT_MISC</span></span></span><a class="headerlink" href="#c.aws_connect_result.AWS_IOT_CONNECT_RES_ERR_CERT_MISC" title="Permalink to this definition"></a><br /></dt>
<dd></dd></dl>

<dl class="c enumerator">
<dt class="sig sig-object c" id="c.aws_connect_result.AWS_IOT_CONNECT_RES_ERR_TIMEOUT_NO_DATA">
<span class="target" id="group__aws__iot_1gga456586665996aa221dcdf0c289c3c746abdfc59c884474050a540ec022587b14e"></span><span class="k"><span class="pre">enumerator</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">AWS_IOT_CONNECT_RES_ERR_TIMEOUT_NO_DATA</span></span></span><a class="headerlink" href="#c.aws_connect_result.AWS_IOT_CONNECT_RES_ERR_TIMEOUT_NO_DATA" title="Permalink to this definition"></a><br /></dt>
<dd></dd></dl>

<dl class="c enumerator">
<dt class="sig sig-object c" id="c.aws_connect_result.AWS_IOT_CONNECT_RES_ERR_ALREADY_CONNECTED">
<span class="target" id="group__aws__iot_1gga456586665996aa221dcdf0c289c3c746a322b175fff3e73222e1c950d777904b1"></span><span class="k"><span class="pre">enumerator</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">AWS_IOT_CONNECT_RES_ERR_ALREADY_CONNECTED</span></span></span><a class="headerlink" href="#c.aws_connect_result.AWS_IOT_CONNECT_RES_ERR_ALREADY_CONNECTED" title="Permalink to this definition"></a><br /></dt>
<dd></dd></dl>

</dd></dl>

<dl class="c enum">
<dt class="sig sig-object c" id="c.aws_iot_evt_type">
<span class="target" id="group__aws__iot_1gae9de5373422676c25b58a93746587638"></span><span class="k"><span class="pre">enum</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">aws_iot_evt_type</span></span></span><a class="headerlink" href="#c.aws_iot_evt_type" title="Permalink to this definition"></a><br /></dt>
<dd><p>AWS IoT notification event types, used to signal the application. </p>
<p><em>Values:</em></p>
<dl class="c enumerator">
<dt class="sig sig-object c" id="c.aws_iot_evt_type.AWS_IOT_EVT_CONNECTING">
<span class="target" id="group__aws__iot_1ggae9de5373422676c25b58a93746587638a02a509b4f4a10d6b0bc4233a9e61faad"></span><span class="k"><span class="pre">enumerator</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">AWS_IOT_EVT_CONNECTING</span></span></span><a class="headerlink" href="#c.aws_iot_evt_type.AWS_IOT_EVT_CONNECTING" title="Permalink to this definition"></a><br /></dt>
<dd><p>Connecting to AWS IoT broker. </p>
</dd></dl>

<dl class="c enumerator">
<dt class="sig sig-object c" id="c.aws_iot_evt_type.AWS_IOT_EVT_CONNECTED">
<span class="target" id="group__aws__iot_1ggae9de5373422676c25b58a93746587638a282d36de7b433f860327df3c63a6316e"></span><span class="k"><span class="pre">enumerator</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">AWS_IOT_EVT_CONNECTED</span></span></span><a class="headerlink" href="#c.aws_iot_evt_type.AWS_IOT_EVT_CONNECTED" title="Permalink to this definition"></a><br /></dt>
<dd><p>Connected to AWS IoT broker. </p>
</dd></dl>

<dl class="c enumerator">
<dt class="sig sig-object c" id="c.aws_iot_evt_type.AWS_IOT_EVT_READY">
<span class="target" id="group__aws__iot_1ggae9de5373422676c25b58a93746587638a963b40d670a04d811065f04f2c6b9981"></span><span class="k"><span class="pre">enumerator</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">AWS_IOT_EVT_READY</span></span></span><a class="headerlink" href="#c.aws_iot_evt_type.AWS_IOT_EVT_READY" title="Permalink to this definition"></a><br /></dt>
<dd><p>AWS IoT library has subscribed to all configured topics. </p>
</dd></dl>

<dl class="c enumerator">
<dt class="sig sig-object c" id="c.aws_iot_evt_type.AWS_IOT_EVT_DISCONNECTED">
<span class="target" id="group__aws__iot_1ggae9de5373422676c25b58a93746587638ae71994c8300c824cc227dce81f7b8ced"></span><span class="k"><span class="pre">enumerator</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">AWS_IOT_EVT_DISCONNECTED</span></span></span><a class="headerlink" href="#c.aws_iot_evt_type.AWS_IOT_EVT_DISCONNECTED" title="Permalink to this definition"></a><br /></dt>
<dd><p>Disconnected to AWS IoT broker. </p>
</dd></dl>

<dl class="c enumerator">
<dt class="sig sig-object c" id="c.aws_iot_evt_type.AWS_IOT_EVT_DATA_RECEIVED">
<span class="target" id="group__aws__iot_1ggae9de5373422676c25b58a93746587638aaa4d453fb0a1d8a6e42737082b806bb1"></span><span class="k"><span class="pre">enumerator</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">AWS_IOT_EVT_DATA_RECEIVED</span></span></span><a class="headerlink" href="#c.aws_iot_evt_type.AWS_IOT_EVT_DATA_RECEIVED" title="Permalink to this definition"></a><br /></dt>
<dd><p>Data received from AWS message broker. </p>
</dd></dl>

<dl class="c enumerator">
<dt class="sig sig-object c" id="c.aws_iot_evt_type.AWS_IOT_EVT_PUBACK">
<span class="target" id="group__aws__iot_1ggae9de5373422676c25b58a93746587638a10313819513b53917d72f0079008a854"></span><span class="k"><span class="pre">enumerator</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">AWS_IOT_EVT_PUBACK</span></span></span><a class="headerlink" href="#c.aws_iot_evt_type.AWS_IOT_EVT_PUBACK" title="Permalink to this definition"></a><br /></dt>
<dd><p>Acknowledgment for data sent to AWS IoT. </p>
</dd></dl>

<dl class="c enumerator">
<dt class="sig sig-object c" id="c.aws_iot_evt_type.AWS_IOT_EVT_PINGRESP">
<span class="target" id="group__aws__iot_1ggae9de5373422676c25b58a93746587638a2ca6148103678106120a180df7713f3e"></span><span class="k"><span class="pre">enumerator</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">AWS_IOT_EVT_PINGRESP</span></span></span><a class="headerlink" href="#c.aws_iot_evt_type.AWS_IOT_EVT_PINGRESP" title="Permalink to this definition"></a><br /></dt>
<dd><p>Acknowledgment for pings sent to AWS IoT. </p>
</dd></dl>

<dl class="c enumerator">
<dt class="sig sig-object c" id="c.aws_iot_evt_type.AWS_IOT_EVT_FOTA_START">
<span class="target" id="group__aws__iot_1ggae9de5373422676c25b58a93746587638a61d3c66e8309de00b8516d4e695c6529"></span><span class="k"><span class="pre">enumerator</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">AWS_IOT_EVT_FOTA_START</span></span></span><a class="headerlink" href="#c.aws_iot_evt_type.AWS_IOT_EVT_FOTA_START" title="Permalink to this definition"></a><br /></dt>
<dd><p>FOTA update start. </p>
</dd></dl>

<dl class="c enumerator">
<dt class="sig sig-object c" id="c.aws_iot_evt_type.AWS_IOT_EVT_FOTA_DONE">
<span class="target" id="group__aws__iot_1ggae9de5373422676c25b58a93746587638abbc07a964320fd80fbb18368e8a6d791"></span><span class="k"><span class="pre">enumerator</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">AWS_IOT_EVT_FOTA_DONE</span></span></span><a class="headerlink" href="#c.aws_iot_evt_type.AWS_IOT_EVT_FOTA_DONE" title="Permalink to this definition"></a><br /></dt>
<dd><p>FOTA update done, request to reboot. </p>
</dd></dl>

<dl class="c enumerator">
<dt class="sig sig-object c" id="c.aws_iot_evt_type.AWS_IOT_EVT_FOTA_ERASE_PENDING">
<span class="target" id="group__aws__iot_1ggae9de5373422676c25b58a93746587638abf242dce03ef2f7cd07860ff4aff65a2"></span><span class="k"><span class="pre">enumerator</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">AWS_IOT_EVT_FOTA_ERASE_PENDING</span></span></span><a class="headerlink" href="#c.aws_iot_evt_type.AWS_IOT_EVT_FOTA_ERASE_PENDING" title="Permalink to this definition"></a><br /></dt>
<dd><p>FOTA erase pending. </p>
</dd></dl>

<dl class="c enumerator">
<dt class="sig sig-object c" id="c.aws_iot_evt_type.AWS_IOT_EVT_FOTA_ERASE_DONE">
<span class="target" id="group__aws__iot_1ggae9de5373422676c25b58a93746587638a0511e6a8638a479eec08433d99141ba6"></span><span class="k"><span class="pre">enumerator</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">AWS_IOT_EVT_FOTA_ERASE_DONE</span></span></span><a class="headerlink" href="#c.aws_iot_evt_type.AWS_IOT_EVT_FOTA_ERASE_DONE" title="Permalink to this definition"></a><br /></dt>
<dd><p>FOTA erase done. </p>
</dd></dl>

<dl class="c enumerator">
<dt class="sig sig-object c" id="c.aws_iot_evt_type.AWS_IOT_EVT_FOTA_DL_PROGRESS">
<span class="target" id="group__aws__iot_1ggae9de5373422676c25b58a93746587638aee83af981739065cd0cac05c53179396"></span><span class="k"><span class="pre">enumerator</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">AWS_IOT_EVT_FOTA_DL_PROGRESS</span></span></span><a class="headerlink" href="#c.aws_iot_evt_type.AWS_IOT_EVT_FOTA_DL_PROGRESS" title="Permalink to this definition"></a><br /></dt>
<dd><p>FOTA progress notification. </p>
</dd></dl>

<dl class="c enumerator">
<dt class="sig sig-object c" id="c.aws_iot_evt_type.AWS_IOT_EVT_FOTA_ERROR">
<span class="target" id="group__aws__iot_1ggae9de5373422676c25b58a93746587638a16c0c368189125809447e9fc848da445"></span><span class="k"><span class="pre">enumerator</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">AWS_IOT_EVT_FOTA_ERROR</span></span></span><a class="headerlink" href="#c.aws_iot_evt_type.AWS_IOT_EVT_FOTA_ERROR" title="Permalink to this definition"></a><br /></dt>
<dd><p>FOTA error. Used to propagate FOTA-related errors to the application. This is to distinguish between AWS_IOT irrecoverable errors and FOTA errors, so they can be handled differently. </p>
</dd></dl>

<dl class="c enumerator">
<dt class="sig sig-object c" id="c.aws_iot_evt_type.AWS_IOT_EVT_ERROR">
<span class="target" id="group__aws__iot_1ggae9de5373422676c25b58a93746587638aa792b1f227096fcf2238021629ec2ea2"></span><span class="k"><span class="pre">enumerator</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">AWS_IOT_EVT_ERROR</span></span></span><a class="headerlink" href="#c.aws_iot_evt_type.AWS_IOT_EVT_ERROR" title="Permalink to this definition"></a><br /></dt>
<dd><p>AWS IoT library irrecoverable error. </p>
</dd></dl>

</dd></dl>

</div>
<div class="breathe-sectiondef docutils container">
<p class="breathe-sectiondef-title rubric" id="breathe-section-title-functions">Functions</p>
<dl class="c function">
<dt class="sig sig-object c" id="c.aws_iot_init">
<span class="target" id="group__aws__iot_1ga85215ccf79938672b0fa5ae3cd3c079f"></span><span class="kt"><span class="pre">int</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">aws_iot_init</span></span></span><span class="sig-paren">(</span><span class="k"><span class="pre">const</span></span><span class="w"> </span><span class="k"><span class="pre">struct</span></span><span class="w"> </span><a class="reference internal" href="#c.aws_iot_config" title="aws_iot_config"><span class="n"><span class="pre">aws_iot_config</span></span></a><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="k"><span class="pre">const</span></span><span class="w"> </span><span class="n"><span class="pre">config</span></span>, <a class="reference internal" href="#c.aws_iot_evt_handler_t" title="aws_iot_evt_handler_t"><span class="n"><span class="pre">aws_iot_evt_handler_t</span></span></a><span class="w"> </span><span class="n"><span class="pre">event_handler</span></span><span class="sig-paren">)</span><a class="headerlink" href="#c.aws_iot_init" title="Permalink to this definition"></a><br /></dt>
<dd><p>Initialize the module. </p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This API must be called exactly once, and it must return successfully.</p>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>config</strong> – <strong>[in]</strong> Pointer to struct containing connection parameters. </p></li>
<li><p><strong>event_handler</strong> – <strong>[in]</strong> Pointer to event handler to receive AWS IoT module events.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>0 If successful. Otherwise, a (negative) error code is returned. </p>
</dd>
</dl>
</dd></dl>

<dl class="c function">
<dt class="sig sig-object c" id="c.aws_iot_connect">
<span class="target" id="group__aws__iot_1ga680f256a6054e074f04764a88d743454"></span><span class="kt"><span class="pre">int</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">aws_iot_connect</span></span></span><span class="sig-paren">(</span><span class="k"><span class="pre">struct</span></span><span class="w"> </span><a class="reference internal" href="#c.aws_iot_config" title="aws_iot_config"><span class="n"><span class="pre">aws_iot_config</span></span></a><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="k"><span class="pre">const</span></span><span class="w"> </span><span class="n"><span class="pre">config</span></span><span class="sig-paren">)</span><a class="headerlink" href="#c.aws_iot_connect" title="Permalink to this definition"></a><br /></dt>
<dd><p>Connect to the AWS IoT broker. </p>
<p>This function exposes the MQTT socket to main so that it can be polled on.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>config</strong> – <strong>[out]</strong> Pointer to struct containing connection parameters, the MQTT connection socket number will be copied to the socket entry of the struct.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>0 If successful. Otherwise, a (negative) error code is returned. </p>
</dd>
</dl>
</dd></dl>

<dl class="c function">
<dt class="sig sig-object c" id="c.aws_iot_disconnect">
<span class="target" id="group__aws__iot_1ga777becb5532ce9e4fdcf9b5625c88149"></span><span class="kt"><span class="pre">int</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">aws_iot_disconnect</span></span></span><span class="sig-paren">(</span><span class="kt"><span class="pre">void</span></span><span class="sig-paren">)</span><a class="headerlink" href="#c.aws_iot_disconnect" title="Permalink to this definition"></a><br /></dt>
<dd><p>Disconnect from the AWS IoT broker. </p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>0 If successful. Otherwise, a (negative) error code is returned. </p>
</dd>
</dl>
</dd></dl>

<dl class="c function">
<dt class="sig sig-object c" id="c.aws_iot_send">
<span class="target" id="group__aws__iot_1ga6d7ff95e36fa026d20fad6baefa908b3"></span><span class="kt"><span class="pre">int</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">aws_iot_send</span></span></span><span class="sig-paren">(</span><span class="k"><span class="pre">const</span></span><span class="w"> </span><span class="k"><span class="pre">struct</span></span><span class="w"> </span><a class="reference internal" href="#c.aws_iot_data" title="aws_iot_data"><span class="n"><span class="pre">aws_iot_data</span></span></a><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="k"><span class="pre">const</span></span><span class="w"> </span><span class="n"><span class="pre">tx_data</span></span><span class="sig-paren">)</span><a class="headerlink" href="#c.aws_iot_send" title="Permalink to this definition"></a><br /></dt>
<dd><p>Send data to AWS IoT broker. </p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>tx_data</strong> – <strong>[in]</strong> Pointer to struct containing data to be transmitted to the AWS IoT broker.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>0 If successful. Otherwise, a (negative) error code is returned. </p>
</dd>
</dl>
</dd></dl>

<dl class="c function">
<dt class="sig sig-object c" id="c.aws_iot_input">
<span class="target" id="group__aws__iot_1gab620edf70e4117a467e9b9bf8ea8175a"></span><span class="kt"><span class="pre">int</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">aws_iot_input</span></span></span><span class="sig-paren">(</span><span class="kt"><span class="pre">void</span></span><span class="sig-paren">)</span><a class="headerlink" href="#c.aws_iot_input" title="Permalink to this definition"></a><br /></dt>
<dd><p>Get data from AWS IoT broker. </p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>0 If successful. Otherwise, a (negative) error code is returned. </p>
</dd>
</dl>
</dd></dl>

<dl class="c function">
<dt class="sig sig-object c" id="c.aws_iot_ping">
<span class="target" id="group__aws__iot_1gae80e01c9d1a95978ea1bfb3774c624e0"></span><span class="kt"><span class="pre">int</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">aws_iot_ping</span></span></span><span class="sig-paren">(</span><span class="kt"><span class="pre">void</span></span><span class="sig-paren">)</span><a class="headerlink" href="#c.aws_iot_ping" title="Permalink to this definition"></a><br /></dt>
<dd><p>Ping AWS IoT broker. Must be called periodically to keep connection to broker alive. </p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>0 If successful. Otherwise, a (negative) error code is returned. </p>
</dd>
</dl>
</dd></dl>

<dl class="c function">
<dt class="sig sig-object c" id="c.aws_iot_subscription_topics_add">
<span class="target" id="group__aws__iot_1ga9a6202e917653b627bc7b37df4590f9d"></span><span class="kt"><span class="pre">int</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">aws_iot_subscription_topics_add</span></span></span><span class="sig-paren">(</span><span class="k"><span class="pre">const</span></span><span class="w"> </span><span class="k"><span class="pre">struct</span></span><span class="w"> </span><a class="reference internal" href="#c.aws_iot_topic_data" title="aws_iot_topic_data"><span class="n"><span class="pre">aws_iot_topic_data</span></span></a><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="k"><span class="pre">const</span></span><span class="w"> </span><span class="n"><span class="pre">topic_list</span></span>, <span class="n"><span class="pre">size_t</span></span><span class="w"> </span><span class="n"><span class="pre">list_count</span></span><span class="sig-paren">)</span><a class="headerlink" href="#c.aws_iot_subscription_topics_add" title="Permalink to this definition"></a><br /></dt>
<dd><p>Add a list of application specific topics that will be subscribed to upon connection to AWS IoT broker. </p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>topic_list</strong> – <strong>[in]</strong> Pointer to list of topics. </p></li>
<li><p><strong>list_count</strong> – <strong>[in]</strong> Number of entries in the list.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>0 If successful. Otherwise, a (negative) error code is returned. </p>
</dd>
</dl>
</dd></dl>

</div>
<dl class="c struct">
<dt class="sig sig-object c" id="c.aws_iot_topic_data">
<span class="target" id="structaws__iot__topic__data"></span><span class="k"><span class="pre">struct</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">aws_iot_topic_data</span></span></span><a class="headerlink" href="#c.aws_iot_topic_data" title="Permalink to this definition"></a><br /></dt>
<dd><div class="docutils container">
<em>#include &lt;aws_iot.h&gt;</em></div>
<p>AWS IoT topic data. </p>
<div class="breathe-sectiondef docutils container">
<p class="breathe-sectiondef-title rubric" id="breathe-section-title-public-members">Public Members</p>
<dl class="c var">
<dt class="sig sig-object c" id="c.aws_iot_topic_data.type">
<span class="target" id="structaws__iot__topic__data_1afe8ddbb5cae403228e001fa81c98ccb0"></span><span class="k"><span class="pre">enum</span></span><span class="w"> </span><a class="reference internal" href="#c.aws_iot_shadow_topic_type" title="aws_iot_shadow_topic_type"><span class="n"><span class="pre">aws_iot_shadow_topic_type</span></span></a><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">type</span></span></span><a class="headerlink" href="#c.aws_iot_topic_data.type" title="Permalink to this definition"></a><br /></dt>
<dd><p>Optional: type of shadow topic that will be published to. When publishing to a shadow topic this can be set instead of the application specific topic below. </p>
</dd></dl>

<dl class="c var">
<dt class="sig sig-object c" id="c.aws_iot_topic_data.str">
<span class="target" id="structaws__iot__topic__data_1a8e1d91dcbf4c94edff6237234ad7ac3d"></span><span class="k"><span class="pre">const</span></span><span class="w"> </span><span class="kt"><span class="pre">char</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="sig-name descname"><span class="n"><span class="pre">str</span></span></span><a class="headerlink" href="#c.aws_iot_topic_data.str" title="Permalink to this definition"></a><br /></dt>
<dd><p>Pointer to string of application specific topic. </p>
</dd></dl>

<dl class="c var">
<dt class="sig sig-object c" id="c.aws_iot_topic_data.len">
<span class="target" id="structaws__iot__topic__data_1a66619083635d2127b6b5cc8cbcfd0fe6"></span><span class="n"><span class="pre">size_t</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">len</span></span></span><a class="headerlink" href="#c.aws_iot_topic_data.len" title="Permalink to this definition"></a><br /></dt>
<dd><p>Length of application specific topic. </p>
</dd></dl>

</div>
</dd></dl>

<dl class="c struct">
<dt class="sig sig-object c" id="c.aws_iot_app_topic_data">
<span class="target" id="structaws__iot__app__topic__data"></span><span class="k"><span class="pre">struct</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">aws_iot_app_topic_data</span></span></span><a class="headerlink" href="#c.aws_iot_app_topic_data" title="Permalink to this definition"></a><br /></dt>
<dd><div class="docutils container">
<em>#include &lt;aws_iot.h&gt;</em></div>
<p>Structure used to declare a list of application specific topics passed in by the application. </p>
<div class="breathe-sectiondef docutils container">
<p class="breathe-sectiondef-title rubric" id="breathe-section-title-public-members">Public Members</p>
<dl class="c var">
<dt class="sig sig-object c" id="c.aws_iot_app_topic_data.list">
<span class="target" id="structaws__iot__app__topic__data_1a1734923bd41fe73c8e5ffb6ea4610a64"></span><span class="k"><span class="pre">struct</span></span><span class="w"> </span><span class="n"><span class="pre">mqtt_topic</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">list</span></span></span><span class="p"><span class="pre">[</span></span><span class="n"><span class="pre">CONFIG_AWS_IOT_APP_SUBSCRIPTION_LIST_COUNT</span></span><span class="p"><span class="pre">]</span></span><a class="headerlink" href="#c.aws_iot_app_topic_data.list" title="Permalink to this definition"></a><br /></dt>
<dd><p>List of application specific topics. </p>
</dd></dl>

<dl class="c var">
<dt class="sig sig-object c" id="c.aws_iot_app_topic_data.list_count">
<span class="target" id="structaws__iot__app__topic__data_1ae50863211327351c6167fe47bc785590"></span><span class="n"><span class="pre">size_t</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">list_count</span></span></span><a class="headerlink" href="#c.aws_iot_app_topic_data.list_count" title="Permalink to this definition"></a><br /></dt>
<dd><p>Number of entries in topic list. </p>
</dd></dl>

</div>
</dd></dl>

<dl class="c struct">
<dt class="sig sig-object c" id="c.aws_iot_data">
<span class="target" id="structaws__iot__data"></span><span class="k"><span class="pre">struct</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">aws_iot_data</span></span></span><a class="headerlink" href="#c.aws_iot_data" title="Permalink to this definition"></a><br /></dt>
<dd><div class="docutils container">
<em>#include &lt;aws_iot.h&gt;</em></div>
<p>AWS IoT transmission data. </p>
<div class="breathe-sectiondef docutils container">
<p class="breathe-sectiondef-title rubric" id="breathe-section-title-public-members">Public Members</p>
<dl class="c var">
<dt class="sig sig-object c" id="c.aws_iot_data.topic">
<span class="target" id="structaws__iot__data_1a017d0f82c0d905025309f54fc01a056b"></span><span class="k"><span class="pre">struct</span></span><span class="w"> </span><a class="reference internal" href="#c.aws_iot_topic_data" title="aws_iot_topic_data"><span class="n"><span class="pre">aws_iot_topic_data</span></span></a><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">topic</span></span></span><a class="headerlink" href="#c.aws_iot_data.topic" title="Permalink to this definition"></a><br /></dt>
<dd><p>Topic data is sent/received on. </p>
</dd></dl>

<dl class="c var">
<dt class="sig sig-object c" id="c.aws_iot_data.ptr">
<span class="target" id="structaws__iot__data_1adbc575dfd32212450eb9f51a873ee1ad"></span><span class="kt"><span class="pre">char</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="sig-name descname"><span class="n"><span class="pre">ptr</span></span></span><a class="headerlink" href="#c.aws_iot_data.ptr" title="Permalink to this definition"></a><br /></dt>
<dd><p>Pointer to data sent/received from the AWS IoT broker. </p>
</dd></dl>

<dl class="c var">
<dt class="sig sig-object c" id="c.aws_iot_data.len">
<span class="target" id="structaws__iot__data_1ad48ceb68298387ebad1b57913775944f"></span><span class="n"><span class="pre">size_t</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">len</span></span></span><a class="headerlink" href="#c.aws_iot_data.len" title="Permalink to this definition"></a><br /></dt>
<dd><p>Length of data. </p>
</dd></dl>

<dl class="c var">
<dt class="sig sig-object c" id="c.aws_iot_data.qos">
<span class="target" id="structaws__iot__data_1a5e04e1b45ef16ca1b2d111308e4dd442"></span><span class="k"><span class="pre">enum</span></span><span class="w"> </span><span class="n"><span class="pre">mqtt_qos</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">qos</span></span></span><a class="headerlink" href="#c.aws_iot_data.qos" title="Permalink to this definition"></a><br /></dt>
<dd><p>Quality of Service of the message. </p>
</dd></dl>

<dl class="c var">
<dt class="sig sig-object c" id="c.aws_iot_data.message_id">
<span class="target" id="structaws__iot__data_1ac485911824ba561da5c364cac009a8ca"></span><span class="n"><span class="pre">uint16_t</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">message_id</span></span></span><a class="headerlink" href="#c.aws_iot_data.message_id" title="Permalink to this definition"></a><br /></dt>
<dd><p>Message id, used to match acknowledgments. </p>
</dd></dl>

<dl class="c var">
<dt class="sig sig-object c" id="c.aws_iot_data.dup_flag">
<span class="target" id="structaws__iot__data_1af20e520e9774a2546c6fa0315666d851"></span><span class="n"><span class="pre">uint8_t</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">dup_flag</span></span></span><a class="headerlink" href="#c.aws_iot_data.dup_flag" title="Permalink to this definition"></a><br /></dt>
<dd><p>Duplicate flag. 1 indicates the message is a retransmission, Usually triggered by missing publication acknowledgment. </p>
</dd></dl>

<dl class="c var">
<dt class="sig sig-object c" id="c.aws_iot_data.retain_flag">
<span class="target" id="structaws__iot__data_1a976875d0427d792ede7f64ca990678de"></span><span class="n"><span class="pre">uint8_t</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">retain_flag</span></span></span><a class="headerlink" href="#c.aws_iot_data.retain_flag" title="Permalink to this definition"></a><br /></dt>
<dd><p>Retain flag. 1 indicates to AWS IoT that the message should be stored persistently. </p>
</dd></dl>

</div>
</dd></dl>

<dl class="c struct">
<dt class="sig sig-object c" id="c.aws_iot_evt">
<span class="target" id="structaws__iot__evt"></span><span class="k"><span class="pre">struct</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">aws_iot_evt</span></span></span><a class="headerlink" href="#c.aws_iot_evt" title="Permalink to this definition"></a><br /></dt>
<dd><div class="docutils container">
<em>#include &lt;aws_iot.h&gt;</em></div>
<p>Struct with data received from AWS IoT broker. </p>
<div class="breathe-sectiondef docutils container">
<p class="breathe-sectiondef-title rubric" id="breathe-section-title-public-members">Public Members</p>
<dl class="c var">
<dt class="sig sig-object c" id="c.aws_iot_evt.type">
<span class="target" id="structaws__iot__evt_1a19d48d3b054bc728c08117cb0ba72029"></span><span class="k"><span class="pre">enum</span></span><span class="w"> </span><a class="reference internal" href="#c.aws_iot_evt_type" title="aws_iot_evt_type"><span class="n"><span class="pre">aws_iot_evt_type</span></span></a><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">type</span></span></span><a class="headerlink" href="#c.aws_iot_evt.type" title="Permalink to this definition"></a><br /></dt>
<dd><p>Type of event. </p>
</dd></dl>

<dl class="c var">
<dt class="sig sig-object c" id="c.aws_iot_evt.fota_progress">
<span class="target" id="structaws__iot__evt_1a225cc975bc4613235be7126a59c71691"></span><span class="kt"><span class="pre">int</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">fota_progress</span></span></span><a class="headerlink" href="#c.aws_iot_evt.fota_progress" title="Permalink to this definition"></a><br /></dt>
<dd><p>FOTA progress in percentage. </p>
</dd></dl>

</div>
</dd></dl>

<dl class="c struct">
<dt class="sig sig-object c" id="c.aws_iot_config">
<span class="target" id="structaws__iot__config"></span><span class="k"><span class="pre">struct</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">aws_iot_config</span></span></span><a class="headerlink" href="#c.aws_iot_config" title="Permalink to this definition"></a><br /></dt>
<dd><div class="docutils container">
<em>#include &lt;aws_iot.h&gt;</em></div>
<p>Structure for AWS IoT broker connection parameters. </p>
<div class="breathe-sectiondef docutils container">
<p class="breathe-sectiondef-title rubric" id="breathe-section-title-public-members">Public Members</p>
<dl class="c var">
<dt class="sig sig-object c" id="c.aws_iot_config.socket">
<span class="target" id="structaws__iot__config_1a7b5fed44388fb409da88a6942b13fad4"></span><span class="kt"><span class="pre">int</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">socket</span></span></span><a class="headerlink" href="#c.aws_iot_config.socket" title="Permalink to this definition"></a><br /></dt>
<dd><p>Socket for AWS IoT broker connection </p>
</dd></dl>

<dl class="c var">
<dt class="sig sig-object c" id="c.aws_iot_config.client_id">
<span class="target" id="structaws__iot__config_1a1b9d1365046fb19cebbaa2333c764a53"></span><span class="kt"><span class="pre">char</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="sig-name descname"><span class="n"><span class="pre">client_id</span></span></span><a class="headerlink" href="#c.aws_iot_config.client_id" title="Permalink to this definition"></a><br /></dt>
<dd><p>Client id for AWS IoT broker connection, used when <span> <code class="xref kconfig kconfig-option docutils literal notranslate"><span class="pre">CONFIG_AWS_IOT_CLIENT_ID_APP</span></code> </span> is set. If not set an internal configurable static client id is used. </p>
</dd></dl>

<dl class="c var">
<dt class="sig sig-object c" id="c.aws_iot_config.client_id_len">
<span class="target" id="structaws__iot__config_1a72e978ee309605509b357a01c5f28ca5"></span><span class="n"><span class="pre">size_t</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">client_id_len</span></span></span><a class="headerlink" href="#c.aws_iot_config.client_id_len" title="Permalink to this definition"></a><br /></dt>
<dd><p>Length of client_id string. </p>
</dd></dl>

<dl class="c var">
<dt class="sig sig-object c" id="c.aws_iot_config.host_name">
<span class="target" id="structaws__iot__config_1a94570959a7d65cc6f259035c6eeb3f58"></span><span class="kt"><span class="pre">char</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="sig-name descname"><span class="n"><span class="pre">host_name</span></span></span><a class="headerlink" href="#c.aws_iot_config.host_name" title="Permalink to this definition"></a><br /></dt>
<dd><p>AWS IoT endpoint host name for broker connection, used when <span> <code class="xref kconfig kconfig-option docutils literal notranslate"><span class="pre">CONFIG_AWS_IOT_BROKER_HOST_NAME_APP</span></code> </span> is set. If not the static<span> <code class="xref kconfig kconfig-option docutils literal notranslate"><span class="pre">AWS_IOT_BROKER_HOST_NAME</span></code> </span> is used. </p>
</dd></dl>

<dl class="c var">
<dt class="sig sig-object c" id="c.aws_iot_config.host_name_len">
<span class="target" id="structaws__iot__config_1aeadee2a336813ed8ec553438d4f2dc1b"></span><span class="n"><span class="pre">size_t</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">host_name_len</span></span></span><a class="headerlink" href="#c.aws_iot_config.host_name_len" title="Permalink to this definition"></a><br /></dt>
<dd><p>Length of host_name string. </p>
</dd></dl>

</div>
</dd></dl>

</dd></dl>

</section>
</section>


           </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="aws_jobs.html" class="btn btn-neutral float-right" title="AWS jobs" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="aws_fota.html" class="btn btn-neutral" title="AWS FOTA" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">

<table>
<tr>
<td>
    <p>
        &copy; Copyright 2019-2023, Nordic Semiconductor.
      Last updated on Mar 20, 2023.

    </p>
</td>
<td id="nordiclogo">
  <a href="https://www.nordicsemi.com/"><img src="../../_static/images/nordic-logo.png" border="0"/></a>
</td>
</tr>
</table>
  </div> 


</footer>

<div id="scroll-container">
  <button type="button" id="scroll-btn" class="btn">
    <svg xmlns="http://www.w3.org/2000/svg" height="24" viewBox="0 0 24 24" width="24"><path d="M0 0h24v24H0z" fill="none"/><path d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z" fill="#fff"/></svg>
  </button>
</div>

<script>
  const scrollBtn = document.querySelector("#scroll-btn");

  document.addEventListener("scroll", () => {
    if (window.scrollY > 400) {
          scrollBtn.style.visibility = "visible";
      } else {
          scrollBtn.style.visibility = "hidden";
      }
  });

  scrollBtn.addEventListener("click", () => {
      window.scrollTo({ top: 0, behavior: "smooth" });
  });
</script>
        </div>
      </div>
    </section>
  </div>
  
  <div class="rst-versions" data-toggle="rst-versions" role="note" aria-label="versions">
    <span class="rst-current-version" data-toggle="rst-current-version">
      <span class="fa fa-book"> nRF Connect SDK</span>
       <span class="fa fa-caret-down"></span>
    </span>
    <div class="rst-other-versions">
      
      <div class="rst-other-version ncs">
        <a href="../../../nrf/index.html">nRF Connect SDK</a>
      </div>
      
      <div class="rst-other-version nrfx">
        <a href="../../../nrfx/index.html">nrfx</a>
      </div>
      
      <div class="rst-other-version nrfxlib">
        <a href="../../../nrfxlib/README.html">nrfxlib</a>
      </div>
      
      <div class="rst-other-version zephyr">
        <a href="../../../zephyr/index.html">Zephyr Project</a>
      </div>
      
      <div class="rst-other-version mcuboot">
        <a href="../../../mcuboot/wrapper.html">MCUboot</a>
      </div>
      
      <div class="rst-other-version tfm">
        <a href="../../../tfm/index.html">Trusted Firmware-M</a>
      </div>
      
      <div class="rst-other-version matter">
        <a href="../../../matter/index.html">Matter</a>
      </div>
      
      <div class="rst-other-version kconfig">
        <a href="../../../kconfig/index.html">Kconfig Reference</a>
      </div>
    </div>
  </div><script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>