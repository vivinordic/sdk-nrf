<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>nRF Cloud A-GPS &mdash; nRF Connect SDK 2.3.99 documentation</title>
      <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="../../_static/css/nordic.css" type="text/css" />
      <link rel="stylesheet" href="../../_static/togglebutton.css" type="text/css" />
      <link rel="stylesheet" href="../../_static/css/nrf.css" type="text/css" />
      <link rel="stylesheet" href="../../_static/tabs.css" type="text/css" /> 
  <!--[if lt IE 9]>
    <script src="../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="../../" id="documentation_options" src="../../_static/documentation_options.js"></script>
        <script src="../../_static/jquery.js"></script>
        <script src="../../_static/underscore.js"></script>
        <script src="../../_static/_sphinx_javascript_frameworks_compat.js"></script>
        <script src="../../_static/doctools.js"></script>
        <script src="../../_static/sphinx_highlight.js"></script>
        <script src="https://www.googletagmanager.com/gtag/js?id=G-ZPVZRKFQJR"></script>
        <script src="../../_static/js/ga-tracker.js"></script>
        <script data-culture="EN" id="CookieConsent" type="text/javascript" src="https://policy.app.cookieinformation.com/uc.js"></script>
        <script>let toggleHintShow = 'Click to show';</script>
        <script>let toggleHintHide = 'Click to hide';</script>
        <script>let toggleOpenOnPrint = 'true';</script>
        <script src="../../_static/togglebutton.js"></script>
        <script>var togglebuttonSelector = '.toggle, .admonition.dropdown';</script>
    <script src="../../_static/js/theme.js"></script>
<script
  type="text/javascript"
  src="../../_static/js/ncs.js"
></script>
<script src="../../_static/js/bootstrap.bundle.min.js"></script>

    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="nRF Cloud Alerts" href="nrf_cloud_alerts.html" />
    <link rel="prev" title="nRF Cloud" href="nrf_cloud.html" />
<link
  href="../../_static/css/bootstrap.min.css"
  rel="stylesheet"
/>
<link
  rel="shortcut icon"
  href="../../_static/images/favicon.ico"
/>

</head>

<body class="wy-body-for-nav">
<div class="announcement"></div>
<div class="d-print-none ncs-header">
  <div class="container-xl ncs-header-top">
    <div class="row h-100">
      <div class="d-none d-md-block col-2">
        <div class="bg-white py-4 px-3 ml-2 ncs-header-logo">
          <img
            class="ncs-header-logo"
            src="../../_static/images/nordic-logo.png"
            alt=""
          />
        </div>
      </div>
      <div
        class="col-8 col-md-7 pl-md-4 d-flex align-self-center justify-content-center"
      >
        <form class="w-75" action="../../search.html" method="get">
          <div class="form-group">
            <input
              type="text"
              name="q"
              class="ncs-search-input form-control"
              placeholder="Search all docs..."
            />
          </div>
        </form>
      </div>
      <div class="col-4 col-md-3 d-md-block p-3 text-end">
        <div class="dropdown">
          <button
            class="btn dropdown-toggle ncs-btn-versions"
            type="button"
            id="dropdownMenuButton1"
            data-bs-toggle="dropdown"
            aria-expanded="false"
          >
            <span class="d-none d-md-inline">nRF Connect SDK</span>
            <span id="ncsversion" class="d-inline"></span>
          </button>
          <div class="dropdown-menu" aria-labelledby="dropdownMenuButton"></div>
        </div>
      </div>
    </div>
  </div>
  <div class="ncs-header-nav">
    <div class="container-xl">
      <div class="row">
        <div class="col col-12 d-flex justify-content-center">
          <nav class="navbar navbar-dark navbar-expand-lg p-0">
            <span class="navbar-brand d-block d-lg-none py-2 pl-1"
              >Documentation sets</span
            >
            <button
              class="navbar-toggler"
              type="button"
              data-bs-toggle="collapse"
              data-bs-target="#navbarNavAltMarkup"
              aria-controls="navbarNavAltMarkup"
              aria-expanded="false"
              aria-label="Toggle navigation"
            >
              <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="navbarNavAltMarkup">
              <ul class="navbar-nav">
                <li class="nav-item active py-1 px-3">
                  <a
                    class="nav-link"
                    href="../../../nrf/index.html"
                    >nRF Connect SDK</a
                  >
                </li>
                <li><hr class="dropdown-divider" /></li>
                <li class="nav-item  py-1 px-3">
                  <a
                    class="nav-link"
                    href="../../../nrfx/index.html"
                    >nrfx</a
                  >
                </li>
                <li><hr class="dropdown-divider" /></li>
                <li class="nav-item  py-1 px-3">
                  <a
                    class="nav-link"
                    href="../../../nrfxlib/README.html"
                    >nrfxlib</a
                  >
                </li>
                <li><hr class="dropdown-divider" /></li>
                <li class="nav-item  py-1 px-3">
                  <a
                    class="nav-link"
                    href="../../../zephyr/index.html"
                    >Zephyr Project</a
                  >
                </li>
                <li><hr class="dropdown-divider" /></li>
                <li class="nav-item  py-1 px-3">
                  <a
                    class="nav-link"
                    href="../../../mcuboot/wrapper.html"
                    >MCUboot</a
                  >
                </li>
                <li><hr class="dropdown-divider" /></li>
                <li class="nav-item  py-1 px-3">
                  <a
                    class="nav-link"
                    href="../../../tfm/index.html"
                    >Trusted Firmware-M</a
                  >
                </li>
                <li><hr class="dropdown-divider" /></li>
                <li class="nav-item  py-1 px-3">
                  <a
                    class="nav-link"
                    href="../../../matter/index.html"
                    >Matter</a
                  >
                </li>
                <li><hr class="dropdown-divider" /></li>
                <li class="nav-item  py-1 px-3">
                  <a
                    class="nav-link"
                    href="../../../kconfig/index.html"
                    >Kconfig Reference</a
                  >
                </li>
                <li><hr class="dropdown-divider" /></li>
              </ul>
            </div>
          </nav>
        </div>
      </div>
    </div>
  </div>
</div>

  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
            <a href="../../index.html" class="icon icon-home"> nRF Connect SDK
          </a>
              <div class="version">
                2.3.99
              </div>
<div id="searchbox" role="search">
  <div class="searchformwrapper">
    <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
      <input type="text" name="q" placeholder="Search docs" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
  </div>
</div>
<script>$('#searchbox').show(0);</script>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Contents</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../introduction.html">Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../getting_started.html">Getting started</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../dev_model.html">Development model</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../app_dev.html">Application development</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../security.html">Security</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../ecosystem_integration.html">Ecosystems integration</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../nrf91.html">Working with nRF91 Series</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../nrf70.html">Working with nRF70 Series</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../nrf53.html">Working with nRF53 Series</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../nrf52.html">Working with nRF52 Series</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../protocols.html">Protocols</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../applications.html">Applications</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../samples.html">Samples</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../drivers.html">Drivers</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../index.html">Libraries</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../bin/index.html">Binary libraries</a></li>
<li class="toctree-l2"><a class="reference internal" href="../bluetooth_services/index.html">Bluetooth libraries and services</a></li>
<li class="toctree-l2"><a class="reference internal" href="../bootloader/index.html">Bootloader libraries</a></li>
<li class="toctree-l2"><a class="reference internal" href="../caf/index.html">Common Application Framework</a></li>
<li class="toctree-l2"><a class="reference internal" href="../debug/index.html">Debug libraries</a></li>
<li class="toctree-l2"><a class="reference internal" href="../dfu/index.html">DFU libraries</a></li>
<li class="toctree-l2"><a class="reference internal" href="../gazell/index.html">Gazell libraries</a></li>
<li class="toctree-l2"><a class="reference internal" href="../modem/index.html">Modem libraries</a></li>
<li class="toctree-l2"><a class="reference internal" href="../mpsl/index.html">Multiprotocol Service Layer libraries</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="index.html">Libraries for networking</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="aws_fota.html">AWS FOTA</a></li>
<li class="toctree-l3"><a class="reference internal" href="aws_iot.html">AWS IoT</a></li>
<li class="toctree-l3"><a class="reference internal" href="aws_jobs.html">AWS jobs</a></li>
<li class="toctree-l3"><a class="reference internal" href="azure_fota.html">Azure FOTA</a></li>
<li class="toctree-l3"><a class="reference internal" href="azure_iot_hub.html">Azure IoT Hub</a></li>
<li class="toctree-l3"><a class="reference internal" href="coap_utils.html">CoAP utils</a></li>
<li class="toctree-l3"><a class="reference internal" href="download_client.html">Download client</a></li>
<li class="toctree-l3"><a class="reference internal" href="fota_download.html">FOTA download</a></li>
<li class="toctree-l3"><a class="reference internal" href="ftp_client.html">FTP client</a></li>
<li class="toctree-l3"><a class="reference internal" href="icalendar_parser.html">iCalendar parser</a></li>
<li class="toctree-l3"><a class="reference internal" href="lwm2m_client_utils.html">LwM2M client utils</a></li>
<li class="toctree-l3"><a class="reference internal" href="lwm2m_location_assistance.html">LwM2M location assistance</a></li>
<li class="toctree-l3"><a class="reference internal" href="mqtt_helper.html">MQTT helper</a></li>
<li class="toctree-l3"><a class="reference internal" href="multicell_location.html">Multicell location</a></li>
<li class="toctree-l3"><a class="reference internal" href="nrf_cloud.html">nRF Cloud</a></li>
<li class="toctree-l3 current"><a class="current reference internal" href="#">nRF Cloud A-GPS</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#configuration">Configuration</a></li>
<li class="toctree-l4"><a class="reference internal" href="#request-and-process-a-gps-data">Request and process A-GPS data</a></li>
<li class="toctree-l4"><a class="reference internal" href="#optimizing-cloud-data-downloads">Optimizing cloud data downloads</a></li>
<li class="toctree-l4"><a class="reference internal" href="#practical-considerations">Practical considerations</a></li>
<li class="toctree-l4"><a class="reference internal" href="#limitation">Limitation</a></li>
<li class="toctree-l4"><a class="reference internal" href="#api-documentation">API documentation</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="nrf_cloud_alerts.html">nRF Cloud Alerts</a></li>
<li class="toctree-l3"><a class="reference internal" href="nrf_cloud_location.html">nRF Cloud location</a></li>
<li class="toctree-l3"><a class="reference internal" href="nrf_cloud_pgps.html">nRF Cloud P-GPS</a></li>
<li class="toctree-l3"><a class="reference internal" href="nrf_cloud_rest.html">nRF Cloud REST</a></li>
<li class="toctree-l3"><a class="reference internal" href="rest_client.html">REST client</a></li>
<li class="toctree-l3"><a class="reference internal" href="wifi_credentials.html">Wi-Fi credentials</a></li>
<li class="toctree-l3"><a class="reference internal" href="wifi_mgmt_ext.html">Wi-Fi management extension</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../nfc/index.html">Libraries for NFC</a></li>
<li class="toctree-l2"><a class="reference internal" href="../nrf_rpc/index.html">nRF RPC libraries</a></li>
<li class="toctree-l2"><a class="reference internal" href="../others/index.html">Other libraries</a></li>
<li class="toctree-l2"><a class="reference internal" href="../shell/index.html">Shell libraries</a></li>
<li class="toctree-l2"><a class="reference internal" href="../tfm/index.html">TF-M libraries</a></li>
<li class="toctree-l2"><a class="reference internal" href="../zigbee/index.html">Libraries for Zigbee</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../scripts.html">Scripts</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../release_notes.html">Release notes</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../known_issues.html">Known issues</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../software_maturity.html">Software maturity levels</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../documentation.html">About this documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../glossary.html">Glossary</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">nRF Connect SDK</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../../index.html" class="icon icon-home"></a></li>
          <li class="breadcrumb-item"><a href="../index.html">Libraries</a></li>
          <li class="breadcrumb-item"><a href="index.html">Libraries for networking</a></li>
      <li class="breadcrumb-item active">nRF Cloud A-GPS</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../../_sources/libraries/networking/nrf_cloud_agps.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="nrf-cloud-a-gps">
<span id="lib-nrf-cloud-agps"></span><h1>nRF Cloud A-GPS<a class="headerlink" href="#nrf-cloud-a-gps" title="Permalink to this heading"></a></h1>
<div class="contents local topic" id="contents">
<ul class="simple">
<li><p><a class="reference internal" href="#configuration" id="id7">Configuration</a></p></li>
<li><p><a class="reference internal" href="#request-and-process-a-gps-data" id="id8">Request and process A-GPS data</a></p></li>
<li><p><a class="reference internal" href="#optimizing-cloud-data-downloads" id="id9">Optimizing cloud data downloads</a></p></li>
<li><p><a class="reference internal" href="#practical-considerations" id="id10">Practical considerations</a></p></li>
<li><p><a class="reference internal" href="#limitation" id="id11">Limitation</a></p></li>
<li><p><a class="reference internal" href="#api-documentation" id="id12">API documentation</a></p></li>
</ul>
</div>
<p>The nRF Cloud A-GPS library enables applications to request and process Assisted GPS (<a class="reference external" href="https://en.wikipedia.org/wiki/Assisted_GPS">A-GPS</a>) data from <a class="reference external" href="https://nrfcloud.com/">nRF Cloud</a> to be used with the nRF9160 SiP.
This library is an enhancement to the <a class="reference internal" href="nrf_cloud.html#lib-nrf-cloud"><span class="std std-ref">nRF Cloud</span></a> library.</p>
<p>The use of A-GPS reduces the time for a GNSS module to estimate its position, which is also called Time to First Fix (TTFF).
To get a position fix, a GNSS module needs information such as the satellite orbital data, exact timing data, and a rough position estimate.
GPS satellites broadcast this information in a pattern, which repeats every 12.5 minutes.
If nRF Cloud A-GPS service is used, the broadcasted information can be downloaded at a faster rate from nRF Cloud.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>To use the nRF Cloud A-GPS service, an nRF Cloud account is needed, and the device needs to be associated with a user’s account.</p>
</div>
<section id="configuration">
<h2><a class="toc-backref" href="#id7">Configuration</a><a class="headerlink" href="#configuration" title="Permalink to this heading"></a></h2>
<p>Configure the following options to enable or disable the use of this library:</p>
<ul class="simple">
<li><p><code class="xref kconfig kconfig-option docutils literal notranslate"><span class="pre">CONFIG_NRF_CLOUD_AGPS</span></code></p></li>
<li><p><code class="xref kconfig kconfig-option docutils literal notranslate"><span class="pre">CONFIG_NRF_CLOUD_MQTT</span></code> or <code class="xref kconfig kconfig-option docutils literal notranslate"><span class="pre">CONFIG_NRF_CLOUD_REST</span></code></p></li>
</ul>
<p>See <a class="reference internal" href="../../getting_started/modifying.html#configure-application"><span class="std std-ref">Configuring your application</span></a> for information on how to change configuration options.</p>
</section>
<section id="request-and-process-a-gps-data">
<h2><a class="toc-backref" href="#id8">Request and process A-GPS data</a><a class="headerlink" href="#request-and-process-a-gps-data" title="Permalink to this heading"></a></h2>
<p>A-GPS data can be requested using one of the following methods:</p>
<ul class="simple">
<li><p>By specifying an array of A-GPS types</p></li>
<li><p>By requesting all the available assistance data</p></li>
</ul>
<p>If <code class="xref kconfig kconfig-option docutils literal notranslate"><span class="pre">CONFIG_NRF_CLOUD_MQTT</span></code> is enabled, the <a class="reference internal" href="#c.nrf_cloud_agps_request" title="nrf_cloud_agps_request"><code class="xref c c-func docutils literal notranslate"><span class="pre">nrf_cloud_agps_request()</span></code></a> function is used to request by type, and the <a class="reference internal" href="#c.nrf_cloud_agps_request_all" title="nrf_cloud_agps_request_all"><code class="xref c c-func docutils literal notranslate"><span class="pre">nrf_cloud_agps_request_all()</span></code></a> function is used to return all available assistance data.
If <code class="xref kconfig kconfig-option docutils literal notranslate"><span class="pre">CONFIG_NRF_CLOUD_REST</span></code> is enabled, the <a class="reference internal" href="nrf_cloud_rest.html#c.nrf_cloud_rest_agps_data_get" title="nrf_cloud_rest_agps_data_get"><code class="xref c c-func docutils literal notranslate"><span class="pre">nrf_cloud_rest_agps_data_get()</span></code></a> function is used to request A-GPS data.</p>
<p>When nRF Cloud responds with the requested A-GPS data, the <a class="reference internal" href="#c.nrf_cloud_agps_process" title="nrf_cloud_agps_process"><code class="xref c c-func docutils literal notranslate"><span class="pre">nrf_cloud_agps_process()</span></code></a> function processes the received data.
The function parses the data and passes it on to the modem.</p>
</section>
<section id="optimizing-cloud-data-downloads">
<span id="agps-filtered-ephemerides"></span><h2><a class="toc-backref" href="#id9">Optimizing cloud data downloads</a><a class="headerlink" href="#optimizing-cloud-data-downloads" title="Permalink to this heading"></a></h2>
<p>When the application only requires a fast GNSS fix at most once per 2 hour period, it can reduce LTE data charges by enabling <code class="xref kconfig kconfig-option docutils literal notranslate"><span class="pre">CONFIG_NRF_CLOUD_AGPS_FILTERED</span></code> (A-GPS filtered mode).
This option causes nRF Cloud to send ephemerides data for only those satellites whose elevation is at or above the <code class="xref kconfig kconfig-option docutils literal notranslate"><span class="pre">CONFIG_NRF_CLOUD_AGPS_ELEVATION_MASK</span></code> angle at the current moment.</p>
<p>When using the A-GPS filtered mode with the GNSS unit in periodic tracking mode, applications should disable scheduled downloads in the GNSS unit.
Applications do this when initializing the GNSS unit by bitwise ORing the <code class="xref c c-enumerator docutils literal notranslate"><span class="pre">NRF_MODEM_GNSS_USE_CASE_SCHED_DOWNLOAD_DISABLE</span></code> bitmask with any other needed use case values, then passing the resulting value to the <code class="xref c c-func docutils literal notranslate"><span class="pre">nrf_modem_gnss_use_case_set()</span></code> function.
This ensures the GNSS unit does not stay on longer than needed due to the lack of a full set of ephemerides.</p>
<p>When the application requires fast GNSS fixes multiple times within a 2 hour period, it can avoid unnecessary A-GPS data downloads from nRF Cloud by keeping <code class="xref kconfig kconfig-option docutils literal notranslate"><span class="pre">CONFIG_NRF_CLOUD_AGPS_FILTERED</span></code> disabled.</p>
</section>
<section id="practical-considerations">
<h2><a class="toc-backref" href="#id10">Practical considerations</a><a class="headerlink" href="#practical-considerations" title="Permalink to this heading"></a></h2>
<p>The type of assistance data needed at a certain point of time may vary.
Since the library requests only partial data, data traffic reduction and battery conservation might be observed.
The duration for which a particular type of assistance data is valid is different for each type of assistance data.
As an example, <a class="reference external" href="https://en.wikipedia.org/wiki/GPS_signals#Almanac">Almanac</a> data has a far longer validity (several months) than <a class="reference external" href="https://en.wikipedia.org/wiki/Ephemeris">Ephemeris</a> data (2 to 4 hours).</p>
<p>Since the library receives a partial assistance data set, it may cause GNSS to download the missing data from satellites.</p>
<p>When A-GPS data is downloaded using LTE network, the LTE link is in <a class="reference external" href="https://en.wikipedia.org/wiki/Radio_Resource_Control">RRC connected mode</a>.
The GNSS module can only operate when the device is in RRC idle mode or <a class="reference external" href="https://www.sharetechnote.com/html/Handbook_LTE_PSM.html">Power Saving Mode (PSM)</a>.
The time to go from RRC connected mode to RRC idle mode is network-dependent.
This time is usually not controlled by the device and is typically in the range of 5 to 70 seconds.
If the GNSS module has already started before the device enters the RRC idle mode, this RRC inactivity may make TTFF appear longer than the actual time spent searching for the GNSS satellite signals.</p>
</section>
<section id="limitation">
<h2><a class="toc-backref" href="#id11">Limitation</a><a class="headerlink" href="#limitation" title="Permalink to this heading"></a></h2>
<p>Approximate location assistance data is based on LTE cell location.
Not all cell locations are always available.
If they are not available, the location data will be absent in the A-GPS response.</p>
</section>
<section id="api-documentation">
<h2><a class="toc-backref" href="#id12">API documentation</a><a class="headerlink" href="#api-documentation" title="Permalink to this heading"></a></h2>
<div class="line-block">
<div class="line">Header file: <code class="file docutils literal notranslate"><span class="pre">include/net/nrf_cloud_agps.h</span></code></div>
<div class="line">Source files: <code class="file docutils literal notranslate"><span class="pre">subsys/net/lib/nrf_cloud/src/</span></code></div>
</div>
<dl>
<dt class="sig sig-object cpp">
<span class="target" id="group__nrf__cloud__agps"></span><em><span class="pre">group</span></em> <span class="sig-name descname"><span class="pre">nrf_cloud_agps</span></span></dt>
<dd><div class="breathe-sectiondef docutils container">
<p class="breathe-sectiondef-title rubric" id="breathe-section-title-functions">Functions</p>
<dl class="c function">
<dt class="sig sig-object c" id="c.nrf_cloud_agps_request">
<span class="target" id="group__nrf__cloud__agps_1ga50416f8df58fbfbc8ac3d11541ac3ff7"></span><span class="kt"><span class="pre">int</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">nrf_cloud_agps_request</span></span></span><span class="sig-paren">(</span><span class="k"><span class="pre">const</span></span><span class="w"> </span><span class="k"><span class="pre">struct</span></span><span class="w"> </span><span class="n"><span class="pre">nrf_modem_gnss_agps_data_frame</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">request</span></span><span class="sig-paren">)</span><a class="headerlink" href="#c.nrf_cloud_agps_request" title="Permalink to this definition"></a><br /></dt>
<dd><p>Requests specified A-GPS data from nRF Cloud via MQTT. </p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>request</strong> – Structure containing specified A-GPS data to be requested.</p></li>
</ul>
</dd>
<dt class="field-even">Return values</dt>
<dd class="field-even"><ul class="simple">
<li><p><strong>0</strong> – Request sent successfully. </p></li>
<li><p><strong>-EACCES</strong> – Cloud connection is not established; wait for <a class="reference internal" href="nrf_cloud.html#group__nrf__cloud_1ggabfa69ba752561f778c2f055e1ef7c46faefde723fbee891cc13ce5d016f9eeac2"><span class="std std-ref">NRF_CLOUD_EVT_READY</span></a>. </p></li>
</ul>
</dd>
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>A negative value indicates an error. </p>
</dd>
</dl>
</dd></dl>

<dl class="c function">
<dt class="sig sig-object c" id="c.nrf_cloud_agps_request_all">
<span class="target" id="group__nrf__cloud__agps_1gaa80d4d45d4c591ce2f38e1dd89551bbc"></span><span class="kt"><span class="pre">int</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">nrf_cloud_agps_request_all</span></span></span><span class="sig-paren">(</span><span class="kt"><span class="pre">void</span></span><span class="sig-paren">)</span><a class="headerlink" href="#c.nrf_cloud_agps_request_all" title="Permalink to this definition"></a><br /></dt>
<dd><p>Requests all available A-GPS data from nRF Cloud via MQTT. </p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>0 if successful, otherwise a (negative) error code. </p>
</dd>
</dl>
</dd></dl>

<dl class="c function">
<dt class="sig sig-object c" id="c.nrf_cloud_agps_process">
<span class="target" id="group__nrf__cloud__agps_1ga2646fa6d36694986bb6782e612e484c9"></span><span class="kt"><span class="pre">int</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">nrf_cloud_agps_process</span></span></span><span class="sig-paren">(</span><span class="k"><span class="pre">const</span></span><span class="w"> </span><span class="kt"><span class="pre">char</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">buf</span></span>, <span class="n"><span class="pre">size_t</span></span><span class="w"> </span><span class="n"><span class="pre">buf_len</span></span><span class="sig-paren">)</span><a class="headerlink" href="#c.nrf_cloud_agps_process" title="Permalink to this definition"></a><br /></dt>
<dd><p>Processes binary A-GPS data received from nRF Cloud. </p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>buf</strong> – Pointer to data received from nRF Cloud. </p></li>
<li><p><strong>buf_len</strong> – Buffer size of data to be processed.</p></li>
</ul>
</dd>
<dt class="field-even">Return values</dt>
<dd class="field-even"><ul class="simple">
<li><p><strong>0</strong> – A-GPS data successfully processed. </p></li>
<li><p><strong>-EFAULT</strong> – An nRF Cloud A-GPS error code was processed. </p></li>
<li><p><strong>-ENOMSG</strong> – No nRF Cloud A-GPS error code found, invalid error code or wrong app_id/msg_type. </p></li>
<li><p><strong>-EINVAL</strong> – buf was NULL or buf_len was zero. </p></li>
<li><p><strong>-EBADMSG</strong> – Non-JSON payload is not in the A-GPS format. </p></li>
</ul>
</dd>
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>A negative value indicates an error. </p>
</dd>
</dl>
</dd></dl>

<dl class="c function">
<dt class="sig sig-object c" id="c.nrf_cloud_agps_processed">
<span class="target" id="group__nrf__cloud__agps_1ga948fc5e163c93c733e5c8143430c28fa"></span><span class="kt"><span class="pre">void</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">nrf_cloud_agps_processed</span></span></span><span class="sig-paren">(</span><span class="k"><span class="pre">struct</span></span><span class="w"> </span><span class="n"><span class="pre">nrf_modem_gnss_agps_data_frame</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">received_elements</span></span><span class="sig-paren">)</span><a class="headerlink" href="#c.nrf_cloud_agps_processed" title="Permalink to this definition"></a><br /></dt>
<dd><p>Query which A-GPS elements were actually received. </p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>received_elements</strong> – return copy of requested elements received since A-GPS request was made </p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="c function">
<dt class="sig sig-object c" id="c.nrf_cloud_agps_request_in_progress">
<span class="target" id="group__nrf__cloud__agps_1ga36b42cf6ff674b5916560315bc511e4d"></span><span class="kt"><span class="pre">bool</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">nrf_cloud_agps_request_in_progress</span></span></span><span class="sig-paren">(</span><span class="kt"><span class="pre">void</span></span><span class="sig-paren">)</span><a class="headerlink" href="#c.nrf_cloud_agps_request_in_progress" title="Permalink to this definition"></a><br /></dt>
<dd><p>Query whether A-GPS data has been requested from cloud. </p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>True if request is outstanding. </p>
</dd>
</dl>
</dd></dl>

</div>
</dd></dl>

</section>
</section>


           </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="nrf_cloud_alerts.html" class="btn btn-neutral float-right" title="nRF Cloud Alerts" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="nrf_cloud.html" class="btn btn-neutral" title="nRF Cloud" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">

<table>
<tr>
<td>
    <p>
        &copy; Copyright 2019-2023, Nordic Semiconductor.
      Last updated on Mar 20, 2023.

    </p>
</td>
<td id="nordiclogo">
  <a href="https://www.nordicsemi.com/"><img src="../../_static/images/nordic-logo.png" border="0"/></a>
</td>
</tr>
</table>
  </div> 


</footer>

<div id="scroll-container">
  <button type="button" id="scroll-btn" class="btn">
    <svg xmlns="http://www.w3.org/2000/svg" height="24" viewBox="0 0 24 24" width="24"><path d="M0 0h24v24H0z" fill="none"/><path d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z" fill="#fff"/></svg>
  </button>
</div>

<script>
  const scrollBtn = document.querySelector("#scroll-btn");

  document.addEventListener("scroll", () => {
    if (window.scrollY > 400) {
          scrollBtn.style.visibility = "visible";
      } else {
          scrollBtn.style.visibility = "hidden";
      }
  });

  scrollBtn.addEventListener("click", () => {
      window.scrollTo({ top: 0, behavior: "smooth" });
  });
</script>
        </div>
      </div>
    </section>
  </div>
  
  <div class="rst-versions" data-toggle="rst-versions" role="note" aria-label="versions">
    <span class="rst-current-version" data-toggle="rst-current-version">
      <span class="fa fa-book"> nRF Connect SDK</span>
       <span class="fa fa-caret-down"></span>
    </span>
    <div class="rst-other-versions">
      
      <div class="rst-other-version ncs">
        <a href="../../../nrf/index.html">nRF Connect SDK</a>
      </div>
      
      <div class="rst-other-version nrfx">
        <a href="../../../nrfx/index.html">nrfx</a>
      </div>
      
      <div class="rst-other-version nrfxlib">
        <a href="../../../nrfxlib/README.html">nrfxlib</a>
      </div>
      
      <div class="rst-other-version zephyr">
        <a href="../../../zephyr/index.html">Zephyr Project</a>
      </div>
      
      <div class="rst-other-version mcuboot">
        <a href="../../../mcuboot/wrapper.html">MCUboot</a>
      </div>
      
      <div class="rst-other-version tfm">
        <a href="../../../tfm/index.html">Trusted Firmware-M</a>
      </div>
      
      <div class="rst-other-version matter">
        <a href="../../../matter/index.html">Matter</a>
      </div>
      
      <div class="rst-other-version kconfig">
        <a href="../../../kconfig/index.html">Kconfig Reference</a>
      </div>
    </div>
  </div><script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>