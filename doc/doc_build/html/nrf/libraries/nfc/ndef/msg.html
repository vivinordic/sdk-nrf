<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Messages and records &mdash; nRF Connect SDK 2.3.99 documentation</title>
      <link rel="stylesheet" href="../../../_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="../../../_static/css/nordic.css" type="text/css" />
      <link rel="stylesheet" href="../../../_static/togglebutton.css" type="text/css" />
      <link rel="stylesheet" href="../../../_static/css/nrf.css" type="text/css" />
      <link rel="stylesheet" href="../../../_static/tabs.css" type="text/css" /> 
  <!--[if lt IE 9]>
    <script src="../../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="../../../" id="documentation_options" src="../../../_static/documentation_options.js"></script>
        <script src="../../../_static/jquery.js"></script>
        <script src="../../../_static/underscore.js"></script>
        <script src="../../../_static/_sphinx_javascript_frameworks_compat.js"></script>
        <script src="../../../_static/doctools.js"></script>
        <script src="../../../_static/sphinx_highlight.js"></script>
        <script src="https://www.googletagmanager.com/gtag/js?id=G-ZPVZRKFQJR"></script>
        <script src="../../../_static/js/ga-tracker.js"></script>
        <script data-culture="EN" id="CookieConsent" type="text/javascript" src="https://policy.app.cookieinformation.com/uc.js"></script>
        <script>let toggleHintShow = 'Click to show';</script>
        <script>let toggleHintHide = 'Click to hide';</script>
        <script>let toggleOpenOnPrint = 'true';</script>
        <script src="../../../_static/togglebutton.js"></script>
        <script>var togglebuttonSelector = '.toggle, .admonition.dropdown';</script>
    <script src="../../../_static/js/theme.js"></script>
<script
  type="text/javascript"
  src="../../../_static/js/ncs.js"
></script>
<script src="../../../_static/js/bootstrap.bundle.min.js"></script>

    <link rel="index" title="Index" href="../../../genindex.html" />
    <link rel="search" title="Search" href="../../../search.html" />
    <link rel="next" title="Parser for messages and records" href="msg_parser.html" />
    <link rel="prev" title="Parser for Bluetooth LE OOB records" href="le_oob_rec_parser.html" />
<link
  href="../../../_static/css/bootstrap.min.css"
  rel="stylesheet"
/>
<link
  rel="shortcut icon"
  href="../../../_static/images/favicon.ico"
/>

</head>

<body class="wy-body-for-nav">
<div class="announcement"></div>
<div class="d-print-none ncs-header">
  <div class="container-xl ncs-header-top">
    <div class="row h-100">
      <div class="d-none d-md-block col-2">
        <div class="bg-white py-4 px-3 ml-2 ncs-header-logo">
          <img
            class="ncs-header-logo"
            src="../../../_static/images/nordic-logo.png"
            alt=""
          />
        </div>
      </div>
      <div
        class="col-8 col-md-7 pl-md-4 d-flex align-self-center justify-content-center"
      >
        <form class="w-75" action="../../../search.html" method="get">
          <div class="form-group">
            <input
              type="text"
              name="q"
              class="ncs-search-input form-control"
              placeholder="Search all docs..."
            />
          </div>
        </form>
      </div>
      <div class="col-4 col-md-3 d-md-block p-3 text-end">
        <div class="dropdown">
          <button
            class="btn dropdown-toggle ncs-btn-versions"
            type="button"
            id="dropdownMenuButton1"
            data-bs-toggle="dropdown"
            aria-expanded="false"
          >
            <span class="d-none d-md-inline">nRF Connect SDK</span>
            <span id="ncsversion" class="d-inline"></span>
          </button>
          <div class="dropdown-menu" aria-labelledby="dropdownMenuButton"></div>
        </div>
      </div>
    </div>
  </div>
  <div class="ncs-header-nav">
    <div class="container-xl">
      <div class="row">
        <div class="col col-12 d-flex justify-content-center">
          <nav class="navbar navbar-dark navbar-expand-lg p-0">
            <span class="navbar-brand d-block d-lg-none py-2 pl-1"
              >Documentation sets</span
            >
            <button
              class="navbar-toggler"
              type="button"
              data-bs-toggle="collapse"
              data-bs-target="#navbarNavAltMarkup"
              aria-controls="navbarNavAltMarkup"
              aria-expanded="false"
              aria-label="Toggle navigation"
            >
              <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="navbarNavAltMarkup">
              <ul class="navbar-nav">
                <li class="nav-item active py-1 px-3">
                  <a
                    class="nav-link"
                    href="../../../../nrf/index.html"
                    >nRF Connect SDK</a
                  >
                </li>
                <li><hr class="dropdown-divider" /></li>
                <li class="nav-item  py-1 px-3">
                  <a
                    class="nav-link"
                    href="../../../../nrfx/index.html"
                    >nrfx</a
                  >
                </li>
                <li><hr class="dropdown-divider" /></li>
                <li class="nav-item  py-1 px-3">
                  <a
                    class="nav-link"
                    href="../../../../nrfxlib/README.html"
                    >nrfxlib</a
                  >
                </li>
                <li><hr class="dropdown-divider" /></li>
                <li class="nav-item  py-1 px-3">
                  <a
                    class="nav-link"
                    href="../../../../zephyr/index.html"
                    >Zephyr Project</a
                  >
                </li>
                <li><hr class="dropdown-divider" /></li>
                <li class="nav-item  py-1 px-3">
                  <a
                    class="nav-link"
                    href="../../../../mcuboot/wrapper.html"
                    >MCUboot</a
                  >
                </li>
                <li><hr class="dropdown-divider" /></li>
                <li class="nav-item  py-1 px-3">
                  <a
                    class="nav-link"
                    href="../../../../tfm/index.html"
                    >Trusted Firmware-M</a
                  >
                </li>
                <li><hr class="dropdown-divider" /></li>
                <li class="nav-item  py-1 px-3">
                  <a
                    class="nav-link"
                    href="../../../../matter/index.html"
                    >Matter</a
                  >
                </li>
                <li><hr class="dropdown-divider" /></li>
                <li class="nav-item  py-1 px-3">
                  <a
                    class="nav-link"
                    href="../../../../kconfig/index.html"
                    >Kconfig Reference</a
                  >
                </li>
                <li><hr class="dropdown-divider" /></li>
              </ul>
            </div>
          </nav>
        </div>
      </div>
    </div>
  </div>
</div>

  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
            <a href="../../../index.html" class="icon icon-home"> nRF Connect SDK
          </a>
              <div class="version">
                2.3.99
              </div>
<div id="searchbox" role="search">
  <div class="searchformwrapper">
    <form id="rtd-search-form" class="wy-form" action="../../../search.html" method="get">
      <input type="text" name="q" placeholder="Search docs" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
  </div>
</div>
<script>$('#searchbox').show(0);</script>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Contents</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../../introduction.html">Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../getting_started.html">Getting started</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../dev_model.html">Development model</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../app_dev.html">Application development</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../security.html">Security</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../ecosystem_integration.html">Ecosystems integration</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../nrf91.html">Working with nRF91 Series</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../nrf70.html">Working with nRF70 Series</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../nrf53.html">Working with nRF53 Series</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../nrf52.html">Working with nRF52 Series</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../protocols.html">Protocols</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../applications.html">Applications</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../samples.html">Samples</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../drivers.html">Drivers</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../../index.html">Libraries</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../../bin/index.html">Binary libraries</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../bluetooth_services/index.html">Bluetooth libraries and services</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../bootloader/index.html">Bootloader libraries</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../caf/index.html">Common Application Framework</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../debug/index.html">Debug libraries</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../dfu/index.html">DFU libraries</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../gazell/index.html">Gazell libraries</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../modem/index.html">Modem libraries</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../mpsl/index.html">Multiprotocol Service Layer libraries</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../networking/index.html">Libraries for networking</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="../index.html">Libraries for NFC</a><ul class="current">
<li class="toctree-l3 current"><a class="reference internal" href="index.html">NFC Data Exchange Format (NDEF)</a><ul class="current">
<li class="toctree-l4"><a class="reference internal" href="ch_msg.html">Connection Handover messages and records</a></li>
<li class="toctree-l4"><a class="reference internal" href="ch_rec_parser.html">Parser for Connection Handover records</a></li>
<li class="toctree-l4"><a class="reference internal" href="launchapp.html">Launch App message and records</a></li>
<li class="toctree-l4"><a class="reference internal" href="le_oob_rec.html">Bluetooth LE OOB records</a></li>
<li class="toctree-l4"><a class="reference internal" href="le_oob_rec_parser.html">Parser for Bluetooth LE OOB records</a></li>
<li class="toctree-l4 current"><a class="current reference internal" href="#">Messages and records</a></li>
<li class="toctree-l4"><a class="reference internal" href="msg_parser.html">Parser for messages and records</a></li>
<li class="toctree-l4"><a class="reference internal" href="text_rec.html">Text records</a></li>
<li class="toctree-l4"><a class="reference internal" href="uri_msg.html">URI messages and records</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../t2t/index.html">Type 2 Tag</a></li>
<li class="toctree-l3"><a class="reference internal" href="../t4t/index.html">Type 4 Tag</a></li>
<li class="toctree-l3"><a class="reference internal" href="../tnep/index.html">Tag NDEF Exchange Protocol (TNEP)</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../nrf_rpc/index.html">nRF RPC libraries</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../others/index.html">Other libraries</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../shell/index.html">Shell libraries</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../tfm/index.html">TF-M libraries</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../zigbee/index.html">Libraries for Zigbee</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../scripts.html">Scripts</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../release_notes.html">Release notes</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../known_issues.html">Known issues</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../software_maturity.html">Software maturity levels</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../documentation.html">About this documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../glossary.html">Glossary</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../../index.html">nRF Connect SDK</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../../../index.html" class="icon icon-home"></a></li>
          <li class="breadcrumb-item"><a href="../../index.html">Libraries</a></li>
          <li class="breadcrumb-item"><a href="../index.html">Libraries for NFC</a></li>
          <li class="breadcrumb-item"><a href="index.html">NFC Data Exchange Format (NDEF)</a></li>
      <li class="breadcrumb-item active">Messages and records</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../../../_sources/libraries/nfc/ndef/msg.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="messages-and-records">
<span id="nfc-ndef"></span><h1>Messages and records<a class="headerlink" href="#messages-and-records" title="Permalink to this heading"></a></h1>
<div class="contents local topic" id="contents">
<ul class="simple">
<li><p><a class="reference internal" href="#creating-a-record-descriptor" id="id7">Creating a record descriptor</a></p></li>
<li><p><a class="reference internal" href="#creating-a-message" id="id8">Creating a message</a></p></li>
<li><p><a class="reference internal" href="#encapsulating-a-message" id="id9">Encapsulating a message</a></p></li>
<li><p><a class="reference internal" href="#api-documentation" id="id10">API documentation</a></p>
<ul>
<li><p><a class="reference internal" href="#ndef-messages" id="id11">NDEF messages</a></p></li>
<li><p><a class="reference internal" href="#ndef-records" id="id12">NDEF records</a></p></li>
</ul>
</li>
</ul>
</div>
<p>Use the <a class="reference internal" href="#nfc-ndef-msg"><span class="std std-ref">NDEF messages</span></a> and <a class="reference internal" href="#nfc-ndef-record"><span class="std std-ref">NDEF records</span></a> modules to create standardized messages and records that are not covered by other modules, or to create your own custom messages.</p>
<p>To generate an NDEF message, start by creating the records that make up the message.
Next, generate an empty message of the required length and add the records to the message.
Finally, encode and create the message.</p>
<p>By default, NDEF messages are encoded for the Type 2 Tag platform.
See <a class="reference internal" href="../../../protocols/nfc/index.html#ug-nfc-ndef-format"><span class="std std-ref">NDEF message and record format</span></a> for a description of the format.
You can choose to encode an NDEF file containing the NDEF message for the Type 4 Tag platform using the <a class="reference internal" href="../t4t/ndef_file.html#nfc-t4t-ndef-file-readme"><span class="std std-ref">NDEF file</span></a> library.
In this case, an additional field is added in front of an NDEF message.</p>
<p>You can also encapsulate a message as payload for a record.
For example, a Handover Request message contains several Alternative Carrier records.
These records themselves are full messages that contain information about alternative carriers that can be used for further communication.</p>
<section id="creating-a-record-descriptor">
<span id="nfc-ndef-record-gen"></span><h2><a class="toc-backref" href="#id7">Creating a record descriptor</a><a class="headerlink" href="#creating-a-record-descriptor" title="Permalink to this heading"></a></h2>
<p>You can provide the payload of the record in binary format or in a different format that is then converted into binary format.
The content of the record is defined in a record descriptor.</p>
<p>Use the <a class="reference internal" href="#c.NFC_NDEF_RECORD_BIN_DATA_DEF" title="NFC_NDEF_RECORD_BIN_DATA_DEF"><code class="xref c c-macro docutils literal notranslate"><span class="pre">NFC_NDEF_RECORD_BIN_DATA_DEF</span></code></a> macro for binary data or the <a class="reference internal" href="#c.NFC_NDEF_GENERIC_RECORD_DESC_DEF" title="NFC_NDEF_GENERIC_RECORD_DESC_DEF"><code class="xref c c-macro docutils literal notranslate"><span class="pre">NFC_NDEF_GENERIC_RECORD_DESC_DEF</span></code></a> macro for other data to create the record descriptor.
You must provide header information for the record (for example, ID and type) and the payload data to the macro.
For generic data that is not in binary format, you must also provide a payload constructor.
This constructor converts the payload data to the needed format.
For binary data, the module provides this constructor.</p>
<p>The following code example shows how to generate a record descriptor:</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="kt">int</span><span class="w"> </span><span class="n">err</span><span class="p">;</span>
<span class="kt">uint32_t</span><span class="w"> </span><span class="n">length</span><span class="p">;</span>

<span class="c1">/// Declare record descriptor by macro - create and initialize an instance of</span>
<span class="c1">///   nfc_ndef_record_desc_t.</span>
<span class="n">NFC_NDEF_GENERIC_RECORD_DESC_DEF</span><span class="p">(</span><span class="w"> </span><span class="n">record</span><span class="p">,</span>
<span class="w">                                  </span><span class="mi">3</span><span class="p">,</span>
<span class="w">                                  </span><span class="n">id_string</span><span class="p">,</span>
<span class="w">                                  </span><span class="k">sizeof</span><span class="p">(</span><span class="n">id_string</span><span class="p">),</span>
<span class="w">                                  </span><span class="n">type_string</span><span class="p">,</span>
<span class="w">                                  </span><span class="k">sizeof</span><span class="p">(</span><span class="n">type_string</span><span class="p">),</span>
<span class="w">                                  </span><span class="n">payload_constructor</span><span class="p">,</span><span class="w"> </span><span class="c1">// implementation provided by user</span>
<span class="w">                                  </span><span class="o">&amp;</span><span class="n">payload_constructor_data</span><span class="w"> </span><span class="c1">// structure depends on user implementation</span>
<span class="w">                                </span><span class="p">);</span>

<span class="c1">// If required, get the record size to length variable.</span>
<span class="n">err</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">nfc_ndef_record_encode</span><span class="p">(</span><span class="w"> </span><span class="o">&amp;</span><span class="n">NFC_NDEF_GENERIC_RECORD_DESC_DEF</span><span class="p">(</span><span class="n">record</span><span class="p">),</span>
<span class="w">                                     </span><span class="n">NDEF_MIDDLE_RECORD</span><span class="p">,</span>
<span class="w">                                     </span><span class="nb">NULL</span><span class="p">,</span>
<span class="w">                                     </span><span class="o">&amp;</span><span class="n">length</span><span class="p">);</span>
</pre></div>
</div>
</section>
<section id="creating-a-message">
<span id="nfc-ndef-msg-gen"></span><h2><a class="toc-backref" href="#id8">Creating a message</a><a class="headerlink" href="#creating-a-message" title="Permalink to this heading"></a></h2>
<p>A message consists of one or more records.
Accordingly, a message descriptor (that holds the content of the message) contains an array of pointers to record descriptors.</p>
<p>Use the <a class="reference internal" href="#c.NFC_NDEF_MSG_DEF" title="NFC_NDEF_MSG_DEF"><code class="xref c c-macro docutils literal notranslate"><span class="pre">NFC_NDEF_MSG_DEF</span></code></a> macro to create the message descriptor and the array of pointers.
When creating the message descriptor, you specify how many records the message will contain, but you do not specify the actual records yet.</p>
<p>To add the records, use the <a class="reference internal" href="#c.nfc_ndef_msg_record_add" title="nfc_ndef_msg_record_add"><code class="xref c c-func docutils literal notranslate"><span class="pre">nfc_ndef_msg_record_add()</span></code></a> function.</p>
<p>After adding all records, call <a class="reference internal" href="#c.nfc_ndef_msg_encode" title="nfc_ndef_msg_encode"><code class="xref c c-func docutils literal notranslate"><span class="pre">nfc_ndef_msg_encode()</span></code></a> to actually create the message from the message descriptor.
<a class="reference internal" href="#c.nfc_ndef_msg_encode" title="nfc_ndef_msg_encode"><code class="xref c c-func docutils literal notranslate"><span class="pre">nfc_ndef_msg_encode()</span></code></a> internally calls <a class="reference internal" href="#c.nfc_ndef_record_encode" title="nfc_ndef_record_encode"><code class="xref c c-func docutils literal notranslate"><span class="pre">nfc_ndef_record_encode()</span></code></a> to encode each record.
The NDEF records are always encoded in long format.
If no ID field is specified, a record without ID field is generated.</p>
<p>The following code example shows how to create two messages:</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="kt">int</span><span class="w"> </span><span class="n">err</span><span class="p">;</span>
<span class="kt">uint8_t</span><span class="w"> </span><span class="n">buffer_for_message</span><span class="p">[</span><span class="mi">512</span><span class="p">];</span>
<span class="kt">uint8_t</span><span class="w"> </span><span class="n">buffer_for_message_2</span><span class="p">[</span><span class="mi">128</span><span class="p">];</span>
<span class="kt">uint32_t</span><span class="w"> </span><span class="n">length</span><span class="p">;</span>

<span class="c1">// Declare message descriptor by macro - create and initialize an instance of</span>
<span class="c1">//   nfc_ndef_msg_desc_t and an array of pointers to nfc_ndef_record_desc_t.</span>
<span class="c1">// The declared message can contain up to 2 records.</span>
<span class="n">NFC_NDEF_MSG_DEF</span><span class="p">(</span><span class="n">my_message</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span><span class="p">);</span>

<span class="c1">// Add record_1 and record_2 to the message.</span>
<span class="c1">// record_1 and record_2 are record descriptors as created in the previous</span>
<span class="c1">//   code example.</span>
<span class="n">err</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">nfc_ndef_msg_record_add</span><span class="p">(</span><span class="w"> </span><span class="o">&amp;</span><span class="n">NFC_NDEF_MSG</span><span class="p">(</span><span class="n">my_message</span><span class="p">),</span><span class="w"> </span><span class="n">record_1</span><span class="p">);</span>
<span class="n">err</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">nfc_ndef_msg_record_add</span><span class="p">(</span><span class="w"> </span><span class="o">&amp;</span><span class="n">NFC_NDEF_MSG</span><span class="p">(</span><span class="n">my_message</span><span class="p">),</span><span class="w"> </span><span class="n">record_2</span><span class="p">);</span>

<span class="c1">// Get the message size to the length variable.</span>
<span class="n">err_t</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">nfc_ndef_msg_encode</span><span class="p">(</span><span class="w"> </span><span class="o">&amp;</span><span class="n">NFC_NDEF_MSG</span><span class="p">(</span><span class="n">my_message</span><span class="p">),</span>
<span class="w">                                    </span><span class="nb">NULL</span><span class="p">,</span>
<span class="w">                                    </span><span class="o">&amp;</span><span class="n">length</span><span class="p">);</span>

<span class="c1">// Encode the message to buffer_for_message.</span>
<span class="n">ASSERT</span><span class="p">(</span><span class="n">length</span><span class="w"> </span><span class="o">&lt;=</span><span class="w"> </span><span class="mi">512</span><span class="p">);</span><span class="w"> </span><span class="c1">// make sure the message fits into the buffer</span>
<span class="n">err_t</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">nfc_ndef_msg_encode</span><span class="p">(</span><span class="w"> </span><span class="o">&amp;</span><span class="n">NFC_NDEF_MSG</span><span class="p">(</span><span class="n">my_message</span><span class="p">),</span>
<span class="w">                                    </span><span class="n">buffer_for_message</span><span class="p">,</span>
<span class="w">                                    </span><span class="o">&amp;</span><span class="n">length</span><span class="p">);</span>

<span class="c1">// Clear the message description.</span>
<span class="n">nfc_ndef_msg_clear</span><span class="p">(</span><span class="w"> </span><span class="o">&amp;</span><span class="n">NFC_NDEF_MSG</span><span class="p">(</span><span class="n">my_message</span><span class="p">));</span>

<span class="c1">// Add record_3 to the message.</span>
<span class="c1">// record_3 is a record descriptors as created in the previous code example.</span>
<span class="n">err</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">nfc_ndef_msg_record_add</span><span class="p">(</span><span class="w"> </span><span class="o">&amp;</span><span class="n">NFC_NDEF_MSG</span><span class="p">(</span><span class="n">my_message</span><span class="p">),</span><span class="w"> </span><span class="n">record_3</span><span class="p">);</span>

<span class="c1">// Encode another message to buffer_for_message_2.</span>
<span class="n">length</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">128</span><span class="p">;</span><span class="w"> </span><span class="c1">// amount of memory available for message</span>
<span class="n">err_t</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">nfc_ndef_msg_encode</span><span class="p">(</span><span class="w"> </span><span class="o">&amp;</span><span class="n">NFC_NDEF_MSG</span><span class="p">(</span><span class="n">my_message</span><span class="p">),</span>
<span class="w">                                    </span><span class="n">buffer_for_message_2</span><span class="p">,</span>
<span class="w">                                    </span><span class="o">&amp;</span><span class="n">length</span><span class="p">);</span>
</pre></div>
</div>
</section>
<section id="encapsulating-a-message">
<span id="nfc-ndef-msg-rec"></span><h2><a class="toc-backref" href="#id9">Encapsulating a message</a><a class="headerlink" href="#encapsulating-a-message" title="Permalink to this heading"></a></h2>
<p>To encapsulate a message in a record so that it can be added to another message, use the <a class="reference internal" href="#c.NFC_NDEF_NESTED_NDEF_MSG_RECORD_DEF" title="NFC_NDEF_NESTED_NDEF_MSG_RECORD_DEF"><code class="xref c c-macro docutils literal notranslate"><span class="pre">NFC_NDEF_NESTED_NDEF_MSG_RECORD_DEF</span></code></a> macro to create the record descriptor.
This record descriptor uses <a class="reference internal" href="#c.nfc_ndef_msg_encode" title="nfc_ndef_msg_encode"><code class="xref c c-func docutils literal notranslate"><span class="pre">nfc_ndef_msg_encode()</span></code></a> as payload constructor.
You can then add this record descriptor to a message like any other record descriptor.</p>
<p>The following code example shows how to encapsulate a message as payload for a record:</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="c1">// nested_message_desc is a message descriptor</span>

<span class="c1">// declare a record descriptor with an NDEF message nested in payload</span>
<span class="c1">// create and initialize instance of nfc_ndef_record_desc_t</span>
<span class="n">NFC_NDEF_NESTED_NDEF_MSG_RECORD_DEF</span><span class="p">(</span><span class="w"> </span><span class="n">compound_record</span><span class="p">,</span>
<span class="w">                                     </span><span class="mi">3</span><span class="p">,</span>
<span class="w">                                     </span><span class="k">sizeof</span><span class="p">(</span><span class="n">id_string</span><span class="p">),</span>
<span class="w">                                     </span><span class="n">id_string</span><span class="p">,</span>
<span class="w">                                     </span><span class="n">type_string</span><span class="p">,</span>
<span class="w">                                     </span><span class="k">sizeof</span><span class="p">(</span><span class="n">type_string</span><span class="p">),</span>
<span class="w">                                     </span><span class="o">&amp;</span><span class="n">nested_message_desc</span><span class="w"> </span><span class="p">);</span>

<span class="c1">// add compound record to a message like any other record</span>
<span class="n">err</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">nfc_ndef_msg_record_add</span><span class="p">(</span><span class="w"> </span><span class="o">&amp;</span><span class="n">NFC_NDEF_MSG</span><span class="p">(</span><span class="n">my_message</span><span class="p">),</span><span class="w"> </span><span class="o">&amp;</span><span class="n">NFC_NDEF_NESTED_NDEF_MSG_RECORD</span><span class="p">(</span><span class="n">compound_record</span><span class="p">));</span>
</pre></div>
</div>
</section>
<section id="api-documentation">
<h2><a class="toc-backref" href="#id10">API documentation</a><a class="headerlink" href="#api-documentation" title="Permalink to this heading"></a></h2>
<section id="ndef-messages">
<span id="nfc-ndef-msg"></span><h3><a class="toc-backref" href="#id11">NDEF messages</a><a class="headerlink" href="#ndef-messages" title="Permalink to this heading"></a></h3>
<div class="line-block">
<div class="line">Header file: <code class="file docutils literal notranslate"><span class="pre">include/nfc/ndef/msg.h</span></code></div>
<div class="line">Source file: <code class="file docutils literal notranslate"><span class="pre">subsys/nfc/ndef/msg.c</span></code></div>
</div>
<dl>
<dt class="sig sig-object cpp">
<span class="target" id="group__nfc__ndef__msg"></span><em><span class="pre">group</span></em> <span class="sig-name descname"><span class="pre">nfc_ndef_msg</span></span></dt>
<dd><p>Generation of NFC NDEF messages for the NFC tag. </p>
<div class="breathe-sectiondef docutils container">
<p class="breathe-sectiondef-title rubric" id="breathe-section-title-defines">Defines</p>
<dl class="c macro">
<dt class="sig sig-object c" id="c.NFC_NDEF_MSG_DEF">
<span class="target" id="group__nfc__ndef__msg_1ga912e0302af4c49c3432535b3a44b0166"></span><span class="sig-name descname"><span class="n"><span class="pre">NFC_NDEF_MSG_DEF</span></span></span><span class="sig-paren">(</span><span class="n"><span class="pre">name</span></span>, <span class="n"><span class="pre">max_record_cnt</span></span><span class="sig-paren">)</span><a class="headerlink" href="#c.NFC_NDEF_MSG_DEF" title="Permalink to this definition"></a><br /></dt>
<dd><p>Macro for creating and initializing an NFC NDEF message descriptor. </p>
<p>This macro creates and initializes an instance of type <a class="reference internal" href="#structnfc__ndef__msg__desc"><span class="std std-ref">nfc_ndef_msg_desc</span></a> and an array of pointers to record descriptors (<a class="reference internal" href="#structnfc__ndef__record__desc"><span class="std std-ref">nfc_ndef_record_desc</span></a>) used by the message.</p>
<p>Use the macro <a class="reference internal" href="#group__nfc__ndef__msg_1gaa3254c3d074722505b84cbe9c02e957d"><span class="std std-ref">NFC_NDEF_MSG</span></a> to access the NDEF message descriptor instance.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The message descriptor is declared as automatic variable, which implies that the NDEF message encoding must be done in the same variable scope.</p>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>name</strong> – Name of the related instance. </p></li>
<li><p><strong>max_record_cnt</strong> – Maximal count of records in the message. </p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="c macro">
<dt class="sig sig-object c" id="c.NFC_NDEF_MSG">
<span class="target" id="group__nfc__ndef__msg_1gaa3254c3d074722505b84cbe9c02e957d"></span><span class="sig-name descname"><span class="n"><span class="pre">NFC_NDEF_MSG</span></span></span><span class="sig-paren">(</span><span class="n"><span class="pre">name</span></span><span class="sig-paren">)</span><a class="headerlink" href="#c.NFC_NDEF_MSG" title="Permalink to this definition"></a><br /></dt>
<dd><p>Macro for accessing the NFC NDEF message descriptor instance that you created with <a class="reference internal" href="#group__nfc__ndef__msg_1ga912e0302af4c49c3432535b3a44b0166"><span class="std std-ref">NFC_NDEF_MSG_DEF</span></a>. </p>
</dd></dl>

<dl class="c macro">
<dt class="sig sig-object c" id="c.NFC_NDEF_NESTED_NDEF_MSG_RECORD_DEF">
<span class="target" id="group__nfc__ndef__msg_1gaaaf73f1022b42efaa7d5e34b42b1afc1"></span><span class="sig-name descname"><span class="n"><span class="pre">NFC_NDEF_NESTED_NDEF_MSG_RECORD_DEF</span></span></span><span class="sig-paren">(</span><span class="n"><span class="pre">name</span></span>, <span class="n"><span class="pre">tnf_arg</span></span>, <span class="n"><span class="pre">id_arg</span></span>, <span class="n"><span class="pre">id_len</span></span>, <span class="n"><span class="pre">type_arg</span></span>, <span class="n"><span class="pre">type_len</span></span>, <span class="n"><span class="pre">nested_message</span></span><span class="sig-paren">)</span><a class="headerlink" href="#c.NFC_NDEF_NESTED_NDEF_MSG_RECORD_DEF" title="Permalink to this definition"></a><br /></dt>
<dd><p>Macro for creating and initializing an NFC NDEF record descriptor with an encapsulated NDEF message. This macro creates and initializes an instance of type <a class="reference internal" href="#structnfc__ndef__record__desc"><span class="std std-ref">nfc_ndef_record_desc</span></a> that contains an encapsulated NDEF message as payload. <a class="reference internal" href="#group__nfc__ndef__msg_1ga82467aede468e5467a8bff345ea05d2e"><span class="std std-ref">nfc_ndef_msg_encode</span></a> is used as payload constructor to encode the message. The encoded message is then used as payload for the record. </p>
<p>Use the macro <a class="reference internal" href="#group__nfc__ndef__msg_1ga09c1bbc342a2d776a5bcd339dc31d277"><span class="std std-ref">NFC_NDEF_NESTED_NDEF_MSG_RECORD</span></a> to access the NDEF record descriptor instance.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The message descriptor is declared as automatic variable, which implies that the NDEF message encoding must be done in the same variable scope.</p>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>name</strong> – Name of the created record descriptor instance. </p></li>
<li><p><strong>tnf_arg</strong> – Type Name Format (TNF) value for the record. </p></li>
<li><p><strong>id_arg</strong> – Pointer to the ID string. </p></li>
<li><p><strong>id_len</strong> – Length of the ID string. </p></li>
<li><p><strong>type_arg</strong> – Pointer to the type string. </p></li>
<li><p><strong>type_len</strong> – Length of the type string. </p></li>
<li><p><strong>nested_message</strong> – Pointer to the message descriptor to encapsulate as the record’s payload. </p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="c macro">
<dt class="sig sig-object c" id="c.NFC_NDEF_NESTED_NDEF_MSG_RECORD">
<span class="target" id="group__nfc__ndef__msg_1ga09c1bbc342a2d776a5bcd339dc31d277"></span><span class="sig-name descname"><span class="n"><span class="pre">NFC_NDEF_NESTED_NDEF_MSG_RECORD</span></span></span><span class="sig-paren">(</span><span class="n"><span class="pre">name</span></span><span class="sig-paren">)</span><a class="headerlink" href="#c.NFC_NDEF_NESTED_NDEF_MSG_RECORD" title="Permalink to this definition"></a><br /></dt>
<dd><p>Macro for accessing the NFC NDEF record descriptor instance that you created with <a class="reference internal" href="#group__nfc__ndef__msg_1gaaaf73f1022b42efaa7d5e34b42b1afc1"><span class="std std-ref">NFC_NDEF_NESTED_NDEF_MSG_RECORD_DEF</span></a>. </p>
</dd></dl>

</div>
<div class="breathe-sectiondef docutils container">
<p class="breathe-sectiondef-title rubric" id="breathe-section-title-functions">Functions</p>
<dl class="c function">
<dt class="sig sig-object c" id="c.nfc_ndef_msg_encode">
<span class="target" id="group__nfc__ndef__msg_1ga82467aede468e5467a8bff345ea05d2e"></span><span class="kt"><span class="pre">int</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">nfc_ndef_msg_encode</span></span></span><span class="sig-paren">(</span><span class="k"><span class="pre">struct</span></span><span class="w"> </span><a class="reference internal" href="#c.nfc_ndef_msg_desc" title="nfc_ndef_msg_desc"><span class="n"><span class="pre">nfc_ndef_msg_desc</span></span></a><span class="w"> </span><span class="k"><span class="pre">const</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">ndef_msg_desc</span></span>, <span class="n"><span class="pre">uint8_t</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">msg_buffer</span></span>, <span class="n"><span class="pre">uint32_t</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">msg_len</span></span><span class="sig-paren">)</span><a class="headerlink" href="#c.nfc_ndef_msg_encode" title="Permalink to this definition"></a><br /></dt>
<dd><p>Encode an NDEF message. </p>
<p>This function encodes an NDEF message according to the provided message descriptor.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>ndef_msg_desc</strong> – Pointer to the message descriptor. </p></li>
<li><p><strong>msg_buffer</strong> – Pointer to the message destination. If NULL, function will calculate the expected size of the message. </p></li>
<li><p><strong>msg_len</strong> – Size of the available memory for the message as input. Size of the generated message as output.</p></li>
</ul>
</dd>
<dt class="field-even">Return values</dt>
<dd class="field-even"><p><strong>0</strong> – If the operation was successful. Otherwise, a (negative) error code is returned. </p>
</dd>
</dl>
</dd></dl>

<dl class="c function">
<dt class="sig sig-object c" id="c.nfc_ndef_msg_clear">
<span class="target" id="group__nfc__ndef__msg_1gab58b51366a2bad10fbabd1dcf472c60d"></span><span class="kt"><span class="pre">void</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">nfc_ndef_msg_clear</span></span></span><span class="sig-paren">(</span><span class="k"><span class="pre">struct</span></span><span class="w"> </span><a class="reference internal" href="#c.nfc_ndef_msg_desc" title="nfc_ndef_msg_desc"><span class="n"><span class="pre">nfc_ndef_msg_desc</span></span></a><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">msg</span></span><span class="sig-paren">)</span><a class="headerlink" href="#c.nfc_ndef_msg_clear" title="Permalink to this definition"></a><br /></dt>
<dd><p>Clear an NDEF message. </p>
<p>This function clears an NDEF message descriptor, thus empties the NDEF message.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>msg</strong> – Pointer to the message descriptor. </p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="c function">
<dt class="sig sig-object c" id="c.nfc_ndef_msg_record_add">
<span class="target" id="group__nfc__ndef__msg_1gaa3eb7eacc6ffbeb2bf42d92c8c814554"></span><span class="kt"><span class="pre">int</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">nfc_ndef_msg_record_add</span></span></span><span class="sig-paren">(</span><span class="k"><span class="pre">struct</span></span><span class="w"> </span><a class="reference internal" href="#c.nfc_ndef_msg_desc" title="nfc_ndef_msg_desc"><span class="n"><span class="pre">nfc_ndef_msg_desc</span></span></a><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">msg</span></span>, <span class="k"><span class="pre">struct</span></span><span class="w"> </span><a class="reference internal" href="#c.nfc_ndef_record_desc" title="nfc_ndef_record_desc"><span class="n"><span class="pre">nfc_ndef_record_desc</span></span></a><span class="w"> </span><span class="k"><span class="pre">const</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">record</span></span><span class="sig-paren">)</span><a class="headerlink" href="#c.nfc_ndef_msg_record_add" title="Permalink to this definition"></a><br /></dt>
<dd><p>Add a record to an NDEF message. </p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>record</strong> – Pointer to the record descriptor. </p></li>
<li><p><strong>msg</strong> – Pointer to the message descriptor.</p></li>
</ul>
</dd>
<dt class="field-even">Return values</dt>
<dd class="field-even"><p><strong>0</strong> – If the operation was successful. Otherwise, a (negative) error code is returned. </p>
</dd>
</dl>
</dd></dl>

</div>
<dl class="c struct">
<dt class="sig sig-object c" id="c.nfc_ndef_msg_desc">
<span class="target" id="structnfc__ndef__msg__desc"></span><span class="k"><span class="pre">struct</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">nfc_ndef_msg_desc</span></span></span><a class="headerlink" href="#c.nfc_ndef_msg_desc" title="Permalink to this definition"></a><br /></dt>
<dd><div class="docutils container">
<em>#include &lt;msg.h&gt;</em></div>
<p>NDEF message descriptor. </p>
<div class="breathe-sectiondef docutils container">
<p class="breathe-sectiondef-title rubric" id="breathe-section-title-public-members">Public Members</p>
<dl class="c var">
<dt class="sig sig-object c" id="c.nfc_ndef_msg_desc.record">
<span class="target" id="structnfc__ndef__msg__desc_1abcbd24138a652a09dbafe511d95387ec"></span><span class="k"><span class="pre">struct</span></span><span class="w"> </span><a class="reference internal" href="#c.nfc_ndef_record_desc" title="nfc_ndef_record_desc"><span class="n"><span class="pre">nfc_ndef_record_desc</span></span></a><span class="w"> </span><span class="k"><span class="pre">const</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="p"><span class="pre">*</span></span><span class="sig-name descname"><span class="n"><span class="pre">record</span></span></span><a class="headerlink" href="#c.nfc_ndef_msg_desc.record" title="Permalink to this definition"></a><br /></dt>
<dd><p>Pointer to an array of pointers to NDEF record descriptors. </p>
</dd></dl>

<dl class="c var">
<dt class="sig sig-object c" id="c.nfc_ndef_msg_desc.max_record_count">
<span class="target" id="structnfc__ndef__msg__desc_1a292f3be4429e9bfb665dc6cfba53ae44"></span><span class="n"><span class="pre">uint32_t</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">max_record_count</span></span></span><a class="headerlink" href="#c.nfc_ndef_msg_desc.max_record_count" title="Permalink to this definition"></a><br /></dt>
<dd><p>Number of elements in the allocated record array, which defines the maximum number of records within the NDEF message. </p>
</dd></dl>

<dl class="c var">
<dt class="sig sig-object c" id="c.nfc_ndef_msg_desc.record_count">
<span class="target" id="structnfc__ndef__msg__desc_1a48589b91b15d8c7900051568ecb24c91"></span><span class="n"><span class="pre">uint32_t</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">record_count</span></span></span><a class="headerlink" href="#c.nfc_ndef_msg_desc.record_count" title="Permalink to this definition"></a><br /></dt>
<dd><p>Number of records in the NDEF message. </p>
</dd></dl>

</div>
</dd></dl>

</dd></dl>

</section>
<section id="ndef-records">
<span id="nfc-ndef-record"></span><h3><a class="toc-backref" href="#id12">NDEF records</a><a class="headerlink" href="#ndef-records" title="Permalink to this heading"></a></h3>
<div class="line-block">
<div class="line">Header file: <code class="file docutils literal notranslate"><span class="pre">include/nfc/ndef/record.h</span></code></div>
<div class="line">Source file: <code class="file docutils literal notranslate"><span class="pre">subsys/nfc/ndef/record.c</span></code></div>
</div>
<dl>
<dt class="sig sig-object cpp">
<span class="target" id="group__nfc__ndef__record"></span><em><span class="pre">group</span></em> <span class="sig-name descname"><span class="pre">nfc_ndef_record</span></span></dt>
<dd><p>Generation of NFC NDEF records for NFC messages. </p>
<div class="breathe-sectiondef docutils container">
<p class="breathe-sectiondef-title rubric" id="breathe-section-title-defines">Defines</p>
<dl class="c macro">
<dt class="sig sig-object c" id="c.NDEF_RECORD_IL_MASK">
<span class="target" id="group__nfc__ndef__record_1ga85da5b6d20a70fc85e1dfb6411125806"></span><span class="sig-name descname"><span class="n"><span class="pre">NDEF_RECORD_IL_MASK</span></span></span><a class="headerlink" href="#c.NDEF_RECORD_IL_MASK" title="Permalink to this definition"></a><br /></dt>
<dd><p>Mask of the ID field presence bit in the flags byte of an NDEF record. </p>
</dd></dl>

<dl class="c macro">
<dt class="sig sig-object c" id="c.NDEF_RECORD_TNF_MASK">
<span class="target" id="group__nfc__ndef__record_1gac6c6cf0a4cb3fe58100813d1a8882ae7"></span><span class="sig-name descname"><span class="n"><span class="pre">NDEF_RECORD_TNF_MASK</span></span></span><a class="headerlink" href="#c.NDEF_RECORD_TNF_MASK" title="Permalink to this definition"></a><br /></dt>
<dd><p>Mask of the TNF value field in the first byte of an NDEF record. </p>
</dd></dl>

<dl class="c macro">
<dt class="sig sig-object c" id="c.NDEF_RECORD_SR_MASK">
<span class="target" id="group__nfc__ndef__record_1ga91fb4f493cf756160ba48b69b1cbce8a"></span><span class="sig-name descname"><span class="n"><span class="pre">NDEF_RECORD_SR_MASK</span></span></span><a class="headerlink" href="#c.NDEF_RECORD_SR_MASK" title="Permalink to this definition"></a><br /></dt>
<dd><p>Mask of the SR flag. If set, this flag indicates that the PAYLOAD_LENGTH field has a size of 1 byte. Otherwise, PAYLOAD_LENGTH has 4 bytes. </p>
</dd></dl>

<dl class="c macro">
<dt class="sig sig-object c" id="c.NDEF_RECORD_PAYLOAD_LEN_LONG_SIZE">
<span class="target" id="group__nfc__ndef__record_1ga6ac8bca72eed1e6fe27105fa9f678f13"></span><span class="sig-name descname"><span class="n"><span class="pre">NDEF_RECORD_PAYLOAD_LEN_LONG_SIZE</span></span></span><a class="headerlink" href="#c.NDEF_RECORD_PAYLOAD_LEN_LONG_SIZE" title="Permalink to this definition"></a><br /></dt>
<dd><p>Size of the Payload Length field in a long NDEF record. </p>
</dd></dl>

<dl class="c macro">
<dt class="sig sig-object c" id="c.NDEF_RECORD_PAYLOAD_LEN_SHORT_SIZE">
<span class="target" id="group__nfc__ndef__record_1ga5d60bf1cdad42a605290bc12e90b53c4"></span><span class="sig-name descname"><span class="n"><span class="pre">NDEF_RECORD_PAYLOAD_LEN_SHORT_SIZE</span></span></span><a class="headerlink" href="#c.NDEF_RECORD_PAYLOAD_LEN_SHORT_SIZE" title="Permalink to this definition"></a><br /></dt>
<dd><p>Size of the Payload Length field in a short NDEF record. </p>
</dd></dl>

<dl class="c macro">
<dt class="sig sig-object c" id="c.NDEF_RECORD_ID_LEN_SIZE">
<span class="target" id="group__nfc__ndef__record_1gaccbbdb3ee12c2950b0300f7c8bafe09c"></span><span class="sig-name descname"><span class="n"><span class="pre">NDEF_RECORD_ID_LEN_SIZE</span></span></span><a class="headerlink" href="#c.NDEF_RECORD_ID_LEN_SIZE" title="Permalink to this definition"></a><br /></dt>
<dd></dd></dl>

<dl class="c macro">
<dt class="sig sig-object c" id="c.NDEF_RECORD_LOCATION_MASK">
<span class="target" id="group__nfc__ndef__record_1ga2d466aa0f04d1d0505609107c6efd9c8"></span><span class="sig-name descname"><span class="n"><span class="pre">NDEF_RECORD_LOCATION_MASK</span></span></span><a class="headerlink" href="#c.NDEF_RECORD_LOCATION_MASK" title="Permalink to this definition"></a><br /></dt>
<dd><p>Mask of the Record Location bits in the NDEF record’s flags byte. </p>
</dd></dl>

<dl class="c macro">
<dt class="sig sig-object c" id="c.NFC_NDEF_GENERIC_RECORD_DESC_DEF">
<span class="target" id="group__nfc__ndef__record_1ga981ac373f5af603b36c7ab2c488785a6"></span><span class="sig-name descname"><span class="n"><span class="pre">NFC_NDEF_GENERIC_RECORD_DESC_DEF</span></span></span><span class="sig-paren">(</span><span class="n"><span class="pre">name</span></span>, <span class="n"><span class="pre">tnf_arg</span></span>, <span class="n"><span class="pre">id_arg</span></span>, <span class="n"><span class="pre">id_len</span></span>, <span class="n"><span class="pre">type_arg</span></span>, <span class="n"><span class="pre">type_len</span></span>, <span class="n"><span class="pre">payload_constructor_arg</span></span>, <span class="n"><span class="pre">payload_descriptor_arg</span></span><span class="sig-paren">)</span><a class="headerlink" href="#c.NFC_NDEF_GENERIC_RECORD_DESC_DEF" title="Permalink to this definition"></a><br /></dt>
<dd><p>Macro for creating and initializing an NFC NDEF record descriptor for a generic record. </p>
<p>This macro creates and initializes an instance of type <a class="reference internal" href="#structnfc__ndef__record__desc"><span class="std std-ref">nfc_ndef_record_desc</span></a>.</p>
<p>Use the macro <a class="reference internal" href="#group__nfc__ndef__record_1ga854ffeb62045f58c823adedf3f0ed615"><span class="std std-ref">NFC_NDEF_GENERIC_RECORD_DESC</span></a> to access the NDEF record descriptor instance.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The record descriptor is declared as automatic variable, which implies that the NDEF record encoding must be done in the same variable scope.</p>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>name</strong> – Name of the created descriptor instance. </p></li>
<li><p><strong>tnf_arg</strong> – Type Name Format (TNF) value for the record. </p></li>
<li><p><strong>id_arg</strong> – Pointer to the ID string. </p></li>
<li><p><strong>id_len</strong> – Length of the ID string. </p></li>
<li><p><strong>type_arg</strong> – Pointer to the type string. </p></li>
<li><p><strong>type_len</strong> – Length of the type string. </p></li>
<li><p><strong>payload_constructor_arg</strong> – Pointer to the payload constructor function. The constructor must be of type <a class="reference internal" href="#group__nfc__ndef__record_1ga1ccae5f0330b1b9b31af6efd37a8aeb8"><span class="std std-ref">payload_constructor_t</span></a>. </p></li>
<li><p><strong>payload_descriptor_arg</strong> – Pointer to the data for the payload constructor. </p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="c macro">
<dt class="sig sig-object c" id="c.NFC_NDEF_GENERIC_RECORD_DESC">
<span class="target" id="group__nfc__ndef__record_1ga854ffeb62045f58c823adedf3f0ed615"></span><span class="sig-name descname"><span class="n"><span class="pre">NFC_NDEF_GENERIC_RECORD_DESC</span></span></span><span class="sig-paren">(</span><span class="n"><span class="pre">name</span></span><span class="sig-paren">)</span><a class="headerlink" href="#c.NFC_NDEF_GENERIC_RECORD_DESC" title="Permalink to this definition"></a><br /></dt>
<dd><p>Macro for accessing the NFC NDEF record descriptor instance that you created with <a class="reference internal" href="#group__nfc__ndef__record_1ga981ac373f5af603b36c7ab2c488785a6"><span class="std std-ref">NFC_NDEF_GENERIC_RECORD_DESC_DEF</span></a>. </p>
</dd></dl>

<dl class="c macro">
<dt class="sig sig-object c" id="c.NFC_NDEF_RECORD_BIN_DATA_DEF">
<span class="target" id="group__nfc__ndef__record_1ga1ba7c60df67955d44ad65e8b50581d02"></span><span class="sig-name descname"><span class="n"><span class="pre">NFC_NDEF_RECORD_BIN_DATA_DEF</span></span></span><span class="sig-paren">(</span><span class="n"><span class="pre">name</span></span>, <span class="n"><span class="pre">tnf_arg</span></span>, <span class="n"><span class="pre">id_arg</span></span>, <span class="n"><span class="pre">id_len</span></span>, <span class="n"><span class="pre">type_arg</span></span>, <span class="n"><span class="pre">type_len</span></span>, <span class="n"><span class="pre">payload_arg</span></span>, <span class="n"><span class="pre">payload_len</span></span><span class="sig-paren">)</span><a class="headerlink" href="#c.NFC_NDEF_RECORD_BIN_DATA_DEF" title="Permalink to this definition"></a><br /></dt>
<dd><p>Macro for creating and initializing an NFC NDEF record descriptor for a record with binary payload. </p>
<p>This macro creates and initializes an instance of type <a class="reference internal" href="#structnfc__ndef__record__desc"><span class="std std-ref">nfc_ndef_record_desc</span></a> and a binary data descriptor containing the payload data.</p>
<p>Use the macro <a class="reference internal" href="#group__nfc__ndef__record_1ga9f7681ee4be16d8f3711d81e1068875d"><span class="std std-ref">NFC_NDEF_RECORD_BIN_DATA</span></a> to access the NDEF record descriptor instance.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The record descriptor is declared as automatic variable, which implies that the NDEF record encoding must be done in the same variable scope.</p>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>name</strong> – Name of the created descriptor instance. </p></li>
<li><p><strong>tnf_arg</strong> – Type Name Format (TNF) value for the record. </p></li>
<li><p><strong>id_arg</strong> – Pointer to the ID string. </p></li>
<li><p><strong>id_len</strong> – Length of the ID string. </p></li>
<li><p><strong>type_arg</strong> – Pointer to the type string. </p></li>
<li><p><strong>type_len</strong> – Length of the type string. </p></li>
<li><p><strong>payload_arg</strong> – Pointer to the payload data that will be copied to the payload field. </p></li>
<li><p><strong>payload_len</strong> – Length of the payload. </p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="c macro">
<dt class="sig sig-object c" id="c.NFC_NDEF_RECORD_BIN_DATA">
<span class="target" id="group__nfc__ndef__record_1ga9f7681ee4be16d8f3711d81e1068875d"></span><span class="sig-name descname"><span class="n"><span class="pre">NFC_NDEF_RECORD_BIN_DATA</span></span></span><span class="sig-paren">(</span><span class="n"><span class="pre">name</span></span><span class="sig-paren">)</span><a class="headerlink" href="#c.NFC_NDEF_RECORD_BIN_DATA" title="Permalink to this definition"></a><br /></dt>
<dd><p>Macro for accessing the NFC NDEF record descriptor instance that you created with <a class="reference internal" href="#group__nfc__ndef__record_1ga1ba7c60df67955d44ad65e8b50581d02"><span class="std std-ref">NFC_NDEF_RECORD_BIN_DATA_DEF</span></a>. </p>
</dd></dl>

<dl class="c macro">
<dt class="sig sig-object c" id="c.NFC_NDEF_BIN_PAYLOAD_DESC">
<span class="target" id="group__nfc__ndef__record_1gad72964ba783c31065f42d82af2838cf3"></span><span class="sig-name descname"><span class="n"><span class="pre">NFC_NDEF_BIN_PAYLOAD_DESC</span></span></span><span class="sig-paren">(</span><span class="n"><span class="pre">name</span></span><span class="sig-paren">)</span><a class="headerlink" href="#c.NFC_NDEF_BIN_PAYLOAD_DESC" title="Permalink to this definition"></a><br /></dt>
<dd><p>Macro for accessing the binary data descriptor that contains the payload of the record that you created with <a class="reference internal" href="#group__nfc__ndef__record_1ga1ba7c60df67955d44ad65e8b50581d02"><span class="std std-ref">NFC_NDEF_RECORD_BIN_DATA_DEF</span></a>. </p>
</dd></dl>

</div>
<div class="breathe-sectiondef docutils container">
<p class="breathe-sectiondef-title rubric" id="breathe-section-title-typedefs">Typedefs</p>
<dl class="c type">
<dt class="sig sig-object c" id="c.payload_constructor_t">
<span class="target" id="group__nfc__ndef__record_1ga1ccae5f0330b1b9b31af6efd37a8aeb8"></span><span class="k"><span class="pre">typedef</span></span><span class="w"> </span><span class="kt"><span class="pre">int</span></span><span class="w"> </span><span class="p"><span class="pre">(</span></span><span class="p"><span class="pre">*</span></span><span class="sig-name descname"><span class="n"><span class="pre">payload_constructor_t</span></span></span><span class="p"><span class="pre">)</span></span><span class="p"><span class="pre">(</span></span><span class="kt"><span class="pre">void</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">payload_descriptor</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="n"><span class="pre">uint8_t</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">buffer</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="n"><span class="pre">uint32_t</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">len</span></span><span class="p"><span class="pre">)</span></span><a class="headerlink" href="#c.payload_constructor_t" title="Permalink to this definition"></a><br /></dt>
<dd><p>Payload constructor type. </p>
<p>A payload constructor is a function for constructing the payload of an NDEF record.</p>
<dl class="field-list simple">
<dt class="field-odd">Param payload_descriptor</dt>
<dd class="field-odd"><p>Pointer to the input data for the constructor. </p>
</dd>
<dt class="field-even">Param buffer</dt>
<dd class="field-even"><p>Pointer to the payload destination. If NULL, function will calculate the expected size of the record payload. * </p>
</dd>
<dt class="field-odd">Param len</dt>
<dd class="field-odd"><p>Size of the available memory to write as input. Size of the generated record payload as output. The implementation must check if the payload will fit in the provided buffer. This must be checked by the caller function.</p>
</dd>
<dt class="field-even">Retval 0</dt>
<dd class="field-even"><p>If the operation was successful. Otherwise, a (negative) error code is returned. </p>
</dd>
</dl>
</dd></dl>

</div>
<div class="breathe-sectiondef docutils container">
<p class="breathe-sectiondef-title rubric" id="breathe-section-title-enums">Enums</p>
<dl class="c enum">
<dt class="sig sig-object c" id="c.nfc_ndef_record_tnf">
<span class="target" id="group__nfc__ndef__record_1ga2091295307fa8161219648a88df172a8"></span><span class="k"><span class="pre">enum</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">nfc_ndef_record_tnf</span></span></span><a class="headerlink" href="#c.nfc_ndef_record_tnf" title="Permalink to this definition"></a><br /></dt>
<dd><p>Type Name Format (TNF) Field Values. </p>
<p>Values to specify the TNF of a record. </p>
<p><em>Values:</em></p>
<dl class="c enumerator">
<dt class="sig sig-object c" id="c.nfc_ndef_record_tnf.TNF_EMPTY">
<span class="target" id="group__nfc__ndef__record_1gga2091295307fa8161219648a88df172a8a9c9fab478288c0e5e258810700e6587b"></span><span class="k"><span class="pre">enumerator</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">TNF_EMPTY</span></span></span><a class="headerlink" href="#c.nfc_ndef_record_tnf.TNF_EMPTY" title="Permalink to this definition"></a><br /></dt>
<dd><p>The value indicates that there is no type or payload associated with this record. </p>
</dd></dl>

<dl class="c enumerator">
<dt class="sig sig-object c" id="c.nfc_ndef_record_tnf.TNF_WELL_KNOWN">
<span class="target" id="group__nfc__ndef__record_1gga2091295307fa8161219648a88df172a8ace6c9ee74852eebbdb1421e85c4e0041"></span><span class="k"><span class="pre">enumerator</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">TNF_WELL_KNOWN</span></span></span><a class="headerlink" href="#c.nfc_ndef_record_tnf.TNF_WELL_KNOWN" title="Permalink to this definition"></a><br /></dt>
<dd><p>NFC Forum well-known type [NFC RTD]. </p>
</dd></dl>

<dl class="c enumerator">
<dt class="sig sig-object c" id="c.nfc_ndef_record_tnf.TNF_MEDIA_TYPE">
<span class="target" id="group__nfc__ndef__record_1gga2091295307fa8161219648a88df172a8a9d676957a80c77376f83d75a0bf65c9a"></span><span class="k"><span class="pre">enumerator</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">TNF_MEDIA_TYPE</span></span></span><a class="headerlink" href="#c.nfc_ndef_record_tnf.TNF_MEDIA_TYPE" title="Permalink to this definition"></a><br /></dt>
<dd><p>Media-type as defined in RFC 2046 [RFC 2046]. </p>
</dd></dl>

<dl class="c enumerator">
<dt class="sig sig-object c" id="c.nfc_ndef_record_tnf.TNF_ABSOLUTE_URI">
<span class="target" id="group__nfc__ndef__record_1gga2091295307fa8161219648a88df172a8a5208d444121ba6ad53188f6f800206ef"></span><span class="k"><span class="pre">enumerator</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">TNF_ABSOLUTE_URI</span></span></span><a class="headerlink" href="#c.nfc_ndef_record_tnf.TNF_ABSOLUTE_URI" title="Permalink to this definition"></a><br /></dt>
<dd><p>Absolute URI as defined in RFC 3986 [RFC 3986]. </p>
</dd></dl>

<dl class="c enumerator">
<dt class="sig sig-object c" id="c.nfc_ndef_record_tnf.TNF_EXTERNAL_TYPE">
<span class="target" id="group__nfc__ndef__record_1gga2091295307fa8161219648a88df172a8af0c50a342dab3f03c386ab05f93e3920"></span><span class="k"><span class="pre">enumerator</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">TNF_EXTERNAL_TYPE</span></span></span><a class="headerlink" href="#c.nfc_ndef_record_tnf.TNF_EXTERNAL_TYPE" title="Permalink to this definition"></a><br /></dt>
<dd><p>NFC Forum external type [NFC RTD]. </p>
</dd></dl>

<dl class="c enumerator">
<dt class="sig sig-object c" id="c.nfc_ndef_record_tnf.TNF_UNKNOWN_TYPE">
<span class="target" id="group__nfc__ndef__record_1gga2091295307fa8161219648a88df172a8a041c63e1db6a345367a6de594deb035e"></span><span class="k"><span class="pre">enumerator</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">TNF_UNKNOWN_TYPE</span></span></span><a class="headerlink" href="#c.nfc_ndef_record_tnf.TNF_UNKNOWN_TYPE" title="Permalink to this definition"></a><br /></dt>
<dd><p>The value indicates that there is no type associated with this record. </p>
</dd></dl>

<dl class="c enumerator">
<dt class="sig sig-object c" id="c.nfc_ndef_record_tnf.TNF_UNCHANGED">
<span class="target" id="group__nfc__ndef__record_1gga2091295307fa8161219648a88df172a8aa2a5fd421cf5d772fc4fc6af2495ceeb"></span><span class="k"><span class="pre">enumerator</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">TNF_UNCHANGED</span></span></span><a class="headerlink" href="#c.nfc_ndef_record_tnf.TNF_UNCHANGED" title="Permalink to this definition"></a><br /></dt>
<dd><p>The value is used for the record chunks used in chunked payload. </p>
</dd></dl>

<dl class="c enumerator">
<dt class="sig sig-object c" id="c.nfc_ndef_record_tnf.TNF_RESERVED">
<span class="target" id="group__nfc__ndef__record_1gga2091295307fa8161219648a88df172a8a598ebd78cd6a8f15dd2b4c34beed3285"></span><span class="k"><span class="pre">enumerator</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">TNF_RESERVED</span></span></span><a class="headerlink" href="#c.nfc_ndef_record_tnf.TNF_RESERVED" title="Permalink to this definition"></a><br /></dt>
<dd><p>The value is reserved for future use. </p>
</dd></dl>

</dd></dl>

<dl class="c enum">
<dt class="sig sig-object c" id="c.nfc_ndef_record_location">
<span class="target" id="group__nfc__ndef__record_1ga75fb331c1fa9fea07d96d9cbe0112dcb"></span><span class="k"><span class="pre">enum</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">nfc_ndef_record_location</span></span></span><a class="headerlink" href="#c.nfc_ndef_record_location" title="Permalink to this definition"></a><br /></dt>
<dd><p>Record position within the NDEF message. </p>
<p>Values to specify the location of a record within the NDEF message. </p>
<p><em>Values:</em></p>
<dl class="c enumerator">
<dt class="sig sig-object c" id="c.nfc_ndef_record_location.NDEF_FIRST_RECORD">
<span class="target" id="group__nfc__ndef__record_1gga75fb331c1fa9fea07d96d9cbe0112dcba53d16688bd0e9895fc03cab5ba001b2d"></span><span class="k"><span class="pre">enumerator</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">NDEF_FIRST_RECORD</span></span></span><a class="headerlink" href="#c.nfc_ndef_record_location.NDEF_FIRST_RECORD" title="Permalink to this definition"></a><br /></dt>
<dd><p>First record. </p>
</dd></dl>

<dl class="c enumerator">
<dt class="sig sig-object c" id="c.nfc_ndef_record_location.NDEF_MIDDLE_RECORD">
<span class="target" id="group__nfc__ndef__record_1gga75fb331c1fa9fea07d96d9cbe0112dcbad56f488e8dd34241202825a074db8664"></span><span class="k"><span class="pre">enumerator</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">NDEF_MIDDLE_RECORD</span></span></span><a class="headerlink" href="#c.nfc_ndef_record_location.NDEF_MIDDLE_RECORD" title="Permalink to this definition"></a><br /></dt>
<dd><p>Middle record. </p>
</dd></dl>

<dl class="c enumerator">
<dt class="sig sig-object c" id="c.nfc_ndef_record_location.NDEF_LAST_RECORD">
<span class="target" id="group__nfc__ndef__record_1gga75fb331c1fa9fea07d96d9cbe0112dcbafc232dec0a475e3fddbca83b87489632"></span><span class="k"><span class="pre">enumerator</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">NDEF_LAST_RECORD</span></span></span><a class="headerlink" href="#c.nfc_ndef_record_location.NDEF_LAST_RECORD" title="Permalink to this definition"></a><br /></dt>
<dd><p>Last record. </p>
</dd></dl>

<dl class="c enumerator">
<dt class="sig sig-object c" id="c.nfc_ndef_record_location.NDEF_LONE_RECORD">
<span class="target" id="group__nfc__ndef__record_1gga75fb331c1fa9fea07d96d9cbe0112dcba30180651d275209d9f2cfb03f02584b9"></span><span class="k"><span class="pre">enumerator</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">NDEF_LONE_RECORD</span></span></span><a class="headerlink" href="#c.nfc_ndef_record_location.NDEF_LONE_RECORD" title="Permalink to this definition"></a><br /></dt>
<dd><p>Only one record in the message. </p>
</dd></dl>

</dd></dl>

</div>
<div class="breathe-sectiondef docutils container">
<p class="breathe-sectiondef-title rubric" id="breathe-section-title-functions">Functions</p>
<dl class="c function">
<dt class="sig sig-object c" id="c.nfc_ndef_record_encode">
<span class="target" id="group__nfc__ndef__record_1gad36d1f1b46035dfc7ccaf56aaaf93ba2"></span><span class="kt"><span class="pre">int</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">nfc_ndef_record_encode</span></span></span><span class="sig-paren">(</span><span class="k"><span class="pre">struct</span></span><span class="w"> </span><a class="reference internal" href="#c.nfc_ndef_record_desc" title="nfc_ndef_record_desc"><span class="n"><span class="pre">nfc_ndef_record_desc</span></span></a><span class="w"> </span><span class="k"><span class="pre">const</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">ndef_record_desc</span></span>, <span class="k"><span class="pre">enum</span></span><span class="w"> </span><a class="reference internal" href="#c.nfc_ndef_record_location" title="nfc_ndef_record_location"><span class="n"><span class="pre">nfc_ndef_record_location</span></span></a><span class="w"> </span><span class="k"><span class="pre">const</span></span><span class="w"> </span><span class="n"><span class="pre">record_location</span></span>, <span class="n"><span class="pre">uint8_t</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">record_buffer</span></span>, <span class="n"><span class="pre">uint32_t</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">record_len</span></span><span class="sig-paren">)</span><a class="headerlink" href="#c.nfc_ndef_record_encode" title="Permalink to this definition"></a><br /></dt>
<dd><p>Encode an NDEF record. </p>
<p>This function encodes an NDEF record according to the provided record descriptor.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>ndef_record_desc</strong> – Pointer to the record descriptor. </p></li>
<li><p><strong>record_location</strong> – Location of the record within the NDEF message. </p></li>
<li><p><strong>record_buffer</strong> – Pointer to the record destination. If NULL, function will calculate the expected size of the record. </p></li>
<li><p><strong>record_len</strong> – Size of the available memory for the record as input. Size of the generated record as output.</p></li>
</ul>
</dd>
<dt class="field-even">Return values</dt>
<dd class="field-even"><p><strong>0</strong> – If the operation was successful. Otherwise, a (negative) error code is returned. </p>
</dd>
</dl>
</dd></dl>

<dl class="c function">
<dt class="sig sig-object c" id="c.nfc_ndef_bin_payload_memcopy">
<span class="target" id="group__nfc__ndef__record_1ga5e431ee7ca37f0447e87bf1c3b9e8551"></span><span class="kt"><span class="pre">int</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">nfc_ndef_bin_payload_memcopy</span></span></span><span class="sig-paren">(</span><span class="k"><span class="pre">struct</span></span><span class="w"> </span><a class="reference internal" href="#c.nfc_ndef_bin_payload_desc" title="nfc_ndef_bin_payload_desc"><span class="n"><span class="pre">nfc_ndef_bin_payload_desc</span></span></a><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">payload_descriptor</span></span>, <span class="n"><span class="pre">uint8_t</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">buffer</span></span>, <span class="n"><span class="pre">uint32_t</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">len</span></span><span class="sig-paren">)</span><a class="headerlink" href="#c.nfc_ndef_bin_payload_memcopy" title="Permalink to this definition"></a><br /></dt>
<dd><p>Construct the payload for an NFC NDEF record from binary data. </p>
<p>This function copies data from a binary buffer to the payload field of the NFC NDEF record.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>payload_descriptor</strong> – Pointer to the descriptor of the binary data location and size. </p></li>
<li><p><strong>buffer</strong> – Pointer to the payload destination. If NULL, function will calculate the expected size of the record payload. </p></li>
<li><p><strong>len</strong> – Size of the available memory for the payload as input. Size of the copied payload as output.</p></li>
</ul>
</dd>
<dt class="field-even">Return values</dt>
<dd class="field-even"><p><strong>0</strong> – If the operation was successful. Otherwise, a (negative) error code is returned. </p>
</dd>
</dl>
</dd></dl>

</div>
<dl class="c struct">
<dt class="sig sig-object c" id="c.nfc_ndef_record_desc">
<span class="target" id="structnfc__ndef__record__desc"></span><span class="k"><span class="pre">struct</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">nfc_ndef_record_desc</span></span></span><a class="headerlink" href="#c.nfc_ndef_record_desc" title="Permalink to this definition"></a><br /></dt>
<dd><div class="docutils container">
<em>#include &lt;record.h&gt;</em></div>
<p>NDEF record descriptor. </p>
<div class="breathe-sectiondef docutils container">
<p class="breathe-sectiondef-title rubric" id="breathe-section-title-public-members">Public Members</p>
<dl class="c var">
<dt class="sig sig-object c" id="c.nfc_ndef_record_desc.tnf">
<span class="target" id="structnfc__ndef__record__desc_1ad9d73aa209bc93c9cd900c5eb730a3ec"></span><span class="k"><span class="pre">enum</span></span><span class="w"> </span><a class="reference internal" href="#c.nfc_ndef_record_tnf" title="nfc_ndef_record_tnf"><span class="n"><span class="pre">nfc_ndef_record_tnf</span></span></a><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">tnf</span></span></span><a class="headerlink" href="#c.nfc_ndef_record_desc.tnf" title="Permalink to this definition"></a><br /></dt>
<dd><p>Value of the Type Name Format (TNF) field. </p>
</dd></dl>

<dl class="c var">
<dt class="sig sig-object c" id="c.nfc_ndef_record_desc.id_length">
<span class="target" id="structnfc__ndef__record__desc_1ae6b993e75f17d0f14ce4442df727ab78"></span><span class="n"><span class="pre">uint8_t</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">id_length</span></span></span><a class="headerlink" href="#c.nfc_ndef_record_desc.id_length" title="Permalink to this definition"></a><br /></dt>
<dd><p>Length of the ID field. If 0, a record format without ID field is assumed. </p>
</dd></dl>

<dl class="c var">
<dt class="sig sig-object c" id="c.nfc_ndef_record_desc.id">
<span class="target" id="structnfc__ndef__record__desc_1ac95aad08f0e4484104707a2849923c5b"></span><span class="n"><span class="pre">uint8_t</span></span><span class="w"> </span><span class="k"><span class="pre">const</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="sig-name descname"><span class="n"><span class="pre">id</span></span></span><a class="headerlink" href="#c.nfc_ndef_record_desc.id" title="Permalink to this definition"></a><br /></dt>
<dd><p>Pointer to the ID field data. Not relevant if id_length is 0. </p>
</dd></dl>

<dl class="c var">
<dt class="sig sig-object c" id="c.nfc_ndef_record_desc.type_length">
<span class="target" id="structnfc__ndef__record__desc_1a2d2faaf16cb06573bc38ecbfe6c2f180"></span><span class="n"><span class="pre">uint8_t</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">type_length</span></span></span><a class="headerlink" href="#c.nfc_ndef_record_desc.type_length" title="Permalink to this definition"></a><br /></dt>
<dd><p>Length of the type field. </p>
</dd></dl>

<dl class="c var">
<dt class="sig sig-object c" id="c.nfc_ndef_record_desc.type">
<span class="target" id="structnfc__ndef__record__desc_1ad681f33d5704137699bfc622eeb5836e"></span><span class="n"><span class="pre">uint8_t</span></span><span class="w"> </span><span class="k"><span class="pre">const</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="sig-name descname"><span class="n"><span class="pre">type</span></span></span><a class="headerlink" href="#c.nfc_ndef_record_desc.type" title="Permalink to this definition"></a><br /></dt>
<dd><p>Pointer to the type field data. Not relevant if type_length is 0. </p>
</dd></dl>

<dl class="c var">
<dt class="sig sig-object c" id="c.nfc_ndef_record_desc.payload_constructor">
<span class="target" id="structnfc__ndef__record__desc_1ad664e32bf1b17a01ae4d62e92ccba15f"></span><a class="reference internal" href="#c.payload_constructor_t" title="payload_constructor_t"><span class="n"><span class="pre">payload_constructor_t</span></span></a><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">payload_constructor</span></span></span><a class="headerlink" href="#c.nfc_ndef_record_desc.payload_constructor" title="Permalink to this definition"></a><br /></dt>
<dd><p>Pointer to the payload constructor function. </p>
</dd></dl>

<dl class="c var">
<dt class="sig sig-object c" id="c.nfc_ndef_record_desc.payload_descriptor">
<span class="target" id="structnfc__ndef__record__desc_1a8b329fb06d553177ed4f74b0eb7c847b"></span><span class="kt"><span class="pre">void</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="sig-name descname"><span class="n"><span class="pre">payload_descriptor</span></span></span><a class="headerlink" href="#c.nfc_ndef_record_desc.payload_descriptor" title="Permalink to this definition"></a><br /></dt>
<dd><p>Pointer to the data for the payload constructor function. </p>
</dd></dl>

</div>
</dd></dl>

<dl class="c struct">
<dt class="sig sig-object c" id="c.nfc_ndef_bin_payload_desc">
<span class="target" id="structnfc__ndef__bin__payload__desc"></span><span class="k"><span class="pre">struct</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">nfc_ndef_bin_payload_desc</span></span></span><a class="headerlink" href="#c.nfc_ndef_bin_payload_desc" title="Permalink to this definition"></a><br /></dt>
<dd><div class="docutils container">
<em>#include &lt;record.h&gt;</em></div>
<p>Binary data descriptor containing the payload for the record. </p>
<div class="breathe-sectiondef docutils container">
<p class="breathe-sectiondef-title rubric" id="breathe-section-title-public-members">Public Members</p>
<dl class="c var">
<dt class="sig sig-object c" id="c.nfc_ndef_bin_payload_desc.payload">
<span class="target" id="structnfc__ndef__bin__payload__desc_1a3e860904b28f06ae127230e7a5082a83"></span><span class="n"><span class="pre">uint8_t</span></span><span class="w"> </span><span class="k"><span class="pre">const</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="sig-name descname"><span class="n"><span class="pre">payload</span></span></span><a class="headerlink" href="#c.nfc_ndef_bin_payload_desc.payload" title="Permalink to this definition"></a><br /></dt>
<dd><p>Pointer to the buffer with the data. </p>
</dd></dl>

<dl class="c var">
<dt class="sig sig-object c" id="c.nfc_ndef_bin_payload_desc.payload_length">
<span class="target" id="structnfc__ndef__bin__payload__desc_1a1339407b28fb89e1f92ac314dae8d8e4"></span><span class="n"><span class="pre">uint32_t</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">payload_length</span></span></span><a class="headerlink" href="#c.nfc_ndef_bin_payload_desc.payload_length" title="Permalink to this definition"></a><br /></dt>
<dd><p>Length of data in bytes. </p>
</dd></dl>

</div>
</dd></dl>

</dd></dl>

</section>
</section>
</section>


           </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="msg_parser.html" class="btn btn-neutral float-right" title="Parser for messages and records" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="le_oob_rec_parser.html" class="btn btn-neutral" title="Parser for Bluetooth LE OOB records" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">

<table>
<tr>
<td>
    <p>
        &copy; Copyright 2019-2023, Nordic Semiconductor.
      Last updated on Mar 20, 2023.

    </p>
</td>
<td id="nordiclogo">
  <a href="https://www.nordicsemi.com/"><img src="../../../_static/images/nordic-logo.png" border="0"/></a>
</td>
</tr>
</table>
  </div> 


</footer>

<div id="scroll-container">
  <button type="button" id="scroll-btn" class="btn">
    <svg xmlns="http://www.w3.org/2000/svg" height="24" viewBox="0 0 24 24" width="24"><path d="M0 0h24v24H0z" fill="none"/><path d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z" fill="#fff"/></svg>
  </button>
</div>

<script>
  const scrollBtn = document.querySelector("#scroll-btn");

  document.addEventListener("scroll", () => {
    if (window.scrollY > 400) {
          scrollBtn.style.visibility = "visible";
      } else {
          scrollBtn.style.visibility = "hidden";
      }
  });

  scrollBtn.addEventListener("click", () => {
      window.scrollTo({ top: 0, behavior: "smooth" });
  });
</script>
        </div>
      </div>
    </section>
  </div>
  
  <div class="rst-versions" data-toggle="rst-versions" role="note" aria-label="versions">
    <span class="rst-current-version" data-toggle="rst-current-version">
      <span class="fa fa-book"> nRF Connect SDK</span>
       <span class="fa fa-caret-down"></span>
    </span>
    <div class="rst-other-versions">
      
      <div class="rst-other-version ncs">
        <a href="../../../../nrf/index.html">nRF Connect SDK</a>
      </div>
      
      <div class="rst-other-version nrfx">
        <a href="../../../../nrfx/index.html">nrfx</a>
      </div>
      
      <div class="rst-other-version nrfxlib">
        <a href="../../../../nrfxlib/README.html">nrfxlib</a>
      </div>
      
      <div class="rst-other-version zephyr">
        <a href="../../../../zephyr/index.html">Zephyr Project</a>
      </div>
      
      <div class="rst-other-version mcuboot">
        <a href="../../../../mcuboot/wrapper.html">MCUboot</a>
      </div>
      
      <div class="rst-other-version tfm">
        <a href="../../../../tfm/index.html">Trusted Firmware-M</a>
      </div>
      
      <div class="rst-other-version matter">
        <a href="../../../../matter/index.html">Matter</a>
      </div>
      
      <div class="rst-other-version kconfig">
        <a href="../../../../kconfig/index.html">Kconfig Reference</a>
      </div>
    </div>
  </div><script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>