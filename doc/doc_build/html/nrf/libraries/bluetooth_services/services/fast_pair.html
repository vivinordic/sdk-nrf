<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Google Fast Pair Service (GFPS) &mdash; nRF Connect SDK 2.3.99 documentation</title>
      <link rel="stylesheet" href="../../../_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="../../../_static/css/nordic.css" type="text/css" />
      <link rel="stylesheet" href="../../../_static/togglebutton.css" type="text/css" />
      <link rel="stylesheet" href="../../../_static/css/nrf.css" type="text/css" />
      <link rel="stylesheet" href="../../../_static/tabs.css" type="text/css" /> 
  <!--[if lt IE 9]>
    <script src="../../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="../../../" id="documentation_options" src="../../../_static/documentation_options.js"></script>
        <script src="../../../_static/jquery.js"></script>
        <script src="../../../_static/underscore.js"></script>
        <script src="../../../_static/_sphinx_javascript_frameworks_compat.js"></script>
        <script src="../../../_static/doctools.js"></script>
        <script src="../../../_static/sphinx_highlight.js"></script>
        <script src="https://www.googletagmanager.com/gtag/js?id=G-ZPVZRKFQJR"></script>
        <script src="../../../_static/js/ga-tracker.js"></script>
        <script data-culture="EN" id="CookieConsent" type="text/javascript" src="https://policy.app.cookieinformation.com/uc.js"></script>
        <script>let toggleHintShow = 'Click to show';</script>
        <script>let toggleHintHide = 'Click to hide';</script>
        <script>let toggleOpenOnPrint = 'true';</script>
        <script src="../../../_static/togglebutton.js"></script>
        <script>var togglebuttonSelector = '.toggle, .admonition.dropdown';</script>
    <script src="../../../_static/js/theme.js"></script>
<script
  type="text/javascript"
  src="../../../_static/js/ncs.js"
></script>
<script src="../../../_static/js/bootstrap.bundle.min.js"></script>

    <link rel="index" title="Index" href="../../../genindex.html" />
    <link rel="search" title="Search" href="../../../search.html" />
    <link rel="next" title="Generic Attribute (GATT) Profile" href="gattp.html" />
    <link rel="prev" title="GATT DFU SMP Service Client" href="dfu_smp.html" />
<link
  href="../../../_static/css/bootstrap.min.css"
  rel="stylesheet"
/>
<link
  rel="shortcut icon"
  href="../../../_static/images/favicon.ico"
/>

</head>

<body class="wy-body-for-nav">
<div class="announcement"></div>
<div class="d-print-none ncs-header">
  <div class="container-xl ncs-header-top">
    <div class="row h-100">
      <div class="d-none d-md-block col-2">
        <div class="bg-white py-4 px-3 ml-2 ncs-header-logo">
          <img
            class="ncs-header-logo"
            src="../../../_static/images/nordic-logo.png"
            alt=""
          />
        </div>
      </div>
      <div
        class="col-8 col-md-7 pl-md-4 d-flex align-self-center justify-content-center"
      >
        <form class="w-75" action="../../../search.html" method="get">
          <div class="form-group">
            <input
              type="text"
              name="q"
              class="ncs-search-input form-control"
              placeholder="Search all docs..."
            />
          </div>
        </form>
      </div>
      <div class="col-4 col-md-3 d-md-block p-3 text-end">
        <div class="dropdown">
          <button
            class="btn dropdown-toggle ncs-btn-versions"
            type="button"
            id="dropdownMenuButton1"
            data-bs-toggle="dropdown"
            aria-expanded="false"
          >
            <span class="d-none d-md-inline">nRF Connect SDK</span>
            <span id="ncsversion" class="d-inline"></span>
          </button>
          <div class="dropdown-menu" aria-labelledby="dropdownMenuButton"></div>
        </div>
      </div>
    </div>
  </div>
  <div class="ncs-header-nav">
    <div class="container-xl">
      <div class="row">
        <div class="col col-12 d-flex justify-content-center">
          <nav class="navbar navbar-dark navbar-expand-lg p-0">
            <span class="navbar-brand d-block d-lg-none py-2 pl-1"
              >Documentation sets</span
            >
            <button
              class="navbar-toggler"
              type="button"
              data-bs-toggle="collapse"
              data-bs-target="#navbarNavAltMarkup"
              aria-controls="navbarNavAltMarkup"
              aria-expanded="false"
              aria-label="Toggle navigation"
            >
              <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="navbarNavAltMarkup">
              <ul class="navbar-nav">
                <li class="nav-item active py-1 px-3">
                  <a
                    class="nav-link"
                    href="../../../../nrf/index.html"
                    >nRF Connect SDK</a
                  >
                </li>
                <li><hr class="dropdown-divider" /></li>
                <li class="nav-item  py-1 px-3">
                  <a
                    class="nav-link"
                    href="../../../../nrfx/index.html"
                    >nrfx</a
                  >
                </li>
                <li><hr class="dropdown-divider" /></li>
                <li class="nav-item  py-1 px-3">
                  <a
                    class="nav-link"
                    href="../../../../nrfxlib/README.html"
                    >nrfxlib</a
                  >
                </li>
                <li><hr class="dropdown-divider" /></li>
                <li class="nav-item  py-1 px-3">
                  <a
                    class="nav-link"
                    href="../../../../zephyr/index.html"
                    >Zephyr Project</a
                  >
                </li>
                <li><hr class="dropdown-divider" /></li>
                <li class="nav-item  py-1 px-3">
                  <a
                    class="nav-link"
                    href="../../../../mcuboot/wrapper.html"
                    >MCUboot</a
                  >
                </li>
                <li><hr class="dropdown-divider" /></li>
                <li class="nav-item  py-1 px-3">
                  <a
                    class="nav-link"
                    href="../../../../tfm/index.html"
                    >Trusted Firmware-M</a
                  >
                </li>
                <li><hr class="dropdown-divider" /></li>
                <li class="nav-item  py-1 px-3">
                  <a
                    class="nav-link"
                    href="../../../../matter/index.html"
                    >Matter</a
                  >
                </li>
                <li><hr class="dropdown-divider" /></li>
                <li class="nav-item  py-1 px-3">
                  <a
                    class="nav-link"
                    href="../../../../kconfig/index.html"
                    >Kconfig Reference</a
                  >
                </li>
                <li><hr class="dropdown-divider" /></li>
              </ul>
            </div>
          </nav>
        </div>
      </div>
    </div>
  </div>
</div>

  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
            <a href="../../../index.html" class="icon icon-home"> nRF Connect SDK
          </a>
              <div class="version">
                2.3.99
              </div>
<div id="searchbox" role="search">
  <div class="searchformwrapper">
    <form id="rtd-search-form" class="wy-form" action="../../../search.html" method="get">
      <input type="text" name="q" placeholder="Search docs" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
  </div>
</div>
<script>$('#searchbox').show(0);</script>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Contents</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../../introduction.html">Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../getting_started.html">Getting started</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../dev_model.html">Development model</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../app_dev.html">Application development</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../security.html">Security</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../ecosystem_integration.html">Ecosystems integration</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../nrf91.html">Working with nRF91 Series</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../nrf70.html">Working with nRF70 Series</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../nrf53.html">Working with nRF53 Series</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../nrf52.html">Working with nRF52 Series</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../protocols.html">Protocols</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../applications.html">Applications</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../samples.html">Samples</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../drivers.html">Drivers</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../../index.html">Libraries</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../../bin/index.html">Binary libraries</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="../index.html">Bluetooth libraries and services</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="../adv_prov.html">Bluetooth LE advertising providers</a></li>
<li class="toctree-l3"><a class="reference internal" href="../conn_ctx.html">Bluetooth connection context</a></li>
<li class="toctree-l3"><a class="reference internal" href="../enocean.html">Bluetooth EnOcean</a></li>
<li class="toctree-l3"><a class="reference internal" href="../gatt_dm.html">GATT Discovery Manager</a></li>
<li class="toctree-l3"><a class="reference internal" href="../gatt_pool.html">Bluetooth GATT attribute pools</a></li>
<li class="toctree-l3"><a class="reference internal" href="../mesh.html">Bluetooth mesh profile</a></li>
<li class="toctree-l3"><a class="reference internal" href="../rpc.html">Bluetooth Low Energy Remote Procedure Call</a></li>
<li class="toctree-l3"><a class="reference internal" href="../scan.html">Scanning module</a></li>
<li class="toctree-l3"><a class="reference internal" href="ams_client.html">Apple Media Service (AMS) Client</a></li>
<li class="toctree-l3"><a class="reference internal" href="ancs_client.html">Apple Notification Center Service (ANCS) Client</a></li>
<li class="toctree-l3"><a class="reference internal" href="bas_client.html">GATT Battery Service (BAS) Client</a></li>
<li class="toctree-l3"><a class="reference internal" href="bms.html">GATT Bond Management Service (BMS)</a></li>
<li class="toctree-l3"><a class="reference internal" href="cgms.html">GATT Continuous Glucose Monitoring Service (CGMS)</a></li>
<li class="toctree-l3"><a class="reference internal" href="cts_client.html">GATT Current Time Service (CTS) Client</a></li>
<li class="toctree-l3"><a class="reference internal" href="ddfs.html">Direction and Distance Finding Service (DDFS)</a></li>
<li class="toctree-l3"><a class="reference internal" href="dfu_smp.html">GATT DFU SMP Service Client</a></li>
<li class="toctree-l3 current"><a class="current reference internal" href="#">Google Fast Pair Service (GFPS)</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#service-uuid">Service UUID</a></li>
<li class="toctree-l4"><a class="reference internal" href="#characteristics">Characteristics</a></li>
<li class="toctree-l4"><a class="reference internal" href="#configuration">Configuration</a></li>
<li class="toctree-l4"><a class="reference internal" href="#implementation-details">Implementation details</a></li>
<li class="toctree-l4"><a class="reference internal" href="#api-documentation">API documentation</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="gattp.html">Generic Attribute (GATT) Profile</a></li>
<li class="toctree-l3"><a class="reference internal" href="hids.html">GATT Human Interface Device (HID) Service</a></li>
<li class="toctree-l3"><a class="reference internal" href="hogp.html">GATT Human Interface Device Service (HIDS) Client</a></li>
<li class="toctree-l3"><a class="reference internal" href="hrs_client.html">GATT Heart Rate Service (HRS) Client</a></li>
<li class="toctree-l3"><a class="reference internal" href="latency.html">GATT Latency Service</a></li>
<li class="toctree-l3"><a class="reference internal" href="latency_client.html">GATT Latency Client</a></li>
<li class="toctree-l3"><a class="reference internal" href="lbs.html">LED Button Service (LBS)</a></li>
<li class="toctree-l3"><a class="reference internal" href="mds.html">Memfault Diagnostic Service (MDS)</a></li>
<li class="toctree-l3"><a class="reference internal" href="nsms.html">Nordic Status Message Service (NSMS)</a></li>
<li class="toctree-l3"><a class="reference internal" href="nus.html">Nordic UART Service (NUS)</a></li>
<li class="toctree-l3"><a class="reference internal" href="nus_client.html">Nordic UART Service (NUS) Client</a></li>
<li class="toctree-l3"><a class="reference internal" href="rscs.html">Running Speed and Cadence Service (RSCS)</a></li>
<li class="toctree-l3"><a class="reference internal" href="throughput.html">GATT Throughput Service</a></li>
<li class="toctree-l3"><a class="reference internal" href="wifi_prov.html">Wi-Fi Provisioning Service</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../bootloader/index.html">Bootloader libraries</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../caf/index.html">Common Application Framework</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../debug/index.html">Debug libraries</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../dfu/index.html">DFU libraries</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../gazell/index.html">Gazell libraries</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../modem/index.html">Modem libraries</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../mpsl/index.html">Multiprotocol Service Layer libraries</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../networking/index.html">Libraries for networking</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../nfc/index.html">Libraries for NFC</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../nrf_rpc/index.html">nRF RPC libraries</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../others/index.html">Other libraries</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../shell/index.html">Shell libraries</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../tfm/index.html">TF-M libraries</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../zigbee/index.html">Libraries for Zigbee</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../scripts.html">Scripts</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../release_notes.html">Release notes</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../known_issues.html">Known issues</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../software_maturity.html">Software maturity levels</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../documentation.html">About this documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../glossary.html">Glossary</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../../index.html">nRF Connect SDK</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../../../index.html" class="icon icon-home"></a></li>
          <li class="breadcrumb-item"><a href="../../index.html">Libraries</a></li>
          <li class="breadcrumb-item"><a href="../index.html">Bluetooth libraries and services</a></li>
      <li class="breadcrumb-item active">Google Fast Pair Service (GFPS)</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../../../_sources/libraries/bluetooth_services/services/fast_pair.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="google-fast-pair-service-gfps">
<span id="bt-fast-pair-readme"></span><h1>Google Fast Pair Service (GFPS)<a class="headerlink" href="#google-fast-pair-service-gfps" title="Permalink to this heading"></a></h1>
<div class="contents local topic" id="contents">
<ul class="simple">
<li><p><a class="reference internal" href="#service-uuid" id="id7">Service UUID</a></p></li>
<li><p><a class="reference internal" href="#characteristics" id="id8">Characteristics</a></p></li>
<li><p><a class="reference internal" href="#configuration" id="id9">Configuration</a></p>
<ul>
<li><p><a class="reference internal" href="#override-of-default-kconfig-values" id="id10">Override of default Kconfig values</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#implementation-details" id="id11">Implementation details</a></p>
<ul>
<li><p><a class="reference internal" href="#bluetooth-authentication" id="id12">Bluetooth authentication</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#api-documentation" id="id13">API documentation</a></p></li>
</ul>
</div>
<p>The Google Fast Pair Service (Fast Pair for short) implements a Bluetooth® LE GATT Service required when <a class="reference internal" href="../../../external_comp/bt_fast_pair.html#ug-bt-fast-pair"><span class="std std-ref">Using Google Fast Pair with the nRF Connect SDK</span></a>.</p>
<section id="service-uuid">
<h2><a class="toc-backref" href="#id7">Service UUID</a><a class="headerlink" href="#service-uuid" title="Permalink to this heading"></a></h2>
<p>The Fast Pair service uses UUID of <code class="docutils literal notranslate"><span class="pre">0xFE2C</span></code>.</p>
</section>
<section id="characteristics">
<h2><a class="toc-backref" href="#id8">Characteristics</a><a class="headerlink" href="#characteristics" title="Permalink to this heading"></a></h2>
<p>The Fast Pair GATT characteristics are described in detail in the <a class="reference external" href="https://developers.google.com/nearby/fast-pair/specifications/characteristics">Fast Pair GATT Characteristics</a> documentation.
The implementation in the nRF Connect SDK follows these requirements.</p>
</section>
<section id="configuration">
<h2><a class="toc-backref" href="#id9">Configuration</a><a class="headerlink" href="#configuration" title="Permalink to this heading"></a></h2>
<p>Set the <code class="xref kconfig kconfig-option docutils literal notranslate"><span class="pre">CONFIG_BT_FAST_PAIR</span></code> to enable the module.</p>
<p>The following Kconfig options are also available for this module:</p>
<ul class="simple">
<li><p><code class="xref kconfig kconfig-option docutils literal notranslate"><span class="pre">CONFIG_BT_FAST_PAIR_STORAGE_ACCOUNT_KEY_MAX</span></code> - The option configures maximum number of stored Account Keys.</p></li>
<li><p><code class="xref kconfig kconfig-option docutils literal notranslate"><span class="pre">CONFIG_BT_FAST_PAIR_CRYPTO_TINYCRYPT</span></code>, <code class="xref kconfig kconfig-option docutils literal notranslate"><span class="pre">CONFIG_BT_FAST_PAIR_CRYPTO_MBEDTLS</span></code>, and <code class="xref kconfig kconfig-option docutils literal notranslate"><span class="pre">CONFIG_BT_FAST_PAIR_CRYPTO_OBERON</span></code> - These options are used to select the cryptographic backend for Fast Pair.
MbedTLS is used by default, whereas Tinycrypt is used by default for cases of building with TF-M as the Secure Execution Environment (<code class="xref kconfig kconfig-option docutils literal notranslate"><span class="pre">CONFIG_BUILD_WITH_TFM</span></code>).
This is because in such case the MbedTLS API cannot be directly used by the Fast Pair service.
The Oberon backend can be used to limit memory consumption.</p></li>
<li><p><code class="xref kconfig kconfig-option docutils literal notranslate"><span class="pre">CONFIG_BT_FAST_PAIR_EXT_PN</span></code> - The option enables the <a class="reference external" href="https://developers.google.com/nearby/fast-pair/specifications/extensions/personalizedname">Fast Pair Personalized Name extension</a>.</p></li>
<li><p><code class="xref kconfig kconfig-option docutils literal notranslate"><span class="pre">CONFIG_BT_FAST_PAIR_STORAGE_EXT_PN_LEN_MAX</span></code> - The option specifies the maximum length of a stored Fast Pair Personalized Name.</p></li>
</ul>
<p>See the Kconfig help for details.</p>
<section id="override-of-default-kconfig-values">
<h3><a class="toc-backref" href="#id10">Override of default Kconfig values</a><a class="headerlink" href="#override-of-default-kconfig-values" title="Permalink to this heading"></a></h3>
<p>To simplify the configuration process, the GFPS modifies the default values of related Kconfig options to meet the Fast Pair requirements.
The service also enables some of the functionalities using Kconfig select statement.</p>
<section id="bluetooth-privacy">
<h4>Bluetooth privacy<a class="headerlink" href="#bluetooth-privacy" title="Permalink to this heading"></a></h4>
<p>The service selects Bluetooth privacy (<code class="xref kconfig kconfig-option docutils literal notranslate"><span class="pre">CONFIG_BT_PRIVACY</span></code>).</p>
<p>During not discoverable advertising, the Resolvable Private Address (RPA) rotation must be done together with the Fast Pair payload update.
Because of this, the RPA cannot be rotated by Zephyr in the background.</p>
<p>During discoverable advertising session, the Resolvable Private Address (RPA) rotation must not happen.
Therefore, consider the following points:</p>
<ul class="simple">
<li><p>Make sure that your advertising session is shorter than the value in the <code class="xref kconfig kconfig-option docutils literal notranslate"><span class="pre">CONFIG_BT_RPA_TIMEOUT</span></code> option.</p></li>
<li><p>Call <code class="xref c c-func docutils literal notranslate"><span class="pre">bt_le_oob_get_local()</span></code> to trigger RPA rotation and reset the RPA timeout right before the start of advertising.</p></li>
</ul>
</section>
<section id="bluetooth-security-manager-protocol-smp">
<h4>Bluetooth Security Manager Protocol (SMP)<a class="headerlink" href="#bluetooth-security-manager-protocol-smp" title="Permalink to this heading"></a></h4>
<p>The service selects <code class="xref kconfig kconfig-option docutils literal notranslate"><span class="pre">CONFIG_BT_SMP</span></code>, <code class="xref kconfig kconfig-option docutils literal notranslate"><span class="pre">CONFIG_BT_SMP_APP_PAIRING_ACCEPT</span></code>, and <code class="xref kconfig kconfig-option docutils literal notranslate"><span class="pre">CONFIG_BT_SMP_ENFORCE_MITM</span></code>.
The Fast Pair specification requires support for Bluetooth LE pairing and enforcing <a class="reference internal" href="../../../glossary.html#term-Man-in-the-Middle-MITM"><span class="xref std std-term">Man-in-the-Middle (MITM)</span></a> protection during the Fast Pair procedure.</p>
</section>
<section id="firmware-revision-characteristic">
<h4>Firmware Revision characteristic<a class="headerlink" href="#firmware-revision-characteristic" title="Permalink to this heading"></a></h4>
<p>The Fast Pair specification requires enabling GATT Device Information Service and the Firmware Revision characteristic.
For this reason, the default values of <code class="xref kconfig kconfig-option docutils literal notranslate"><span class="pre">CONFIG_BT_DIS</span></code> and <code class="xref kconfig kconfig-option docutils literal notranslate"><span class="pre">CONFIG_BT_DIS_FW_REV</span></code>, respectively, are set to enabled.
The default value of <code class="xref kconfig kconfig-option docutils literal notranslate"><span class="pre">CONFIG_BT_DIS_FW_REV_STR</span></code> is set to <code class="xref kconfig kconfig-option docutils literal notranslate"><span class="pre">CONFIG_MCUBOOT_IMAGE_VERSION</span></code> if <code class="xref kconfig kconfig-option docutils literal notranslate"><span class="pre">CONFIG_BOOTLOADER_MCUBOOT</span></code> is enabled.
Otherwise, it is set to <code class="docutils literal notranslate"><span class="pre">0.0.0+0</span></code>.</p>
</section>
<section id="mtu-configuration">
<h4>MTU configuration<a class="headerlink" href="#mtu-configuration" title="Permalink to this heading"></a></h4>
<p>The Fast Pair specification suggests using ATT maximum transmission unit (MTU) value of <code class="docutils literal notranslate"><span class="pre">83</span></code> if possible.
Because of this requirement, the default values of the following Kconfig options are modified by the GFPS Kconfig:</p>
<ul class="simple">
<li><p><code class="xref kconfig kconfig-option docutils literal notranslate"><span class="pre">CONFIG_BT_L2CAP_TX_MTU</span></code></p></li>
<li><p><code class="xref kconfig kconfig-option docutils literal notranslate"><span class="pre">CONFIG_BT_BUF_ACL_TX_SIZE</span></code></p></li>
<li><p><code class="xref kconfig kconfig-option docutils literal notranslate"><span class="pre">CONFIG_BT_BUF_ACL_RX_SIZE</span></code></p></li>
<li><p><code class="xref kconfig kconfig-option docutils literal notranslate"><span class="pre">CONFIG_BT_CTLR_DATA_LENGTH_MAX</span></code></p></li>
</ul>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>In case of <a class="reference internal" href="../../../nrf53.html#ug-nrf53"><span class="std std-ref">nRF53 Series</span></a>, this part of the configuration cannot be automatically updated for the network core and you must manually align it.
The listed options must be set on the network core to default values specified by the GFPS Kconfig options.</p>
</div>
</section>
<section id="security-re-establishment">
<h4>Security re-establishment<a class="headerlink" href="#security-re-establishment" title="Permalink to this heading"></a></h4>
<p>By default, the Fast Pair service disables the automatic security re-establishment request as a peripheral (<code class="xref kconfig kconfig-option docutils literal notranslate"><span class="pre">CONFIG_BT_GATT_AUTO_SEC_REQ</span></code>).
This is done to allow Fast Pair Seeker to control the security re-establishment.</p>
</section>
<section id="partition-manager">
<h4>Partition Manager<a class="headerlink" href="#partition-manager" title="Permalink to this heading"></a></h4>
<p>The Fast Pair provisioning data is preprogrammed to a dedicated flash memory partition.
The GFPS selects <code class="xref kconfig kconfig-option docutils literal notranslate"><span class="pre">CONFIG_PM_SINGLE_IMAGE</span></code> to enable the <a class="reference internal" href="../../../scripts/partition_manager/partition_manager.html#partition-manager"><span class="std std-ref">Partition Manager</span></a>.</p>
</section>
<section id="settings">
<h4>Settings<a class="headerlink" href="#settings" title="Permalink to this heading"></a></h4>
<p>The GFPS uses Zephyr’s <span class="xref std std-ref">zephyr:settings_api</span> to store Account Keys and the Personalized Name.
Because of this, the GFPS selects <code class="xref kconfig kconfig-option docutils literal notranslate"><span class="pre">CONFIG_SETTINGS</span></code>.</p>
</section>
</section>
</section>
<section id="implementation-details">
<h2><a class="toc-backref" href="#id11">Implementation details</a><a class="headerlink" href="#implementation-details" title="Permalink to this heading"></a></h2>
<p>The implementation uses <code class="xref c c-macro docutils literal notranslate"><span class="pre">BT_GATT_SERVICE_DEFINE</span></code> to statically define and register the Fast Pair GATT service.
The Fast Pair service automatically handles all of the requests received from the Fast Pair Seeker.
No application input is required to handle the requests.</p>
<section id="bluetooth-authentication">
<h3><a class="toc-backref" href="#id12">Bluetooth authentication</a><a class="headerlink" href="#bluetooth-authentication" title="Permalink to this heading"></a></h3>
<p>The Bluetooth pairing is handled using a set of Bluetooth authentication callbacks (<code class="xref c c-struct docutils literal notranslate"><span class="pre">bt_conn_auth_cb</span></code>).
The pairing flow and the set of Bluetooth authentication callbacks in use depend on whether the connected peer follows the Fast Pair pairing flow:</p>
<ul class="simple">
<li><p>If the peer follows the Fast Pair pairing flow, the Fast Pair service calls <code class="xref c c-func docutils literal notranslate"><span class="pre">bt_conn_auth_cb_overlay()</span></code> to automatically overlay the Bluetooth authentication callbacks.
The function is called while handling the Key-based Pairing request.
Overlying callbacks allow the GFPS to take over Bluetooth authentication during <a class="reference external" href="https://developers.google.com/nearby/fast-pair/specifications/service/gatt">Fast Pair Procedure</a> and perform all of the required operations without interacting with the application.</p></li>
<li><p>If the peer does not follow the Fast Pair pairing flow, normal Bluetooth LE pairing and global Bluetooth authentication callbacks are used.</p></li>
</ul>
</section>
</section>
<section id="api-documentation">
<h2><a class="toc-backref" href="#id13">API documentation</a><a class="headerlink" href="#api-documentation" title="Permalink to this heading"></a></h2>
<div class="line-block">
<div class="line">Header file: <code class="file docutils literal notranslate"><span class="pre">include/bluetooth/services/fast_pair.h</span></code></div>
<div class="line">Source files: <code class="file docutils literal notranslate"><span class="pre">subsys/bluetooth/services/fast_pair</span></code></div>
</div>
<dl>
<dt class="sig sig-object cpp">
<span class="target" id="group__bt__fast__pair"></span><em><span class="pre">group</span></em> <span class="sig-name descname"><span class="pre">bt_fast_pair</span></span></dt>
<dd><p>Fast Pair API. </p>
<div class="breathe-sectiondef docutils container">
<p class="breathe-sectiondef-title rubric" id="breathe-section-title-defines">Defines</p>
<dl class="c macro">
<dt class="sig sig-object c" id="c.BT_FAST_PAIR_BATTERY_LEVEL_UNKNOWN">
<span class="target" id="group__bt__fast__pair_1ga11704960642728f2da24a15d2ca3c1de"></span><span class="sig-name descname"><span class="n"><span class="pre">BT_FAST_PAIR_BATTERY_LEVEL_UNKNOWN</span></span></span><a class="headerlink" href="#c.BT_FAST_PAIR_BATTERY_LEVEL_UNKNOWN" title="Permalink to this definition"></a><br /></dt>
<dd><p>Value that denotes unknown battery level (see <a class="reference internal" href="#structbt__fast__pair__battery"><span class="std std-ref">bt_fast_pair_battery</span></a>). </p>
</dd></dl>

</div>
<div class="breathe-sectiondef docutils container">
<p class="breathe-sectiondef-title rubric" id="breathe-section-title-enums">Enums</p>
<dl class="c enum">
<dt class="sig sig-object c" id="c.bt_fast_pair_adv_mode">
<span class="target" id="group__bt__fast__pair_1gae1942260c68215dd9d3e79c1f45b4ff9"></span><span class="k"><span class="pre">enum</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">bt_fast_pair_adv_mode</span></span></span><a class="headerlink" href="#c.bt_fast_pair_adv_mode" title="Permalink to this definition"></a><br /></dt>
<dd><p>Fast Pair advertising mode. Used to generate advertising packet. </p>
<p>According to Fast Pair specification, when no Account Key has been saved on the device both Fast Pair not discoverable advertising modes result in the same advertising data. </p>
<p><em>Values:</em></p>
<dl class="c enumerator">
<dt class="sig sig-object c" id="c.bt_fast_pair_adv_mode.BT_FAST_PAIR_ADV_MODE_DISCOVERABLE">
<span class="target" id="group__bt__fast__pair_1ggae1942260c68215dd9d3e79c1f45b4ff9a5f1f6de39a8bf8934e02175009124788"></span><span class="k"><span class="pre">enumerator</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">BT_FAST_PAIR_ADV_MODE_DISCOVERABLE</span></span></span><a class="headerlink" href="#c.bt_fast_pair_adv_mode.BT_FAST_PAIR_ADV_MODE_DISCOVERABLE" title="Permalink to this definition"></a><br /></dt>
<dd><p>Fast Pair discoverable advertising. </p>
</dd></dl>

<dl class="c enumerator">
<dt class="sig sig-object c" id="c.bt_fast_pair_adv_mode.BT_FAST_PAIR_ADV_MODE_NOT_DISCOVERABLE_SHOW_UI_IND">
<span class="target" id="group__bt__fast__pair_1ggae1942260c68215dd9d3e79c1f45b4ff9a0b0a4274fe440db1ad6486f0d5635cf2"></span><span class="k"><span class="pre">enumerator</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">BT_FAST_PAIR_ADV_MODE_NOT_DISCOVERABLE_SHOW_UI_IND</span></span></span><a class="headerlink" href="#c.bt_fast_pair_adv_mode.BT_FAST_PAIR_ADV_MODE_NOT_DISCOVERABLE_SHOW_UI_IND" title="Permalink to this definition"></a><br /></dt>
<dd><p>Fast Pair not discoverable advertising, show UI indication. </p>
</dd></dl>

<dl class="c enumerator">
<dt class="sig sig-object c" id="c.bt_fast_pair_adv_mode.BT_FAST_PAIR_ADV_MODE_NOT_DISCOVERABLE_HIDE_UI_IND">
<span class="target" id="group__bt__fast__pair_1ggae1942260c68215dd9d3e79c1f45b4ff9af35ee9ba6ea3dc476a5dd147da4e5dcd"></span><span class="k"><span class="pre">enumerator</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">BT_FAST_PAIR_ADV_MODE_NOT_DISCOVERABLE_HIDE_UI_IND</span></span></span><a class="headerlink" href="#c.bt_fast_pair_adv_mode.BT_FAST_PAIR_ADV_MODE_NOT_DISCOVERABLE_HIDE_UI_IND" title="Permalink to this definition"></a><br /></dt>
<dd><p>Fast Pair not discoverable advertising, hide UI indication. </p>
</dd></dl>

<dl class="c enumerator">
<dt class="sig sig-object c" id="c.bt_fast_pair_adv_mode.BT_FAST_PAIR_ADV_MODE_COUNT">
<span class="target" id="group__bt__fast__pair_1ggae1942260c68215dd9d3e79c1f45b4ff9acd724b20166bb188e495a79f9cfa057e"></span><span class="k"><span class="pre">enumerator</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">BT_FAST_PAIR_ADV_MODE_COUNT</span></span></span><a class="headerlink" href="#c.bt_fast_pair_adv_mode.BT_FAST_PAIR_ADV_MODE_COUNT" title="Permalink to this definition"></a><br /></dt>
<dd><p>Number of Fast Pair advertising modes. </p>
</dd></dl>

</dd></dl>

<dl class="c enum">
<dt class="sig sig-object c" id="c.bt_fast_pair_adv_battery_mode">
<span class="target" id="group__bt__fast__pair_1gaad37aac3662d7abcfbfaa756347f4dcd"></span><span class="k"><span class="pre">enum</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">bt_fast_pair_adv_battery_mode</span></span></span><a class="headerlink" href="#c.bt_fast_pair_adv_battery_mode" title="Permalink to this definition"></a><br /></dt>
<dd><p>Fast Pair advertising battery mode. Used to generate advertising packet. </p>
<p>Battery data can be included in advertising packet only if the Fast Pair Provider is in Fast Pair not discoverable advertising mode. To prevent tracking, the Fast Pair Provider should not include battery data in the advertising packet all the time. </p>
<p><em>Values:</em></p>
<dl class="c enumerator">
<dt class="sig sig-object c" id="c.bt_fast_pair_adv_battery_mode.BT_FAST_PAIR_ADV_BATTERY_MODE_NONE">
<span class="target" id="group__bt__fast__pair_1ggaad37aac3662d7abcfbfaa756347f4dcda91cc963bbde117737044479e064011e2"></span><span class="k"><span class="pre">enumerator</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">BT_FAST_PAIR_ADV_BATTERY_MODE_NONE</span></span></span><a class="headerlink" href="#c.bt_fast_pair_adv_battery_mode.BT_FAST_PAIR_ADV_BATTERY_MODE_NONE" title="Permalink to this definition"></a><br /></dt>
<dd><p>Do not advertise battery data. </p>
</dd></dl>

<dl class="c enumerator">
<dt class="sig sig-object c" id="c.bt_fast_pair_adv_battery_mode.BT_FAST_PAIR_ADV_BATTERY_MODE_SHOW_UI_IND">
<span class="target" id="group__bt__fast__pair_1ggaad37aac3662d7abcfbfaa756347f4dcdaa0fda39c280cfa1d3f87a720404257f4"></span><span class="k"><span class="pre">enumerator</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">BT_FAST_PAIR_ADV_BATTERY_MODE_SHOW_UI_IND</span></span></span><a class="headerlink" href="#c.bt_fast_pair_adv_battery_mode.BT_FAST_PAIR_ADV_BATTERY_MODE_SHOW_UI_IND" title="Permalink to this definition"></a><br /></dt>
<dd><p>Show battery data UI indication. </p>
</dd></dl>

<dl class="c enumerator">
<dt class="sig sig-object c" id="c.bt_fast_pair_adv_battery_mode.BT_FAST_PAIR_ADV_BATTERY_MODE_HIDE_UI_IND">
<span class="target" id="group__bt__fast__pair_1ggaad37aac3662d7abcfbfaa756347f4dcdaba10638c4ce53df16b098335c302450c"></span><span class="k"><span class="pre">enumerator</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">BT_FAST_PAIR_ADV_BATTERY_MODE_HIDE_UI_IND</span></span></span><a class="headerlink" href="#c.bt_fast_pair_adv_battery_mode.BT_FAST_PAIR_ADV_BATTERY_MODE_HIDE_UI_IND" title="Permalink to this definition"></a><br /></dt>
<dd><p>Hide battery data UI indication. </p>
</dd></dl>

<dl class="c enumerator">
<dt class="sig sig-object c" id="c.bt_fast_pair_adv_battery_mode.BT_FAST_PAIR_ADV_BATTERY_MODE_COUNT">
<span class="target" id="group__bt__fast__pair_1ggaad37aac3662d7abcfbfaa756347f4dcdaab6ea2cc9c77d6c64c2d93ce29af325f"></span><span class="k"><span class="pre">enumerator</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">BT_FAST_PAIR_ADV_BATTERY_MODE_COUNT</span></span></span><a class="headerlink" href="#c.bt_fast_pair_adv_battery_mode.BT_FAST_PAIR_ADV_BATTERY_MODE_COUNT" title="Permalink to this definition"></a><br /></dt>
<dd><p>Number of Fast Pair advertising battery modes. </p>
</dd></dl>

</dd></dl>

<dl class="c enum">
<dt class="sig sig-object c" id="c.bt_fast_pair_battery_comp">
<span class="target" id="group__bt__fast__pair_1ga5a024811ab62a8bae495c869cbdd0b9f"></span><span class="k"><span class="pre">enum</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">bt_fast_pair_battery_comp</span></span></span><a class="headerlink" href="#c.bt_fast_pair_battery_comp" title="Permalink to this definition"></a><br /></dt>
<dd><p>Index of Fast Pair battery component. </p>
<p><em>Values:</em></p>
<dl class="c enumerator">
<dt class="sig sig-object c" id="c.bt_fast_pair_battery_comp.BT_FAST_PAIR_BATTERY_COMP_LEFT_BUD">
<span class="target" id="group__bt__fast__pair_1gga5a024811ab62a8bae495c869cbdd0b9fa549277439c3caf7546ee673d4be1edc4"></span><span class="k"><span class="pre">enumerator</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">BT_FAST_PAIR_BATTERY_COMP_LEFT_BUD</span></span></span><a class="headerlink" href="#c.bt_fast_pair_battery_comp.BT_FAST_PAIR_BATTERY_COMP_LEFT_BUD" title="Permalink to this definition"></a><br /></dt>
<dd><p>Left bud. </p>
</dd></dl>

<dl class="c enumerator">
<dt class="sig sig-object c" id="c.bt_fast_pair_battery_comp.BT_FAST_PAIR_BATTERY_COMP_RIGHT_BUD">
<span class="target" id="group__bt__fast__pair_1gga5a024811ab62a8bae495c869cbdd0b9fa72ec86c578156b965e18feecf6ff42f6"></span><span class="k"><span class="pre">enumerator</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">BT_FAST_PAIR_BATTERY_COMP_RIGHT_BUD</span></span></span><a class="headerlink" href="#c.bt_fast_pair_battery_comp.BT_FAST_PAIR_BATTERY_COMP_RIGHT_BUD" title="Permalink to this definition"></a><br /></dt>
<dd><p>Right bud. </p>
</dd></dl>

<dl class="c enumerator">
<dt class="sig sig-object c" id="c.bt_fast_pair_battery_comp.BT_FAST_PAIR_BATTERY_COMP_BUD_CASE">
<span class="target" id="group__bt__fast__pair_1gga5a024811ab62a8bae495c869cbdd0b9faadc0517ce76026399c56122d81104115"></span><span class="k"><span class="pre">enumerator</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">BT_FAST_PAIR_BATTERY_COMP_BUD_CASE</span></span></span><a class="headerlink" href="#c.bt_fast_pair_battery_comp.BT_FAST_PAIR_BATTERY_COMP_BUD_CASE" title="Permalink to this definition"></a><br /></dt>
<dd><p>Case. </p>
</dd></dl>

<dl class="c enumerator">
<dt class="sig sig-object c" id="c.bt_fast_pair_battery_comp.BT_FAST_PAIR_BATTERY_COMP_COUNT">
<span class="target" id="group__bt__fast__pair_1gga5a024811ab62a8bae495c869cbdd0b9fa515f840fef707470855b25ad522bcafb"></span><span class="k"><span class="pre">enumerator</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">BT_FAST_PAIR_BATTERY_COMP_COUNT</span></span></span><a class="headerlink" href="#c.bt_fast_pair_battery_comp.BT_FAST_PAIR_BATTERY_COMP_COUNT" title="Permalink to this definition"></a><br /></dt>
<dd><p>Number of battery values. </p>
</dd></dl>

</dd></dl>

</div>
<div class="breathe-sectiondef docutils container">
<p class="breathe-sectiondef-title rubric" id="breathe-section-title-functions">Functions</p>
<dl class="c function">
<dt class="sig sig-object c" id="c.bt_fast_pair_adv_data_size">
<span class="target" id="group__bt__fast__pair_1gaa3ab736b470b5650a118b1b0135bdc80"></span><span class="n"><span class="pre">size_t</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">bt_fast_pair_adv_data_size</span></span></span><span class="sig-paren">(</span><span class="k"><span class="pre">struct</span></span><span class="w"> </span><a class="reference internal" href="#c.bt_fast_pair_adv_config" title="bt_fast_pair_adv_config"><span class="n"><span class="pre">bt_fast_pair_adv_config</span></span></a><span class="w"> </span><span class="n"><span class="pre">fp_adv_config</span></span><span class="sig-paren">)</span><a class="headerlink" href="#c.bt_fast_pair_adv_data_size" title="Permalink to this definition"></a><br /></dt>
<dd><p>Get Fast Pair advertising data buffer size.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>fp_adv_config</strong> – <strong>[in]</strong> Fast Pair advertising config.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Fast Pair advertising data buffer size in bytes if the operation was successful. Otherwise zero is returned. </p>
</dd>
</dl>
</dd></dl>

<dl class="c function">
<dt class="sig sig-object c" id="c.bt_fast_pair_adv_data_fill">
<span class="target" id="group__bt__fast__pair_1gae6cc86e37c986a9e10037caca8a18002"></span><span class="kt"><span class="pre">int</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">bt_fast_pair_adv_data_fill</span></span></span><span class="sig-paren">(</span><span class="k"><span class="pre">struct</span></span><span class="w"> </span><span class="n"><span class="pre">bt_data</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">adv_data</span></span>, <span class="n"><span class="pre">uint8_t</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">buf</span></span>, <span class="n"><span class="pre">size_t</span></span><span class="w"> </span><span class="n"><span class="pre">buf_size</span></span>, <span class="k"><span class="pre">struct</span></span><span class="w"> </span><a class="reference internal" href="#c.bt_fast_pair_adv_config" title="bt_fast_pair_adv_config"><span class="n"><span class="pre">bt_fast_pair_adv_config</span></span></a><span class="w"> </span><span class="n"><span class="pre">fp_adv_config</span></span><span class="sig-paren">)</span><a class="headerlink" href="#c.bt_fast_pair_adv_data_fill" title="Permalink to this definition"></a><br /></dt>
<dd><p>Fill Bluetooth advertising packet with Fast Pair advertising data.</p>
<p>Provided buffer will be used in bt_data structure. The data must be valid while the structure is in use.</p>
<p>The buffer size must be at least <a class="reference internal" href="#group__bt__fast__pair_1gaa3ab736b470b5650a118b1b0135bdc80"><span class="std std-ref">bt_fast_pair_adv_data_size</span></a>. Caller shall also make sure that Account Key write from a connected Fast Pair Seeker would not preempt generating Fast Pair not discoverable advertising data. To achieve this, this function and <a class="reference internal" href="#group__bt__fast__pair_1gaa3ab736b470b5650a118b1b0135bdc80"><span class="std std-ref">bt_fast_pair_adv_data_size</span></a> should be called from context with cooperative priority.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>adv_data</strong> – <strong>[out]</strong> Pointer to the Bluetooth advertising data structure to be filled. </p></li>
<li><p><strong>buf</strong> – <strong>[out]</strong> Pointer to the buffer used to store Fast Pair advertising data. </p></li>
<li><p><strong>buf_size</strong> – <strong>[in]</strong> Size of the buffer used to store Fast Pair advertising data. </p></li>
<li><p><strong>fp_adv_config</strong> – <strong>[in]</strong> Fast Pair advertising config.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>0 if the operation was successful. Otherwise, a (negative) error code is returned. </p>
</dd>
</dl>
</dd></dl>

<dl class="c function">
<dt class="sig sig-object c" id="c.bt_fast_pair_set_pairing_mode">
<span class="target" id="group__bt__fast__pair_1gadd2f19655996f197dfa3fc95ebc90227"></span><span class="kt"><span class="pre">void</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">bt_fast_pair_set_pairing_mode</span></span></span><span class="sig-paren">(</span><span class="kt"><span class="pre">bool</span></span><span class="w"> </span><span class="n"><span class="pre">pairing_mode</span></span><span class="sig-paren">)</span><a class="headerlink" href="#c.bt_fast_pair_set_pairing_mode" title="Permalink to this definition"></a><br /></dt>
<dd><p>Enable or disable Fast Pair pairing mode.</p>
<p>Pairing mode must be enabled if discoverable Fast Pair advertising is used. Pairing mode must be disabled if not discoverable Fast Pair advertising is used.</p>
<p>It is user responsibility to make sure that proper pairing mode is used before advertising is started. Fast Pair pairing mode is enabled by default.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>pairing_mode</strong> – <strong>[in]</strong> Boolean indicating if device is in pairing mode. </p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="c function">
<dt class="sig sig-object c" id="c.bt_fast_pair_has_account_key">
<span class="target" id="group__bt__fast__pair_1gad8d294ef803951633ea574a7a8d5290e"></span><span class="kt"><span class="pre">bool</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">bt_fast_pair_has_account_key</span></span></span><span class="sig-paren">(</span><span class="kt"><span class="pre">void</span></span><span class="sig-paren">)</span><a class="headerlink" href="#c.bt_fast_pair_has_account_key" title="Permalink to this definition"></a><br /></dt>
<dd><p>Check Account Key presence.</p>
<p>Caller shall make sure that Account Key write from a connected Fast Pair Seeker would not preempt this function call. Otherwise invalid value may be returned.</p>
<p>The function always returns false if called before Zephyr settings are loaded.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>True if device already has an Account Key, false otherwise. </p>
</dd>
</dl>
</dd></dl>

<dl class="c function">
<dt class="sig sig-object c" id="c.bt_fast_pair_battery_set">
<span class="target" id="group__bt__fast__pair_1gaf39e0064287da437b85fc3919a570954"></span><span class="kt"><span class="pre">int</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">bt_fast_pair_battery_set</span></span></span><span class="sig-paren">(</span><span class="k"><span class="pre">enum</span></span><span class="w"> </span><a class="reference internal" href="#c.bt_fast_pair_battery_comp" title="bt_fast_pair_battery_comp"><span class="n"><span class="pre">bt_fast_pair_battery_comp</span></span></a><span class="w"> </span><span class="n"><span class="pre">battery_comp</span></span>, <span class="k"><span class="pre">struct</span></span><span class="w"> </span><a class="reference internal" href="#c.bt_fast_pair_battery" title="bt_fast_pair_battery"><span class="n"><span class="pre">bt_fast_pair_battery</span></span></a><span class="w"> </span><span class="n"><span class="pre">battery</span></span><span class="sig-paren">)</span><a class="headerlink" href="#c.bt_fast_pair_battery_set" title="Permalink to this definition"></a><br /></dt>
<dd><p>Set or update specified battery value.</p>
<p>Battery values are used to generate advertising packet. To include battery values in advertising packet this function must be called before <a class="reference internal" href="#group__bt__fast__pair_1gae6cc86e37c986a9e10037caca8a18002"><span class="std std-ref">bt_fast_pair_adv_data_fill</span></a>. It is user responsibility to update battery value and regenerate advertising packet when battery value change.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>battery_comp</strong> – <strong>[in]</strong> Battery component. </p></li>
<li><p><strong>battery</strong> – <strong>[in]</strong> Battery value.</p></li>
</ul>
</dd>
<dt class="field-even">Return values</dt>
<dd class="field-even"><ul class="simple">
<li><p><strong>0</strong> – on success. </p></li>
<li><p><strong>-EINVAL</strong> – if battery value is invalid. </p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="c function">
<dt class="sig sig-object c" id="c.bt_fast_pair_info_cb_register">
<span class="target" id="group__bt__fast__pair_1ga010ad0cf52bd1ec7c38f50fcefff00c6"></span><span class="kt"><span class="pre">int</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">bt_fast_pair_info_cb_register</span></span></span><span class="sig-paren">(</span><span class="k"><span class="pre">const</span></span><span class="w"> </span><span class="k"><span class="pre">struct</span></span><span class="w"> </span><a class="reference internal" href="#c.bt_fast_pair_info_cb" title="bt_fast_pair_info_cb"><span class="n"><span class="pre">bt_fast_pair_info_cb</span></span></a><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">cb</span></span><span class="sig-paren">)</span><a class="headerlink" href="#c.bt_fast_pair_info_cb_register" title="Permalink to this definition"></a><br /></dt>
<dd><p>Register Fast Pair information callbacks.</p>
<p>This function registers an instance of information callbacks. The registered instance needs to persist in the memory after this function exits, as it is used directly without the copy operation. It is possible to register only one instance of callbacks with this API.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>cb</strong> – Callback struct.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Zero on success or negative error code otherwise </p>
</dd>
</dl>
</dd></dl>

<dl class="c function">
<dt class="sig sig-object c" id="c.bt_fast_pair_factory_reset">
<span class="target" id="group__bt__fast__pair_1ga8c691f22bf003e2827afbec810b174fa"></span><span class="kt"><span class="pre">int</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">bt_fast_pair_factory_reset</span></span></span><span class="sig-paren">(</span><span class="kt"><span class="pre">void</span></span><span class="sig-paren">)</span><a class="headerlink" href="#c.bt_fast_pair_factory_reset" title="Permalink to this definition"></a><br /></dt>
<dd><p>Perform a reset to the default factory settings for Google Fast Pair Service.</p>
<p>Clears the Fast Pair storage. If the reset operation is interrupted by system reboot or power outage, the reset is automatically resumed at the stage of loading the Fast Pair storage. It prevents the Fast Pair storage from ending in unwanted state after the reset interruption.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>0 if the operation was successful. Otherwise, a (negative) error code is returned. </p>
</dd>
</dl>
</dd></dl>

</div>
<dl class="c struct">
<dt class="sig sig-object c" id="c.bt_fast_pair_adv_config">
<span class="target" id="structbt__fast__pair__adv__config"></span><span class="k"><span class="pre">struct</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">bt_fast_pair_adv_config</span></span></span><a class="headerlink" href="#c.bt_fast_pair_adv_config" title="Permalink to this definition"></a><br /></dt>
<dd><div class="docutils container">
<em>#include &lt;fast_pair.h&gt;</em></div>
<p>Fast Pair advertising config. Used to generate advertising packet. </p>
<div class="breathe-sectiondef docutils container">
<p class="breathe-sectiondef-title rubric" id="breathe-section-title-public-members">Public Members</p>
<dl class="c var">
<dt class="sig sig-object c" id="c.bt_fast_pair_adv_config.adv_mode">
<span class="target" id="structbt__fast__pair__adv__config_1a7018cd233343cbe75cdac8ccda0d262e"></span><span class="k"><span class="pre">enum</span></span><span class="w"> </span><a class="reference internal" href="#c.bt_fast_pair_adv_mode" title="bt_fast_pair_adv_mode"><span class="n"><span class="pre">bt_fast_pair_adv_mode</span></span></a><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">adv_mode</span></span></span><a class="headerlink" href="#c.bt_fast_pair_adv_config.adv_mode" title="Permalink to this definition"></a><br /></dt>
<dd><p>Fast Pair advertising mode. </p>
</dd></dl>

<dl class="c var">
<dt class="sig sig-object c" id="c.bt_fast_pair_adv_config.adv_battery_mode">
<span class="target" id="structbt__fast__pair__adv__config_1a2a32e8983193021351d61f4f5ed59f4a"></span><span class="k"><span class="pre">enum</span></span><span class="w"> </span><a class="reference internal" href="#c.bt_fast_pair_adv_battery_mode" title="bt_fast_pair_adv_battery_mode"><span class="n"><span class="pre">bt_fast_pair_adv_battery_mode</span></span></a><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">adv_battery_mode</span></span></span><a class="headerlink" href="#c.bt_fast_pair_adv_config.adv_battery_mode" title="Permalink to this definition"></a><br /></dt>
<dd><p>Fast Pair advertising battery mode. </p>
</dd></dl>

</div>
</dd></dl>

<dl class="c struct">
<dt class="sig sig-object c" id="c.bt_fast_pair_battery">
<span class="target" id="structbt__fast__pair__battery"></span><span class="k"><span class="pre">struct</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">bt_fast_pair_battery</span></span></span><a class="headerlink" href="#c.bt_fast_pair_battery" title="Permalink to this definition"></a><br /></dt>
<dd><div class="docutils container">
<em>#include &lt;fast_pair.h&gt;</em></div>
<p>Fast Pair battery component descriptor. </p>
<div class="breathe-sectiondef docutils container">
<p class="breathe-sectiondef-title rubric" id="breathe-section-title-public-members">Public Members</p>
<dl class="c var">
<dt class="sig sig-object c" id="c.bt_fast_pair_battery.charging">
<span class="target" id="structbt__fast__pair__battery_1a09bf699c27a110fcd762fefa83182d54"></span><span class="kt"><span class="pre">bool</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">charging</span></span></span><a class="headerlink" href="#c.bt_fast_pair_battery.charging" title="Permalink to this definition"></a><br /></dt>
<dd><p>Battery status. True means that battery is charging and False means that battery is not charging. </p>
</dd></dl>

<dl class="c var">
<dt class="sig sig-object c" id="c.bt_fast_pair_battery.level">
<span class="target" id="structbt__fast__pair__battery_1a7d85140b4397f29a98391be27402049a"></span><span class="n"><span class="pre">uint8_t</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">level</span></span></span><a class="headerlink" href="#c.bt_fast_pair_battery.level" title="Permalink to this definition"></a><br /></dt>
<dd><p>Battery level ranging from 0 to 100 percent. Use <a class="reference internal" href="#group__bt__fast__pair_1ga11704960642728f2da24a15d2ca3c1de"><span class="std std-ref">BT_FAST_PAIR_BATTERY_LEVEL_UNKNOWN</span></a> for unknown. </p>
</dd></dl>

</div>
</dd></dl>

<dl class="c struct">
<dt class="sig sig-object c" id="c.bt_fast_pair_info_cb">
<span class="target" id="structbt__fast__pair__info__cb"></span><span class="k"><span class="pre">struct</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">bt_fast_pair_info_cb</span></span></span><a class="headerlink" href="#c.bt_fast_pair_info_cb" title="Permalink to this definition"></a><br /></dt>
<dd><div class="docutils container">
<em>#include &lt;fast_pair.h&gt;</em></div>
<p>Fast Pair information callback descriptor. </p>
<div class="breathe-sectiondef docutils container">
<p class="breathe-sectiondef-title rubric" id="breathe-section-title-public-members">Public Members</p>
<dl class="c var">
<dt class="sig sig-object c" id="c.bt_fast_pair_info_cb.account_key_written">
<span class="target" id="structbt__fast__pair__info__cb_1ae12a29af4a6e2c979d9333a7c0ce566d"></span><span class="kt"><span class="pre">void</span></span><span class="w"> </span><span class="p"><span class="pre">(</span></span><span class="p"><span class="pre">*</span></span><span class="sig-name descname"><span class="n"><span class="pre">account_key_written</span></span></span><span class="p"><span class="pre">)</span></span><span class="p"><span class="pre">(</span></span><span class="k"><span class="pre">struct</span></span><span class="w"> </span><span class="n"><span class="pre">bt_conn</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">conn</span></span><span class="p"><span class="pre">)</span></span><a class="headerlink" href="#c.bt_fast_pair_info_cb.account_key_written" title="Permalink to this definition"></a><br /></dt>
<dd><p>Notify that the Account Key has been written.</p>
<p>This information can be used for example to update the Fast Pair advertising data in the not discoverable mode. Due to execution context constraints (Bluetooth RX thread), it is not recommended to block for long periods of time in this callback.</p>
<dl class="field-list simple">
<dt class="field-odd">Param conn</dt>
<dd class="field-odd"><p>Connection object that wrote the Account Key. </p>
</dd>
</dl>
</dd></dl>

</div>
</dd></dl>

</dd></dl>

</section>
</section>


           </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="gattp.html" class="btn btn-neutral float-right" title="Generic Attribute (GATT) Profile" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="dfu_smp.html" class="btn btn-neutral" title="GATT DFU SMP Service Client" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">

<table>
<tr>
<td>
    <p>
        &copy; Copyright 2019-2023, Nordic Semiconductor.
      Last updated on Mar 20, 2023.

    </p>
</td>
<td id="nordiclogo">
  <a href="https://www.nordicsemi.com/"><img src="../../../_static/images/nordic-logo.png" border="0"/></a>
</td>
</tr>
</table>
  </div> 


</footer>

<div id="scroll-container">
  <button type="button" id="scroll-btn" class="btn">
    <svg xmlns="http://www.w3.org/2000/svg" height="24" viewBox="0 0 24 24" width="24"><path d="M0 0h24v24H0z" fill="none"/><path d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z" fill="#fff"/></svg>
  </button>
</div>

<script>
  const scrollBtn = document.querySelector("#scroll-btn");

  document.addEventListener("scroll", () => {
    if (window.scrollY > 400) {
          scrollBtn.style.visibility = "visible";
      } else {
          scrollBtn.style.visibility = "hidden";
      }
  });

  scrollBtn.addEventListener("click", () => {
      window.scrollTo({ top: 0, behavior: "smooth" });
  });
</script>
        </div>
      </div>
    </section>
  </div>
  
  <div class="rst-versions" data-toggle="rst-versions" role="note" aria-label="versions">
    <span class="rst-current-version" data-toggle="rst-current-version">
      <span class="fa fa-book"> nRF Connect SDK</span>
       <span class="fa fa-caret-down"></span>
    </span>
    <div class="rst-other-versions">
      
      <div class="rst-other-version ncs">
        <a href="../../../../nrf/index.html">nRF Connect SDK</a>
      </div>
      
      <div class="rst-other-version nrfx">
        <a href="../../../../nrfx/index.html">nrfx</a>
      </div>
      
      <div class="rst-other-version nrfxlib">
        <a href="../../../../nrfxlib/README.html">nrfxlib</a>
      </div>
      
      <div class="rst-other-version zephyr">
        <a href="../../../../zephyr/index.html">Zephyr Project</a>
      </div>
      
      <div class="rst-other-version mcuboot">
        <a href="../../../../mcuboot/wrapper.html">MCUboot</a>
      </div>
      
      <div class="rst-other-version tfm">
        <a href="../../../../tfm/index.html">Trusted Firmware-M</a>
      </div>
      
      <div class="rst-other-version matter">
        <a href="../../../../matter/index.html">Matter</a>
      </div>
      
      <div class="rst-other-version kconfig">
        <a href="../../../../kconfig/index.html">Kconfig Reference</a>
      </div>
    </div>
  </div><script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>