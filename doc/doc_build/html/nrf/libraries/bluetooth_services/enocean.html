<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Bluetooth EnOcean &mdash; nRF Connect SDK 2.3.99 documentation</title>
      <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="../../_static/css/nordic.css" type="text/css" />
      <link rel="stylesheet" href="../../_static/togglebutton.css" type="text/css" />
      <link rel="stylesheet" href="../../_static/css/nrf.css" type="text/css" />
      <link rel="stylesheet" href="../../_static/tabs.css" type="text/css" /> 
  <!--[if lt IE 9]>
    <script src="../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="../../" id="documentation_options" src="../../_static/documentation_options.js"></script>
        <script src="../../_static/jquery.js"></script>
        <script src="../../_static/underscore.js"></script>
        <script src="../../_static/_sphinx_javascript_frameworks_compat.js"></script>
        <script src="../../_static/doctools.js"></script>
        <script src="../../_static/sphinx_highlight.js"></script>
        <script src="https://www.googletagmanager.com/gtag/js?id=G-ZPVZRKFQJR"></script>
        <script src="../../_static/js/ga-tracker.js"></script>
        <script data-culture="EN" id="CookieConsent" type="text/javascript" src="https://policy.app.cookieinformation.com/uc.js"></script>
        <script>let toggleHintShow = 'Click to show';</script>
        <script>let toggleHintHide = 'Click to hide';</script>
        <script>let toggleOpenOnPrint = 'true';</script>
        <script src="../../_static/togglebutton.js"></script>
        <script>var togglebuttonSelector = '.toggle, .admonition.dropdown';</script>
    <script src="../../_static/js/theme.js"></script>
<script
  type="text/javascript"
  src="../../_static/js/ncs.js"
></script>
<script src="../../_static/js/bootstrap.bundle.min.js"></script>

    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="GATT Discovery Manager" href="gatt_dm.html" />
    <link rel="prev" title="Bluetooth connection context" href="conn_ctx.html" />
<link
  href="../../_static/css/bootstrap.min.css"
  rel="stylesheet"
/>
<link
  rel="shortcut icon"
  href="../../_static/images/favicon.ico"
/>

</head>

<body class="wy-body-for-nav">
<div class="announcement"></div>
<div class="d-print-none ncs-header">
  <div class="container-xl ncs-header-top">
    <div class="row h-100">
      <div class="d-none d-md-block col-2">
        <div class="bg-white py-4 px-3 ml-2 ncs-header-logo">
          <img
            class="ncs-header-logo"
            src="../../_static/images/nordic-logo.png"
            alt=""
          />
        </div>
      </div>
      <div
        class="col-8 col-md-7 pl-md-4 d-flex align-self-center justify-content-center"
      >
        <form class="w-75" action="../../search.html" method="get">
          <div class="form-group">
            <input
              type="text"
              name="q"
              class="ncs-search-input form-control"
              placeholder="Search all docs..."
            />
          </div>
        </form>
      </div>
      <div class="col-4 col-md-3 d-md-block p-3 text-end">
        <div class="dropdown">
          <button
            class="btn dropdown-toggle ncs-btn-versions"
            type="button"
            id="dropdownMenuButton1"
            data-bs-toggle="dropdown"
            aria-expanded="false"
          >
            <span class="d-none d-md-inline">nRF Connect SDK</span>
            <span id="ncsversion" class="d-inline"></span>
          </button>
          <div class="dropdown-menu" aria-labelledby="dropdownMenuButton"></div>
        </div>
      </div>
    </div>
  </div>
  <div class="ncs-header-nav">
    <div class="container-xl">
      <div class="row">
        <div class="col col-12 d-flex justify-content-center">
          <nav class="navbar navbar-dark navbar-expand-lg p-0">
            <span class="navbar-brand d-block d-lg-none py-2 pl-1"
              >Documentation sets</span
            >
            <button
              class="navbar-toggler"
              type="button"
              data-bs-toggle="collapse"
              data-bs-target="#navbarNavAltMarkup"
              aria-controls="navbarNavAltMarkup"
              aria-expanded="false"
              aria-label="Toggle navigation"
            >
              <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="navbarNavAltMarkup">
              <ul class="navbar-nav">
                <li class="nav-item active py-1 px-3">
                  <a
                    class="nav-link"
                    href="../../../nrf/index.html"
                    >nRF Connect SDK</a
                  >
                </li>
                <li><hr class="dropdown-divider" /></li>
                <li class="nav-item  py-1 px-3">
                  <a
                    class="nav-link"
                    href="../../../nrfx/index.html"
                    >nrfx</a
                  >
                </li>
                <li><hr class="dropdown-divider" /></li>
                <li class="nav-item  py-1 px-3">
                  <a
                    class="nav-link"
                    href="../../../nrfxlib/README.html"
                    >nrfxlib</a
                  >
                </li>
                <li><hr class="dropdown-divider" /></li>
                <li class="nav-item  py-1 px-3">
                  <a
                    class="nav-link"
                    href="../../../zephyr/index.html"
                    >Zephyr Project</a
                  >
                </li>
                <li><hr class="dropdown-divider" /></li>
                <li class="nav-item  py-1 px-3">
                  <a
                    class="nav-link"
                    href="../../../mcuboot/wrapper.html"
                    >MCUboot</a
                  >
                </li>
                <li><hr class="dropdown-divider" /></li>
                <li class="nav-item  py-1 px-3">
                  <a
                    class="nav-link"
                    href="../../../tfm/index.html"
                    >Trusted Firmware-M</a
                  >
                </li>
                <li><hr class="dropdown-divider" /></li>
                <li class="nav-item  py-1 px-3">
                  <a
                    class="nav-link"
                    href="../../../matter/index.html"
                    >Matter</a
                  >
                </li>
                <li><hr class="dropdown-divider" /></li>
                <li class="nav-item  py-1 px-3">
                  <a
                    class="nav-link"
                    href="../../../kconfig/index.html"
                    >Kconfig Reference</a
                  >
                </li>
                <li><hr class="dropdown-divider" /></li>
              </ul>
            </div>
          </nav>
        </div>
      </div>
    </div>
  </div>
</div>

  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
            <a href="../../index.html" class="icon icon-home"> nRF Connect SDK
          </a>
              <div class="version">
                2.3.99
              </div>
<div id="searchbox" role="search">
  <div class="searchformwrapper">
    <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
      <input type="text" name="q" placeholder="Search docs" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
  </div>
</div>
<script>$('#searchbox').show(0);</script>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Contents</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../introduction.html">Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../getting_started.html">Getting started</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../dev_model.html">Development model</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../app_dev.html">Application development</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../security.html">Security</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../ecosystem_integration.html">Ecosystems integration</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../nrf91.html">Working with nRF91 Series</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../nrf70.html">Working with nRF70 Series</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../nrf53.html">Working with nRF53 Series</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../nrf52.html">Working with nRF52 Series</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../protocols.html">Protocols</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../applications.html">Applications</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../samples.html">Samples</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../drivers.html">Drivers</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../index.html">Libraries</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../bin/index.html">Binary libraries</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="index.html">Bluetooth libraries and services</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="adv_prov.html">Bluetooth LE advertising providers</a></li>
<li class="toctree-l3"><a class="reference internal" href="conn_ctx.html">Bluetooth connection context</a></li>
<li class="toctree-l3 current"><a class="current reference internal" href="#">Bluetooth EnOcean</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#supported-devices">Supported devices</a></li>
<li class="toctree-l4"><a class="reference internal" href="#usage">Usage</a></li>
<li class="toctree-l4"><a class="reference internal" href="#api-documentation">API documentation</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="gatt_dm.html">GATT Discovery Manager</a></li>
<li class="toctree-l3"><a class="reference internal" href="gatt_pool.html">Bluetooth GATT attribute pools</a></li>
<li class="toctree-l3"><a class="reference internal" href="mesh.html">Bluetooth mesh profile</a></li>
<li class="toctree-l3"><a class="reference internal" href="rpc.html">Bluetooth Low Energy Remote Procedure Call</a></li>
<li class="toctree-l3"><a class="reference internal" href="scan.html">Scanning module</a></li>
<li class="toctree-l3"><a class="reference internal" href="services/ams_client.html">Apple Media Service (AMS) Client</a></li>
<li class="toctree-l3"><a class="reference internal" href="services/ancs_client.html">Apple Notification Center Service (ANCS) Client</a></li>
<li class="toctree-l3"><a class="reference internal" href="services/bas_client.html">GATT Battery Service (BAS) Client</a></li>
<li class="toctree-l3"><a class="reference internal" href="services/bms.html">GATT Bond Management Service (BMS)</a></li>
<li class="toctree-l3"><a class="reference internal" href="services/cgms.html">GATT Continuous Glucose Monitoring Service (CGMS)</a></li>
<li class="toctree-l3"><a class="reference internal" href="services/cts_client.html">GATT Current Time Service (CTS) Client</a></li>
<li class="toctree-l3"><a class="reference internal" href="services/ddfs.html">Direction and Distance Finding Service (DDFS)</a></li>
<li class="toctree-l3"><a class="reference internal" href="services/dfu_smp.html">GATT DFU SMP Service Client</a></li>
<li class="toctree-l3"><a class="reference internal" href="services/fast_pair.html">Google Fast Pair Service (GFPS)</a></li>
<li class="toctree-l3"><a class="reference internal" href="services/gattp.html">Generic Attribute (GATT) Profile</a></li>
<li class="toctree-l3"><a class="reference internal" href="services/hids.html">GATT Human Interface Device (HID) Service</a></li>
<li class="toctree-l3"><a class="reference internal" href="services/hogp.html">GATT Human Interface Device Service (HIDS) Client</a></li>
<li class="toctree-l3"><a class="reference internal" href="services/hrs_client.html">GATT Heart Rate Service (HRS) Client</a></li>
<li class="toctree-l3"><a class="reference internal" href="services/latency.html">GATT Latency Service</a></li>
<li class="toctree-l3"><a class="reference internal" href="services/latency_client.html">GATT Latency Client</a></li>
<li class="toctree-l3"><a class="reference internal" href="services/lbs.html">LED Button Service (LBS)</a></li>
<li class="toctree-l3"><a class="reference internal" href="services/mds.html">Memfault Diagnostic Service (MDS)</a></li>
<li class="toctree-l3"><a class="reference internal" href="services/nsms.html">Nordic Status Message Service (NSMS)</a></li>
<li class="toctree-l3"><a class="reference internal" href="services/nus.html">Nordic UART Service (NUS)</a></li>
<li class="toctree-l3"><a class="reference internal" href="services/nus_client.html">Nordic UART Service (NUS) Client</a></li>
<li class="toctree-l3"><a class="reference internal" href="services/rscs.html">Running Speed and Cadence Service (RSCS)</a></li>
<li class="toctree-l3"><a class="reference internal" href="services/throughput.html">GATT Throughput Service</a></li>
<li class="toctree-l3"><a class="reference internal" href="services/wifi_prov.html">Wi-Fi Provisioning Service</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../bootloader/index.html">Bootloader libraries</a></li>
<li class="toctree-l2"><a class="reference internal" href="../caf/index.html">Common Application Framework</a></li>
<li class="toctree-l2"><a class="reference internal" href="../debug/index.html">Debug libraries</a></li>
<li class="toctree-l2"><a class="reference internal" href="../dfu/index.html">DFU libraries</a></li>
<li class="toctree-l2"><a class="reference internal" href="../gazell/index.html">Gazell libraries</a></li>
<li class="toctree-l2"><a class="reference internal" href="../modem/index.html">Modem libraries</a></li>
<li class="toctree-l2"><a class="reference internal" href="../mpsl/index.html">Multiprotocol Service Layer libraries</a></li>
<li class="toctree-l2"><a class="reference internal" href="../networking/index.html">Libraries for networking</a></li>
<li class="toctree-l2"><a class="reference internal" href="../nfc/index.html">Libraries for NFC</a></li>
<li class="toctree-l2"><a class="reference internal" href="../nrf_rpc/index.html">nRF RPC libraries</a></li>
<li class="toctree-l2"><a class="reference internal" href="../others/index.html">Other libraries</a></li>
<li class="toctree-l2"><a class="reference internal" href="../shell/index.html">Shell libraries</a></li>
<li class="toctree-l2"><a class="reference internal" href="../tfm/index.html">TF-M libraries</a></li>
<li class="toctree-l2"><a class="reference internal" href="../zigbee/index.html">Libraries for Zigbee</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../scripts.html">Scripts</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../release_notes.html">Release notes</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../known_issues.html">Known issues</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../software_maturity.html">Software maturity levels</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../documentation.html">About this documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../glossary.html">Glossary</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">nRF Connect SDK</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../../index.html" class="icon icon-home"></a></li>
          <li class="breadcrumb-item"><a href="../index.html">Libraries</a></li>
          <li class="breadcrumb-item"><a href="index.html">Bluetooth libraries and services</a></li>
      <li class="breadcrumb-item active">Bluetooth EnOcean</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../../_sources/libraries/bluetooth_services/enocean.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="bluetooth-enocean">
<span id="bt-enocean-readme"></span><h1>Bluetooth EnOcean<a class="headerlink" href="#bluetooth-enocean" title="Permalink to this heading"></a></h1>
<div class="contents local topic" id="contents">
<ul class="simple">
<li><p><a class="reference internal" href="#supported-devices" id="id7">Supported devices</a></p></li>
<li><p><a class="reference internal" href="#usage" id="id8">Usage</a></p>
<ul>
<li><p><a class="reference internal" href="#commissioning" id="id9">Commissioning</a></p></li>
<li><p><a class="reference internal" href="#observing-output" id="id10">Observing output</a></p></li>
<li><p><a class="reference internal" href="#dependencies" id="id11">Dependencies</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#api-documentation" id="id12">API documentation</a></p></li>
</ul>
</div>
<p>The Bluetooth® EnOcean library allows passive observation of wall switches and sensors based on Bluetooth LE from <a class="reference external" href="https://www.enocean.com">EnOcean</a>, such as wall switches based on the Push Button Transmitter module (PTM 215B) and the Easyfit Motion Detector with Illumination (EMDCB) sensor module.
The library is only capable of observing the output of the devices, and does not send anything back.
NFC-based configuration is not supported.</p>
<p>The library supports different types of commissioning for both wall switches and sensors:</p>
<ul class="simple">
<li><p>Radio-based commissioning.</p></li>
<li><p>Manually inputting data from other commissioning methods, such as NFC or QR codes.</p></li>
</ul>
<p>The library supports replay protection based on sequence numbers.
Only new, authenticated packets from commissioned devices will go through to the event callbacks.</p>
<p>If the <code class="xref kconfig kconfig-option docutils literal notranslate"><span class="pre">CONFIG_BT_SETTINGS</span></code> subsystem is enabled, the device information of all commissioned devices are stored persistently using the <span class="xref std std-ref">zephyr:settings_api</span> subsystem, including the sequence number information.</p>
<p>For a demonstration of the library features, see the <a class="reference internal" href="../../samples/bluetooth/enocean/README.html#enocean-sample"><span class="std std-ref">Bluetooth: EnOcean</span></a> sample.</p>
<section id="supported-devices">
<span id="bt-enocean-devices"></span><h2><a class="toc-backref" href="#id7">Supported devices</a><a class="headerlink" href="#supported-devices" title="Permalink to this heading"></a></h2>
<p>This library supports both PTM 215B-based switches and the sensor module enabled for Bluetooth LE:</p>
<ul class="simple">
<li><p><a class="reference external" href="https://www.enocean.com/en/products/enocean_modules_24ghz_ble/easyfit-single-double-rocker-wall-switch-for-ble-ewssb-ewsdb/">Easyfit Single/Double Rocker Wall Switch for Bluetooth LE - EWSSB/EWSDB</a></p></li>
<li><p><a class="reference external" href="https://www.enocean.com/en/products/enocean_modules_24ghz_ble/easyfit-single-double-rocker-pad-for-ble-esrpb-edrpb/">Easyfit Single/Double Rocker Pad for Bluetooth LE - ESRPB/EDRPB</a></p></li>
<li><p><a class="reference external" href="https://www.enocean.com/en/product/motion-detector-with-illumination-sensor-emdc-oem/?frequency=bluetooth">Easyfit Motion Detector with Illumination Sensor - EMDCB</a></p></li>
</ul>
<p>By default, the library supports one EnOcean device, and the <a class="reference internal" href="../../samples/bluetooth/enocean/README.html#enocean-sample"><span class="std std-ref">Bluetooth: EnOcean</span></a> sample supports only up to four devices.
However, when using the library with your application, you can configure the limit of supported devices to a higher number.</p>
</section>
<section id="usage">
<h2><a class="toc-backref" href="#id8">Usage</a><a class="headerlink" href="#usage" title="Permalink to this heading"></a></h2>
<p>The EnOcean library uses <code class="xref c c-func docutils literal notranslate"><span class="pre">bt_le_scan_cb_register()</span></code> to receive Bluetooth advertisement packets from nearby EnOcean devices.
The Bluetooth stack must be initialized separately, and Bluetooth scanning must be started by the application.
The Bluetooth mesh stack does this automatically, so when combined, the application does not need to perform any additional initialization.</p>
<section id="commissioning">
<span id="bt-enocean-commissioning"></span><h3><a class="toc-backref" href="#id9">Commissioning</a><a class="headerlink" href="#commissioning" title="Permalink to this heading"></a></h3>
<p>Before the library is able to process sensor or button messages from nearby EnOcean devices, the devices must be commissioned.
By default, the commissioning behavior may be triggered by interacting with the devices, as explained in the following sections.</p>
<p>To enable radio-based commissioning in your application, call <a class="reference internal" href="#c.bt_enocean_commissioning_enable" title="bt_enocean_commissioning_enable"><code class="xref c c-func docutils literal notranslate"><span class="pre">bt_enocean_commissioning_enable()</span></code></a>.</p>
<section id="commissioning-wall-switches">
<h4>Commissioning wall switches<a class="headerlink" href="#commissioning-wall-switches" title="Permalink to this heading"></a></h4>
<p>EnOcean Easyfit wall switches may be put into the commissioning mode by completing the following sequence:</p>
<ol class="arabic simple">
<li><p>Press and hold one of the buttons for more than 7 seconds before releasing it.</p></li>
<li><p>Quickly press and release the same button (hold for less than 2 seconds).</p></li>
<li><p>Press and hold the same button again for more than 7 seconds before releasing it.</p></li>
</ol>
<p>The switch will transmit its security key, which the library picks up and stores before calling the <a class="reference internal" href="#c.bt_enocean_callbacks.commissioned" title="bt_enocean_callbacks.commissioned"><code class="xref c c-member docutils literal notranslate"><span class="pre">bt_enocean_callbacks.commissioned</span></code></a> callback.</p>
<p>To exit the commissioning mode on a wall switch device, press any of the other buttons on the switch.
The library will now be reporting button presses through the <a class="reference internal" href="#c.bt_enocean_callbacks.button" title="bt_enocean_callbacks.button"><code class="xref c c-member docutils literal notranslate"><span class="pre">bt_enocean_callbacks.button</span></code></a> callback.</p>
</section>
<section id="commissioning-sensor-units">
<h4>Commissioning sensor units<a class="headerlink" href="#commissioning-sensor-units" title="Permalink to this heading"></a></h4>
<p>To have the EnOcean Easyfit sensor unit modules publish their security key, short-press the front button of the device.
The library registers the security key and stores it before calling <a class="reference internal" href="#c.bt_enocean_callbacks.commissioned" title="bt_enocean_callbacks.commissioned"><code class="xref c c-member docutils literal notranslate"><span class="pre">bt_enocean_callbacks.commissioned</span></code></a>.</p>
<p>The sensor unit never enters the commissioning mode.
After publishing its security key, the sensor unit automatically goes back to reporting sensor readings at periodic intervals.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>EnOcean devices may be configured to disable radio-based commissioning through NFC.
In such case, the security key must be obtained through manual input.</p>
</div>
</section>
</section>
<section id="observing-output">
<h3><a class="toc-backref" href="#id10">Observing output</a><a class="headerlink" href="#observing-output" title="Permalink to this heading"></a></h3>
<p>After commissioning an EnOcean device, its activity may be monitored through the <code class="xref c c-type docutils literal notranslate"><span class="pre">bt_enocean_handlers</span></code> callback functions passed to <a class="reference internal" href="#c.bt_enocean_init" title="bt_enocean_init"><code class="xref c c-func docutils literal notranslate"><span class="pre">bt_enocean_init()</span></code></a>.
See the <a class="reference internal" href="../../samples/bluetooth/enocean/README.html#enocean-sample"><span class="std std-ref">Bluetooth: EnOcean</span></a> for a demonstration of the handler callback functions.</p>
</section>
<section id="dependencies">
<h3><a class="toc-backref" href="#id11">Dependencies</a><a class="headerlink" href="#dependencies" title="Permalink to this heading"></a></h3>
<p>The EnOcean library depends on the <code class="xref kconfig kconfig-option docutils literal notranslate"><span class="pre">CONFIG_BT_OBSERVER</span></code> capability in the Bluetooth stack to function.</p>
<p>To enable persistent storage of device commissioning data, the <code class="xref kconfig kconfig-option docutils literal notranslate"><span class="pre">CONFIG_BT_SETTINGS</span></code> subsystem must also be enabled.</p>
</section>
</section>
<section id="api-documentation">
<h2><a class="toc-backref" href="#id12">API documentation</a><a class="headerlink" href="#api-documentation" title="Permalink to this heading"></a></h2>
<div class="line-block">
<div class="line">Header file: <code class="file docutils literal notranslate"><span class="pre">include/bluetooth/enocean.h</span></code></div>
<div class="line">Source file: <code class="file docutils literal notranslate"><span class="pre">subsys/bluetooth/enocean.c</span></code></div>
</div>
<dl>
<dt class="sig sig-object cpp">
<span class="target" id="group__bt__enocean"></span><em><span class="pre">group</span></em> <span class="sig-name descname"><span class="pre">bt_enocean</span></span></dt>
<dd><p>API for interacting with EnOcean Bluetooth wall switches and sensors. </p>
<div class="breathe-sectiondef docutils container">
<p class="breathe-sectiondef-title rubric" id="breathe-section-title-defines">Defines</p>
<dl class="c macro">
<dt class="sig sig-object c" id="c.BT_ENOCEAN_SWITCH_OA">
<span class="target" id="group__bt__enocean_1gab62d797a74f3e78195c3095719dfad4d"></span><span class="sig-name descname"><span class="n"><span class="pre">BT_ENOCEAN_SWITCH_OA</span></span></span><a class="headerlink" href="#c.BT_ENOCEAN_SWITCH_OA" title="Permalink to this definition"></a><br /></dt>
<dd><p>Double rocker switch top left button (OA) </p>
</dd></dl>

<dl class="c macro">
<dt class="sig sig-object c" id="c.BT_ENOCEAN_SWITCH_IA">
<span class="target" id="group__bt__enocean_1gacc1e62078abbc9a22ce506927d06de7e"></span><span class="sig-name descname"><span class="n"><span class="pre">BT_ENOCEAN_SWITCH_IA</span></span></span><a class="headerlink" href="#c.BT_ENOCEAN_SWITCH_IA" title="Permalink to this definition"></a><br /></dt>
<dd><p>Double rocker switch bottom left button (IA) </p>
</dd></dl>

<dl class="c macro">
<dt class="sig sig-object c" id="c.BT_ENOCEAN_SWITCH_OB">
<span class="target" id="group__bt__enocean_1gafcf9f009b023ea565e00ed2743ad6a15"></span><span class="sig-name descname"><span class="n"><span class="pre">BT_ENOCEAN_SWITCH_OB</span></span></span><a class="headerlink" href="#c.BT_ENOCEAN_SWITCH_OB" title="Permalink to this definition"></a><br /></dt>
<dd><p>Double rocker switch top right button (OB) </p>
</dd></dl>

<dl class="c macro">
<dt class="sig sig-object c" id="c.BT_ENOCEAN_SWITCH_IB">
<span class="target" id="group__bt__enocean_1gaf32955c5a932ad26b9fc654f8c7da968"></span><span class="sig-name descname"><span class="n"><span class="pre">BT_ENOCEAN_SWITCH_IB</span></span></span><a class="headerlink" href="#c.BT_ENOCEAN_SWITCH_IB" title="Permalink to this definition"></a><br /></dt>
<dd><p>Double rocker switch bottom right button (IB) </p>
</dd></dl>

<dl class="c macro">
<dt class="sig sig-object c" id="c.BT_ENOCEAN_SWITCH_O">
<span class="target" id="group__bt__enocean_1ga1720badcad37d9a0677ea1659953bb61"></span><span class="sig-name descname"><span class="n"><span class="pre">BT_ENOCEAN_SWITCH_O</span></span></span><a class="headerlink" href="#c.BT_ENOCEAN_SWITCH_O" title="Permalink to this definition"></a><br /></dt>
<dd><p>Single rocker switch top button (O) </p>
</dd></dl>

<dl class="c macro">
<dt class="sig sig-object c" id="c.BT_ENOCEAN_SWITCH_I">
<span class="target" id="group__bt__enocean_1gaff693820abebdcd6ac5db79cdfd2bab4"></span><span class="sig-name descname"><span class="n"><span class="pre">BT_ENOCEAN_SWITCH_I</span></span></span><a class="headerlink" href="#c.BT_ENOCEAN_SWITCH_I" title="Permalink to this definition"></a><br /></dt>
<dd><p>Single rocker switch bottom button (I) </p>
</dd></dl>

</div>
<div class="breathe-sectiondef docutils container">
<p class="breathe-sectiondef-title rubric" id="breathe-section-title-typedefs">Typedefs</p>
<dl class="c type">
<dt class="sig sig-object c" id="c.bt_enocean_foreach_cb_t">
<span class="target" id="group__bt__enocean_1ga5c30ded525763e33f60cc12a5622d0c3"></span><span class="k"><span class="pre">typedef</span></span><span class="w"> </span><span class="kt"><span class="pre">void</span></span><span class="w"> </span><span class="p"><span class="pre">(</span></span><span class="p"><span class="pre">*</span></span><span class="sig-name descname"><span class="n"><span class="pre">bt_enocean_foreach_cb_t</span></span></span><span class="p"><span class="pre">)</span></span><span class="p"><span class="pre">(</span></span><span class="k"><span class="pre">struct</span></span><span class="w"> </span><a class="reference internal" href="#c.bt_enocean_device" title="bt_enocean_device"><span class="n"><span class="pre">bt_enocean_device</span></span></a><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">dev</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="kt"><span class="pre">void</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">user_data</span></span><span class="p"><span class="pre">)</span></span><a class="headerlink" href="#c.bt_enocean_foreach_cb_t" title="Permalink to this definition"></a><br /></dt>
<dd><p>Visitor callback for <a class="reference internal" href="#group__bt__enocean_1gabb1d91da2d36fa0cf7f74b1643edfa29"><span class="std std-ref">bt_enocean_foreach</span></a>. </p>
<dl class="field-list simple">
<dt class="field-odd">Param dev</dt>
<dd class="field-odd"><p>EnOcean device </p>
</dd>
<dt class="field-even">Param user_data</dt>
<dd class="field-even"><p>User data passed to <a class="reference internal" href="#group__bt__enocean_1gabb1d91da2d36fa0cf7f74b1643edfa29"><span class="std std-ref">bt_enocean_foreach</span></a>. </p>
</dd>
</dl>
</dd></dl>

</div>
<div class="breathe-sectiondef docutils container">
<p class="breathe-sectiondef-title rubric" id="breathe-section-title-enums">Enums</p>
<dl class="c enum">
<dt class="sig sig-object c" id="c.bt_enocean_button_action">
<span class="target" id="group__bt__enocean_1gaafdee8cdc0ee7c4008c159137fdcc6e8"></span><span class="k"><span class="pre">enum</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">bt_enocean_button_action</span></span></span><a class="headerlink" href="#c.bt_enocean_button_action" title="Permalink to this definition"></a><br /></dt>
<dd><p>Type of button event </p>
<p><em>Values:</em></p>
<dl class="c enumerator">
<dt class="sig sig-object c" id="c.bt_enocean_button_action.BT_ENOCEAN_BUTTON_RELEASE">
<span class="target" id="group__bt__enocean_1ggaafdee8cdc0ee7c4008c159137fdcc6e8ac73ca348b89a06cee34da71fa7b63d2f"></span><span class="k"><span class="pre">enumerator</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">BT_ENOCEAN_BUTTON_RELEASE</span></span></span><a class="headerlink" href="#c.bt_enocean_button_action.BT_ENOCEAN_BUTTON_RELEASE" title="Permalink to this definition"></a><br /></dt>
<dd><p>Buttons were released. </p>
</dd></dl>

<dl class="c enumerator">
<dt class="sig sig-object c" id="c.bt_enocean_button_action.BT_ENOCEAN_BUTTON_PRESS">
<span class="target" id="group__bt__enocean_1ggaafdee8cdc0ee7c4008c159137fdcc6e8a1a295de2baea99e94214608f1f6bceed"></span><span class="k"><span class="pre">enumerator</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">BT_ENOCEAN_BUTTON_PRESS</span></span></span><a class="headerlink" href="#c.bt_enocean_button_action.BT_ENOCEAN_BUTTON_PRESS" title="Permalink to this definition"></a><br /></dt>
<dd><p>Buttons were pressed. </p>
</dd></dl>

</dd></dl>

</div>
<div class="breathe-sectiondef docutils container">
<p class="breathe-sectiondef-title rubric" id="breathe-section-title-functions">Functions</p>
<dl class="c function">
<dt class="sig sig-object c" id="c.bt_enocean_init">
<span class="target" id="group__bt__enocean_1ga7b223a92de11209c650e3315d8842fb3"></span><span class="kt"><span class="pre">void</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">bt_enocean_init</span></span></span><span class="sig-paren">(</span><span class="k"><span class="pre">const</span></span><span class="w"> </span><span class="k"><span class="pre">struct</span></span><span class="w"> </span><a class="reference internal" href="#c.bt_enocean_callbacks" title="bt_enocean_callbacks"><span class="n"><span class="pre">bt_enocean_callbacks</span></span></a><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">cb</span></span><span class="sig-paren">)</span><a class="headerlink" href="#c.bt_enocean_init" title="Permalink to this definition"></a><br /></dt>
<dd><p>Initialize the EnOcean subsystem. </p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>cb</strong> – Set of callbacks to receive events with. </p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="c function">
<dt class="sig sig-object c" id="c.bt_enocean_commissioning_enable">
<span class="target" id="group__bt__enocean_1ga7331d8866b7e55b80a305ef22f3b997b"></span><span class="kt"><span class="pre">void</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">bt_enocean_commissioning_enable</span></span></span><span class="sig-paren">(</span><span class="kt"><span class="pre">void</span></span><span class="sig-paren">)</span><a class="headerlink" href="#c.bt_enocean_commissioning_enable" title="Permalink to this definition"></a><br /></dt>
<dd><p>Enable automatic commissioning. </p>
<p>This function must be called for the module to start accepting commissioning packets. </p>
</dd></dl>

<dl class="c function">
<dt class="sig sig-object c" id="c.bt_enocean_commissioning_disable">
<span class="target" id="group__bt__enocean_1ga96e2a772cd76b4c729a190cd33d75b74"></span><span class="kt"><span class="pre">void</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">bt_enocean_commissioning_disable</span></span></span><span class="sig-paren">(</span><span class="kt"><span class="pre">void</span></span><span class="sig-paren">)</span><a class="headerlink" href="#c.bt_enocean_commissioning_disable" title="Permalink to this definition"></a><br /></dt>
<dd><p>Disable automatic commissioning. </p>
<p>Automatic commissioning will be disabled until <a class="reference internal" href="#group__bt__enocean_1ga7331d8866b7e55b80a305ef22f3b997b"><span class="std std-ref">bt_enocean_commissioning_enable</span></a> is called. Manual commissioning through <a class="reference internal" href="#group__bt__enocean_1gae2d4e50c29ebf89f790c1551af94e374"><span class="std std-ref">bt_enocean_commission</span></a> is unaffected. </p>
</dd></dl>

<dl class="c function">
<dt class="sig sig-object c" id="c.bt_enocean_commission">
<span class="target" id="group__bt__enocean_1gae2d4e50c29ebf89f790c1551af94e374"></span><span class="kt"><span class="pre">int</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">bt_enocean_commission</span></span></span><span class="sig-paren">(</span><span class="k"><span class="pre">const</span></span><span class="w"> </span><span class="n"><span class="pre">bt_addr_le_t</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">addr</span></span>, <span class="k"><span class="pre">const</span></span><span class="w"> </span><span class="n"><span class="pre">uint8_t</span></span><span class="w"> </span><span class="n"><span class="pre">key</span></span><span class="p"><span class="pre">[</span></span><span class="m"><span class="pre">16</span></span><span class="p"><span class="pre">]</span></span>, <span class="n"><span class="pre">uint32_t</span></span><span class="w"> </span><span class="n"><span class="pre">seq</span></span><span class="sig-paren">)</span><a class="headerlink" href="#c.bt_enocean_commission" title="Permalink to this definition"></a><br /></dt>
<dd><p>Manually commission an EnOcean device. </p>
<p>Allows devices to be commissioned based on out of band data, like NFC or QR codes.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>addr</strong> – Address of the commissioned device. </p></li>
<li><p><strong>key</strong> – Encryption key for the commissioned device. </p></li>
<li><p><strong>seq</strong> – Most recent sequence number of the device.</p></li>
</ul>
</dd>
<dt class="field-even">Return values</dt>
<dd class="field-even"><ul class="simple">
<li><p><strong>0</strong> – The device has been successfully commissioned. </p></li>
<li><p><strong>-EEXIST</strong> – This device has already been commissioned. </p></li>
<li><p><strong>-ENOMEM</strong> – There’s not enough space to commission a new device. </p></li>
<li><p><strong>-ECANCELED</strong> – The commissioning callback rejected the device. </p></li>
<li><p><strong>-EBUSY</strong> – Failed allocating persistent storage data. </p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="c function">
<dt class="sig sig-object c" id="c.bt_enocean_decommission">
<span class="target" id="group__bt__enocean_1ga512be4829717d9a3bd06b8cbf22988fd"></span><span class="kt"><span class="pre">void</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">bt_enocean_decommission</span></span></span><span class="sig-paren">(</span><span class="k"><span class="pre">struct</span></span><span class="w"> </span><a class="reference internal" href="#c.bt_enocean_device" title="bt_enocean_device"><span class="n"><span class="pre">bt_enocean_device</span></span></a><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">dev</span></span><span class="sig-paren">)</span><a class="headerlink" href="#c.bt_enocean_decommission" title="Permalink to this definition"></a><br /></dt>
<dd><p>Forget an EnOcean device. </p>
<p>Removes the EnOcean device’s security information, freeing up space for new devices. May be used directly in the <em>bt_enocean_callbacks::commissioning</em> callback to reject a device before it gets commissioned.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>dev</strong> – Device to forget. </p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="c function">
<dt class="sig sig-object c" id="c.bt_enocean_foreach">
<span class="target" id="group__bt__enocean_1gabb1d91da2d36fa0cf7f74b1643edfa29"></span><span class="n"><span class="pre">uint32_t</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">bt_enocean_foreach</span></span></span><span class="sig-paren">(</span><a class="reference internal" href="#c.bt_enocean_foreach_cb_t" title="bt_enocean_foreach_cb_t"><span class="n"><span class="pre">bt_enocean_foreach_cb_t</span></span></a><span class="w"> </span><span class="n"><span class="pre">cb</span></span>, <span class="kt"><span class="pre">void</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">user_data</span></span><span class="sig-paren">)</span><a class="headerlink" href="#c.bt_enocean_foreach" title="Permalink to this definition"></a><br /></dt>
<dd><p>Call the given callback for each commissioned EnOcean device. </p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>cb</strong> – Callback to call for each device </p></li>
<li><p><strong>user_data</strong> – User data to pass to the callback.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>The number of devices visited. </p>
</dd>
</dl>
</dd></dl>

</div>
<dl class="c struct">
<dt class="sig sig-object c" id="c.bt_enocean_sensor_data">
<span class="target" id="structbt__enocean__sensor__data"></span><span class="k"><span class="pre">struct</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">bt_enocean_sensor_data</span></span></span><a class="headerlink" href="#c.bt_enocean_sensor_data" title="Permalink to this definition"></a><br /></dt>
<dd><div class="docutils container">
<em>#include &lt;enocean.h&gt;</em></div>
<p>EnOcean sensor data message. </p>
<div class="breathe-sectiondef docutils container">
<p class="breathe-sectiondef-title rubric" id="breathe-section-title-public-members">Public Members</p>
<dl class="c var">
<dt class="sig sig-object c" id="c.bt_enocean_sensor_data.occupancy">
<span class="target" id="structbt__enocean__sensor__data_1a1074b78a9a66ecda0f5cbf810d5b104d"></span><span class="kt"><span class="pre">bool</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="sig-name descname"><span class="n"><span class="pre">occupancy</span></span></span><a class="headerlink" href="#c.bt_enocean_sensor_data.occupancy" title="Permalink to this definition"></a><br /></dt>
<dd><p>Current occupancy status. </p>
</dd></dl>

<dl class="c var">
<dt class="sig sig-object c" id="c.bt_enocean_sensor_data.light_sensor">
<span class="target" id="structbt__enocean__sensor__data_1a5f3eca117d8d6c5580bbefae1cf30f95"></span><span class="n"><span class="pre">uint16_t</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="sig-name descname"><span class="n"><span class="pre">light_sensor</span></span></span><a class="headerlink" href="#c.bt_enocean_sensor_data.light_sensor" title="Permalink to this definition"></a><br /></dt>
<dd><p>Light level in sensor (lx). </p>
</dd></dl>

<dl class="c var">
<dt class="sig sig-object c" id="c.bt_enocean_sensor_data.battery_voltage">
<span class="target" id="structbt__enocean__sensor__data_1a63263482478d2fef77e167d9a7e4edcb"></span><span class="n"><span class="pre">uint16_t</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="sig-name descname"><span class="n"><span class="pre">battery_voltage</span></span></span><a class="headerlink" href="#c.bt_enocean_sensor_data.battery_voltage" title="Permalink to this definition"></a><br /></dt>
<dd><p>Backup battery voltage (mV). </p>
</dd></dl>

<dl class="c var">
<dt class="sig sig-object c" id="c.bt_enocean_sensor_data.light_solar_cell">
<span class="target" id="structbt__enocean__sensor__data_1a40c9639f05f1b22d6b0215ee3c62691a"></span><span class="n"><span class="pre">uint16_t</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="sig-name descname"><span class="n"><span class="pre">light_solar_cell</span></span></span><a class="headerlink" href="#c.bt_enocean_sensor_data.light_solar_cell" title="Permalink to this definition"></a><br /></dt>
<dd><p>Light level in solar cell (lx). </p>
</dd></dl>

<dl class="c var">
<dt class="sig sig-object c" id="c.bt_enocean_sensor_data.energy_lvl">
<span class="target" id="structbt__enocean__sensor__data_1a1bbf8d4bf170d10d7316b1f03316946a"></span><span class="n"><span class="pre">uint8_t</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="sig-name descname"><span class="n"><span class="pre">energy_lvl</span></span></span><a class="headerlink" href="#c.bt_enocean_sensor_data.energy_lvl" title="Permalink to this definition"></a><br /></dt>
<dd><p>Energy level (percent). </p>
</dd></dl>

</div>
</dd></dl>

<dl class="c struct">
<dt class="sig sig-object c" id="c.bt_enocean_device">
<span class="target" id="structbt__enocean__device"></span><span class="k"><span class="pre">struct</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">bt_enocean_device</span></span></span><a class="headerlink" href="#c.bt_enocean_device" title="Permalink to this definition"></a><br /></dt>
<dd><div class="docutils container">
<em>#include &lt;enocean.h&gt;</em></div>
<p>EnOcean device representation. </p>
<div class="breathe-sectiondef docutils container">
<p class="breathe-sectiondef-title rubric" id="breathe-section-title-public-members">Public Members</p>
<dl class="c var">
<dt class="sig sig-object c" id="c.bt_enocean_device.seq">
<span class="target" id="structbt__enocean__device_1aa7b648470da8a5b989e97414683fb4f0"></span><span class="n"><span class="pre">uint32_t</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">seq</span></span></span><a class="headerlink" href="#c.bt_enocean_device.seq" title="Permalink to this definition"></a><br /></dt>
<dd><p>Most recent sequence number. </p>
</dd></dl>

<dl class="c var">
<dt class="sig sig-object c" id="c.bt_enocean_device.flags">
<span class="target" id="structbt__enocean__device_1aefa2553c0cd7502986d21db07ba459e2"></span><span class="n"><span class="pre">uint8_t</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">flags</span></span></span><a class="headerlink" href="#c.bt_enocean_device.flags" title="Permalink to this definition"></a><br /></dt>
<dd><p>Internal flags field. </p>
</dd></dl>

<dl class="c var">
<dt class="sig sig-object c" id="c.bt_enocean_device.rssi">
<span class="target" id="structbt__enocean__device_1a4f2835b7dce106e91339ac4da6e39278"></span><span class="n"><span class="pre">int8_t</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">rssi</span></span></span><a class="headerlink" href="#c.bt_enocean_device.rssi" title="Permalink to this definition"></a><br /></dt>
<dd><p>Most recent RSSI measurement. </p>
</dd></dl>

<dl class="c var">
<dt class="sig sig-object c" id="c.bt_enocean_device.addr">
<span class="target" id="structbt__enocean__device_1ab7c8540ae9772d00e665185c6c51e81f"></span><span class="n"><span class="pre">bt_addr_le_t</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">addr</span></span></span><a class="headerlink" href="#c.bt_enocean_device.addr" title="Permalink to this definition"></a><br /></dt>
<dd><p>Device address. </p>
</dd></dl>

<dl class="c var">
<dt class="sig sig-object c" id="c.bt_enocean_device.key">
<span class="target" id="structbt__enocean__device_1a4588eb5c0194b6f0678a779ce70d6913"></span><span class="n"><span class="pre">uint8_t</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">key</span></span></span><span class="p"><span class="pre">[</span></span><span class="m"><span class="pre">16</span></span><span class="p"><span class="pre">]</span></span><a class="headerlink" href="#c.bt_enocean_device.key" title="Permalink to this definition"></a><br /></dt>
<dd><p>Device key. </p>
</dd></dl>

</div>
</dd></dl>

<dl class="c struct">
<dt class="sig sig-object c" id="c.bt_enocean_callbacks">
<span class="target" id="structbt__enocean__callbacks"></span><span class="k"><span class="pre">struct</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">bt_enocean_callbacks</span></span></span><a class="headerlink" href="#c.bt_enocean_callbacks" title="Permalink to this definition"></a><br /></dt>
<dd><div class="docutils container">
<em>#include &lt;enocean.h&gt;</em></div>
<p>EnOcean callback functions. All callbacks are optional. </p>
<div class="breathe-sectiondef docutils container">
<p class="breathe-sectiondef-title rubric" id="breathe-section-title-public-members">Public Members</p>
<dl class="c var">
<dt class="sig sig-object c" id="c.bt_enocean_callbacks.button">
<span class="target" id="structbt__enocean__callbacks_1a385a0421750d773936928a4b5bd9ec60"></span><span class="kt"><span class="pre">void</span></span><span class="w"> </span><span class="p"><span class="pre">(</span></span><span class="p"><span class="pre">*</span></span><span class="sig-name descname"><span class="n"><span class="pre">button</span></span></span><span class="p"><span class="pre">)</span></span><span class="p"><span class="pre">(</span></span><span class="k"><span class="pre">struct</span></span><span class="w"> </span><a class="reference internal" href="#c.bt_enocean_device" title="bt_enocean_device"><span class="n"><span class="pre">bt_enocean_device</span></span></a><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">device</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="k"><span class="pre">enum</span></span><span class="w"> </span><a class="reference internal" href="#c.bt_enocean_button_action" title="bt_enocean_button_action"><span class="n"><span class="pre">bt_enocean_button_action</span></span></a><span class="w"> </span><span class="n"><span class="pre">action</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="n"><span class="pre">uint8_t</span></span><span class="w"> </span><span class="n"><span class="pre">changed</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="k"><span class="pre">const</span></span><span class="w"> </span><span class="n"><span class="pre">uint8_t</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">opt_data</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="n"><span class="pre">size_t</span></span><span class="w"> </span><span class="n"><span class="pre">opt_data_len</span></span><span class="p"><span class="pre">)</span></span><a class="headerlink" href="#c.bt_enocean_callbacks.button" title="Permalink to this definition"></a><br /></dt>
<dd><p>Callback for EnOcean Switch button presses. </p>
<p>This callback is called for every new button message from a commissioned EnOcean Switch. The set of changed button states on the switch is represented as a bitfield, with 4 bits representing the individual buttons.</p>
<p>See the <code class="docutils literal notranslate"><span class="pre">BT_ENOCEAN_SWITCH_*</span></code> defines for button mapping. Note that the single rocker switches only engages the third and fourth buttons.</p>
<dl class="field-list simple">
<dt class="field-odd">Param device</dt>
<dd class="field-odd"><p>EnOcean device generating the message. </p>
</dd>
<dt class="field-even">Param action</dt>
<dd class="field-even"><p>Button action type. </p>
</dd>
<dt class="field-odd">Param changed</dt>
<dd class="field-odd"><p>Bitfield of buttons affected by the action. </p>
</dd>
<dt class="field-even">Param opt_data</dt>
<dd class="field-even"><p>Optional data array from the message, or NULL. </p>
</dd>
<dt class="field-odd">Param opt_data_len</dt>
<dd class="field-odd"><p>Length of the optional data. </p>
</dd>
</dl>
</dd></dl>

<dl class="c var">
<dt class="sig sig-object c" id="c.bt_enocean_callbacks.sensor">
<span class="target" id="structbt__enocean__callbacks_1ad99acd814abaf0c09246c680ae77377a"></span><span class="kt"><span class="pre">void</span></span><span class="w"> </span><span class="p"><span class="pre">(</span></span><span class="p"><span class="pre">*</span></span><span class="sig-name descname"><span class="n"><span class="pre">sensor</span></span></span><span class="p"><span class="pre">)</span></span><span class="p"><span class="pre">(</span></span><span class="k"><span class="pre">struct</span></span><span class="w"> </span><a class="reference internal" href="#c.bt_enocean_device" title="bt_enocean_device"><span class="n"><span class="pre">bt_enocean_device</span></span></a><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">device</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="k"><span class="pre">const</span></span><span class="w"> </span><span class="k"><span class="pre">struct</span></span><span class="w"> </span><a class="reference internal" href="#c.bt_enocean_sensor_data" title="bt_enocean_sensor_data"><span class="n"><span class="pre">bt_enocean_sensor_data</span></span></a><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">data</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="k"><span class="pre">const</span></span><span class="w"> </span><span class="n"><span class="pre">uint8_t</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">opt_data</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="n"><span class="pre">size_t</span></span><span class="w"> </span><span class="n"><span class="pre">opt_data_len</span></span><span class="p"><span class="pre">)</span></span><a class="headerlink" href="#c.bt_enocean_callbacks.sensor" title="Permalink to this definition"></a><br /></dt>
<dd><p>Callback for EnOcean Sensor reports. </p>
<p>This callback is called for every new sensor message from a commissioned EnOcean Switch.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">data</span></code> parameter contains a set of optional fields, represented as pointers. Unknown fields are NULL pointers, and must be ignored.</p>
<dl class="field-list simple">
<dt class="field-odd">Param device</dt>
<dd class="field-odd"><p>EnOcean device generating the message. </p>
</dd>
<dt class="field-even">Param data</dt>
<dd class="field-even"><p>Sensor data. </p>
</dd>
<dt class="field-odd">Param opt_data</dt>
<dd class="field-odd"><p>Optional data array from the message, or NULL. </p>
</dd>
<dt class="field-even">Param opt_data_len</dt>
<dd class="field-even"><p>Length of the optional data. </p>
</dd>
</dl>
</dd></dl>

<dl class="c var">
<dt class="sig sig-object c" id="c.bt_enocean_callbacks.commissioned">
<span class="target" id="structbt__enocean__callbacks_1a4825cd9dc0c82d7b07ed405a4296dd81"></span><span class="kt"><span class="pre">void</span></span><span class="w"> </span><span class="p"><span class="pre">(</span></span><span class="p"><span class="pre">*</span></span><span class="sig-name descname"><span class="n"><span class="pre">commissioned</span></span></span><span class="p"><span class="pre">)</span></span><span class="p"><span class="pre">(</span></span><span class="k"><span class="pre">struct</span></span><span class="w"> </span><a class="reference internal" href="#c.bt_enocean_device" title="bt_enocean_device"><span class="n"><span class="pre">bt_enocean_device</span></span></a><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">device</span></span><span class="p"><span class="pre">)</span></span><a class="headerlink" href="#c.bt_enocean_callbacks.commissioned" title="Permalink to this definition"></a><br /></dt>
<dd><p>Callback for EnOcean commissioning. </p>
<p>This callback is called for every new EnOcean device being commissioned.</p>
<p>All devices must be commissioned before they can be observed. See the EnOcean device’s user guide for details.</p>
<p>A device can be rejected inside the callback by calling <a class="reference internal" href="#group__bt__enocean_1ga512be4829717d9a3bd06b8cbf22988fd"><span class="std std-ref">bt_enocean_decommission</span></a> with the <code class="docutils literal notranslate"><span class="pre">device's</span></code> address.</p>
<dl class="field-list simple">
<dt class="field-odd">Param device</dt>
<dd class="field-odd"><p>Device that got commissioned. </p>
</dd>
</dl>
</dd></dl>

<dl class="c var">
<dt class="sig sig-object c" id="c.bt_enocean_callbacks.decommissioned">
<span class="target" id="structbt__enocean__callbacks_1ab5ccd188e3ed42cb1020cac6740bfc25"></span><span class="kt"><span class="pre">void</span></span><span class="w"> </span><span class="p"><span class="pre">(</span></span><span class="p"><span class="pre">*</span></span><span class="sig-name descname"><span class="n"><span class="pre">decommissioned</span></span></span><span class="p"><span class="pre">)</span></span><span class="p"><span class="pre">(</span></span><span class="k"><span class="pre">struct</span></span><span class="w"> </span><a class="reference internal" href="#c.bt_enocean_device" title="bt_enocean_device"><span class="n"><span class="pre">bt_enocean_device</span></span></a><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">device</span></span><span class="p"><span class="pre">)</span></span><a class="headerlink" href="#c.bt_enocean_callbacks.decommissioned" title="Permalink to this definition"></a><br /></dt>
<dd><p>Callback for EnOcean decommissioning. </p>
<p>This callback is called for every new EnOcean device being decommissioned.</p>
<dl class="field-list simple">
<dt class="field-odd">Param device</dt>
<dd class="field-odd"><p>Device that got decommissioned. </p>
</dd>
</dl>
</dd></dl>

<dl class="c var">
<dt class="sig sig-object c" id="c.bt_enocean_callbacks.loaded">
<span class="target" id="structbt__enocean__callbacks_1a26ced49456a1642317d48d7d2edff2ab"></span><span class="kt"><span class="pre">void</span></span><span class="w"> </span><span class="p"><span class="pre">(</span></span><span class="p"><span class="pre">*</span></span><span class="sig-name descname"><span class="n"><span class="pre">loaded</span></span></span><span class="p"><span class="pre">)</span></span><span class="p"><span class="pre">(</span></span><span class="k"><span class="pre">struct</span></span><span class="w"> </span><a class="reference internal" href="#c.bt_enocean_device" title="bt_enocean_device"><span class="n"><span class="pre">bt_enocean_device</span></span></a><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">device</span></span><span class="p"><span class="pre">)</span></span><a class="headerlink" href="#c.bt_enocean_callbacks.loaded" title="Permalink to this definition"></a><br /></dt>
<dd><p>Callback for EnOcean devices being loaded from persistent storage. </p>
<p>This callback is called for every commissioned EnOcean device recovered from persistent storage.</p>
<dl class="field-list simple">
<dt class="field-odd">Param device</dt>
<dd class="field-odd"><p>Device that was loaded. </p>
</dd>
</dl>
</dd></dl>

</div>
</dd></dl>

</dd></dl>

</section>
</section>


           </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="gatt_dm.html" class="btn btn-neutral float-right" title="GATT Discovery Manager" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="conn_ctx.html" class="btn btn-neutral" title="Bluetooth connection context" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">

<table>
<tr>
<td>
    <p>
        &copy; Copyright 2019-2023, Nordic Semiconductor.
      Last updated on Mar 20, 2023.

    </p>
</td>
<td id="nordiclogo">
  <a href="https://www.nordicsemi.com/"><img src="../../_static/images/nordic-logo.png" border="0"/></a>
</td>
</tr>
</table>
  </div> 


</footer>

<div id="scroll-container">
  <button type="button" id="scroll-btn" class="btn">
    <svg xmlns="http://www.w3.org/2000/svg" height="24" viewBox="0 0 24 24" width="24"><path d="M0 0h24v24H0z" fill="none"/><path d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z" fill="#fff"/></svg>
  </button>
</div>

<script>
  const scrollBtn = document.querySelector("#scroll-btn");

  document.addEventListener("scroll", () => {
    if (window.scrollY > 400) {
          scrollBtn.style.visibility = "visible";
      } else {
          scrollBtn.style.visibility = "hidden";
      }
  });

  scrollBtn.addEventListener("click", () => {
      window.scrollTo({ top: 0, behavior: "smooth" });
  });
</script>
        </div>
      </div>
    </section>
  </div>
  
  <div class="rst-versions" data-toggle="rst-versions" role="note" aria-label="versions">
    <span class="rst-current-version" data-toggle="rst-current-version">
      <span class="fa fa-book"> nRF Connect SDK</span>
       <span class="fa fa-caret-down"></span>
    </span>
    <div class="rst-other-versions">
      
      <div class="rst-other-version ncs">
        <a href="../../../nrf/index.html">nRF Connect SDK</a>
      </div>
      
      <div class="rst-other-version nrfx">
        <a href="../../../nrfx/index.html">nrfx</a>
      </div>
      
      <div class="rst-other-version nrfxlib">
        <a href="../../../nrfxlib/README.html">nrfxlib</a>
      </div>
      
      <div class="rst-other-version zephyr">
        <a href="../../../zephyr/index.html">Zephyr Project</a>
      </div>
      
      <div class="rst-other-version mcuboot">
        <a href="../../../mcuboot/wrapper.html">MCUboot</a>
      </div>
      
      <div class="rst-other-version tfm">
        <a href="../../../tfm/index.html">Trusted Firmware-M</a>
      </div>
      
      <div class="rst-other-version matter">
        <a href="../../../matter/index.html">Matter</a>
      </div>
      
      <div class="rst-other-version kconfig">
        <a href="../../../kconfig/index.html">Kconfig Reference</a>
      </div>
    </div>
  </div><script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>