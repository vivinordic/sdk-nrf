<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Light Lightness Server &mdash; nRF Connect SDK 2.3.99 documentation</title>
      <link rel="stylesheet" href="../../../_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="../../../_static/css/nordic.css" type="text/css" />
      <link rel="stylesheet" href="../../../_static/togglebutton.css" type="text/css" />
      <link rel="stylesheet" href="../../../_static/css/nrf.css" type="text/css" />
      <link rel="stylesheet" href="../../../_static/tabs.css" type="text/css" /> 
  <!--[if lt IE 9]>
    <script src="../../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="../../../" id="documentation_options" src="../../../_static/documentation_options.js"></script>
        <script src="../../../_static/jquery.js"></script>
        <script src="../../../_static/underscore.js"></script>
        <script src="../../../_static/_sphinx_javascript_frameworks_compat.js"></script>
        <script src="../../../_static/doctools.js"></script>
        <script src="../../../_static/sphinx_highlight.js"></script>
        <script src="https://www.googletagmanager.com/gtag/js?id=G-ZPVZRKFQJR"></script>
        <script src="../../../_static/js/ga-tracker.js"></script>
        <script data-culture="EN" id="CookieConsent" type="text/javascript" src="https://policy.app.cookieinformation.com/uc.js"></script>
        <script>let toggleHintShow = 'Click to show';</script>
        <script>let toggleHintHide = 'Click to hide';</script>
        <script>let toggleOpenOnPrint = 'true';</script>
        <script src="../../../_static/togglebutton.js"></script>
        <script>var togglebuttonSelector = '.toggle, .admonition.dropdown';</script>
    <script src="../../../_static/js/theme.js"></script>
<script
  type="text/javascript"
  src="../../../_static/js/ncs.js"
></script>
<script src="../../../_static/js/bootstrap.bundle.min.js"></script>

    <link rel="index" title="Index" href="../../../genindex.html" />
    <link rel="search" title="Search" href="../../../search.html" />
    <link rel="next" title="Light Lightness Client" href="lightness_cli.html" />
    <link rel="prev" title="Light Lightness models" href="lightness.html" />
<link
  href="../../../_static/css/bootstrap.min.css"
  rel="stylesheet"
/>
<link
  rel="shortcut icon"
  href="../../../_static/images/favicon.ico"
/>

</head>

<body class="wy-body-for-nav">
<div class="announcement"></div>
<div class="d-print-none ncs-header">
  <div class="container-xl ncs-header-top">
    <div class="row h-100">
      <div class="d-none d-md-block col-2">
        <div class="bg-white py-4 px-3 ml-2 ncs-header-logo">
          <img
            class="ncs-header-logo"
            src="../../../_static/images/nordic-logo.png"
            alt=""
          />
        </div>
      </div>
      <div
        class="col-8 col-md-7 pl-md-4 d-flex align-self-center justify-content-center"
      >
        <form class="w-75" action="../../../search.html" method="get">
          <div class="form-group">
            <input
              type="text"
              name="q"
              class="ncs-search-input form-control"
              placeholder="Search all docs..."
            />
          </div>
        </form>
      </div>
      <div class="col-4 col-md-3 d-md-block p-3 text-end">
        <div class="dropdown">
          <button
            class="btn dropdown-toggle ncs-btn-versions"
            type="button"
            id="dropdownMenuButton1"
            data-bs-toggle="dropdown"
            aria-expanded="false"
          >
            <span class="d-none d-md-inline">nRF Connect SDK</span>
            <span id="ncsversion" class="d-inline"></span>
          </button>
          <div class="dropdown-menu" aria-labelledby="dropdownMenuButton"></div>
        </div>
      </div>
    </div>
  </div>
  <div class="ncs-header-nav">
    <div class="container-xl">
      <div class="row">
        <div class="col col-12 d-flex justify-content-center">
          <nav class="navbar navbar-dark navbar-expand-lg p-0">
            <span class="navbar-brand d-block d-lg-none py-2 pl-1"
              >Documentation sets</span
            >
            <button
              class="navbar-toggler"
              type="button"
              data-bs-toggle="collapse"
              data-bs-target="#navbarNavAltMarkup"
              aria-controls="navbarNavAltMarkup"
              aria-expanded="false"
              aria-label="Toggle navigation"
            >
              <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="navbarNavAltMarkup">
              <ul class="navbar-nav">
                <li class="nav-item active py-1 px-3">
                  <a
                    class="nav-link"
                    href="../../../../nrf/index.html"
                    >nRF Connect SDK</a
                  >
                </li>
                <li><hr class="dropdown-divider" /></li>
                <li class="nav-item  py-1 px-3">
                  <a
                    class="nav-link"
                    href="../../../../nrfx/index.html"
                    >nrfx</a
                  >
                </li>
                <li><hr class="dropdown-divider" /></li>
                <li class="nav-item  py-1 px-3">
                  <a
                    class="nav-link"
                    href="../../../../nrfxlib/README.html"
                    >nrfxlib</a
                  >
                </li>
                <li><hr class="dropdown-divider" /></li>
                <li class="nav-item  py-1 px-3">
                  <a
                    class="nav-link"
                    href="../../../../zephyr/index.html"
                    >Zephyr Project</a
                  >
                </li>
                <li><hr class="dropdown-divider" /></li>
                <li class="nav-item  py-1 px-3">
                  <a
                    class="nav-link"
                    href="../../../../mcuboot/wrapper.html"
                    >MCUboot</a
                  >
                </li>
                <li><hr class="dropdown-divider" /></li>
                <li class="nav-item  py-1 px-3">
                  <a
                    class="nav-link"
                    href="../../../../tfm/index.html"
                    >Trusted Firmware-M</a
                  >
                </li>
                <li><hr class="dropdown-divider" /></li>
                <li class="nav-item  py-1 px-3">
                  <a
                    class="nav-link"
                    href="../../../../matter/index.html"
                    >Matter</a
                  >
                </li>
                <li><hr class="dropdown-divider" /></li>
                <li class="nav-item  py-1 px-3">
                  <a
                    class="nav-link"
                    href="../../../../kconfig/index.html"
                    >Kconfig Reference</a
                  >
                </li>
                <li><hr class="dropdown-divider" /></li>
              </ul>
            </div>
          </nav>
        </div>
      </div>
    </div>
  </div>
</div>

  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
            <a href="../../../index.html" class="icon icon-home"> nRF Connect SDK
          </a>
              <div class="version">
                2.3.99
              </div>
<div id="searchbox" role="search">
  <div class="searchformwrapper">
    <form id="rtd-search-form" class="wy-form" action="../../../search.html" method="get">
      <input type="text" name="q" placeholder="Search docs" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
  </div>
</div>
<script>$('#searchbox').show(0);</script>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Contents</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../../introduction.html">Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../getting_started.html">Getting started</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../dev_model.html">Development model</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../app_dev.html">Application development</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../security.html">Security</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../ecosystem_integration.html">Ecosystems integration</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../nrf91.html">Working with nRF91 Series</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../nrf70.html">Working with nRF70 Series</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../nrf53.html">Working with nRF53 Series</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../nrf52.html">Working with nRF52 Series</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../protocols.html">Protocols</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../applications.html">Applications</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../samples.html">Samples</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../drivers.html">Drivers</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../../index.html">Libraries</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../../bin/index.html">Binary libraries</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="../index.html">Bluetooth libraries and services</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="../adv_prov.html">Bluetooth LE advertising providers</a></li>
<li class="toctree-l3"><a class="reference internal" href="../conn_ctx.html">Bluetooth connection context</a></li>
<li class="toctree-l3"><a class="reference internal" href="../enocean.html">Bluetooth EnOcean</a></li>
<li class="toctree-l3"><a class="reference internal" href="../gatt_dm.html">GATT Discovery Manager</a></li>
<li class="toctree-l3"><a class="reference internal" href="../gatt_pool.html">Bluetooth GATT attribute pools</a></li>
<li class="toctree-l3 current"><a class="reference internal" href="../mesh.html">Bluetooth mesh profile</a><ul class="current">
<li class="toctree-l4"><a class="reference internal" href="model_types.html">Bluetooth mesh models overview</a></li>
<li class="toctree-l4 current"><a class="reference internal" href="models.html">Bluetooth mesh models</a></li>
<li class="toctree-l4"><a class="reference internal" href="properties.html">Bluetooth mesh properties</a></li>
<li class="toctree-l4"><a class="reference internal" href="dk_prov.html">Bluetooth mesh provisioning handler for Nordic DKs</a></li>
<li class="toctree-l4"><a class="reference internal" href="sensor.html">Bluetooth mesh sensors</a></li>
<li class="toctree-l4"><a class="reference internal" href="sensor_types.html">Bluetooth mesh sensor types</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../rpc.html">Bluetooth Low Energy Remote Procedure Call</a></li>
<li class="toctree-l3"><a class="reference internal" href="../scan.html">Scanning module</a></li>
<li class="toctree-l3"><a class="reference internal" href="../services/ams_client.html">Apple Media Service (AMS) Client</a></li>
<li class="toctree-l3"><a class="reference internal" href="../services/ancs_client.html">Apple Notification Center Service (ANCS) Client</a></li>
<li class="toctree-l3"><a class="reference internal" href="../services/bas_client.html">GATT Battery Service (BAS) Client</a></li>
<li class="toctree-l3"><a class="reference internal" href="../services/bms.html">GATT Bond Management Service (BMS)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../services/cgms.html">GATT Continuous Glucose Monitoring Service (CGMS)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../services/cts_client.html">GATT Current Time Service (CTS) Client</a></li>
<li class="toctree-l3"><a class="reference internal" href="../services/ddfs.html">Direction and Distance Finding Service (DDFS)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../services/dfu_smp.html">GATT DFU SMP Service Client</a></li>
<li class="toctree-l3"><a class="reference internal" href="../services/fast_pair.html">Google Fast Pair Service (GFPS)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../services/gattp.html">Generic Attribute (GATT) Profile</a></li>
<li class="toctree-l3"><a class="reference internal" href="../services/hids.html">GATT Human Interface Device (HID) Service</a></li>
<li class="toctree-l3"><a class="reference internal" href="../services/hogp.html">GATT Human Interface Device Service (HIDS) Client</a></li>
<li class="toctree-l3"><a class="reference internal" href="../services/hrs_client.html">GATT Heart Rate Service (HRS) Client</a></li>
<li class="toctree-l3"><a class="reference internal" href="../services/latency.html">GATT Latency Service</a></li>
<li class="toctree-l3"><a class="reference internal" href="../services/latency_client.html">GATT Latency Client</a></li>
<li class="toctree-l3"><a class="reference internal" href="../services/lbs.html">LED Button Service (LBS)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../services/mds.html">Memfault Diagnostic Service (MDS)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../services/nsms.html">Nordic Status Message Service (NSMS)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../services/nus.html">Nordic UART Service (NUS)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../services/nus_client.html">Nordic UART Service (NUS) Client</a></li>
<li class="toctree-l3"><a class="reference internal" href="../services/rscs.html">Running Speed and Cadence Service (RSCS)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../services/throughput.html">GATT Throughput Service</a></li>
<li class="toctree-l3"><a class="reference internal" href="../services/wifi_prov.html">Wi-Fi Provisioning Service</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../bootloader/index.html">Bootloader libraries</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../caf/index.html">Common Application Framework</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../debug/index.html">Debug libraries</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../dfu/index.html">DFU libraries</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../gazell/index.html">Gazell libraries</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../modem/index.html">Modem libraries</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../mpsl/index.html">Multiprotocol Service Layer libraries</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../networking/index.html">Libraries for networking</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../nfc/index.html">Libraries for NFC</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../nrf_rpc/index.html">nRF RPC libraries</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../others/index.html">Other libraries</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../shell/index.html">Shell libraries</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../tfm/index.html">TF-M libraries</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../zigbee/index.html">Libraries for Zigbee</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../scripts.html">Scripts</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../release_notes.html">Release notes</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../known_issues.html">Known issues</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../software_maturity.html">Software maturity levels</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../documentation.html">About this documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../glossary.html">Glossary</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../../index.html">nRF Connect SDK</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../../../index.html" class="icon icon-home"></a></li>
          <li class="breadcrumb-item"><a href="../../index.html">Libraries</a></li>
          <li class="breadcrumb-item"><a href="../index.html">Bluetooth libraries and services</a></li>
          <li class="breadcrumb-item"><a href="../mesh.html">Bluetooth mesh profile</a></li>
          <li class="breadcrumb-item"><a href="models.html">Bluetooth mesh models</a></li>
          <li class="breadcrumb-item"><a href="lightness.html">Light Lightness models</a></li>
      <li class="breadcrumb-item active">Light Lightness Server</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../../../_sources/libraries/bluetooth_services/mesh/lightness_srv.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="light-lightness-server">
<span id="bt-mesh-lightness-srv-readme"></span><h1>Light Lightness Server<a class="headerlink" href="#light-lightness-server" title="Permalink to this heading"></a></h1>
<div class="contents local topic" id="contents">
<ul class="simple">
<li><p><a class="reference internal" href="#states" id="id7">States</a></p></li>
<li><p><a class="reference internal" href="#extended-models" id="id8">Extended models</a></p></li>
<li><p><a class="reference internal" href="#persistent-storage" id="id9">Persistent storage</a></p></li>
<li><p><a class="reference internal" href="#api-documentation" id="id10">API documentation</a></p></li>
</ul>
</div>
<p>The Light Lightness Server represents a single light on a mesh device.
It should be instantiated in the light fixture node.</p>
<p>The Light Lightness Server adds the following new model instances in the composition data, in addition to the extended <a class="reference internal" href="gen_lvl_srv.html#bt-mesh-lvl-srv-readme"><span class="std std-ref">Generic Level Server</span></a> and <a class="reference internal" href="gen_ponoff_srv.html#bt-mesh-ponoff-srv-readme"><span class="std std-ref">Generic Power OnOff Server</span></a> models:</p>
<ul class="simple">
<li><p>Light Lightness Server</p></li>
<li><p>Light Lightness Setup Server</p></li>
</ul>
<p>These model instances share the states of Light Lightness Server, but accept different messages.
This allows for a fine-grained control of the access rights for the Light Lightness states, as these model instances can be bound to different application keys:</p>
<ul class="simple">
<li><p>The Light Lightness Server only provides write access to the Light state for the user, in addition to read access to all the meta states.</p></li>
<li><p>The Light Lightness Setup Server provides write access to the Default Light and Light Range meta states.
This allows the configurator devices to set up the range and the default value for the Light state.</p></li>
</ul>
<section id="states">
<h2><a class="toc-backref" href="#id7">States</a><a class="headerlink" href="#states" title="Permalink to this heading"></a></h2>
<p>The Generic Power OnOff Server model contains the following states:</p>
<dl>
<dt>Light: <code class="docutils literal notranslate"><span class="pre">uint16_t</span></code></dt><dd><p>The Light state represents the emitted light level of an element, and ranges from <code class="docutils literal notranslate"><span class="pre">0</span></code> to <code class="docutils literal notranslate"><span class="pre">65535</span></code>.
The Light state is bound to the Generic Level State of the extended <a class="reference internal" href="gen_lvl_srv.html#bt-mesh-lvl-srv-readme"><span class="std std-ref">Generic Level Server</span></a>:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">Light (Actual) = Generic Level + 32768</span>
</pre></div>
</div>
<p>The Generic OnOff state of <a class="reference internal" href="gen_onoff_srv.html#bt-mesh-onoff-srv-readme"><span class="std std-ref">Generic OnOff Server</span></a> (extended through the <a class="reference internal" href="gen_ponoff_srv.html#bt-mesh-ponoff-srv-readme"><span class="std std-ref">Generic Power OnOff Server</span></a>) is derived from the Light state:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">Generic OnOff = (Light &gt; 0)</span>
</pre></div>
</div>
<p>Conversely, if the Generic OnOff state is changed to <code class="docutils literal notranslate"><span class="pre">Off</span></code>, the Light state is set to <code class="docutils literal notranslate"><span class="pre">0</span></code>.
If the Generic OnOff state is changed to <code class="docutils literal notranslate"><span class="pre">On</span></code> and the Default Light state is set, the Light state is set to the value of the Default Light state.
If the Generic OnOff state is changed to <code class="docutils literal notranslate"><span class="pre">On</span></code> and the Default Light state is not set, the Light state is set to the last known non-zero value.</p>
<p>The Light state power-up behavior is determined by the On Power Up state of the extended <a class="reference internal" href="gen_ponoff_srv.html#bt-mesh-ponoff-srv-readme"><span class="std std-ref">Generic Power OnOff Server</span></a>:</p>
<ul class="simple">
<li><p><a class="reference internal" href="gen_ponoff.html#c.bt_mesh_on_power_up.BT_MESH_ON_POWER_UP_OFF" title="BT_MESH_ON_POWER_UP_OFF"><code class="xref c c-enumerator docutils literal notranslate"><span class="pre">BT_MESH_ON_POWER_UP_OFF</span></code></a> - The Light state is set to <code class="docutils literal notranslate"><span class="pre">0</span></code> on power-up.</p></li>
<li><p><a class="reference internal" href="gen_ponoff.html#c.bt_mesh_on_power_up.BT_MESH_ON_POWER_UP_ON" title="BT_MESH_ON_POWER_UP_ON"><code class="xref c c-enumerator docutils literal notranslate"><span class="pre">BT_MESH_ON_POWER_UP_ON</span></code></a> - The Light state is set to Default Light on power-up, or to the last known non-zero Light state if the Default Light is not set.</p></li>
<li><p><a class="reference internal" href="gen_ponoff.html#c.bt_mesh_on_power_up.BT_MESH_ON_POWER_UP_RESTORE" title="BT_MESH_ON_POWER_UP_RESTORE"><code class="xref c c-enumerator docutils literal notranslate"><span class="pre">BT_MESH_ON_POWER_UP_RESTORE</span></code></a> - The Light state is set to the last known Light level (zero or non-zero).</p></li>
</ul>
<p>Your application is expected to hold the state memory and provide access to the state through the <a class="reference internal" href="#c.bt_mesh_lightness_srv_handlers" title="bt_mesh_lightness_srv_handlers"><code class="xref c c-struct docutils literal notranslate"><span class="pre">bt_mesh_lightness_srv_handlers</span></code></a> handler structure.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>If the Lightness Server is part of an xyL, CTL or HSL Server, it will publish the xyL, CTL or HSL status whenever the Light state changes.
This is not handled automatically by the xyL, CTL or HSL Servers.</p>
</div>
</dd>
<dt>Default Light: <code class="docutils literal notranslate"><span class="pre">int16_t</span></code></dt><dd><p>The Default Light state is a meta state that controls the default non-zero Light level.
It is used when the light is turned on, but its exact level is not specified.</p>
<p>The memory for the Default Light state is held by the model, and the application may receive updates on state changes through the <a class="reference internal" href="#c.bt_mesh_lightness_srv_handlers.default_update" title="bt_mesh_lightness_srv_handlers.default_update"><code class="xref c c-member docutils literal notranslate"><span class="pre">bt_mesh_lightness_srv_handlers.default_update</span></code></a> callback.</p>
<p>The Default Light state uses the configured lightness representation.</p>
</dd>
<dt>Light Range: <a class="reference internal" href="lightness.html#c.bt_mesh_lightness_range" title="bt_mesh_lightness_range"><code class="xref c c-struct docutils literal notranslate"><span class="pre">bt_mesh_lightness_range</span></code></a></dt><dd><p>The Light Range state is a meta state that determines the accepted Light level range.</p>
<p>If the Light level is set to a value outside the current Light Range, it is moved to fit inside the range.</p>
<p>If the Light Range changes to exclude the current Light level, the Light level should be changed accordingly.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The Light level may always be set to zero, even if this is outside the current Light Range.</p>
</div>
<p>The memory for the Light Range state is held by the model, and the application may receive updates on state changes through the <a class="reference internal" href="#c.bt_mesh_lightness_srv_handlers.range_update" title="bt_mesh_lightness_srv_handlers.range_update"><code class="xref c c-member docutils literal notranslate"><span class="pre">bt_mesh_lightness_srv_handlers.range_update</span></code></a> callback.</p>
<p>The Light Range state uses the configured lightness representation.</p>
</dd>
</dl>
</section>
<section id="extended-models">
<h2><a class="toc-backref" href="#id8">Extended models</a><a class="headerlink" href="#extended-models" title="Permalink to this heading"></a></h2>
<p>The Light Lightness Server extends the following models:</p>
<ul class="simple">
<li><p><a class="reference internal" href="gen_lvl_srv.html#bt-mesh-lvl-srv-readme"><span class="std std-ref">Generic Level Server</span></a></p></li>
<li><p><a class="reference internal" href="gen_ponoff_srv.html#bt-mesh-ponoff-srv-readme"><span class="std std-ref">Generic Power OnOff Server</span></a></p></li>
</ul>
<p>As the states of both extended models are bound to states in the Light Lightness Server, the states of the extended models are not exposed directly to the application.</p>
</section>
<section id="persistent-storage">
<h2><a class="toc-backref" href="#id9">Persistent storage</a><a class="headerlink" href="#persistent-storage" title="Permalink to this heading"></a></h2>
<p>The Light Lightness Server stores the following information:</p>
<ul class="simple">
<li><p>Any changes to the Default Light and Light Range states.</p></li>
<li><p>The last known non-zero Light level.</p></li>
<li><p>Whether the light is on or off.</p></li>
</ul>
<p>This information is used to reestablish the correct Light level when the device powers up.</p>
<p>If <code class="xref kconfig kconfig-option docutils literal notranslate"><span class="pre">CONFIG_BT_SETTINGS</span></code> is enabled, the Light Lightness Server stores all its states persistently using a configurable storage delay to stagger storing.
See <code class="xref kconfig kconfig-option docutils literal notranslate"><span class="pre">CONFIG_BT_MESH_MODEL_SRV_STORE_TIMEOUT</span></code>.</p>
<p>The Light Lightness Server can use the <a class="reference internal" href="../../others/emds.html#emds-readme"><span class="std std-ref">emergency data storage (EMDS)</span></a> together with persistent storage for the following purposes:</p>
<ul class="simple">
<li><p>Extend the flash memory life expectancy.</p></li>
<li><p>Reduce the use of resources by reducing the number of writes to flash memory.</p></li>
</ul>
<p>If option <code class="xref kconfig kconfig-option docutils literal notranslate"><span class="pre">CONFIG_EMDS</span></code> is enabled, the Light Lightness Server continues to store the default light and light range states to the flash memory through the settings library, but the last known non-zero Light level and whether the light is on or off are stored by using the <a class="reference internal" href="../../others/emds.html#emds-readme"><span class="std std-ref">EMDS</span></a> library. The values stored by <a class="reference internal" href="../../others/emds.html#emds-readme"><span class="std std-ref">EMDS</span></a> will be lost at first boot when the <code class="xref kconfig kconfig-option docutils literal notranslate"><span class="pre">CONFIG_EMDS</span></code> is enabled.
This split is done so the values that may change often are stored on shutdown only, while the rarely changed values are immediately stored in flash memory.</p>
</section>
<section id="api-documentation">
<h2><a class="toc-backref" href="#id10">API documentation</a><a class="headerlink" href="#api-documentation" title="Permalink to this heading"></a></h2>
<div class="line-block">
<div class="line">Header file: <code class="file docutils literal notranslate"><span class="pre">include/bluetooth/mesh/lightness_srv.h</span></code></div>
<div class="line">Source file: <code class="file docutils literal notranslate"><span class="pre">subsys/bluetooth/mesh/lightness_srv.c</span></code></div>
</div>
<dl>
<dt class="sig sig-object cpp">
<span class="target" id="group__bt__mesh__lightness__srv"></span><em><span class="pre">group</span></em> <span class="sig-name descname"><span class="pre">bt_mesh_lightness_srv</span></span></dt>
<dd><p>API for the Light Lightness Server. </p>
<div class="breathe-sectiondef docutils container">
<p class="breathe-sectiondef-title rubric" id="breathe-section-title-defines">Defines</p>
<dl class="c macro">
<dt class="sig sig-object c" id="c.BT_MESH_LIGHTNESS_SRV_INIT">
<span class="target" id="group__bt__mesh__lightness__srv_1gad4d882bb56e763ede5cf4a9ae2744173"></span><span class="sig-name descname"><span class="n"><span class="pre">BT_MESH_LIGHTNESS_SRV_INIT</span></span></span><span class="sig-paren">(</span><span class="n"><span class="pre">_handlers</span></span><span class="sig-paren">)</span><a class="headerlink" href="#c.BT_MESH_LIGHTNESS_SRV_INIT" title="Permalink to this definition"></a><br /></dt>
<dd><p>Initialization parameters for <a class="reference internal" href="#group__bt__mesh__lightness__srv"><span class="std std-ref">Light Lightness Server model</span></a>. </p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>_handlers</strong> – <strong>[in]</strong> Handler callback structure. </p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="c macro">
<dt class="sig sig-object c" id="c.BT_MESH_MODEL_LIGHTNESS_SRV">
<span class="target" id="group__bt__mesh__lightness__srv_1ga11bf9c8d17f93fa3326f23788846a31d"></span><span class="sig-name descname"><span class="n"><span class="pre">BT_MESH_MODEL_LIGHTNESS_SRV</span></span></span><span class="sig-paren">(</span><span class="n"><span class="pre">_srv</span></span><span class="sig-paren">)</span><a class="headerlink" href="#c.BT_MESH_MODEL_LIGHTNESS_SRV" title="Permalink to this definition"></a><br /></dt>
<dd><p>Light Lightness model entry. </p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>_srv</strong> – <strong>[in]</strong> Pointer to a <a class="reference internal" href="#group__bt__mesh__lightness__srv"><span class="std std-ref">Light Lightness Server model</span></a> instance. </p></li>
</ul>
</dd>
</dl>
</dd></dl>

</div>
<div class="breathe-sectiondef docutils container">
<p class="breathe-sectiondef-title rubric" id="breathe-section-title-functions">Functions</p>
<dl class="c function">
<dt class="sig sig-object c" id="c.bt_mesh_lightness_srv_pub">
<span class="target" id="group__bt__mesh__lightness__srv_1ga103c0a55ee61e46019c85a98293e0412"></span><span class="kt"><span class="pre">int</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">bt_mesh_lightness_srv_pub</span></span></span><span class="sig-paren">(</span><span class="k"><span class="pre">struct</span></span><span class="w"> </span><a class="reference internal" href="#c.bt_mesh_lightness_srv" title="bt_mesh_lightness_srv"><span class="n"><span class="pre">bt_mesh_lightness_srv</span></span></a><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">srv</span></span>, <span class="k"><span class="pre">struct</span></span><span class="w"> </span><span class="n"><span class="pre">bt_mesh_msg_ctx</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">ctx</span></span>, <span class="k"><span class="pre">const</span></span><span class="w"> </span><span class="k"><span class="pre">struct</span></span><span class="w"> </span><a class="reference internal" href="lightness.html#c.bt_mesh_lightness_status" title="bt_mesh_lightness_status"><span class="n"><span class="pre">bt_mesh_lightness_status</span></span></a><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">status</span></span><span class="sig-paren">)</span><a class="headerlink" href="#c.bt_mesh_lightness_srv_pub" title="Permalink to this definition"></a><br /></dt>
<dd><p>Publish the current Light state. </p>
<p>Publishes a Light Lightness status message with the configured publish parameters, or using the given message context.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This API is only used for publishing unprompted status messages. Response messages for get and set messages are handled internally.</p>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>srv</strong> – <strong>[in]</strong> Server instance to publish with. </p></li>
<li><p><strong>ctx</strong> – <strong>[in]</strong> Message context, or NULL to publish with the configured parameters. </p></li>
<li><p><strong>status</strong> – <strong>[in]</strong> Status to publish.</p></li>
</ul>
</dd>
<dt class="field-even">Return values</dt>
<dd class="field-even"><ul class="simple">
<li><p><strong>-EADDRNOTAVAIL</strong> – A message context was not provided and publishing is not configured. </p></li>
<li><p><strong>-EAGAIN</strong> – The device has not been provisioned. </p></li>
</ul>
</dd>
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>0 Successfully published the current Light state. </p>
</dd>
</dl>
</dd></dl>

</div>
<dl class="c struct">
<dt class="sig sig-object c" id="c.bt_mesh_lightness_srv_handlers">
<span class="target" id="structbt__mesh__lightness__srv__handlers"></span><span class="k"><span class="pre">struct</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">bt_mesh_lightness_srv_handlers</span></span></span><a class="headerlink" href="#c.bt_mesh_lightness_srv_handlers" title="Permalink to this definition"></a><br /></dt>
<dd><div class="docutils container">
<em>#include &lt;lightness_srv.h&gt;</em></div>
<p>Collection of handler callbacks for the Light Lightness Server. </p>
<div class="breathe-sectiondef docutils container">
<p class="breathe-sectiondef-title rubric" id="breathe-section-title-public-members">Public Members</p>
<dl class="c var">
<dt class="sig sig-object c" id="c.bt_mesh_lightness_srv_handlers.light_set">
<span class="target" id="structbt__mesh__lightness__srv__handlers_1a899fadb2a8d757554d4d1fd65a27ea02"></span><span class="kt"><span class="pre">void</span></span><span class="w"> </span><span class="p"><span class="pre">(</span></span><span class="p"><span class="pre">*</span></span><span class="k"><span class="pre">const</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">light_set</span></span></span><span class="p"><span class="pre">)</span></span><span class="p"><span class="pre">(</span></span><span class="k"><span class="pre">struct</span></span><span class="w"> </span><a class="reference internal" href="#c.bt_mesh_lightness_srv" title="bt_mesh_lightness_srv"><span class="n"><span class="pre">bt_mesh_lightness_srv</span></span></a><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">srv</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="k"><span class="pre">struct</span></span><span class="w"> </span><span class="n"><span class="pre">bt_mesh_msg_ctx</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">ctx</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="k"><span class="pre">const</span></span><span class="w"> </span><span class="k"><span class="pre">struct</span></span><span class="w"> </span><a class="reference internal" href="lightness.html#c.bt_mesh_lightness_set" title="bt_mesh_lightness_set"><span class="n"><span class="pre">bt_mesh_lightness_set</span></span></a><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">set</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="k"><span class="pre">struct</span></span><span class="w"> </span><a class="reference internal" href="lightness.html#c.bt_mesh_lightness_status" title="bt_mesh_lightness_status"><span class="n"><span class="pre">bt_mesh_lightness_status</span></span></a><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">rsp</span></span><span class="p"><span class="pre">)</span></span><a class="headerlink" href="#c.bt_mesh_lightness_srv_handlers.light_set" title="Permalink to this definition"></a><br /></dt>
<dd><p>Set the Light state. </p>
<p>When a set message is received, the model publishes a status message, with the response set to <code class="docutils literal notranslate"><span class="pre">rsp</span></code>. When an acknowledged set message is received, the model also sends a response back to a client. If a state change is non-instantaneous, for example when <a class="reference internal" href="model_types.html#group__bt__mesh__model__types_1gaa845685eb265d1294b17bb80fbde4996"><span class="std std-ref">bt_mesh_model_transition_time</span></a> returns a nonzero value, the application is responsible for publishing a value of the Light state at the end of the transition.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This handler is mandatory.</p>
</div>
<dl class="field-list simple">
<dt class="field-odd">Param srv</dt>
<dd class="field-odd"><p><strong>[in]</strong> Server to set the Light state of. </p>
</dd>
<dt class="field-even">Param ctx</dt>
<dd class="field-even"><p><strong>[in]</strong> Message context, or NULL if the state change was not a result of a message. </p>
</dd>
<dt class="field-odd">Param set</dt>
<dd class="field-odd"><p><strong>[in]</strong> Parameters of the state change. </p>
</dd>
<dt class="field-even">Param rsp</dt>
<dd class="field-even"><p><strong>[out]</strong> Response structure to be filled. </p>
</dd>
</dl>
</dd></dl>

<dl class="c var">
<dt class="sig sig-object c" id="c.bt_mesh_lightness_srv_handlers.light_get">
<span class="target" id="structbt__mesh__lightness__srv__handlers_1adb1afab78df3a233c1a708ea3ea487d5"></span><span class="kt"><span class="pre">void</span></span><span class="w"> </span><span class="p"><span class="pre">(</span></span><span class="p"><span class="pre">*</span></span><span class="k"><span class="pre">const</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">light_get</span></span></span><span class="p"><span class="pre">)</span></span><span class="p"><span class="pre">(</span></span><span class="k"><span class="pre">struct</span></span><span class="w"> </span><a class="reference internal" href="#c.bt_mesh_lightness_srv" title="bt_mesh_lightness_srv"><span class="n"><span class="pre">bt_mesh_lightness_srv</span></span></a><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">srv</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="k"><span class="pre">struct</span></span><span class="w"> </span><span class="n"><span class="pre">bt_mesh_msg_ctx</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">ctx</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="k"><span class="pre">struct</span></span><span class="w"> </span><a class="reference internal" href="lightness.html#c.bt_mesh_lightness_status" title="bt_mesh_lightness_status"><span class="n"><span class="pre">bt_mesh_lightness_status</span></span></a><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">rsp</span></span><span class="p"><span class="pre">)</span></span><a class="headerlink" href="#c.bt_mesh_lightness_srv_handlers.light_get" title="Permalink to this definition"></a><br /></dt>
<dd><p>Get the current Light state. </p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This handler is mandatory.</p>
</div>
<dl class="field-list simple">
<dt class="field-odd">Param srv</dt>
<dd class="field-odd"><p><strong>[in]</strong> Server to get the Light state of. </p>
</dd>
<dt class="field-even">Param ctx</dt>
<dd class="field-even"><p><strong>[in]</strong> Context of the get message that triggered the query, or NULL if it was not triggered by a message. </p>
</dd>
<dt class="field-odd">Param rsp</dt>
<dd class="field-odd"><p><strong>[out]</strong> Response structure to be filled. </p>
</dd>
</dl>
</dd></dl>

<dl class="c var">
<dt class="sig sig-object c" id="c.bt_mesh_lightness_srv_handlers.default_update">
<span class="target" id="structbt__mesh__lightness__srv__handlers_1a93e3ce19a8bcbb1c52b93ae3c1b31ffb"></span><span class="kt"><span class="pre">void</span></span><span class="w"> </span><span class="p"><span class="pre">(</span></span><span class="p"><span class="pre">*</span></span><span class="k"><span class="pre">const</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">default_update</span></span></span><span class="p"><span class="pre">)</span></span><span class="p"><span class="pre">(</span></span><span class="k"><span class="pre">struct</span></span><span class="w"> </span><a class="reference internal" href="#c.bt_mesh_lightness_srv" title="bt_mesh_lightness_srv"><span class="n"><span class="pre">bt_mesh_lightness_srv</span></span></a><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">srv</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="k"><span class="pre">struct</span></span><span class="w"> </span><span class="n"><span class="pre">bt_mesh_msg_ctx</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">ctx</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="n"><span class="pre">uint16_t</span></span><span class="w"> </span><span class="n"><span class="pre">old_default</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="n"><span class="pre">uint16_t</span></span><span class="w"> </span><span class="n"><span class="pre">new_default</span></span><span class="p"><span class="pre">)</span></span><a class="headerlink" href="#c.bt_mesh_lightness_srv_handlers.default_update" title="Permalink to this definition"></a><br /></dt>
<dd><p>The Default Light state has changed. </p>
<p>The user may implement this handler to subscribe to changes to the Default Light state.</p>
<dl class="field-list simple">
<dt class="field-odd">Param srv</dt>
<dd class="field-odd"><p><strong>[in]</strong> Server the Default Light state was changed on. </p>
</dd>
<dt class="field-even">Param ctx</dt>
<dd class="field-even"><p><strong>[in]</strong> Context of the set message that triggered the update, or NULL if it was not triggered by a message. </p>
</dd>
<dt class="field-odd">Param old_default</dt>
<dd class="field-odd"><p><strong>[in]</strong> The Default Light before the change. </p>
</dd>
<dt class="field-even">Param new_default</dt>
<dd class="field-even"><p><strong>[in]</strong> The Default Light after the change. </p>
</dd>
</dl>
</dd></dl>

<dl class="c var">
<dt class="sig sig-object c" id="c.bt_mesh_lightness_srv_handlers.range_update">
<span class="target" id="structbt__mesh__lightness__srv__handlers_1a6883e1ed505cb52bd8e52266d4c56fbc"></span><span class="kt"><span class="pre">void</span></span><span class="w"> </span><span class="p"><span class="pre">(</span></span><span class="p"><span class="pre">*</span></span><span class="k"><span class="pre">const</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">range_update</span></span></span><span class="p"><span class="pre">)</span></span><span class="p"><span class="pre">(</span></span><span class="k"><span class="pre">struct</span></span><span class="w"> </span><a class="reference internal" href="#c.bt_mesh_lightness_srv" title="bt_mesh_lightness_srv"><span class="n"><span class="pre">bt_mesh_lightness_srv</span></span></a><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">srv</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="k"><span class="pre">struct</span></span><span class="w"> </span><span class="n"><span class="pre">bt_mesh_msg_ctx</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">ctx</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="k"><span class="pre">const</span></span><span class="w"> </span><span class="k"><span class="pre">struct</span></span><span class="w"> </span><a class="reference internal" href="lightness.html#c.bt_mesh_lightness_range" title="bt_mesh_lightness_range"><span class="n"><span class="pre">bt_mesh_lightness_range</span></span></a><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">old_range</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="k"><span class="pre">const</span></span><span class="w"> </span><span class="k"><span class="pre">struct</span></span><span class="w"> </span><a class="reference internal" href="lightness.html#c.bt_mesh_lightness_range" title="bt_mesh_lightness_range"><span class="n"><span class="pre">bt_mesh_lightness_range</span></span></a><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">new_range</span></span><span class="p"><span class="pre">)</span></span><a class="headerlink" href="#c.bt_mesh_lightness_srv_handlers.range_update" title="Permalink to this definition"></a><br /></dt>
<dd><p>The Light Range state has changed. </p>
<p>The user may implement this handler to subscribe to change to the Light Range state. If the change in range causes the current Light state to be out of range, the Light state should be changed to the nearest value inside the range. It’s recommended to call <a class="reference internal" href="#group__bt__mesh__lightness__srv_1ga103c0a55ee61e46019c85a98293e0412"><span class="std std-ref">bt_mesh_lightness_srv_pub</span></a> to notify the mesh if the Light state changes.</p>
<dl class="field-list simple">
<dt class="field-odd">Param srv</dt>
<dd class="field-odd"><p><strong>[in]</strong> Server the Light Range state was changed on. </p>
</dd>
<dt class="field-even">Param ctx</dt>
<dd class="field-even"><p><strong>[in]</strong> Context of the set message that triggered the update, or NULL if it was not triggered by a message. </p>
</dd>
<dt class="field-odd">Param old_range</dt>
<dd class="field-odd"><p><strong>[in]</strong> The Light Range before the change. </p>
</dd>
<dt class="field-even">Param new_range</dt>
<dd class="field-even"><p><strong>[in]</strong> The Light Range after the change. </p>
</dd>
</dl>
</dd></dl>

</div>
</dd></dl>

<dl class="c struct">
<dt class="sig sig-object c" id="c.bt_mesh_lightness_srv">
<span class="target" id="structbt__mesh__lightness__srv"></span><span class="k"><span class="pre">struct</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">bt_mesh_lightness_srv</span></span></span><a class="headerlink" href="#c.bt_mesh_lightness_srv" title="Permalink to this definition"></a><br /></dt>
<dd><div class="docutils container">
<em>#include &lt;lightness_srv.h&gt;</em></div>
<p>Light Lightness Server instance.</p>
<p>Should be initialized with <a class="reference internal" href="#group__bt__mesh__lightness__srv_1gad4d882bb56e763ede5cf4a9ae2744173"><span class="std std-ref">BT_MESH_LIGHTNESS_SRV_INIT</span></a>. </p>
<div class="breathe-sectiondef docutils container">
<p class="breathe-sectiondef-title rubric" id="breathe-section-title-public-members">Public Members</p>
<dl class="c var">
<dt class="sig sig-object c" id="c.bt_mesh_lightness_srv.lvl">
<span class="target" id="structbt__mesh__lightness__srv_1acd99eef84655630d900979c84901662b"></span><span class="k"><span class="pre">struct</span></span><span class="w"> </span><a class="reference internal" href="gen_lvl_srv.html#c.bt_mesh_lvl_srv" title="bt_mesh_lvl_srv"><span class="n"><span class="pre">bt_mesh_lvl_srv</span></span></a><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">lvl</span></span></span><a class="headerlink" href="#c.bt_mesh_lightness_srv.lvl" title="Permalink to this definition"></a><br /></dt>
<dd><p>Light Level Server instance. </p>
</dd></dl>

<dl class="c var">
<dt class="sig sig-object c" id="c.bt_mesh_lightness_srv.ponoff">
<span class="target" id="structbt__mesh__lightness__srv_1aa201da8d3d1d421c2475aa3a15e7aaeb"></span><span class="k"><span class="pre">struct</span></span><span class="w"> </span><a class="reference internal" href="gen_ponoff_srv.html#c.bt_mesh_ponoff_srv" title="bt_mesh_ponoff_srv"><span class="n"><span class="pre">bt_mesh_ponoff_srv</span></span></a><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">ponoff</span></span></span><a class="headerlink" href="#c.bt_mesh_lightness_srv.ponoff" title="Permalink to this definition"></a><br /></dt>
<dd><p>Light Light OnOff server instance. </p>
</dd></dl>

<dl class="c var">
<dt class="sig sig-object c" id="c.bt_mesh_lightness_srv.flags">
<span class="target" id="structbt__mesh__lightness__srv_1a9a80a21495dc408a53ac475fd33025b3"></span><span class="n"><span class="pre">atomic_t</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">flags</span></span></span><a class="headerlink" href="#c.bt_mesh_lightness_srv.flags" title="Permalink to this definition"></a><br /></dt>
<dd><p>Internal flag state. </p>
</dd></dl>

<dl class="c var">
<dt class="sig sig-object c" id="c.bt_mesh_lightness_srv.lightness_model">
<span class="target" id="structbt__mesh__lightness__srv_1af57af74f4c018a1d2be20090e83be05e"></span><span class="k"><span class="pre">struct</span></span><span class="w"> </span><span class="n"><span class="pre">bt_mesh_model</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="sig-name descname"><span class="n"><span class="pre">lightness_model</span></span></span><a class="headerlink" href="#c.bt_mesh_lightness_srv.lightness_model" title="Permalink to this definition"></a><br /></dt>
<dd><p>Pointer to the model entry in the composition data. </p>
</dd></dl>

<dl class="c var">
<dt class="sig sig-object c" id="c.bt_mesh_lightness_srv.lightness_setup_model">
<span class="target" id="structbt__mesh__lightness__srv_1aa9c04ca65e89b1bd2f3d4d385925b794"></span><span class="k"><span class="pre">struct</span></span><span class="w"> </span><span class="n"><span class="pre">bt_mesh_model</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="sig-name descname"><span class="n"><span class="pre">lightness_setup_model</span></span></span><a class="headerlink" href="#c.bt_mesh_lightness_srv.lightness_setup_model" title="Permalink to this definition"></a><br /></dt>
<dd><p>Pointer to the Setup Server model entry in the composition data. </p>
</dd></dl>

<dl class="c var">
<dt class="sig sig-object c" id="c.bt_mesh_lightness_srv.pub">
<span class="target" id="structbt__mesh__lightness__srv_1ab11d7c527bedbbf80531f6178d71d145"></span><span class="k"><span class="pre">struct</span></span><span class="w"> </span><span class="n"><span class="pre">bt_mesh_model_pub</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">pub</span></span></span><a class="headerlink" href="#c.bt_mesh_lightness_srv.pub" title="Permalink to this definition"></a><br /></dt>
<dd><p>Model publication parameters. </p>
</dd></dl>

<dl class="c var">
<dt class="sig sig-object c" id="c.bt_mesh_lightness_srv.tid">
<span class="target" id="structbt__mesh__lightness__srv_1adca60a2e3a3d6fa9e6f778ba1c665a8b"></span><span class="k"><span class="pre">struct</span></span><span class="w"> </span><a class="reference internal" href="model_types.html#c.bt_mesh_tid_ctx" title="bt_mesh_tid_ctx"><span class="n"><span class="pre">bt_mesh_tid_ctx</span></span></a><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">tid</span></span></span><a class="headerlink" href="#c.bt_mesh_lightness_srv.tid" title="Permalink to this definition"></a><br /></dt>
<dd><p>Transaction ID tracker for the set messages. </p>
</dd></dl>

<dl class="c var">
<dt class="sig sig-object c" id="c.bt_mesh_lightness_srv.handlers">
<span class="target" id="structbt__mesh__lightness__srv_1a6a39f1f447f366fdaca4cd408e5c570a"></span><span class="k"><span class="pre">const</span></span><span class="w"> </span><span class="k"><span class="pre">struct</span></span><span class="w"> </span><a class="reference internal" href="#c.bt_mesh_lightness_srv_handlers" title="bt_mesh_lightness_srv_handlers"><span class="n"><span class="pre">bt_mesh_lightness_srv_handlers</span></span></a><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="k"><span class="pre">const</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">handlers</span></span></span><a class="headerlink" href="#c.bt_mesh_lightness_srv.handlers" title="Permalink to this definition"></a><br /></dt>
<dd><p>User handler functions. </p>
</dd></dl>

<dl class="c var">
<dt class="sig sig-object c" id="c.bt_mesh_lightness_srv.range">
<span class="target" id="structbt__mesh__lightness__srv_1a9f48feaf7d0c5101dc1b4084a0c7284d"></span><span class="k"><span class="pre">struct</span></span><span class="w"> </span><a class="reference internal" href="lightness.html#c.bt_mesh_lightness_range" title="bt_mesh_lightness_range"><span class="n"><span class="pre">bt_mesh_lightness_range</span></span></a><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">range</span></span></span><a class="headerlink" href="#c.bt_mesh_lightness_srv.range" title="Permalink to this definition"></a><br /></dt>
<dd><p>Current Light Level Range. </p>
</dd></dl>

<dl class="c var">
<dt class="sig sig-object c" id="c.bt_mesh_lightness_srv.default_light">
<span class="target" id="structbt__mesh__lightness__srv_1a472f43fd8f37f6f7c58c2932269514e7"></span><span class="n"><span class="pre">uint16_t</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">default_light</span></span></span><a class="headerlink" href="#c.bt_mesh_lightness_srv.default_light" title="Permalink to this definition"></a><br /></dt>
<dd><p>Current Default Light Level. </p>
</dd></dl>

<dl class="c var">
<dt class="sig sig-object c" id="c.bt_mesh_lightness_srv.delta_start">
<span class="target" id="structbt__mesh__lightness__srv_1a026ec9eb69c3d5326699ebff34226296"></span><span class="n"><span class="pre">uint16_t</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">delta_start</span></span></span><a class="headerlink" href="#c.bt_mesh_lightness_srv.delta_start" title="Permalink to this definition"></a><br /></dt>
<dd><p>The delta start Light Level </p>
</dd></dl>

<dl class="c var">
<dt class="sig sig-object c" id="c.bt_mesh_lightness_srv.last">
<span class="target" id="structbt__mesh__lightness__srv_1a98f2a2072c2953866367f1a70efc412f"></span><span class="n"><span class="pre">uint16_t</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">last</span></span></span><a class="headerlink" href="#c.bt_mesh_lightness_srv.last" title="Permalink to this definition"></a><br /></dt>
<dd><p>The last known Light Level. </p>
</dd></dl>

<dl class="c var">
<dt class="sig sig-object c" id="c.bt_mesh_lightness_srv.is_on">
<span class="target" id="structbt__mesh__lightness__srv_1abbe7a1eaff65315ea395397a0386a949"></span><span class="kt"><span class="pre">bool</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">is_on</span></span></span><a class="headerlink" href="#c.bt_mesh_lightness_srv.is_on" title="Permalink to this definition"></a><br /></dt>
<dd><p>Whether the Light is on. </p>
</dd></dl>

<dl class="c var">
<dt class="sig sig-object c" id="c.bt_mesh_lightness_srv.ctrl">
<span class="target" id="structbt__mesh__lightness__srv_1a3e4563ae73bf614944692e335bc91b32"></span><span class="k"><span class="pre">struct</span></span><span class="w"> </span><a class="reference internal" href="light_ctrl_srv.html#c.bt_mesh_light_ctrl_srv" title="bt_mesh_light_ctrl_srv"><span class="n"><span class="pre">bt_mesh_light_ctrl_srv</span></span></a><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="sig-name descname"><span class="n"><span class="pre">ctrl</span></span></span><a class="headerlink" href="#c.bt_mesh_lightness_srv.ctrl" title="Permalink to this definition"></a><br /></dt>
<dd><p>Acting controller, if enabled. </p>
</dd></dl>

</div>
</dd></dl>

</dd></dl>

</section>
</section>


           </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="lightness_cli.html" class="btn btn-neutral float-right" title="Light Lightness Client" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="lightness.html" class="btn btn-neutral" title="Light Lightness models" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">

<table>
<tr>
<td>
    <p>
        &copy; Copyright 2019-2023, Nordic Semiconductor.
      Last updated on Mar 20, 2023.

    </p>
</td>
<td id="nordiclogo">
  <a href="https://www.nordicsemi.com/"><img src="../../../_static/images/nordic-logo.png" border="0"/></a>
</td>
</tr>
</table>
  </div> 


</footer>

<div id="scroll-container">
  <button type="button" id="scroll-btn" class="btn">
    <svg xmlns="http://www.w3.org/2000/svg" height="24" viewBox="0 0 24 24" width="24"><path d="M0 0h24v24H0z" fill="none"/><path d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z" fill="#fff"/></svg>
  </button>
</div>

<script>
  const scrollBtn = document.querySelector("#scroll-btn");

  document.addEventListener("scroll", () => {
    if (window.scrollY > 400) {
          scrollBtn.style.visibility = "visible";
      } else {
          scrollBtn.style.visibility = "hidden";
      }
  });

  scrollBtn.addEventListener("click", () => {
      window.scrollTo({ top: 0, behavior: "smooth" });
  });
</script>
        </div>
      </div>
    </section>
  </div>
  
  <div class="rst-versions" data-toggle="rst-versions" role="note" aria-label="versions">
    <span class="rst-current-version" data-toggle="rst-current-version">
      <span class="fa fa-book"> nRF Connect SDK</span>
       <span class="fa fa-caret-down"></span>
    </span>
    <div class="rst-other-versions">
      
      <div class="rst-other-version ncs">
        <a href="../../../../nrf/index.html">nRF Connect SDK</a>
      </div>
      
      <div class="rst-other-version nrfx">
        <a href="../../../../nrfx/index.html">nrfx</a>
      </div>
      
      <div class="rst-other-version nrfxlib">
        <a href="../../../../nrfxlib/README.html">nrfxlib</a>
      </div>
      
      <div class="rst-other-version zephyr">
        <a href="../../../../zephyr/index.html">Zephyr Project</a>
      </div>
      
      <div class="rst-other-version mcuboot">
        <a href="../../../../mcuboot/wrapper.html">MCUboot</a>
      </div>
      
      <div class="rst-other-version tfm">
        <a href="../../../../tfm/index.html">Trusted Firmware-M</a>
      </div>
      
      <div class="rst-other-version matter">
        <a href="../../../../matter/index.html">Matter</a>
      </div>
      
      <div class="rst-other-version kconfig">
        <a href="../../../../kconfig/index.html">Kconfig Reference</a>
      </div>
    </div>
  </div><script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>