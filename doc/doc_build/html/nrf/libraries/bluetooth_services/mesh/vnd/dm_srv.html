<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Distance Measurement Server &mdash; nRF Connect SDK 2.3.99 documentation</title>
      <link rel="stylesheet" href="../../../../_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="../../../../_static/css/nordic.css" type="text/css" />
      <link rel="stylesheet" href="../../../../_static/togglebutton.css" type="text/css" />
      <link rel="stylesheet" href="../../../../_static/css/nrf.css" type="text/css" />
      <link rel="stylesheet" href="../../../../_static/tabs.css" type="text/css" /> 
  <!--[if lt IE 9]>
    <script src="../../../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="../../../../" id="documentation_options" src="../../../../_static/documentation_options.js"></script>
        <script src="../../../../_static/jquery.js"></script>
        <script src="../../../../_static/underscore.js"></script>
        <script src="../../../../_static/_sphinx_javascript_frameworks_compat.js"></script>
        <script src="../../../../_static/doctools.js"></script>
        <script src="../../../../_static/sphinx_highlight.js"></script>
        <script src="https://www.googletagmanager.com/gtag/js?id=G-ZPVZRKFQJR"></script>
        <script src="../../../../_static/js/ga-tracker.js"></script>
        <script data-culture="EN" id="CookieConsent" type="text/javascript" src="https://policy.app.cookieinformation.com/uc.js"></script>
        <script>let toggleHintShow = 'Click to show';</script>
        <script>let toggleHintHide = 'Click to hide';</script>
        <script>let toggleOpenOnPrint = 'true';</script>
        <script src="../../../../_static/togglebutton.js"></script>
        <script>var togglebuttonSelector = '.toggle, .admonition.dropdown';</script>
    <script src="../../../../_static/js/theme.js"></script>
<script
  type="text/javascript"
  src="../../../../_static/js/ncs.js"
></script>
<script src="../../../../_static/js/bootstrap.bundle.min.js"></script>

    <link rel="index" title="Index" href="../../../../genindex.html" />
    <link rel="search" title="Search" href="../../../../search.html" />
    <link rel="next" title="Distance Measurement Client" href="dm_cli.html" />
    <link rel="prev" title="Distance Measurement models" href="dm.html" />
<link
  href="../../../../_static/css/bootstrap.min.css"
  rel="stylesheet"
/>
<link
  rel="shortcut icon"
  href="../../../../_static/images/favicon.ico"
/>

</head>

<body class="wy-body-for-nav">
<div class="announcement"></div>
<div class="d-print-none ncs-header">
  <div class="container-xl ncs-header-top">
    <div class="row h-100">
      <div class="d-none d-md-block col-2">
        <div class="bg-white py-4 px-3 ml-2 ncs-header-logo">
          <img
            class="ncs-header-logo"
            src="../../../../_static/images/nordic-logo.png"
            alt=""
          />
        </div>
      </div>
      <div
        class="col-8 col-md-7 pl-md-4 d-flex align-self-center justify-content-center"
      >
        <form class="w-75" action="../../../../search.html" method="get">
          <div class="form-group">
            <input
              type="text"
              name="q"
              class="ncs-search-input form-control"
              placeholder="Search all docs..."
            />
          </div>
        </form>
      </div>
      <div class="col-4 col-md-3 d-md-block p-3 text-end">
        <div class="dropdown">
          <button
            class="btn dropdown-toggle ncs-btn-versions"
            type="button"
            id="dropdownMenuButton1"
            data-bs-toggle="dropdown"
            aria-expanded="false"
          >
            <span class="d-none d-md-inline">nRF Connect SDK</span>
            <span id="ncsversion" class="d-inline"></span>
          </button>
          <div class="dropdown-menu" aria-labelledby="dropdownMenuButton"></div>
        </div>
      </div>
    </div>
  </div>
  <div class="ncs-header-nav">
    <div class="container-xl">
      <div class="row">
        <div class="col col-12 d-flex justify-content-center">
          <nav class="navbar navbar-dark navbar-expand-lg p-0">
            <span class="navbar-brand d-block d-lg-none py-2 pl-1"
              >Documentation sets</span
            >
            <button
              class="navbar-toggler"
              type="button"
              data-bs-toggle="collapse"
              data-bs-target="#navbarNavAltMarkup"
              aria-controls="navbarNavAltMarkup"
              aria-expanded="false"
              aria-label="Toggle navigation"
            >
              <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="navbarNavAltMarkup">
              <ul class="navbar-nav">
                <li class="nav-item active py-1 px-3">
                  <a
                    class="nav-link"
                    href="../../../../../nrf/index.html"
                    >nRF Connect SDK</a
                  >
                </li>
                <li><hr class="dropdown-divider" /></li>
                <li class="nav-item  py-1 px-3">
                  <a
                    class="nav-link"
                    href="../../../../../nrfx/index.html"
                    >nrfx</a
                  >
                </li>
                <li><hr class="dropdown-divider" /></li>
                <li class="nav-item  py-1 px-3">
                  <a
                    class="nav-link"
                    href="../../../../../nrfxlib/README.html"
                    >nrfxlib</a
                  >
                </li>
                <li><hr class="dropdown-divider" /></li>
                <li class="nav-item  py-1 px-3">
                  <a
                    class="nav-link"
                    href="../../../../../zephyr/index.html"
                    >Zephyr Project</a
                  >
                </li>
                <li><hr class="dropdown-divider" /></li>
                <li class="nav-item  py-1 px-3">
                  <a
                    class="nav-link"
                    href="../../../../../mcuboot/wrapper.html"
                    >MCUboot</a
                  >
                </li>
                <li><hr class="dropdown-divider" /></li>
                <li class="nav-item  py-1 px-3">
                  <a
                    class="nav-link"
                    href="../../../../../tfm/index.html"
                    >Trusted Firmware-M</a
                  >
                </li>
                <li><hr class="dropdown-divider" /></li>
                <li class="nav-item  py-1 px-3">
                  <a
                    class="nav-link"
                    href="../../../../../matter/index.html"
                    >Matter</a
                  >
                </li>
                <li><hr class="dropdown-divider" /></li>
                <li class="nav-item  py-1 px-3">
                  <a
                    class="nav-link"
                    href="../../../../../kconfig/index.html"
                    >Kconfig Reference</a
                  >
                </li>
                <li><hr class="dropdown-divider" /></li>
              </ul>
            </div>
          </nav>
        </div>
      </div>
    </div>
  </div>
</div>

  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
            <a href="../../../../index.html" class="icon icon-home"> nRF Connect SDK
          </a>
              <div class="version">
                2.3.99
              </div>
<div id="searchbox" role="search">
  <div class="searchformwrapper">
    <form id="rtd-search-form" class="wy-form" action="../../../../search.html" method="get">
      <input type="text" name="q" placeholder="Search docs" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
  </div>
</div>
<script>$('#searchbox').show(0);</script>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Contents</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../../../introduction.html">Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../getting_started.html">Getting started</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../dev_model.html">Development model</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../app_dev.html">Application development</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../security.html">Security</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../ecosystem_integration.html">Ecosystems integration</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../nrf91.html">Working with nRF91 Series</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../nrf70.html">Working with nRF70 Series</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../nrf53.html">Working with nRF53 Series</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../nrf52.html">Working with nRF52 Series</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../protocols.html">Protocols</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../applications.html">Applications</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../samples.html">Samples</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../drivers.html">Drivers</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../../../index.html">Libraries</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../../../bin/index.html">Binary libraries</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="../../index.html">Bluetooth libraries and services</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="../../adv_prov.html">Bluetooth LE advertising providers</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../conn_ctx.html">Bluetooth connection context</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../enocean.html">Bluetooth EnOcean</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../gatt_dm.html">GATT Discovery Manager</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../gatt_pool.html">Bluetooth GATT attribute pools</a></li>
<li class="toctree-l3 current"><a class="reference internal" href="../../mesh.html">Bluetooth mesh profile</a><ul class="current">
<li class="toctree-l4"><a class="reference internal" href="../model_types.html">Bluetooth mesh models overview</a></li>
<li class="toctree-l4 current"><a class="reference internal" href="../models.html">Bluetooth mesh models</a></li>
<li class="toctree-l4"><a class="reference internal" href="../properties.html">Bluetooth mesh properties</a></li>
<li class="toctree-l4"><a class="reference internal" href="../dk_prov.html">Bluetooth mesh provisioning handler for Nordic DKs</a></li>
<li class="toctree-l4"><a class="reference internal" href="../sensor.html">Bluetooth mesh sensors</a></li>
<li class="toctree-l4"><a class="reference internal" href="../sensor_types.html">Bluetooth mesh sensor types</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../rpc.html">Bluetooth Low Energy Remote Procedure Call</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../scan.html">Scanning module</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../services/ams_client.html">Apple Media Service (AMS) Client</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../services/ancs_client.html">Apple Notification Center Service (ANCS) Client</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../services/bas_client.html">GATT Battery Service (BAS) Client</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../services/bms.html">GATT Bond Management Service (BMS)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../services/cgms.html">GATT Continuous Glucose Monitoring Service (CGMS)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../services/cts_client.html">GATT Current Time Service (CTS) Client</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../services/ddfs.html">Direction and Distance Finding Service (DDFS)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../services/dfu_smp.html">GATT DFU SMP Service Client</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../services/fast_pair.html">Google Fast Pair Service (GFPS)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../services/gattp.html">Generic Attribute (GATT) Profile</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../services/hids.html">GATT Human Interface Device (HID) Service</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../services/hogp.html">GATT Human Interface Device Service (HIDS) Client</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../services/hrs_client.html">GATT Heart Rate Service (HRS) Client</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../services/latency.html">GATT Latency Service</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../services/latency_client.html">GATT Latency Client</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../services/lbs.html">LED Button Service (LBS)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../services/mds.html">Memfault Diagnostic Service (MDS)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../services/nsms.html">Nordic Status Message Service (NSMS)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../services/nus.html">Nordic UART Service (NUS)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../services/nus_client.html">Nordic UART Service (NUS) Client</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../services/rscs.html">Running Speed and Cadence Service (RSCS)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../services/throughput.html">GATT Throughput Service</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../services/wifi_prov.html">Wi-Fi Provisioning Service</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../bootloader/index.html">Bootloader libraries</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../caf/index.html">Common Application Framework</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../debug/index.html">Debug libraries</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../dfu/index.html">DFU libraries</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../gazell/index.html">Gazell libraries</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../modem/index.html">Modem libraries</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../mpsl/index.html">Multiprotocol Service Layer libraries</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../networking/index.html">Libraries for networking</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../nfc/index.html">Libraries for NFC</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../nrf_rpc/index.html">nRF RPC libraries</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../others/index.html">Other libraries</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../shell/index.html">Shell libraries</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../tfm/index.html">TF-M libraries</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../zigbee/index.html">Libraries for Zigbee</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../../scripts.html">Scripts</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../release_notes.html">Release notes</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../known_issues.html">Known issues</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../software_maturity.html">Software maturity levels</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../documentation.html">About this documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../glossary.html">Glossary</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../../../index.html">nRF Connect SDK</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../../../../index.html" class="icon icon-home"></a></li>
          <li class="breadcrumb-item"><a href="../../../index.html">Libraries</a></li>
          <li class="breadcrumb-item"><a href="../../index.html">Bluetooth libraries and services</a></li>
          <li class="breadcrumb-item"><a href="../../mesh.html">Bluetooth mesh profile</a></li>
          <li class="breadcrumb-item"><a href="../models.html">Bluetooth mesh models</a></li>
          <li class="breadcrumb-item"><a href="dm.html">Distance Measurement models</a></li>
      <li class="breadcrumb-item active">Distance Measurement Server</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../../../../_sources/libraries/bluetooth_services/mesh/vnd/dm_srv.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="distance-measurement-server">
<span id="bt-mesh-dm-srv-readme"></span><h1>Distance Measurement Server<a class="headerlink" href="#distance-measurement-server" title="Permalink to this heading"></a></h1>
<div class="contents local topic" id="contents">
<ul class="simple">
<li><p><a class="reference internal" href="#states" id="id8">States</a></p></li>
<li><p><a class="reference internal" href="#extended-models" id="id9">Extended models</a></p></li>
<li><p><a class="reference internal" href="#persistent-storage" id="id10">Persistent storage</a></p></li>
<li><p><a class="reference internal" href="#api-documentation" id="id11">API documentation</a></p></li>
</ul>
</div>
<p>The Distance Measurement Server vendor model provides capabilities to measure distance between Bluetooth® mesh devices within radio proximity.
The measurements are conducted through the <a class="reference internal" href="../../../others/dm.html#mod-dm"><span class="std std-ref">Distance Measurement</span></a> library.</p>
<p>At creation, each Distance Measurement Server instance must be initialized with a memory object that can hold one or more measurement results.
The maximum allowed number of entries in this memory object is restricted to 127 entries.
The Distance Measurement Server populates this memory object whenever a new measurement is conducted.
The results can be queried by a <a class="reference internal" href="dm_cli.html#bt-mesh-dm-cli-readme"><span class="std std-ref">Distance Measurement Client</span></a>.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The current implementation is classified with <a class="reference internal" href="../../../../software_maturity.html#software-maturity"><span class="std std-ref">experimental</span></a> software maturity.</p>
</div>
<figure class="align-default" id="id7">
<img alt="Sequence diagram for DM procedure" src="../../../../_images/bt_mesh_dm_models.svg" /><figcaption>
<p><span class="caption-text">Distance measurement procedure</span><a class="headerlink" href="#id7" title="Permalink to this image"></a></p>
</figcaption>
</figure>
<p>A Distance measurement procedure is started by issuing a <code class="docutils literal notranslate"><span class="pre">bt_mesh_dm_cli_measurement_start</span></code> message from a Distance Measurement Client (DM CLI).
Within this message, the following needs to be defined by the caller:</p>
<ul class="simple">
<li><p>The target address to a server with which the receiving server will perform the measurement.</p></li>
<li><p>The desired measurement mode.</p></li>
<li><p>Parameters to use in the measurement:</p>
<ul>
<li><p>Time-to-live (TTL) value.</p></li>
<li><p>Timeout for the measurement procedure.</p></li>
<li><p>Reflector start delay.</p></li>
</ul>
</li>
</ul>
<p>When the Distance Measurement Server 1 (DM SRV 1) receives the start message, it will start a timeout timer with either the default timeout or the timeout defined in the start message.
It will also add a distance measurement request in the reflector role using the mode and the reflector start delay defined in the start message.
If the reflector start delay is not defined and present in the start message, a default delay is used instead.</p>
<p>DM SRV 1 will then issue a synchronization message to the target address enclosed in the received start message.
This target address points to another Distance Measurement Server, DM SRV 2.
The synchronization message uses by default the same mode and the same timeout value as the DM SRV 1 received in the start message.</p>
<p>When the DM SRV 2 receives the synchronization message, it starts its own timeout timer and adds a distance measurement request in the initiator role using the mode defined in the start message.</p>
<p>If the ranging procedure is successful, the result is stored on both DM SRV 1 and DM SRV 2.
In addition, the DM SRV 1 sends the measured result as a response back to the Distance Measurement Client that initiated the procedure.</p>
<p>If the ranging procedure fails, the result is still stored on both servers.
The DM SRV 1 sends the result entry as a response to the client, indicating that something went wrong during the procedure.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Due to size restrictions in the result message format, measurements exceeding 65535 centimeters (UINT16_MAX) will be floored to 65535 centimeters.
Clients receiving results with values set to 65535 should interpret the result as 65535 centimeters <strong>or higher</strong>.</p>
</div>
<section id="states">
<h2><a class="toc-backref" href="#id8">States</a><a class="headerlink" href="#states" title="Permalink to this heading"></a></h2>
<p>None</p>
</section>
<section id="extended-models">
<h2><a class="toc-backref" href="#id9">Extended models</a><a class="headerlink" href="#extended-models" title="Permalink to this heading"></a></h2>
<p>None</p>
</section>
<section id="persistent-storage">
<h2><a class="toc-backref" href="#id10">Persistent storage</a><a class="headerlink" href="#persistent-storage" title="Permalink to this heading"></a></h2>
<p>The Distance Measurement Server has following runtime configuration options:</p>
<ul class="simple">
<li><p>Default time to live for sync messages.</p></li>
<li><p>Default timeout for distance measurement procedure.</p></li>
<li><p>Default reflector start delay.</p></li>
</ul>
<p>If the <code class="xref kconfig kconfig-option docutils literal notranslate"><span class="pre">CONFIG_BT_SETTINGS</span></code> option is enabled, the Distance Measurement Server stores its configuration states persistently using a configurable storage delay.
See option <code class="xref kconfig kconfig-option docutils literal notranslate"><span class="pre">CONFIG_BT_MESH_MODEL_SRV_STORE_TIMEOUT</span></code>.</p>
</section>
<section id="api-documentation">
<h2><a class="toc-backref" href="#id11">API documentation</a><a class="headerlink" href="#api-documentation" title="Permalink to this heading"></a></h2>
<div class="line-block">
<div class="line">Header file: <code class="file docutils literal notranslate"><span class="pre">include/bluetooth/mesh/vnd/dm_srv.h</span></code></div>
<div class="line">Source file: <code class="file docutils literal notranslate"><span class="pre">subsys/bluetooth/mesh/vnd/dm_srv.c</span></code></div>
</div>
<dl>
<dt class="sig sig-object cpp">
<span class="target" id="group__bt__mesh__dm__srv"></span><em><span class="pre">group</span></em> <span class="sig-name descname"><span class="pre">bt_mesh_dm_srv</span></span></dt>
<dd><p>API for the Distance Measurement Server model. </p>
<div class="breathe-sectiondef docutils container">
<p class="breathe-sectiondef-title rubric" id="breathe-section-title-defines">Defines</p>
<dl class="c macro">
<dt class="sig sig-object c" id="c.BT_MESH_MODEL_DM_SRV_INIT">
<span class="target" id="group__bt__mesh__dm__srv_1ga41e6029b982ab162fe9420ee1543b60d"></span><span class="sig-name descname"><span class="n"><span class="pre">BT_MESH_MODEL_DM_SRV_INIT</span></span></span><span class="sig-paren">(</span><span class="n"><span class="pre">_mem</span></span>, <span class="n"><span class="pre">_cnt</span></span><span class="sig-paren">)</span><a class="headerlink" href="#c.BT_MESH_MODEL_DM_SRV_INIT" title="Permalink to this definition"></a><br /></dt>
<dd><p>Initialization parameters for a <a class="reference internal" href="#group__bt__mesh__dm__srv"><span class="std std-ref">Distance Measurement Server model</span></a> instance. </p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>_mem</strong> – <strong>[in]</strong> Pointer to a <a class="reference internal" href="dm.html#structbt__mesh__dm__res__entry"><span class="std std-ref">bt_mesh_dm_res_entry</span></a> memory object. </p></li>
<li><p><strong>_cnt</strong> – <strong>[in]</strong> Array size of <a class="reference internal" href="dm.html#structbt__mesh__dm__res__entry"><span class="std std-ref">bt_mesh_dm_res_entry</span></a> memory object. </p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="c macro">
<dt class="sig sig-object c" id="c.BT_MESH_MODEL_DM_SRV">
<span class="target" id="group__bt__mesh__dm__srv_1ga3982dedebd919a3a93a7da5f7b3c5fd7"></span><span class="sig-name descname"><span class="n"><span class="pre">BT_MESH_MODEL_DM_SRV</span></span></span><span class="sig-paren">(</span><span class="n"><span class="pre">_srv</span></span><span class="sig-paren">)</span><a class="headerlink" href="#c.BT_MESH_MODEL_DM_SRV" title="Permalink to this definition"></a><br /></dt>
<dd><p>Distance Measurement Server model entry. </p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>_srv</strong> – <strong>[in]</strong> Pointer to a <a class="reference internal" href="#group__bt__mesh__dm__srv"><span class="std std-ref">Distance Measurement Server model</span></a> instance. </p></li>
</ul>
</dd>
</dl>
</dd></dl>

</div>
<dl class="c struct">
<dt class="sig sig-object c" id="c.bt_mesh_dm_srv">
<span class="target" id="structbt__mesh__dm__srv"></span><span class="k"><span class="pre">struct</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">bt_mesh_dm_srv</span></span></span><a class="headerlink" href="#c.bt_mesh_dm_srv" title="Permalink to this definition"></a><br /></dt>
<dd><div class="docutils container">
<em>#include &lt;dm_srv.h&gt;</em></div>
<p>Distance Measurement Server instance. </p>
<div class="breathe-sectiondef docutils container">
<p class="breathe-sectiondef-title rubric" id="breathe-section-title-public-members">Public Members</p>
<dl class="c var">
<dt class="sig sig-object c" id="c.bt_mesh_dm_srv.prev_transaction">
<span class="target" id="structbt__mesh__dm__srv_1ad3bcff50e0ba75ad857674b80d5dc0a1"></span><span class="k"><span class="pre">struct</span></span><span class="w"> </span><a class="reference internal" href="../model_types.html#c.bt_mesh_tid_ctx" title="bt_mesh_tid_ctx"><span class="n"><span class="pre">bt_mesh_tid_ctx</span></span></a><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">prev_transaction</span></span></span><a class="headerlink" href="#c.bt_mesh_dm_srv.prev_transaction" title="Permalink to this definition"></a><br /></dt>
<dd><p>Transaction ID tracker. </p>
</dd></dl>

<dl class="c var">
<dt class="sig sig-object c" id="c.bt_mesh_dm_srv.model">
<span class="target" id="structbt__mesh__dm__srv_1ab808f82a69d15a269d2881917e5137ce"></span><span class="k"><span class="pre">struct</span></span><span class="w"> </span><span class="n"><span class="pre">bt_mesh_model</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="sig-name descname"><span class="n"><span class="pre">model</span></span></span><a class="headerlink" href="#c.bt_mesh_dm_srv.model" title="Permalink to this definition"></a><br /></dt>
<dd><p>Access model pointer. </p>
</dd></dl>

<dl class="c var">
<dt class="sig sig-object c" id="c.bt_mesh_dm_srv.is_busy">
<span class="target" id="structbt__mesh__dm__srv_1adf8827833349727e51500d102a1a2701"></span><span class="kt"><span class="pre">bool</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">is_busy</span></span></span><a class="headerlink" href="#c.bt_mesh_dm_srv.is_busy" title="Permalink to this definition"></a><br /></dt>
<dd><p>Flag indicating measurement in progress </p>
</dd></dl>

<dl class="c var">
<dt class="sig sig-object c" id="c.bt_mesh_dm_srv.cfg">
<span class="target" id="structbt__mesh__dm__srv_1aa2a70b08f98ea7594abd9c183dff671b"></span><span class="k"><span class="pre">struct</span></span><span class="w"> </span><a class="reference internal" href="dm.html#c.bt_mesh_dm_cfg" title="bt_mesh_dm_cfg"><span class="n"><span class="pre">bt_mesh_dm_cfg</span></span></a><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">cfg</span></span></span><a class="headerlink" href="#c.bt_mesh_dm_srv.cfg" title="Permalink to this definition"></a><br /></dt>
<dd><p>Default configuration </p>
</dd></dl>

<dl class="c var">
<dt class="sig sig-object c" id="c.bt_mesh_dm_srv.dm_ready_sem">
<span class="target" id="structbt__mesh__dm__srv_1ae262cf001385026a315a2bb033146559"></span><span class="k"><span class="pre">struct</span></span><span class="w"> </span><span class="n"><span class="pre">k_sem</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">dm_ready_sem</span></span></span><a class="headerlink" href="#c.bt_mesh_dm_srv.dm_ready_sem" title="Permalink to this definition"></a><br /></dt>
<dd><p>Measurement ready semaphore </p>
</dd></dl>

<dl class="c var">
<dt class="sig sig-object c" id="c.bt_mesh_dm_srv.target_addr">
<span class="target" id="structbt__mesh__dm__srv_1a54487362588a8af4cdc25f673cbacc03"></span><span class="n"><span class="pre">uint16_t</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">target_addr</span></span></span><a class="headerlink" href="#c.bt_mesh_dm_srv.target_addr" title="Permalink to this definition"></a><br /></dt>
<dd><p>Current measurement target address </p>
</dd></dl>

<dl class="c var">
<dt class="sig sig-object c" id="c.bt_mesh_dm_srv.rsp_ctx">
<span class="target" id="structbt__mesh__dm__srv_1aed941890f6410420225cec658c62652a"></span><span class="k"><span class="pre">struct</span></span><span class="w"> </span><span class="n"><span class="pre">bt_mesh_msg_ctx</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">rsp_ctx</span></span></span><a class="headerlink" href="#c.bt_mesh_dm_srv.rsp_ctx" title="Permalink to this definition"></a><br /></dt>
<dd><p>Current measurement respond ctx </p>
</dd></dl>

<dl class="c var">
<dt class="sig sig-object c" id="c.bt_mesh_dm_srv.current_role">
<span class="target" id="structbt__mesh__dm__srv_1ae334824fcc4f550c888d868608ffe1c1"></span><span class="k"><span class="pre">enum</span></span><span class="w"> </span><a class="reference internal" href="../../../others/dm.html#c.dm_dev_role" title="dm_dev_role"><span class="n"><span class="pre">dm_dev_role</span></span></a><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">current_role</span></span></span><a class="headerlink" href="#c.bt_mesh_dm_srv.current_role" title="Permalink to this definition"></a><br /></dt>
<dd><p>Current role in measurement </p>
</dd></dl>

<dl class="c var">
<dt class="sig sig-object c" id="c.bt_mesh_dm_srv.timeout">
<span class="target" id="structbt__mesh__dm__srv_1ada3ea27dfa9c6e0252ce7e890f420278"></span><span class="k"><span class="pre">struct</span></span><span class="w"> </span><span class="n"><span class="pre">k_work_delayable</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">timeout</span></span></span><a class="headerlink" href="#c.bt_mesh_dm_srv.timeout" title="Permalink to this definition"></a><br /></dt>
<dd><p>Timeout work context </p>
</dd></dl>

<dl class="c var">
<dt class="sig sig-object c" id="c.bt_mesh_dm_srv.res">
<span class="target" id="structbt__mesh__dm__srv_1a7dd2b13d06116c94ce2ba2aef5a4bded"></span><span class="k"><span class="pre">struct</span></span><span class="w"> </span><a class="reference internal" href="dm.html#c.bt_mesh_dm_res_entry" title="bt_mesh_dm_res_entry"><span class="n"><span class="pre">bt_mesh_dm_res_entry</span></span></a><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="sig-name descname"><span class="n"><span class="pre">res</span></span></span><a class="headerlink" href="#c.bt_mesh_dm_srv.res" title="Permalink to this definition"></a><br /></dt>
<dd><p>Pointer to result memory object </p>
</dd></dl>

<dl class="c var">
<dt class="sig sig-object c" id="c.bt_mesh_dm_srv.entry_cnt">
<span class="target" id="structbt__mesh__dm__srv_1a4d613a40d3e99f84077f3ea7852e74ad"></span><span class="n"><span class="pre">uint8_t</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">entry_cnt</span></span></span><a class="headerlink" href="#c.bt_mesh_dm_srv.entry_cnt" title="Permalink to this definition"></a><br /></dt>
<dd><p>Total number of entry spaces in memory object </p>
</dd></dl>

<dl class="c var">
<dt class="sig sig-object c" id="c.bt_mesh_dm_srv.last_entry_idx">
<span class="target" id="structbt__mesh__dm__srv_1abbf78c9a040b0cf469bb048b63967161"></span><span class="n"><span class="pre">uint8_t</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">last_entry_idx</span></span></span><a class="headerlink" href="#c.bt_mesh_dm_srv.last_entry_idx" title="Permalink to this definition"></a><br /></dt>
<dd><p>Last working entry index </p>
</dd></dl>

<dl class="c var">
<dt class="sig sig-object c" id="c.bt_mesh_dm_srv.available_entries">
<span class="target" id="structbt__mesh__dm__srv_1ab8d902449428278a7f8b8de5224d62c2"></span><span class="n"><span class="pre">uint8_t</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">available_entries</span></span></span><a class="headerlink" href="#c.bt_mesh_dm_srv.available_entries" title="Permalink to this definition"></a><br /></dt>
<dd><p>Available valid entries </p>
</dd></dl>

</div>
</dd></dl>

</dd></dl>

</section>
</section>


           </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="dm_cli.html" class="btn btn-neutral float-right" title="Distance Measurement Client" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="dm.html" class="btn btn-neutral" title="Distance Measurement models" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">

<table>
<tr>
<td>
    <p>
        &copy; Copyright 2019-2023, Nordic Semiconductor.
      Last updated on Mar 20, 2023.

    </p>
</td>
<td id="nordiclogo">
  <a href="https://www.nordicsemi.com/"><img src="../../../../_static/images/nordic-logo.png" border="0"/></a>
</td>
</tr>
</table>
  </div> 


</footer>

<div id="scroll-container">
  <button type="button" id="scroll-btn" class="btn">
    <svg xmlns="http://www.w3.org/2000/svg" height="24" viewBox="0 0 24 24" width="24"><path d="M0 0h24v24H0z" fill="none"/><path d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z" fill="#fff"/></svg>
  </button>
</div>

<script>
  const scrollBtn = document.querySelector("#scroll-btn");

  document.addEventListener("scroll", () => {
    if (window.scrollY > 400) {
          scrollBtn.style.visibility = "visible";
      } else {
          scrollBtn.style.visibility = "hidden";
      }
  });

  scrollBtn.addEventListener("click", () => {
      window.scrollTo({ top: 0, behavior: "smooth" });
  });
</script>
        </div>
      </div>
    </section>
  </div>
  
  <div class="rst-versions" data-toggle="rst-versions" role="note" aria-label="versions">
    <span class="rst-current-version" data-toggle="rst-current-version">
      <span class="fa fa-book"> nRF Connect SDK</span>
       <span class="fa fa-caret-down"></span>
    </span>
    <div class="rst-other-versions">
      
      <div class="rst-other-version ncs">
        <a href="../../../../../nrf/index.html">nRF Connect SDK</a>
      </div>
      
      <div class="rst-other-version nrfx">
        <a href="../../../../../nrfx/index.html">nrfx</a>
      </div>
      
      <div class="rst-other-version nrfxlib">
        <a href="../../../../../nrfxlib/README.html">nrfxlib</a>
      </div>
      
      <div class="rst-other-version zephyr">
        <a href="../../../../../zephyr/index.html">Zephyr Project</a>
      </div>
      
      <div class="rst-other-version mcuboot">
        <a href="../../../../../mcuboot/wrapper.html">MCUboot</a>
      </div>
      
      <div class="rst-other-version tfm">
        <a href="../../../../../tfm/index.html">Trusted Firmware-M</a>
      </div>
      
      <div class="rst-other-version matter">
        <a href="../../../../../matter/index.html">Matter</a>
      </div>
      
      <div class="rst-other-version kconfig">
        <a href="../../../../../kconfig/index.html">Kconfig Reference</a>
      </div>
    </div>
  </div><script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>