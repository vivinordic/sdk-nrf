<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Time Server &mdash; nRF Connect SDK 2.3.99 documentation</title>
      <link rel="stylesheet" href="../../../_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="../../../_static/css/nordic.css" type="text/css" />
      <link rel="stylesheet" href="../../../_static/togglebutton.css" type="text/css" />
      <link rel="stylesheet" href="../../../_static/css/nrf.css" type="text/css" />
      <link rel="stylesheet" href="../../../_static/tabs.css" type="text/css" /> 
  <!--[if lt IE 9]>
    <script src="../../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="../../../" id="documentation_options" src="../../../_static/documentation_options.js"></script>
        <script src="../../../_static/jquery.js"></script>
        <script src="../../../_static/underscore.js"></script>
        <script src="../../../_static/_sphinx_javascript_frameworks_compat.js"></script>
        <script src="../../../_static/doctools.js"></script>
        <script src="../../../_static/sphinx_highlight.js"></script>
        <script src="https://www.googletagmanager.com/gtag/js?id=G-ZPVZRKFQJR"></script>
        <script src="../../../_static/js/ga-tracker.js"></script>
        <script data-culture="EN" id="CookieConsent" type="text/javascript" src="https://policy.app.cookieinformation.com/uc.js"></script>
        <script>let toggleHintShow = 'Click to show';</script>
        <script>let toggleHintHide = 'Click to hide';</script>
        <script>let toggleOpenOnPrint = 'true';</script>
        <script src="../../../_static/togglebutton.js"></script>
        <script>var togglebuttonSelector = '.toggle, .admonition.dropdown';</script>
    <script src="../../../_static/js/theme.js"></script>
<script
  type="text/javascript"
  src="../../../_static/js/ncs.js"
></script>
<script src="../../../_static/js/bootstrap.bundle.min.js"></script>

    <link rel="index" title="Index" href="../../../genindex.html" />
    <link rel="search" title="Search" href="../../../search.html" />
    <link rel="next" title="Time Client" href="time_cli.html" />
    <link rel="prev" title="International atomic time (TAI)" href="time_tai.html" />
<link
  href="../../../_static/css/bootstrap.min.css"
  rel="stylesheet"
/>
<link
  rel="shortcut icon"
  href="../../../_static/images/favicon.ico"
/>

</head>

<body class="wy-body-for-nav">
<div class="announcement"></div>
<div class="d-print-none ncs-header">
  <div class="container-xl ncs-header-top">
    <div class="row h-100">
      <div class="d-none d-md-block col-2">
        <div class="bg-white py-4 px-3 ml-2 ncs-header-logo">
          <img
            class="ncs-header-logo"
            src="../../../_static/images/nordic-logo.png"
            alt=""
          />
        </div>
      </div>
      <div
        class="col-8 col-md-7 pl-md-4 d-flex align-self-center justify-content-center"
      >
        <form class="w-75" action="../../../search.html" method="get">
          <div class="form-group">
            <input
              type="text"
              name="q"
              class="ncs-search-input form-control"
              placeholder="Search all docs..."
            />
          </div>
        </form>
      </div>
      <div class="col-4 col-md-3 d-md-block p-3 text-end">
        <div class="dropdown">
          <button
            class="btn dropdown-toggle ncs-btn-versions"
            type="button"
            id="dropdownMenuButton1"
            data-bs-toggle="dropdown"
            aria-expanded="false"
          >
            <span class="d-none d-md-inline">nRF Connect SDK</span>
            <span id="ncsversion" class="d-inline"></span>
          </button>
          <div class="dropdown-menu" aria-labelledby="dropdownMenuButton"></div>
        </div>
      </div>
    </div>
  </div>
  <div class="ncs-header-nav">
    <div class="container-xl">
      <div class="row">
        <div class="col col-12 d-flex justify-content-center">
          <nav class="navbar navbar-dark navbar-expand-lg p-0">
            <span class="navbar-brand d-block d-lg-none py-2 pl-1"
              >Documentation sets</span
            >
            <button
              class="navbar-toggler"
              type="button"
              data-bs-toggle="collapse"
              data-bs-target="#navbarNavAltMarkup"
              aria-controls="navbarNavAltMarkup"
              aria-expanded="false"
              aria-label="Toggle navigation"
            >
              <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="navbarNavAltMarkup">
              <ul class="navbar-nav">
                <li class="nav-item active py-1 px-3">
                  <a
                    class="nav-link"
                    href="../../../../nrf/index.html"
                    >nRF Connect SDK</a
                  >
                </li>
                <li><hr class="dropdown-divider" /></li>
                <li class="nav-item  py-1 px-3">
                  <a
                    class="nav-link"
                    href="../../../../nrfx/index.html"
                    >nrfx</a
                  >
                </li>
                <li><hr class="dropdown-divider" /></li>
                <li class="nav-item  py-1 px-3">
                  <a
                    class="nav-link"
                    href="../../../../nrfxlib/README.html"
                    >nrfxlib</a
                  >
                </li>
                <li><hr class="dropdown-divider" /></li>
                <li class="nav-item  py-1 px-3">
                  <a
                    class="nav-link"
                    href="../../../../zephyr/index.html"
                    >Zephyr Project</a
                  >
                </li>
                <li><hr class="dropdown-divider" /></li>
                <li class="nav-item  py-1 px-3">
                  <a
                    class="nav-link"
                    href="../../../../mcuboot/wrapper.html"
                    >MCUboot</a
                  >
                </li>
                <li><hr class="dropdown-divider" /></li>
                <li class="nav-item  py-1 px-3">
                  <a
                    class="nav-link"
                    href="../../../../tfm/index.html"
                    >Trusted Firmware-M</a
                  >
                </li>
                <li><hr class="dropdown-divider" /></li>
                <li class="nav-item  py-1 px-3">
                  <a
                    class="nav-link"
                    href="../../../../matter/index.html"
                    >Matter</a
                  >
                </li>
                <li><hr class="dropdown-divider" /></li>
                <li class="nav-item  py-1 px-3">
                  <a
                    class="nav-link"
                    href="../../../../kconfig/index.html"
                    >Kconfig Reference</a
                  >
                </li>
                <li><hr class="dropdown-divider" /></li>
              </ul>
            </div>
          </nav>
        </div>
      </div>
    </div>
  </div>
</div>

  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
            <a href="../../../index.html" class="icon icon-home"> nRF Connect SDK
          </a>
              <div class="version">
                2.3.99
              </div>
<div id="searchbox" role="search">
  <div class="searchformwrapper">
    <form id="rtd-search-form" class="wy-form" action="../../../search.html" method="get">
      <input type="text" name="q" placeholder="Search docs" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
  </div>
</div>
<script>$('#searchbox').show(0);</script>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Contents</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../../introduction.html">Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../getting_started.html">Getting started</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../dev_model.html">Development model</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../app_dev.html">Application development</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../security.html">Security</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../ecosystem_integration.html">Ecosystems integration</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../nrf91.html">Working with nRF91 Series</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../nrf70.html">Working with nRF70 Series</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../nrf53.html">Working with nRF53 Series</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../nrf52.html">Working with nRF52 Series</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../protocols.html">Protocols</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../applications.html">Applications</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../samples.html">Samples</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../drivers.html">Drivers</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../../index.html">Libraries</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../../bin/index.html">Binary libraries</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="../index.html">Bluetooth libraries and services</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="../adv_prov.html">Bluetooth LE advertising providers</a></li>
<li class="toctree-l3"><a class="reference internal" href="../conn_ctx.html">Bluetooth connection context</a></li>
<li class="toctree-l3"><a class="reference internal" href="../enocean.html">Bluetooth EnOcean</a></li>
<li class="toctree-l3"><a class="reference internal" href="../gatt_dm.html">GATT Discovery Manager</a></li>
<li class="toctree-l3"><a class="reference internal" href="../gatt_pool.html">Bluetooth GATT attribute pools</a></li>
<li class="toctree-l3 current"><a class="reference internal" href="../mesh.html">Bluetooth mesh profile</a><ul class="current">
<li class="toctree-l4"><a class="reference internal" href="model_types.html">Bluetooth mesh models overview</a></li>
<li class="toctree-l4 current"><a class="reference internal" href="models.html">Bluetooth mesh models</a></li>
<li class="toctree-l4"><a class="reference internal" href="properties.html">Bluetooth mesh properties</a></li>
<li class="toctree-l4"><a class="reference internal" href="dk_prov.html">Bluetooth mesh provisioning handler for Nordic DKs</a></li>
<li class="toctree-l4"><a class="reference internal" href="sensor.html">Bluetooth mesh sensors</a></li>
<li class="toctree-l4"><a class="reference internal" href="sensor_types.html">Bluetooth mesh sensor types</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../rpc.html">Bluetooth Low Energy Remote Procedure Call</a></li>
<li class="toctree-l3"><a class="reference internal" href="../scan.html">Scanning module</a></li>
<li class="toctree-l3"><a class="reference internal" href="../services/ams_client.html">Apple Media Service (AMS) Client</a></li>
<li class="toctree-l3"><a class="reference internal" href="../services/ancs_client.html">Apple Notification Center Service (ANCS) Client</a></li>
<li class="toctree-l3"><a class="reference internal" href="../services/bas_client.html">GATT Battery Service (BAS) Client</a></li>
<li class="toctree-l3"><a class="reference internal" href="../services/bms.html">GATT Bond Management Service (BMS)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../services/cgms.html">GATT Continuous Glucose Monitoring Service (CGMS)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../services/cts_client.html">GATT Current Time Service (CTS) Client</a></li>
<li class="toctree-l3"><a class="reference internal" href="../services/ddfs.html">Direction and Distance Finding Service (DDFS)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../services/dfu_smp.html">GATT DFU SMP Service Client</a></li>
<li class="toctree-l3"><a class="reference internal" href="../services/fast_pair.html">Google Fast Pair Service (GFPS)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../services/gattp.html">Generic Attribute (GATT) Profile</a></li>
<li class="toctree-l3"><a class="reference internal" href="../services/hids.html">GATT Human Interface Device (HID) Service</a></li>
<li class="toctree-l3"><a class="reference internal" href="../services/hogp.html">GATT Human Interface Device Service (HIDS) Client</a></li>
<li class="toctree-l3"><a class="reference internal" href="../services/hrs_client.html">GATT Heart Rate Service (HRS) Client</a></li>
<li class="toctree-l3"><a class="reference internal" href="../services/latency.html">GATT Latency Service</a></li>
<li class="toctree-l3"><a class="reference internal" href="../services/latency_client.html">GATT Latency Client</a></li>
<li class="toctree-l3"><a class="reference internal" href="../services/lbs.html">LED Button Service (LBS)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../services/mds.html">Memfault Diagnostic Service (MDS)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../services/nsms.html">Nordic Status Message Service (NSMS)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../services/nus.html">Nordic UART Service (NUS)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../services/nus_client.html">Nordic UART Service (NUS) Client</a></li>
<li class="toctree-l3"><a class="reference internal" href="../services/rscs.html">Running Speed and Cadence Service (RSCS)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../services/throughput.html">GATT Throughput Service</a></li>
<li class="toctree-l3"><a class="reference internal" href="../services/wifi_prov.html">Wi-Fi Provisioning Service</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../bootloader/index.html">Bootloader libraries</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../caf/index.html">Common Application Framework</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../debug/index.html">Debug libraries</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../dfu/index.html">DFU libraries</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../gazell/index.html">Gazell libraries</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../modem/index.html">Modem libraries</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../mpsl/index.html">Multiprotocol Service Layer libraries</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../networking/index.html">Libraries for networking</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../nfc/index.html">Libraries for NFC</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../nrf_rpc/index.html">nRF RPC libraries</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../others/index.html">Other libraries</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../shell/index.html">Shell libraries</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../tfm/index.html">TF-M libraries</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../zigbee/index.html">Libraries for Zigbee</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../scripts.html">Scripts</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../release_notes.html">Release notes</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../known_issues.html">Known issues</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../software_maturity.html">Software maturity levels</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../documentation.html">About this documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../glossary.html">Glossary</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../../index.html">nRF Connect SDK</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../../../index.html" class="icon icon-home"></a></li>
          <li class="breadcrumb-item"><a href="../../index.html">Libraries</a></li>
          <li class="breadcrumb-item"><a href="../index.html">Bluetooth libraries and services</a></li>
          <li class="breadcrumb-item"><a href="../mesh.html">Bluetooth mesh profile</a></li>
          <li class="breadcrumb-item"><a href="models.html">Bluetooth mesh models</a></li>
          <li class="breadcrumb-item"><a href="time.html">Time models</a></li>
      <li class="breadcrumb-item active">Time Server</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../../../_sources/libraries/bluetooth_services/mesh/time_srv.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="time-server">
<span id="bt-mesh-time-srv-readme"></span><h1>Time Server<a class="headerlink" href="#time-server" title="Permalink to this heading"></a></h1>
<div class="contents local topic" id="contents">
<ul class="simple">
<li><p><a class="reference internal" href="#operation" id="id7">Operation</a></p>
<ul>
<li><p><a class="reference internal" href="#roles" id="id8">Roles</a></p></li>
<li><p><a class="reference internal" href="#clock-uncertainty" id="id9">Clock uncertainty</a></p></li>
<li><p><a class="reference internal" href="#leap-seconds-and-time-zones" id="id10">Leap seconds and time zones</a></p></li>
<li><p><a class="reference internal" href="#timestamp-conversion" id="id11">Timestamp conversion</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#configuration" id="id12">Configuration</a></p></li>
<li><p><a class="reference internal" href="#states" id="id13">States</a></p></li>
<li><p><a class="reference internal" href="#extended-models" id="id14">Extended models</a></p></li>
<li><p><a class="reference internal" href="#persistent-storage" id="id15">Persistent storage</a></p></li>
<li><p><a class="reference internal" href="#api-documentation" id="id16">API documentation</a></p></li>
</ul>
</div>
<p>The Time Server model allows mesh nodes to synchronize the current time and date by publishing and subscribing to Time Status messages.</p>
<p>The Time Server model relies on an external clock source to provide the current time and date, but takes care of distributing this information through the network.</p>
<p>The Time Server model adds the following new model instances in the composition data:</p>
<ul class="simple">
<li><p>Time Server</p></li>
<li><p>Time Setup Server</p></li>
</ul>
<section id="operation">
<h2><a class="toc-backref" href="#id7">Operation</a><a class="headerlink" href="#operation" title="Permalink to this heading"></a></h2>
<p>The Time Server model builds an ad-hoc time synchronization hierarchy through the mesh network that propagates the current wall-clock time as TAI timestamps.</p>
<p>To ensure consistent synchronization, the Time Server model should be configured to publish its Time Status with regular intervals using a <span class="xref std std-ref">zephyr:bluetooth_mesh_models_cfg_cli</span> model.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>To ensure a high level of accuracy, Time Status messages are always transmitted one hop at a time if it is sent as an unsolicited message.
Every mesh node without access to the Time Authority that needs access to the common time reference must be within the radio range of at least one other node with the Time Server model.
Time Server nodes that have no neighboring Time Servers need to get this information in some other way (for example, getting time from the Time Authority).</p>
</div>
<section id="roles">
<h3><a class="toc-backref" href="#id8">Roles</a><a class="headerlink" href="#roles" title="Permalink to this heading"></a></h3>
<p>The Time Server model operates in 3 different roles:</p>
<dl class="simple">
<dt>Time Authority</dt><dd><p>A Time Server that has access to an external clock source, and can propagate the current time to other nodes in the network.
The Time Authority will publish Time Status messages, but will not receive them.</p>
</dd>
<dt>Time Relay</dt><dd><p>A Time Server that both publishes and receives Time Status messages.
The Time Relay relies on other mesh nodes to tell time.</p>
</dd>
<dt>Time Client</dt><dd><p>A Time Server that receives Time Status messages, but does not relay them.
The Time Client relies on other mesh nodes to tell time.</p>
</dd>
</dl>
<p>Whenever a Time Server model that is not a Time Authority receives a Time Status message, it will update its internal clock to match the new Time Status - if it improves its clock uncertainty.</p>
<p>The Time Authority role should not be confused with the Authority state, which denotes whether the device is actively monitoring a reliable external time source.</p>
</section>
<section id="clock-uncertainty">
<h3><a class="toc-backref" href="#id9">Clock uncertainty</a><a class="headerlink" href="#clock-uncertainty" title="Permalink to this heading"></a></h3>
<p>The Time Server’s time synchronization mechanism is not perfect, and every timestamp it provides has some uncertainty.
The clock uncertainty is measured in milliseconds, and can come from various sources, like inaccuracies in the original clock source, internal clock drift or uncertainty in the mesh stack itself.
The Time Server inherits the uncertainty of the node it got its Time Status from, and the clock uncertainty of each mesh node increases for every hop the Time Status had to make from the Time Authority.</p>
<p>The expected uncertainty in the mesh stack comes from the fluctuation in time to encrypt a message and broadcast it, and can be configured through the <code class="xref kconfig kconfig-option docutils literal notranslate"><span class="pre">CONFIG_BT_MESH_TIME_MESH_HOP_UNCERTAINTY</span></code>.</p>
<p>In addition to the uncertainty added by the mesh stack itself, the internal clock of each device will increase the uncertainty of the timestamp over time.
As crystal hardware is not perfectly accurate, it will gradually drift away from the correct time.
The potential range of this clock drift is generally a known property of the onboard hardware, even if the actual drift fluctuates.
As it is impossible to measure the actual clock drift at any given moment, the Time Server gradually increases the uncertainty of its timestamp based on the known clock accuracy.</p>
<p>The Time Server’s notion of the local clock accuracy can be configured with <code class="xref kconfig kconfig-option docutils literal notranslate"><span class="pre">CONFIG_BT_MESH_TIME_SRV_CLOCK_ACCURACY</span></code>.
By default, it uses the configured kernel clock control accuracy.</p>
</section>
<section id="leap-seconds-and-time-zones">
<h3><a class="toc-backref" href="#id10">Leap seconds and time zones</a><a class="headerlink" href="#leap-seconds-and-time-zones" title="Permalink to this heading"></a></h3>
<p>As described in the section on <a class="reference internal" href="time_tai.html#bt-mesh-time-tai-readme"><span class="std std-ref">International atomic time (TAI)</span></a>, the Time Server measures time as TAI seconds, and adds the UTC leap second offset and local time zone as additional information.</p>
<p>Both leap seconds and time zone changes are irregular events that are scheduled by governing boards ahead of time.
Because of this, it is impossible to algorithmically determine the time zone and UTC offset for future dates, as there is no way to tell when and how many changes will be scheduled.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The time zone of the device not only changes with its location on the globe, but also with Daylight Saving Time.
For instance, Central Europe is in the UTC+2 (CEST) time zone during the summer, but the UTC+1 (CET) time zone during the winter.</p>
</div>
<p>Time Servers’ Time Status messages include the current time zone and UTC offset, but Time models may also distribute information about known future changes to these states.
For instance, if a Time Authority node learns through its time source that the device will change to Daylight Saving Time on March 29th, it can broadcast a Time Zone change message, which includes the new time zone offset as well as the TAI timestamp of the change.
All Time Server models that receive this message will automatically store this change and notify the application.
The application can then reschedule any timeouts that happen after the change to reflect the new offset.</p>
</section>
<section id="timestamp-conversion">
<h3><a class="toc-backref" href="#id11">Timestamp conversion</a><a class="headerlink" href="#timestamp-conversion" title="Permalink to this heading"></a></h3>
<p>To convert between human-readable time and device time, the Time Server model API includes three functions with signatures similar to the C standard library’s <code class="file docutils literal notranslate"><span class="pre">time.h</span></code> API:</p>
<ul class="simple">
<li><p><code class="xref cpp cpp-func docutils literal notranslate"><span class="pre">bt_mesh_time_srv_mktime()</span></code>: Get the uptime at a specific date/time.</p></li>
<li><p><code class="xref cpp cpp-func docutils literal notranslate"><span class="pre">bt_mesh_time_srv_localtime()</span></code>: Get the local date/time at a specific uptime.</p></li>
<li><p><code class="xref cpp cpp-func docutils literal notranslate"><span class="pre">bt_mesh_time_srv_localtime_r()</span></code>: A thread safe version of <code class="docutils literal notranslate"><span class="pre">localtime</span></code>.</p></li>
</ul>
<p>For example, if you want to schedule your mesh device to send up fireworks exactly at midnight on New Year’s Eve, you can use <code class="docutils literal notranslate"><span class="pre">mktime</span></code> to find the device uptime at this exact timestamp:</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="kt">void</span><span class="w"> </span><span class="nf">schedule_fireworks</span><span class="p">(</span><span class="kt">void</span><span class="p">)</span>
<span class="p">{</span>
<span class="w">   </span><span class="k">struct</span><span class="w"> </span><span class="nc">tm</span><span class="w"> </span><span class="n">new_years_eve</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="p">.</span><span class="n">tm_year</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">2021</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="mi">1900</span><span class="p">,</span><span class="w"> </span><span class="cm">/* struct tm measures years since 1900 */</span>
<span class="w">      </span><span class="cm">/* January 1st: */</span>
<span class="w">      </span><span class="p">.</span><span class="n">tm_mon</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span>
<span class="w">      </span><span class="p">.</span><span class="n">tm_mday</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span>
<span class="w">      </span><span class="cm">/* Midnight: */</span>
<span class="w">      </span><span class="p">.</span><span class="n">tm_hour</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span>
<span class="w">      </span><span class="p">.</span><span class="n">tm_min</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span>
<span class="w">      </span><span class="p">.</span><span class="n">tm_sec</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span>
<span class="w">   </span><span class="p">};</span>

<span class="w">   </span><span class="kt">int64_t</span><span class="w"> </span><span class="n">uptime</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">bt_mesh_time_srv_mktime</span><span class="p">(</span><span class="o">&amp;</span><span class="n">time_srv</span><span class="p">,</span><span class="w"> </span><span class="o">&amp;</span><span class="n">new_years_eve</span><span class="p">);</span>
<span class="w">   </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">uptime</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="mi">0</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="cm">/* Time Server does not know */</span>
<span class="w">      </span><span class="k">return</span><span class="p">;</span>
<span class="w">   </span><span class="p">}</span>

<span class="w">   </span><span class="n">k_timer_start</span><span class="p">(</span><span class="o">&amp;</span><span class="n">start_fireworks</span><span class="p">,</span><span class="w"> </span><span class="n">uptime</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">k_uptime_get</span><span class="p">(),</span><span class="w"> </span><span class="mi">0</span><span class="p">);</span>
<span class="p">}</span>
</pre></div>
</div>
<p>And, to print the current date and time, you can use <code class="docutils literal notranslate"><span class="pre">localtime</span></code>:</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="kt">void</span><span class="w"> </span><span class="nf">print_datetime</span><span class="p">(</span><span class="kt">void</span><span class="p">)</span>
<span class="p">{</span>
<span class="w">   </span><span class="k">struct</span><span class="w"> </span><span class="nc">tm</span><span class="w"> </span><span class="o">*</span><span class="n">today</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">bt_mesh_time_srv_localtime</span><span class="p">(</span><span class="o">&amp;</span><span class="n">time_srv</span><span class="p">,</span><span class="w"> </span><span class="n">k_uptime_get</span><span class="p">());</span>
<span class="w">   </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="o">!</span><span class="n">today</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="cm">/* Time Server does not know */</span>
<span class="w">      </span><span class="k">return</span><span class="p">;</span>
<span class="w">   </span><span class="p">}</span>

<span class="w">   </span><span class="k">const</span><span class="w"> </span><span class="kt">char</span><span class="w"> </span><span class="o">*</span><span class="n">weekdays</span><span class="p">[]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="s">&quot;Sunday&quot;</span><span class="p">,</span>
<span class="w">      </span><span class="s">&quot;Monday&quot;</span><span class="p">,</span>
<span class="w">      </span><span class="s">&quot;Tuesday&quot;</span><span class="p">,</span>
<span class="w">      </span><span class="s">&quot;Wednesday&quot;</span><span class="p">,</span>
<span class="w">      </span><span class="s">&quot;Thursday&quot;</span><span class="p">,</span>
<span class="w">      </span><span class="s">&quot;Friday&quot;</span><span class="p">,</span>
<span class="w">      </span><span class="s">&quot;Saturday&quot;</span><span class="p">,</span>
<span class="w">   </span><span class="p">};</span>

<span class="w">   </span><span class="n">printk</span><span class="p">(</span><span class="s">&quot;Today is %s %04u-%02u-%02u</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">weekdays</span><span class="p">[</span><span class="n">today</span><span class="o">-&gt;</span><span class="n">tm_wday</span><span class="p">],</span>
<span class="w">         </span><span class="n">today</span><span class="o">-&gt;</span><span class="n">tm_year</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mi">1900</span><span class="p">,</span><span class="w"> </span><span class="n">today</span><span class="o">-&gt;</span><span class="n">tm_mon</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="n">today</span><span class="o">-&gt;</span><span class="n">tm_mday</span><span class="p">);</span>
<span class="w">   </span><span class="n">printk</span><span class="p">(</span><span class="s">&quot;The time is %02u:%02u</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">today</span><span class="o">-&gt;</span><span class="n">tm_hour</span><span class="p">,</span><span class="w"> </span><span class="n">today</span><span class="o">-&gt;</span><span class="n">tm_min</span><span class="p">);</span>
<span class="p">}</span>
</pre></div>
</div>
<p>Additionally, the Time Server API includes <code class="xref cpp cpp-func docutils literal notranslate"><span class="pre">bt_mesh_time_srv_uncertainty_get()</span></code>, which allows the application to determine the current uncertainty of a specific uptime.
This function can be used in combination with the three others to determine the accuracy of a provided timestamp.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>All time and uncertainty conversion is based on the Time Server’s current data, and assumes that no corrections are made between the call and the provided timestamp.
Timestamps that are weeks or months into the future may have an uncertainty of several hours, due to clock drift.
The application can subscribe to changes in the Time Server state through the <code class="xref cpp cpp-type docutils literal notranslate"><span class="pre">bt_mesh_time_srv_cb</span></code> callback structure.</p>
<p>Any time zone or UTC delta changes are taken into account.</p>
</div>
</section>
</section>
<section id="configuration">
<h2><a class="toc-backref" href="#id12">Configuration</a><a class="headerlink" href="#configuration" title="Permalink to this heading"></a></h2>
<p>The clock uncertainty of the Time Server model can be configured with the following configuration options:</p>
<ul class="simple">
<li><p><code class="xref kconfig kconfig-option docutils literal notranslate"><span class="pre">CONFIG_BT_MESH_TIME_MESH_HOP_UNCERTAINTY</span></code>: The amount of uncertainty introduced in the mesh stack through sending a single message, in milliseconds.</p></li>
<li><p><code class="xref kconfig kconfig-option docutils literal notranslate"><span class="pre">CONFIG_BT_MESH_TIME_SRV_CLOCK_ACCURACY</span></code>: The largest possible clock drift introduced by the kernel clock’s hardware, in parts per million.</p></li>
</ul>
</section>
<section id="states">
<h2><a class="toc-backref" href="#id13">States</a><a class="headerlink" href="#states" title="Permalink to this heading"></a></h2>
<p>The Time Server model contains the following states:</p>
<dl class="simple">
<dt>TAI time: <code class="xref cpp cpp-type docutils literal notranslate"><span class="pre">bt_mesh_time_tai</span></code></dt><dd><p>The TAI time is a composite state, with members <code class="docutils literal notranslate"><span class="pre">sec</span></code> and an 8-bit <code class="docutils literal notranslate"><span class="pre">subsec</span></code>.
If the current time is known, the TAI time changes continuously.</p>
</dd>
<dt>Uncertainty: <code class="docutils literal notranslate"><span class="pre">uint64_t</span></code></dt><dd><p>Current clock uncertainty in milliseconds.
Without new data, clock uncertainty increases gradually due to clock drift.</p>
</dd>
<dt>UTC delta: <code class="docutils literal notranslate"><span class="pre">int16_t</span></code></dt><dd><p>Number of seconds between the TAI and UTC timestamps due to UTC leap seconds.</p>
</dd>
<dt>Time zone offset: <code class="docutils literal notranslate"><span class="pre">int16_t</span></code></dt><dd><p>Local time zone offset in 15-minute increments.</p>
</dd>
<dt>Authority: <code class="docutils literal notranslate"><span class="pre">bool</span></code></dt><dd><p>Whether this device has continuous access to a reliable TAI source, such as a GPS receiver or an NTP-synchronized clock.
The Authority state does not transfer to other devices.</p>
</dd>
<dt>Role: <code class="xref cpp cpp-enum docutils literal notranslate"><span class="pre">bt_mesh_time_role</span></code></dt><dd><p>The Time Server’s current role in the Time Status propagation.</p>
</dd>
<dt>Time zone change: <code class="xref cpp cpp-type docutils literal notranslate"><span class="pre">bt_mesh_time_zone_change</span></code></dt><dd><p>The Time zone change state determines the next scheduled change in time zones, and includes both the new time zone offset and the timestamp of the scheduled change.
If no change is known, the timestamp is 0.</p>
</dd>
<dt>UTC delta change: <code class="xref cpp cpp-type docutils literal notranslate"><span class="pre">bt_mesh_tai_utc_change</span></code></dt><dd><p>The UTC delta change state determines the next scheduled leap second, and includes both the new UTC offset and the timestamp of the scheduled change.
If no change is known, the timestamp is 0.</p>
</dd>
</dl>
</section>
<section id="extended-models">
<h2><a class="toc-backref" href="#id14">Extended models</a><a class="headerlink" href="#extended-models" title="Permalink to this heading"></a></h2>
<p>None.</p>
</section>
<section id="persistent-storage">
<h2><a class="toc-backref" href="#id15">Persistent storage</a><a class="headerlink" href="#persistent-storage" title="Permalink to this heading"></a></h2>
<p>The Timer Server stores the following states persistently:</p>
<ul class="simple">
<li><p>Role</p></li>
<li><p>Time zone change</p></li>
<li><p>UTC delta change</p></li>
</ul>
<p>All other states change with time, and are not stored.</p>
</section>
<section id="api-documentation">
<h2><a class="toc-backref" href="#id16">API documentation</a><a class="headerlink" href="#api-documentation" title="Permalink to this heading"></a></h2>
<div class="line-block">
<div class="line">Header file: <code class="file docutils literal notranslate"><span class="pre">include/bluetooth/mesh/time_srv.h</span></code></div>
<div class="line">Source file: <code class="file docutils literal notranslate"><span class="pre">subsys/bluetooth/mesh/time_srv.c</span></code></div>
</div>
<dl>
<dt class="sig sig-object cpp">
<span class="target" id="group__bt__mesh__time__srv"></span><em><span class="pre">group</span></em> <span class="sig-name descname"><span class="pre">bt_mesh_time_srv</span></span></dt>
<dd><p>API for the Time Server model. </p>
<div class="breathe-sectiondef docutils container">
<p class="breathe-sectiondef-title rubric" id="breathe-section-title-defines">Defines</p>
<dl class="c macro">
<dt class="sig sig-object c" id="c.BT_MESH_TIME_SRV_INIT">
<span class="target" id="group__bt__mesh__time__srv_1ga4c67fa63cbee3ff36aff1c079a04c8e0"></span><span class="sig-name descname"><span class="n"><span class="pre">BT_MESH_TIME_SRV_INIT</span></span></span><span class="sig-paren">(</span><span class="n"><span class="pre">_time_update_cb</span></span><span class="sig-paren">)</span><a class="headerlink" href="#c.BT_MESH_TIME_SRV_INIT" title="Permalink to this definition"></a><br /></dt>
<dd><p>Initialization parameters for a <a class="reference internal" href="#group__bt__mesh__time__srv"><span class="std std-ref">Time Server model</span></a> instance. </p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>_time_update_cb</strong> – <strong>[in]</strong> Time update callback (optional). </p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="c macro">
<dt class="sig sig-object c" id="c.BT_MESH_MODEL_TIME_SRV">
<span class="target" id="group__bt__mesh__time__srv_1gafd3bd74c8f2b5dff38cbcbf97e469ba2"></span><span class="sig-name descname"><span class="n"><span class="pre">BT_MESH_MODEL_TIME_SRV</span></span></span><span class="sig-paren">(</span><span class="n"><span class="pre">_srv</span></span><span class="sig-paren">)</span><a class="headerlink" href="#c.BT_MESH_MODEL_TIME_SRV" title="Permalink to this definition"></a><br /></dt>
<dd><p>Time Server model composition data entry. </p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>_srv</strong> – <strong>[in]</strong> Pointer to a <a class="reference internal" href="#group__bt__mesh__time__srv"><span class="std std-ref">Time Server model</span></a> instance. </p></li>
</ul>
</dd>
</dl>
</dd></dl>

</div>
<div class="breathe-sectiondef docutils container">
<p class="breathe-sectiondef-title rubric" id="breathe-section-title-enums">Enums</p>
<dl class="c enum">
<dt class="sig sig-object c" id="c.bt_mesh_time_update_types">
<span class="target" id="group__bt__mesh__time__srv_1gade0ce76afb492f00de0f118ad38d8a5b"></span><span class="k"><span class="pre">enum</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">bt_mesh_time_update_types</span></span></span><a class="headerlink" href="#c.bt_mesh_time_update_types" title="Permalink to this definition"></a><br /></dt>
<dd><p>Time srv update types </p>
<p><em>Values:</em></p>
<dl class="c enumerator">
<dt class="sig sig-object c" id="c.bt_mesh_time_update_types.BT_MESH_TIME_SRV_STATUS_UPDATE">
<span class="target" id="group__bt__mesh__time__srv_1ggade0ce76afb492f00de0f118ad38d8a5ba3cae6e2bc01576f36e1320e9acc3f691"></span><span class="k"><span class="pre">enumerator</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">BT_MESH_TIME_SRV_STATUS_UPDATE</span></span></span><a class="headerlink" href="#c.bt_mesh_time_update_types.BT_MESH_TIME_SRV_STATUS_UPDATE" title="Permalink to this definition"></a><br /></dt>
<dd><p>Status update </p>
</dd></dl>

<dl class="c enumerator">
<dt class="sig sig-object c" id="c.bt_mesh_time_update_types.BT_MESH_TIME_SRV_SET_UPDATE">
<span class="target" id="group__bt__mesh__time__srv_1ggade0ce76afb492f00de0f118ad38d8a5ba93af83079b6e8dbb1c76cec783a2cc76"></span><span class="k"><span class="pre">enumerator</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">BT_MESH_TIME_SRV_SET_UPDATE</span></span></span><a class="headerlink" href="#c.bt_mesh_time_update_types.BT_MESH_TIME_SRV_SET_UPDATE" title="Permalink to this definition"></a><br /></dt>
<dd><p>Set update </p>
</dd></dl>

<dl class="c enumerator">
<dt class="sig sig-object c" id="c.bt_mesh_time_update_types.BT_MESH_TIME_SRV_ZONE_UPDATE">
<span class="target" id="group__bt__mesh__time__srv_1ggade0ce76afb492f00de0f118ad38d8a5baa6eda533aa9b02af67726a3e9cb6408f"></span><span class="k"><span class="pre">enumerator</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">BT_MESH_TIME_SRV_ZONE_UPDATE</span></span></span><a class="headerlink" href="#c.bt_mesh_time_update_types.BT_MESH_TIME_SRV_ZONE_UPDATE" title="Permalink to this definition"></a><br /></dt>
<dd><p>Zone update </p>
</dd></dl>

<dl class="c enumerator">
<dt class="sig sig-object c" id="c.bt_mesh_time_update_types.BT_MESH_TIME_SRV_UTC_UPDATE">
<span class="target" id="group__bt__mesh__time__srv_1ggade0ce76afb492f00de0f118ad38d8a5bae92c707ae44482990a44253ec4f23030"></span><span class="k"><span class="pre">enumerator</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">BT_MESH_TIME_SRV_UTC_UPDATE</span></span></span><a class="headerlink" href="#c.bt_mesh_time_update_types.BT_MESH_TIME_SRV_UTC_UPDATE" title="Permalink to this definition"></a><br /></dt>
<dd><p>UTC update </p>
</dd></dl>

</dd></dl>

</div>
<div class="breathe-sectiondef docutils container">
<p class="breathe-sectiondef-title rubric" id="breathe-section-title-functions">Functions</p>
<dl class="c function">
<dt class="sig sig-object c" id="c.bt_mesh_time_srv_time_status_send">
<span class="target" id="group__bt__mesh__time__srv_1ga62e10f9d355844de8f2a1b5b38d03427"></span><span class="kt"><span class="pre">int</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">bt_mesh_time_srv_time_status_send</span></span></span><span class="sig-paren">(</span><span class="k"><span class="pre">struct</span></span><span class="w"> </span><a class="reference internal" href="#c.bt_mesh_time_srv" title="bt_mesh_time_srv"><span class="n"><span class="pre">bt_mesh_time_srv</span></span></a><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">srv</span></span>, <span class="k"><span class="pre">struct</span></span><span class="w"> </span><span class="n"><span class="pre">bt_mesh_msg_ctx</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">ctx</span></span><span class="sig-paren">)</span><a class="headerlink" href="#c.bt_mesh_time_srv_time_status_send" title="Permalink to this definition"></a><br /></dt>
<dd><p>Publish an unsolicited Time Status message. </p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>srv</strong> – <strong>[in]</strong> Time Server instance. </p></li>
<li><p><strong>ctx</strong> – <strong>[in]</strong> Message context, or NULL to publish with the configured parameters.</p></li>
</ul>
</dd>
<dt class="field-even">Return values</dt>
<dd class="field-even"><ul class="simple">
<li><p><strong>-EOPNOTSUPP</strong> – The server Time Role state does not support sending of unsolicited Time Status messages. </p></li>
<li><p><strong>-EADDRNOTAVAIL</strong> – A message context was not provided and publishing is not configured. </p></li>
<li><p><strong>-EAGAIN</strong> – The device has not been provisioned. </p></li>
</ul>
</dd>
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>0 Successfully published the current Time state. </p>
</dd>
</dl>
</dd></dl>

<dl class="c function">
<dt class="sig sig-object c" id="c.bt_mesh_time_srv_status">
<span class="target" id="group__bt__mesh__time__srv_1ga04c345f77959b997b20735a21c19884d"></span><span class="kt"><span class="pre">int</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">bt_mesh_time_srv_status</span></span></span><span class="sig-paren">(</span><span class="k"><span class="pre">struct</span></span><span class="w"> </span><a class="reference internal" href="#c.bt_mesh_time_srv" title="bt_mesh_time_srv"><span class="n"><span class="pre">bt_mesh_time_srv</span></span></a><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">srv</span></span>, <span class="n"><span class="pre">uint64_t</span></span><span class="w"> </span><span class="n"><span class="pre">uptime</span></span>, <span class="k"><span class="pre">struct</span></span><span class="w"> </span><a class="reference internal" href="time.html#c.bt_mesh_time_status" title="bt_mesh_time_status"><span class="n"><span class="pre">bt_mesh_time_status</span></span></a><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">status</span></span><span class="sig-paren">)</span><a class="headerlink" href="#c.bt_mesh_time_srv_status" title="Permalink to this definition"></a><br /></dt>
<dd><p>Get the time status at a given uptime. </p>
<p>Converts the device uptime (from <code class="docutils literal notranslate"><span class="pre">k_uptime_get</span></code>) to TAI time.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This function does not support status lookups for uptimes that occurred before the last received set- or status update. In addition, lookups for uptimes that happened before <code class="docutils literal notranslate"><span class="pre">k_uptime_get</span></code> must be used with caution, since there is no guarantee that the output data is fully reliable.</p>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>srv</strong> – <strong>[in]</strong> Time Server instance. </p></li>
<li><p><strong>uptime</strong> – <strong>[in]</strong> Uptime at the desired point in time. </p></li>
<li><p><strong>status</strong> – <strong>[out]</strong> The device’s Time Status at the given uptime.</p></li>
</ul>
</dd>
<dt class="field-even">Return values</dt>
<dd class="field-even"><ul class="simple">
<li><p><strong>0</strong> – Successfully retrieved the Time status. </p></li>
<li><p><strong>-EAGAIN</strong> – Invalid uptime input. Asking for status that is in the past. </p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="c function">
<dt class="sig sig-object c" id="c.bt_mesh_time_srv_mktime">
<span class="target" id="group__bt__mesh__time__srv_1ga559d9c0ae1996b08eedab04a48f4b89c"></span><span class="n"><span class="pre">int64_t</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">bt_mesh_time_srv_mktime</span></span></span><span class="sig-paren">(</span><span class="k"><span class="pre">struct</span></span><span class="w"> </span><a class="reference internal" href="#c.bt_mesh_time_srv" title="bt_mesh_time_srv"><span class="n"><span class="pre">bt_mesh_time_srv</span></span></a><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">srv</span></span>, <span class="k"><span class="pre">struct</span></span><span class="w"> </span><span class="n"><span class="pre">tm</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">timeptr</span></span><span class="sig-paren">)</span><a class="headerlink" href="#c.bt_mesh_time_srv_mktime" title="Permalink to this definition"></a><br /></dt>
<dd><p>Get the device uptime at a given local time. </p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This function does not support lookups for local time that occurred before the TAI-time of the last received set- or status update. In addition, lookups for local time that happened before <code class="docutils literal notranslate"><span class="pre">k_uptime_get</span></code> must be used with caution, since there is no guarantee that the output data is fully reliable.</p>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Whenever a zone or UTC change makes the local time jump forward in time, i.e. for day light savings adjustments, we get a situation where some points in time will occur twice on the local timeline. If the user where to input a local time that is affected by these changes the response uptime will reflect the input local time added with the new adjustment. Example: A time zone change is scheduled 12:00:00 a clock an arbitrary day to set the local clock forward by one hour. If the user requests the uptime for 12:00:05 at that same day, the returned uptime will be the same as if the user inputted the local time 13:00:05 of that day.</p>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Whenever a zone or UTC change makes the local time jump backwards in time, i.e. for day light savings adjustments, we get a situation where some points in time never will on the local timeline. If the user where to input a local time that is affected by these changes the response uptime will reflect the local time instance that happens last. Example: A time zone change is scheduled 12:00:00 a clock an arbitrary day to set the local clock back one hour. If the user requests the uptime for 12:00:00 at that same day, the returned uptime will reflect the local time that under normal circumstances would be 13:00:00 that day.</p>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>srv</strong> – <strong>[in]</strong> Time Server instance. </p></li>
<li><p><strong>timeptr</strong> – <strong>[in]</strong> Local time at the desired point.</p></li>
</ul>
</dd>
<dt class="field-even">Return values</dt>
<dd class="field-even"><p><strong>Positive</strong> – uptime if successful, otherwise negative error value. </p>
</dd>
</dl>
</dd></dl>

<dl class="c function">
<dt class="sig sig-object c" id="c.bt_mesh_time_srv_localtime_r">
<span class="target" id="group__bt__mesh__time__srv_1gac21f78f20a190982381b94d3760f7c1e"></span><span class="k"><span class="pre">struct</span></span><span class="w"> </span><span class="n"><span class="pre">tm</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="sig-name descname"><span class="n"><span class="pre">bt_mesh_time_srv_localtime_r</span></span></span><span class="sig-paren">(</span><span class="k"><span class="pre">struct</span></span><span class="w"> </span><a class="reference internal" href="#c.bt_mesh_time_srv" title="bt_mesh_time_srv"><span class="n"><span class="pre">bt_mesh_time_srv</span></span></a><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">srv</span></span>, <span class="n"><span class="pre">int64_t</span></span><span class="w"> </span><span class="n"><span class="pre">uptime</span></span>, <span class="k"><span class="pre">struct</span></span><span class="w"> </span><span class="n"><span class="pre">tm</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">timeptr</span></span><span class="sig-paren">)</span><a class="headerlink" href="#c.bt_mesh_time_srv_localtime_r" title="Permalink to this definition"></a><br /></dt>
<dd><p>Get the device local time at a given uptime. </p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This function does not support local time lookups for uptimes that occurred before the last received set- or status update. In addition, lookups for uptimes that happened before <code class="docutils literal notranslate"><span class="pre">k_uptime_get</span></code> must be used with caution, since there is no guarantee that the output data is fully reliable.</p>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>srv</strong> – <strong>[in]</strong> Time Server instance. </p></li>
<li><p><strong>uptime</strong> – <strong>[in]</strong> Uptime at the desired point in time. </p></li>
<li><p><strong>timeptr</strong> – <strong>[out]</strong> The device’s local time at the given uptime.</p></li>
</ul>
</dd>
<dt class="field-even">Return values</dt>
<dd class="field-even"><p><strong>Pointer</strong> – to time struct if successful, NULL otherwise. </p>
</dd>
</dl>
</dd></dl>

<dl class="c function">
<dt class="sig sig-object c" id="c.bt_mesh_time_srv_localtime">
<span class="target" id="group__bt__mesh__time__srv_1ga3bfade36db6d3dfcc8bc92000055a583"></span><span class="k"><span class="pre">struct</span></span><span class="w"> </span><span class="n"><span class="pre">tm</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="sig-name descname"><span class="n"><span class="pre">bt_mesh_time_srv_localtime</span></span></span><span class="sig-paren">(</span><span class="k"><span class="pre">struct</span></span><span class="w"> </span><a class="reference internal" href="#c.bt_mesh_time_srv" title="bt_mesh_time_srv"><span class="n"><span class="pre">bt_mesh_time_srv</span></span></a><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">srv</span></span>, <span class="n"><span class="pre">int64_t</span></span><span class="w"> </span><span class="n"><span class="pre">uptime</span></span><span class="sig-paren">)</span><a class="headerlink" href="#c.bt_mesh_time_srv_localtime" title="Permalink to this definition"></a><br /></dt>
<dd><p>Get the device local time at a given uptime. </p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This function does not support local time lookups for uptimes that occurred before the last received set- or status update. In addition, lookups for uptimes that happened before <code class="docutils literal notranslate"><span class="pre">k_uptime_get</span></code> must be used with caution, since there is no guarantee that the output data is fully reliable.</p>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>srv</strong> – <strong>[in]</strong> Time Server instance. </p></li>
<li><p><strong>uptime</strong> – <strong>[in]</strong> Uptime at the desired point in time.</p></li>
</ul>
</dd>
<dt class="field-even">Return values</dt>
<dd class="field-even"><p><strong>Pointer</strong> – to time struct if successful, NULL otherwise. </p>
</dd>
</dl>
</dd></dl>

<dl class="c function">
<dt class="sig sig-object c" id="c.bt_mesh_time_srv_uncertainty_get">
<span class="target" id="group__bt__mesh__time__srv_1ga0f3b87cf7a70d8a8793152685f1f30a2"></span><span class="n"><span class="pre">uint64_t</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">bt_mesh_time_srv_uncertainty_get</span></span></span><span class="sig-paren">(</span><span class="k"><span class="pre">struct</span></span><span class="w"> </span><a class="reference internal" href="#c.bt_mesh_time_srv" title="bt_mesh_time_srv"><span class="n"><span class="pre">bt_mesh_time_srv</span></span></a><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">srv</span></span>, <span class="n"><span class="pre">int64_t</span></span><span class="w"> </span><span class="n"><span class="pre">uptime</span></span><span class="sig-paren">)</span><a class="headerlink" href="#c.bt_mesh_time_srv_uncertainty_get" title="Permalink to this definition"></a><br /></dt>
<dd><p>Get the device time uncertainty at a given uptime. </p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This function does not support uncertainty lookups for uptimes that occurred before the last received set- or status update.</p>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>srv</strong> – <strong>[in]</strong> Time Server instance. </p></li>
<li><p><strong>uptime</strong> – <strong>[in]</strong> Uptime at the desired point in time.</p></li>
</ul>
</dd>
<dt class="field-even">Return values</dt>
<dd class="field-even"><p><strong>Positive</strong> – uncertainty if successful, negative error code otherwise. </p>
</dd>
</dl>
</dd></dl>

<dl class="c function">
<dt class="sig sig-object c" id="c.bt_mesh_time_srv_time_set">
<span class="target" id="group__bt__mesh__time__srv_1ga7899cd944855825c8de5795df0ee3e1e"></span><span class="kt"><span class="pre">void</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">bt_mesh_time_srv_time_set</span></span></span><span class="sig-paren">(</span><span class="k"><span class="pre">struct</span></span><span class="w"> </span><a class="reference internal" href="#c.bt_mesh_time_srv" title="bt_mesh_time_srv"><span class="n"><span class="pre">bt_mesh_time_srv</span></span></a><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">srv</span></span>, <span class="n"><span class="pre">int64_t</span></span><span class="w"> </span><span class="n"><span class="pre">uptime</span></span>, <span class="k"><span class="pre">const</span></span><span class="w"> </span><span class="k"><span class="pre">struct</span></span><span class="w"> </span><a class="reference internal" href="time.html#c.bt_mesh_time_status" title="bt_mesh_time_status"><span class="n"><span class="pre">bt_mesh_time_status</span></span></a><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">status</span></span><span class="sig-paren">)</span><a class="headerlink" href="#c.bt_mesh_time_srv_time_set" title="Permalink to this definition"></a><br /></dt>
<dd><p>Set the TAI status parameters for the server. </p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This is an alternative way to set parameters for the Time Server instance. In most cases these parameters will be configured remotely by a Time Client or a neigbouring Time Server.</p>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>srv</strong> – <strong>[in]</strong> Time Server instance. </p></li>
<li><p><strong>uptime</strong> – <strong>[in]</strong> Desired uptime to set. </p></li>
<li><p><strong>status</strong> – <strong>[in]</strong> Desired status configuration. </p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="c function">
<dt class="sig sig-object c" id="c.bt_mesh_time_srv_time_zone_change_set">
<span class="target" id="group__bt__mesh__time__srv_1ga1ecf7b9878683976e6ec47ff166be2d1"></span><span class="kt"><span class="pre">void</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">bt_mesh_time_srv_time_zone_change_set</span></span></span><span class="sig-paren">(</span><span class="k"><span class="pre">struct</span></span><span class="w"> </span><a class="reference internal" href="#c.bt_mesh_time_srv" title="bt_mesh_time_srv"><span class="n"><span class="pre">bt_mesh_time_srv</span></span></a><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">srv</span></span>, <span class="k"><span class="pre">const</span></span><span class="w"> </span><span class="k"><span class="pre">struct</span></span><span class="w"> </span><a class="reference internal" href="time.html#c.bt_mesh_time_zone_change" title="bt_mesh_time_zone_change"><span class="n"><span class="pre">bt_mesh_time_zone_change</span></span></a><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">data</span></span><span class="sig-paren">)</span><a class="headerlink" href="#c.bt_mesh_time_srv_time_zone_change_set" title="Permalink to this definition"></a><br /></dt>
<dd><p>Set the zone change parameters for the server. </p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This is an alternative way to set parameters for the Time Server instance. In most cases these parameters will be configured remotely by a Time Client or a neigbouring Time Server.</p>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>srv</strong> – <strong>[in]</strong> Time Server instance. </p></li>
<li><p><strong>data</strong> – <strong>[in]</strong> Desired zone change configuration. </p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="c function">
<dt class="sig sig-object c" id="c.bt_mesh_time_srv_tai_utc_change_set">
<span class="target" id="group__bt__mesh__time__srv_1ga9f4fecda8a403f5203818c06ea32d40d"></span><span class="kt"><span class="pre">void</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">bt_mesh_time_srv_tai_utc_change_set</span></span></span><span class="sig-paren">(</span><span class="k"><span class="pre">struct</span></span><span class="w"> </span><a class="reference internal" href="#c.bt_mesh_time_srv" title="bt_mesh_time_srv"><span class="n"><span class="pre">bt_mesh_time_srv</span></span></a><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">srv</span></span>, <span class="k"><span class="pre">const</span></span><span class="w"> </span><span class="k"><span class="pre">struct</span></span><span class="w"> </span><a class="reference internal" href="time.html#c.bt_mesh_time_tai_utc_change" title="bt_mesh_time_tai_utc_change"><span class="n"><span class="pre">bt_mesh_time_tai_utc_change</span></span></a><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">data</span></span><span class="sig-paren">)</span><a class="headerlink" href="#c.bt_mesh_time_srv_tai_utc_change_set" title="Permalink to this definition"></a><br /></dt>
<dd><p>Set the TAI UTC change parameters for the server. </p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This is an alternative way to set parameters for the Time Server instance. In most cases these parameters will be configured remotely by a Time Client or a neigbouring Time Server.</p>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>srv</strong> – <strong>[in]</strong> Time Server instance. </p></li>
<li><p><strong>data</strong> – <strong>[in]</strong> Desired TAI UTC change configuration. </p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="c function">
<dt class="sig sig-object c" id="c.bt_mesh_time_srv_role_set">
<span class="target" id="group__bt__mesh__time__srv_1ga6cacd2ae3712e070db603c211e1fbdc8"></span><span class="kt"><span class="pre">void</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">bt_mesh_time_srv_role_set</span></span></span><span class="sig-paren">(</span><span class="k"><span class="pre">struct</span></span><span class="w"> </span><a class="reference internal" href="#c.bt_mesh_time_srv" title="bt_mesh_time_srv"><span class="n"><span class="pre">bt_mesh_time_srv</span></span></a><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">srv</span></span>, <span class="k"><span class="pre">enum</span></span><span class="w"> </span><a class="reference internal" href="time.html#c.bt_mesh_time_role" title="bt_mesh_time_role"><span class="n"><span class="pre">bt_mesh_time_role</span></span></a><span class="w"> </span><span class="n"><span class="pre">role</span></span><span class="sig-paren">)</span><a class="headerlink" href="#c.bt_mesh_time_srv_role_set" title="Permalink to this definition"></a><br /></dt>
<dd><p>Set the role parameter for the server. </p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This is an alternative way to set parameters for the Time Server instance. In most cases these parameters will be configured remotely by a Time Client or a neigbouring Time Server.</p>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>srv</strong> – <strong>[in]</strong> Time Server instance. </p></li>
<li><p><strong>role</strong> – <strong>[in]</strong> Desired role configuration. </p></li>
</ul>
</dd>
</dl>
</dd></dl>

</div>
<dl class="c struct">
<dt class="sig sig-object c" id="c.bt_mesh_time_srv_data">
<span class="target" id="structbt__mesh__time__srv__data"></span><span class="k"><span class="pre">struct</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">bt_mesh_time_srv_data</span></span></span><a class="headerlink" href="#c.bt_mesh_time_srv_data" title="Permalink to this definition"></a><br /></dt>
<dd><div class="docutils container">
<em>#include &lt;time_srv.h&gt;</em></div>
<p>Internal data structure of the Time Server instance. </p>
</dd></dl>

<dl class="c struct">
<dt class="sig sig-object c" id="c.bt_mesh_time_srv">
<span class="target" id="structbt__mesh__time__srv"></span><span class="k"><span class="pre">struct</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">bt_mesh_time_srv</span></span></span><a class="headerlink" href="#c.bt_mesh_time_srv" title="Permalink to this definition"></a><br /></dt>
<dd><div class="docutils container">
<em>#include &lt;time_srv.h&gt;</em></div>
<p>Time Server instance.</p>
<p>Should be initialized with <a class="reference internal" href="#group__bt__mesh__time__srv_1ga4c67fa63cbee3ff36aff1c079a04c8e0"><span class="std std-ref">BT_MESH_TIME_SRV_INIT</span></a>. </p>
<div class="breathe-sectiondef docutils container">
<p class="breathe-sectiondef-title rubric" id="breathe-section-title-public-members">Public Members</p>
<dl class="c var">
<dt class="sig sig-object c" id="c.bt_mesh_time_srv.model">
<span class="target" id="structbt__mesh__time__srv_1a5398e84f82b3d8e0a82233d43600dead"></span><span class="k"><span class="pre">struct</span></span><span class="w"> </span><span class="n"><span class="pre">bt_mesh_model</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="sig-name descname"><span class="n"><span class="pre">model</span></span></span><a class="headerlink" href="#c.bt_mesh_time_srv.model" title="Permalink to this definition"></a><br /></dt>
<dd><p>Model entry. </p>
</dd></dl>

<dl class="c var">
<dt class="sig sig-object c" id="c.bt_mesh_time_srv.pub">
<span class="target" id="structbt__mesh__time__srv_1ac887184ec7666a3e72b8abbf893b57e8"></span><span class="k"><span class="pre">struct</span></span><span class="w"> </span><span class="n"><span class="pre">bt_mesh_model_pub</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">pub</span></span></span><a class="headerlink" href="#c.bt_mesh_time_srv.pub" title="Permalink to this definition"></a><br /></dt>
<dd><p>Publish parameters. </p>
</dd></dl>

<dl class="c var">
<dt class="sig sig-object c" id="c.bt_mesh_time_srv.setup_pub">
<span class="target" id="structbt__mesh__time__srv_1a1ccad4c82a83c6acec148b737215640d"></span><span class="k"><span class="pre">struct</span></span><span class="w"> </span><span class="n"><span class="pre">bt_mesh_model_pub</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">setup_pub</span></span></span><a class="headerlink" href="#c.bt_mesh_time_srv.setup_pub" title="Permalink to this definition"></a><br /></dt>
<dd><p>Setup model publish parameters </p>
</dd></dl>

<dl class="c var">
<dt class="sig sig-object c" id="c.bt_mesh_time_srv.ack_ctx">
<span class="target" id="structbt__mesh__time__srv_1a668083b6eb7f051b826c193a6240c64b"></span><span class="k"><span class="pre">struct</span></span><span class="w"> </span><span class="n"><span class="pre">bt_mesh_msg_ack_ctx</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">ack_ctx</span></span></span><a class="headerlink" href="#c.bt_mesh_time_srv.ack_ctx" title="Permalink to this definition"></a><br /></dt>
<dd><p>Acknowledged message tracking. </p>
</dd></dl>

<dl class="c var">
<dt class="sig sig-object c" id="c.bt_mesh_time_srv.data">
<span class="target" id="structbt__mesh__time__srv_1a8fcb5151ce2bdf60c2512e8d2edeb43e"></span><span class="k"><span class="pre">struct</span></span><span class="w"> </span><a class="reference internal" href="#c.bt_mesh_time_srv_data" title="bt_mesh_time_srv_data"><span class="n"><span class="pre">bt_mesh_time_srv_data</span></span></a><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">data</span></span></span><a class="headerlink" href="#c.bt_mesh_time_srv.data" title="Permalink to this definition"></a><br /></dt>
<dd><p>Model state structure </p>
</dd></dl>

<dl class="c var">
<dt class="sig sig-object c" id="c.bt_mesh_time_srv.time_update_cb">
<span class="target" id="structbt__mesh__time__srv_1a6621331e40ab7d2e8d401bbdaf518355"></span><span class="kt"><span class="pre">void</span></span><span class="w"> </span><span class="p"><span class="pre">(</span></span><span class="p"><span class="pre">*</span></span><span class="k"><span class="pre">const</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">time_update_cb</span></span></span><span class="p"><span class="pre">)</span></span><span class="p"><span class="pre">(</span></span><span class="k"><span class="pre">struct</span></span><span class="w"> </span><a class="reference internal" href="#c.bt_mesh_time_srv" title="bt_mesh_time_srv"><span class="n"><span class="pre">bt_mesh_time_srv</span></span></a><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">srv</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="k"><span class="pre">struct</span></span><span class="w"> </span><span class="n"><span class="pre">bt_mesh_msg_ctx</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">ctx</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="k"><span class="pre">enum</span></span><span class="w"> </span><a class="reference internal" href="#c.bt_mesh_time_update_types" title="bt_mesh_time_update_types"><span class="n"><span class="pre">bt_mesh_time_update_types</span></span></a><span class="w"> </span><span class="n"><span class="pre">type</span></span><span class="p"><span class="pre">)</span></span><a class="headerlink" href="#c.bt_mesh_time_srv.time_update_cb" title="Permalink to this definition"></a><br /></dt>
<dd><p>Update callback. </p>
<p>Called whenever the server receives a state update from either:<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">bt_mesh_time_cli_time_set</span></code> </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">bt_mesh_time_cli_zone_set</span></code> </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">bt_mesh_time_cli_tai_utc_delta_set</span></code> </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">bt_mesh_time_srv_time_status_send</span></code> </p>
<p></p>
</li>
</ul>
</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This handler is optional.</p>
</div>
<dl class="field-list simple">
<dt class="field-odd">Param srv</dt>
<dd class="field-odd"><p><strong>[in]</strong> Server instance. </p>
</dd>
</dl>
</dd></dl>

</div>
</dd></dl>

</dd></dl>

</section>
</section>


           </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="time_cli.html" class="btn btn-neutral float-right" title="Time Client" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="time_tai.html" class="btn btn-neutral" title="International atomic time (TAI)" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">

<table>
<tr>
<td>
    <p>
        &copy; Copyright 2019-2023, Nordic Semiconductor.
      Last updated on Mar 20, 2023.

    </p>
</td>
<td id="nordiclogo">
  <a href="https://www.nordicsemi.com/"><img src="../../../_static/images/nordic-logo.png" border="0"/></a>
</td>
</tr>
</table>
  </div> 


</footer>

<div id="scroll-container">
  <button type="button" id="scroll-btn" class="btn">
    <svg xmlns="http://www.w3.org/2000/svg" height="24" viewBox="0 0 24 24" width="24"><path d="M0 0h24v24H0z" fill="none"/><path d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z" fill="#fff"/></svg>
  </button>
</div>

<script>
  const scrollBtn = document.querySelector("#scroll-btn");

  document.addEventListener("scroll", () => {
    if (window.scrollY > 400) {
          scrollBtn.style.visibility = "visible";
      } else {
          scrollBtn.style.visibility = "hidden";
      }
  });

  scrollBtn.addEventListener("click", () => {
      window.scrollTo({ top: 0, behavior: "smooth" });
  });
</script>
        </div>
      </div>
    </section>
  </div>
  
  <div class="rst-versions" data-toggle="rst-versions" role="note" aria-label="versions">
    <span class="rst-current-version" data-toggle="rst-current-version">
      <span class="fa fa-book"> nRF Connect SDK</span>
       <span class="fa fa-caret-down"></span>
    </span>
    <div class="rst-other-versions">
      
      <div class="rst-other-version ncs">
        <a href="../../../../nrf/index.html">nRF Connect SDK</a>
      </div>
      
      <div class="rst-other-version nrfx">
        <a href="../../../../nrfx/index.html">nrfx</a>
      </div>
      
      <div class="rst-other-version nrfxlib">
        <a href="../../../../nrfxlib/README.html">nrfxlib</a>
      </div>
      
      <div class="rst-other-version zephyr">
        <a href="../../../../zephyr/index.html">Zephyr Project</a>
      </div>
      
      <div class="rst-other-version mcuboot">
        <a href="../../../../mcuboot/wrapper.html">MCUboot</a>
      </div>
      
      <div class="rst-other-version tfm">
        <a href="../../../../tfm/index.html">Trusted Firmware-M</a>
      </div>
      
      <div class="rst-other-version matter">
        <a href="../../../../matter/index.html">Matter</a>
      </div>
      
      <div class="rst-other-version kconfig">
        <a href="../../../../kconfig/index.html">Kconfig Reference</a>
      </div>
    </div>
  </div><script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>