<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Sensor Server &mdash; nRF Connect SDK 2.3.99 documentation</title>
      <link rel="stylesheet" href="../../../_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="../../../_static/css/nordic.css" type="text/css" />
      <link rel="stylesheet" href="../../../_static/togglebutton.css" type="text/css" />
      <link rel="stylesheet" href="../../../_static/css/nrf.css" type="text/css" />
      <link rel="stylesheet" href="../../../_static/tabs.css" type="text/css" /> 
  <!--[if lt IE 9]>
    <script src="../../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="../../../" id="documentation_options" src="../../../_static/documentation_options.js"></script>
        <script src="../../../_static/jquery.js"></script>
        <script src="../../../_static/underscore.js"></script>
        <script src="../../../_static/_sphinx_javascript_frameworks_compat.js"></script>
        <script src="../../../_static/doctools.js"></script>
        <script src="../../../_static/sphinx_highlight.js"></script>
        <script src="https://www.googletagmanager.com/gtag/js?id=G-ZPVZRKFQJR"></script>
        <script src="../../../_static/js/ga-tracker.js"></script>
        <script data-culture="EN" id="CookieConsent" type="text/javascript" src="https://policy.app.cookieinformation.com/uc.js"></script>
        <script>let toggleHintShow = 'Click to show';</script>
        <script>let toggleHintHide = 'Click to hide';</script>
        <script>let toggleOpenOnPrint = 'true';</script>
        <script src="../../../_static/togglebutton.js"></script>
        <script>var togglebuttonSelector = '.toggle, .admonition.dropdown';</script>
    <script src="../../../_static/js/theme.js"></script>
<script
  type="text/javascript"
  src="../../../_static/js/ncs.js"
></script>
<script src="../../../_static/js/bootstrap.bundle.min.js"></script>

    <link rel="index" title="Index" href="../../../genindex.html" />
    <link rel="search" title="Search" href="../../../search.html" />
    <link rel="next" title="Sensor Client" href="sensor_cli.html" />
    <link rel="prev" title="Sensor models" href="sensor_models.html" />
<link
  href="../../../_static/css/bootstrap.min.css"
  rel="stylesheet"
/>
<link
  rel="shortcut icon"
  href="../../../_static/images/favicon.ico"
/>

</head>

<body class="wy-body-for-nav">
<div class="announcement"></div>
<div class="d-print-none ncs-header">
  <div class="container-xl ncs-header-top">
    <div class="row h-100">
      <div class="d-none d-md-block col-2">
        <div class="bg-white py-4 px-3 ml-2 ncs-header-logo">
          <img
            class="ncs-header-logo"
            src="../../../_static/images/nordic-logo.png"
            alt=""
          />
        </div>
      </div>
      <div
        class="col-8 col-md-7 pl-md-4 d-flex align-self-center justify-content-center"
      >
        <form class="w-75" action="../../../search.html" method="get">
          <div class="form-group">
            <input
              type="text"
              name="q"
              class="ncs-search-input form-control"
              placeholder="Search all docs..."
            />
          </div>
        </form>
      </div>
      <div class="col-4 col-md-3 d-md-block p-3 text-end">
        <div class="dropdown">
          <button
            class="btn dropdown-toggle ncs-btn-versions"
            type="button"
            id="dropdownMenuButton1"
            data-bs-toggle="dropdown"
            aria-expanded="false"
          >
            <span class="d-none d-md-inline">nRF Connect SDK</span>
            <span id="ncsversion" class="d-inline"></span>
          </button>
          <div class="dropdown-menu" aria-labelledby="dropdownMenuButton"></div>
        </div>
      </div>
    </div>
  </div>
  <div class="ncs-header-nav">
    <div class="container-xl">
      <div class="row">
        <div class="col col-12 d-flex justify-content-center">
          <nav class="navbar navbar-dark navbar-expand-lg p-0">
            <span class="navbar-brand d-block d-lg-none py-2 pl-1"
              >Documentation sets</span
            >
            <button
              class="navbar-toggler"
              type="button"
              data-bs-toggle="collapse"
              data-bs-target="#navbarNavAltMarkup"
              aria-controls="navbarNavAltMarkup"
              aria-expanded="false"
              aria-label="Toggle navigation"
            >
              <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="navbarNavAltMarkup">
              <ul class="navbar-nav">
                <li class="nav-item active py-1 px-3">
                  <a
                    class="nav-link"
                    href="../../../../nrf/index.html"
                    >nRF Connect SDK</a
                  >
                </li>
                <li><hr class="dropdown-divider" /></li>
                <li class="nav-item  py-1 px-3">
                  <a
                    class="nav-link"
                    href="../../../../nrfx/index.html"
                    >nrfx</a
                  >
                </li>
                <li><hr class="dropdown-divider" /></li>
                <li class="nav-item  py-1 px-3">
                  <a
                    class="nav-link"
                    href="../../../../nrfxlib/README.html"
                    >nrfxlib</a
                  >
                </li>
                <li><hr class="dropdown-divider" /></li>
                <li class="nav-item  py-1 px-3">
                  <a
                    class="nav-link"
                    href="../../../../zephyr/index.html"
                    >Zephyr Project</a
                  >
                </li>
                <li><hr class="dropdown-divider" /></li>
                <li class="nav-item  py-1 px-3">
                  <a
                    class="nav-link"
                    href="../../../../mcuboot/wrapper.html"
                    >MCUboot</a
                  >
                </li>
                <li><hr class="dropdown-divider" /></li>
                <li class="nav-item  py-1 px-3">
                  <a
                    class="nav-link"
                    href="../../../../tfm/index.html"
                    >Trusted Firmware-M</a
                  >
                </li>
                <li><hr class="dropdown-divider" /></li>
                <li class="nav-item  py-1 px-3">
                  <a
                    class="nav-link"
                    href="../../../../matter/index.html"
                    >Matter</a
                  >
                </li>
                <li><hr class="dropdown-divider" /></li>
                <li class="nav-item  py-1 px-3">
                  <a
                    class="nav-link"
                    href="../../../../kconfig/index.html"
                    >Kconfig Reference</a
                  >
                </li>
                <li><hr class="dropdown-divider" /></li>
              </ul>
            </div>
          </nav>
        </div>
      </div>
    </div>
  </div>
</div>

  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
            <a href="../../../index.html" class="icon icon-home"> nRF Connect SDK
          </a>
              <div class="version">
                2.3.99
              </div>
<div id="searchbox" role="search">
  <div class="searchformwrapper">
    <form id="rtd-search-form" class="wy-form" action="../../../search.html" method="get">
      <input type="text" name="q" placeholder="Search docs" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
  </div>
</div>
<script>$('#searchbox').show(0);</script>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Contents</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../../introduction.html">Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../getting_started.html">Getting started</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../dev_model.html">Development model</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../app_dev.html">Application development</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../security.html">Security</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../ecosystem_integration.html">Ecosystems integration</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../nrf91.html">Working with nRF91 Series</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../nrf70.html">Working with nRF70 Series</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../nrf53.html">Working with nRF53 Series</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../nrf52.html">Working with nRF52 Series</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../protocols.html">Protocols</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../applications.html">Applications</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../samples.html">Samples</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../drivers.html">Drivers</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../../index.html">Libraries</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../../bin/index.html">Binary libraries</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="../index.html">Bluetooth libraries and services</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="../adv_prov.html">Bluetooth LE advertising providers</a></li>
<li class="toctree-l3"><a class="reference internal" href="../conn_ctx.html">Bluetooth connection context</a></li>
<li class="toctree-l3"><a class="reference internal" href="../enocean.html">Bluetooth EnOcean</a></li>
<li class="toctree-l3"><a class="reference internal" href="../gatt_dm.html">GATT Discovery Manager</a></li>
<li class="toctree-l3"><a class="reference internal" href="../gatt_pool.html">Bluetooth GATT attribute pools</a></li>
<li class="toctree-l3 current"><a class="reference internal" href="../mesh.html">Bluetooth mesh profile</a><ul class="current">
<li class="toctree-l4"><a class="reference internal" href="model_types.html">Bluetooth mesh models overview</a></li>
<li class="toctree-l4 current"><a class="reference internal" href="models.html">Bluetooth mesh models</a></li>
<li class="toctree-l4"><a class="reference internal" href="properties.html">Bluetooth mesh properties</a></li>
<li class="toctree-l4"><a class="reference internal" href="dk_prov.html">Bluetooth mesh provisioning handler for Nordic DKs</a></li>
<li class="toctree-l4"><a class="reference internal" href="sensor.html">Bluetooth mesh sensors</a></li>
<li class="toctree-l4"><a class="reference internal" href="sensor_types.html">Bluetooth mesh sensor types</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../rpc.html">Bluetooth Low Energy Remote Procedure Call</a></li>
<li class="toctree-l3"><a class="reference internal" href="../scan.html">Scanning module</a></li>
<li class="toctree-l3"><a class="reference internal" href="../services/ams_client.html">Apple Media Service (AMS) Client</a></li>
<li class="toctree-l3"><a class="reference internal" href="../services/ancs_client.html">Apple Notification Center Service (ANCS) Client</a></li>
<li class="toctree-l3"><a class="reference internal" href="../services/bas_client.html">GATT Battery Service (BAS) Client</a></li>
<li class="toctree-l3"><a class="reference internal" href="../services/bms.html">GATT Bond Management Service (BMS)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../services/cgms.html">GATT Continuous Glucose Monitoring Service (CGMS)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../services/cts_client.html">GATT Current Time Service (CTS) Client</a></li>
<li class="toctree-l3"><a class="reference internal" href="../services/ddfs.html">Direction and Distance Finding Service (DDFS)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../services/dfu_smp.html">GATT DFU SMP Service Client</a></li>
<li class="toctree-l3"><a class="reference internal" href="../services/fast_pair.html">Google Fast Pair Service (GFPS)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../services/gattp.html">Generic Attribute (GATT) Profile</a></li>
<li class="toctree-l3"><a class="reference internal" href="../services/hids.html">GATT Human Interface Device (HID) Service</a></li>
<li class="toctree-l3"><a class="reference internal" href="../services/hogp.html">GATT Human Interface Device Service (HIDS) Client</a></li>
<li class="toctree-l3"><a class="reference internal" href="../services/hrs_client.html">GATT Heart Rate Service (HRS) Client</a></li>
<li class="toctree-l3"><a class="reference internal" href="../services/latency.html">GATT Latency Service</a></li>
<li class="toctree-l3"><a class="reference internal" href="../services/latency_client.html">GATT Latency Client</a></li>
<li class="toctree-l3"><a class="reference internal" href="../services/lbs.html">LED Button Service (LBS)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../services/mds.html">Memfault Diagnostic Service (MDS)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../services/nsms.html">Nordic Status Message Service (NSMS)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../services/nus.html">Nordic UART Service (NUS)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../services/nus_client.html">Nordic UART Service (NUS) Client</a></li>
<li class="toctree-l3"><a class="reference internal" href="../services/rscs.html">Running Speed and Cadence Service (RSCS)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../services/throughput.html">GATT Throughput Service</a></li>
<li class="toctree-l3"><a class="reference internal" href="../services/wifi_prov.html">Wi-Fi Provisioning Service</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../bootloader/index.html">Bootloader libraries</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../caf/index.html">Common Application Framework</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../debug/index.html">Debug libraries</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../dfu/index.html">DFU libraries</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../gazell/index.html">Gazell libraries</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../modem/index.html">Modem libraries</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../mpsl/index.html">Multiprotocol Service Layer libraries</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../networking/index.html">Libraries for networking</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../nfc/index.html">Libraries for NFC</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../nrf_rpc/index.html">nRF RPC libraries</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../others/index.html">Other libraries</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../shell/index.html">Shell libraries</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../tfm/index.html">TF-M libraries</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../zigbee/index.html">Libraries for Zigbee</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../scripts.html">Scripts</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../release_notes.html">Release notes</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../known_issues.html">Known issues</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../software_maturity.html">Software maturity levels</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../documentation.html">About this documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../glossary.html">Glossary</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../../index.html">nRF Connect SDK</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../../../index.html" class="icon icon-home"></a></li>
          <li class="breadcrumb-item"><a href="../../index.html">Libraries</a></li>
          <li class="breadcrumb-item"><a href="../index.html">Bluetooth libraries and services</a></li>
          <li class="breadcrumb-item"><a href="../mesh.html">Bluetooth mesh profile</a></li>
          <li class="breadcrumb-item"><a href="models.html">Bluetooth mesh models</a></li>
          <li class="breadcrumb-item"><a href="sensor_models.html">Sensor models</a></li>
      <li class="breadcrumb-item active">Sensor Server</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../../../_sources/libraries/bluetooth_services/mesh/sensor_srv.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="sensor-server">
<span id="bt-mesh-sensor-srv-readme"></span><h1>Sensor Server<a class="headerlink" href="#sensor-server" title="Permalink to this heading"></a></h1>
<div class="contents local topic" id="contents">
<ul class="simple">
<li><p><a class="reference internal" href="#configuration" id="id7">Configuration</a></p></li>
<li><p><a class="reference internal" href="#states" id="id8">States</a></p></li>
<li><p><a class="reference internal" href="#extended-models" id="id9">Extended models</a></p></li>
<li><p><a class="reference internal" href="#persistent-storage" id="id10">Persistent storage</a></p></li>
<li><p><a class="reference internal" href="#api-documentation" id="id11">API documentation</a></p></li>
</ul>
</div>
<p>The Sensor Server model holds a list of sensors, and exposes them to the mesh network.
There may be multiple Sensor Server models on a single mesh node, and each model may hold up to 47 sensors.</p>
<p>The Sensor Server model adds two model instances in the composition data:</p>
<ul class="simple">
<li><p>Sensor Server</p></li>
<li><p>Sensor Setup Server</p></li>
</ul>
<p>The two model instances share the states of the Sensor Server, but accept different messages.
This allows for a fine-grained control of the access rights for the Sensor Server states, as the two model instances can be bound to different application keys.</p>
<ul class="simple">
<li><p>Sensor Server is the user-facing model in the pair.
It provides access to read-only states Sensor Descriptors, Sensor Data, and Sensor Series.</p></li>
<li><p>Sensor Setup Server provides access to Sensor Cadence and Sensor Settings, allowing configurator devices to set up the publish rate and parameters for each sensor.</p></li>
</ul>
<section id="configuration">
<h2><a class="toc-backref" href="#id7">Configuration</a><a class="headerlink" href="#configuration" title="Permalink to this heading"></a></h2>
<p>The Sensor Server model requires a list of <a class="reference internal" href="sensor.html#c.bt_mesh_sensor" title="bt_mesh_sensor"><code class="xref c c-struct docutils literal notranslate"><span class="pre">bt_mesh_sensor</span></code></a> pointers at compile time.
The list of sensors cannot be changed at runtime, and only one of each type of sensors can be held by a Sensor Server.
To expose multiple sensors of the same type, multiple Sensor Servers must be instantiated on different elements.</p>
<p>The initialization of the Sensor Server can look like this:</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="k">extern</span><span class="w"> </span><span class="k">struct</span><span class="w"> </span><span class="nc">bt_mesh_sensor</span><span class="w"> </span><span class="n">temperature_sensor</span><span class="p">;</span>
<span class="k">extern</span><span class="w"> </span><span class="k">struct</span><span class="w"> </span><span class="nc">bt_mesh_sensor</span><span class="w"> </span><span class="n">motion_sensor</span><span class="p">;</span>
<span class="k">extern</span><span class="w"> </span><span class="k">struct</span><span class="w"> </span><span class="nc">bt_mesh_sensor</span><span class="w"> </span><span class="n">light_sensor</span><span class="p">;</span>

<span class="k">static</span><span class="w"> </span><span class="k">struct</span><span class="w"> </span><span class="nc">bt_mesh_sensor</span><span class="o">*</span><span class="w"> </span><span class="k">const</span><span class="w"> </span><span class="n">sensors</span><span class="p">[]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="o">&amp;</span><span class="n">temperature_sensor</span><span class="p">,</span>
<span class="w">    </span><span class="o">&amp;</span><span class="n">motion_sensor</span><span class="p">,</span>
<span class="w">    </span><span class="o">&amp;</span><span class="n">light_sensor</span><span class="p">,</span>
<span class="p">};</span>
<span class="k">static</span><span class="w"> </span><span class="k">struct</span><span class="w"> </span><span class="nc">bt_mesh_sensor_srv</span><span class="w"> </span><span class="n">sensor_srv</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">BT_MESH_SENSOR_SRV_INIT</span><span class="p">(</span><span class="n">sensors</span><span class="p">,</span><span class="w"> </span><span class="n">ARRAY_SIZE</span><span class="p">(</span><span class="n">sensors</span><span class="p">));</span>
</pre></div>
</div>
<p>Each sensor can be implemented in its own separate module by exposing the sensor instance as an external variable and pointing to it in the server’s sensor list.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The list of pointers can be <code class="docutils literal notranslate"><span class="pre">const</span></code>, while the sensor instances themselves cannot.</p>
</div>
<p>All sensors exposed by the Sensor Server must be present in the Server’s list.
Passing unlisted sensor instances to the Server API results in undefined behavior.</p>
</section>
<section id="states">
<h2><a class="toc-backref" href="#id8">States</a><a class="headerlink" href="#states" title="Permalink to this heading"></a></h2>
<p>The Sensor Server does not hold any states on its own.
Instead, it exposes the states of all its sensors.</p>
</section>
<section id="extended-models">
<h2><a class="toc-backref" href="#id9">Extended models</a><a class="headerlink" href="#extended-models" title="Permalink to this heading"></a></h2>
<p>None.</p>
</section>
<section id="persistent-storage">
<h2><a class="toc-backref" href="#id10">Persistent storage</a><a class="headerlink" href="#persistent-storage" title="Permalink to this heading"></a></h2>
<p>The Sensor Server stores the cadence state of each sensor instance persistently, including:</p>
<ul class="simple">
<li><p>Minimum interval</p></li>
<li><p>Delta thresholds</p></li>
<li><p>Fast period divisor</p></li>
<li><p>Fast cadence range</p></li>
</ul>
<p>Any other data is managed by the application and must be stored separately.
This applies for example to sensor settings or sample data.</p>
<p>If <code class="xref kconfig kconfig-option docutils literal notranslate"><span class="pre">CONFIG_BT_SETTINGS</span></code> is enabled, the Sensor Server stores all its states persistently using a configurable storage delay to stagger storing.
See <code class="xref kconfig kconfig-option docutils literal notranslate"><span class="pre">CONFIG_BT_MESH_MODEL_SRV_STORE_TIMEOUT</span></code>.</p>
</section>
<section id="api-documentation">
<h2><a class="toc-backref" href="#id11">API documentation</a><a class="headerlink" href="#api-documentation" title="Permalink to this heading"></a></h2>
<div class="line-block">
<div class="line">Header file: <code class="file docutils literal notranslate"><span class="pre">include/bluetooth/mesh/sensor_srv.h</span></code></div>
<div class="line">Source file: <code class="file docutils literal notranslate"><span class="pre">subsys/bluetooth/mesh/sensor_srv.c</span></code></div>
</div>
<dl>
<dt class="sig sig-object cpp">
<span class="target" id="group__bt__mesh__sensor__srv"></span><em><span class="pre">group</span></em> <span class="sig-name descname"><span class="pre">bt_mesh_sensor_srv</span></span></dt>
<dd><p>API for the Sensor Server. </p>
<div class="breathe-sectiondef docutils container">
<p class="breathe-sectiondef-title rubric" id="breathe-section-title-defines">Defines</p>
<dl class="c macro">
<dt class="sig sig-object c" id="c.BT_MESH_SENSOR_SRV_INIT">
<span class="target" id="group__bt__mesh__sensor__srv_1gab1db5d7cec9724f02c78bfd7cf5870c6"></span><span class="sig-name descname"><span class="n"><span class="pre">BT_MESH_SENSOR_SRV_INIT</span></span></span><span class="sig-paren">(</span><span class="n"><span class="pre">_sensors</span></span>, <span class="n"><span class="pre">_count</span></span><span class="sig-paren">)</span><a class="headerlink" href="#c.BT_MESH_SENSOR_SRV_INIT" title="Permalink to this definition"></a><br /></dt>
<dd><p>Initialization parameters for <a class="reference internal" href="#group__bt__mesh__sensor__srv"><span class="std std-ref">Sensor Server model</span></a>. </p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>A sensor server can only represent one sensor instance of each sensor type. Duplicate sensors will be ignored.</p>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>_sensors</strong> – <strong>[in]</strong> Array of pointers to sensors owned by this server. </p></li>
<li><p><strong>_count</strong> – <strong>[in]</strong> Number of sensors in the array. Can at most be <span> <code class="xref kconfig kconfig-option docutils literal notranslate"><span class="pre">CONFIG_BT_MESH_SENSOR_SRV_SENSORS_MAX</span></code> </span>. </p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="c macro">
<dt class="sig sig-object c" id="c.BT_MESH_MODEL_SENSOR_SRV">
<span class="target" id="group__bt__mesh__sensor__srv_1ga4e13ea7793701d679206ee210ec9e8f8"></span><span class="sig-name descname"><span class="n"><span class="pre">BT_MESH_MODEL_SENSOR_SRV</span></span></span><span class="sig-paren">(</span><span class="n"><span class="pre">_srv</span></span><span class="sig-paren">)</span><a class="headerlink" href="#c.BT_MESH_MODEL_SENSOR_SRV" title="Permalink to this definition"></a><br /></dt>
<dd><p>Sensor Server model composition data entry. </p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>_srv</strong> – <strong>[in]</strong> Pointer to a <a class="reference internal" href="#group__bt__mesh__sensor__srv"><span class="std std-ref">Sensor Server model</span></a> instance. </p></li>
</ul>
</dd>
</dl>
</dd></dl>

</div>
<div class="breathe-sectiondef docutils container">
<p class="breathe-sectiondef-title rubric" id="breathe-section-title-functions">Functions</p>
<dl class="c function">
<dt class="sig sig-object c" id="c.bt_mesh_sensor_srv_pub">
<span class="target" id="group__bt__mesh__sensor__srv_1gaffb1de2f53c9d9fb046ee9f8a26d0db8"></span><span class="kt"><span class="pre">int</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">bt_mesh_sensor_srv_pub</span></span></span><span class="sig-paren">(</span><span class="k"><span class="pre">struct</span></span><span class="w"> </span><a class="reference internal" href="#c.bt_mesh_sensor_srv" title="bt_mesh_sensor_srv"><span class="n"><span class="pre">bt_mesh_sensor_srv</span></span></a><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">srv</span></span>, <span class="k"><span class="pre">struct</span></span><span class="w"> </span><span class="n"><span class="pre">bt_mesh_msg_ctx</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">ctx</span></span>, <span class="k"><span class="pre">struct</span></span><span class="w"> </span><a class="reference internal" href="sensor.html#c.bt_mesh_sensor" title="bt_mesh_sensor"><span class="n"><span class="pre">bt_mesh_sensor</span></span></a><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">sensor</span></span>, <span class="k"><span class="pre">const</span></span><span class="w"> </span><span class="k"><span class="pre">struct</span></span><span class="w"> </span><span class="n"><span class="pre">sensor_value</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">value</span></span><span class="sig-paren">)</span><a class="headerlink" href="#c.bt_mesh_sensor_srv_pub" title="Permalink to this definition"></a><br /></dt>
<dd><p>Publish a sensor value. </p>
<p>Immediately publishes the given sensor value, without checking thresholds or intervals.</p>
<p><div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference internal" href="#group__bt__mesh__sensor__srv_1gaffb1de2f53c9d9fb046ee9f8a26d0db8"><span class="std std-ref">bt_mesh_sensor_srv_pub</span></a></p>
</div>
</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>srv</strong> – <strong>[in]</strong> Sensor server instance. </p></li>
<li><p><strong>ctx</strong> – <strong>[in]</strong> Message context to publish with, or NULL to publish on the configured publish parameters. </p></li>
<li><p><strong>sensor</strong> – <strong>[in]</strong> Sensor to publish with. </p></li>
<li><p><strong>value</strong> – <strong>[in]</strong> Sensor value to publish, interpreted as an array of sensor channel values matching the sensor channels specified by the sensor type. The length of the array must match the sensor channel count.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>0 on success, or (negative) error code otherwise. </p>
</dd>
</dl>
</dd></dl>

<dl class="c function">
<dt class="sig sig-object c" id="c.bt_mesh_sensor_srv_sample">
<span class="target" id="group__bt__mesh__sensor__srv_1ga93b1dbd6ca9e8f44a9c0aab1f1bdb873"></span><span class="kt"><span class="pre">int</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">bt_mesh_sensor_srv_sample</span></span></span><span class="sig-paren">(</span><span class="k"><span class="pre">struct</span></span><span class="w"> </span><a class="reference internal" href="#c.bt_mesh_sensor_srv" title="bt_mesh_sensor_srv"><span class="n"><span class="pre">bt_mesh_sensor_srv</span></span></a><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">srv</span></span>, <span class="k"><span class="pre">struct</span></span><span class="w"> </span><a class="reference internal" href="sensor.html#c.bt_mesh_sensor" title="bt_mesh_sensor"><span class="n"><span class="pre">bt_mesh_sensor</span></span></a><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">sensor</span></span><span class="sig-paren">)</span><a class="headerlink" href="#c.bt_mesh_sensor_srv_sample" title="Permalink to this definition"></a><br /></dt>
<dd><p>Make the server to take a sample of the sensor, and publish if the value changed sufficiently. </p>
<p>Works the same way as <a class="reference internal" href="#group__bt__mesh__sensor__srv_1gaffb1de2f53c9d9fb046ee9f8a26d0db8"><span class="std std-ref">bt_mesh_sensor_srv_pub()</span></a>, except that the server makes a decision on whether to publish the value based on the delta from the previous publication and the sensor’s threshold parameters. Only single channel sensor values will be considered.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>srv</strong> – <strong>[in]</strong> Sensor server instance. </p></li>
<li><p><strong>sensor</strong> – <strong>[in]</strong> Sensor instance to sample.</p></li>
</ul>
</dd>
<dt class="field-even">Return values</dt>
<dd class="field-even"><ul class="simple">
<li><p><strong>0</strong> – The sensor value was published. </p></li>
<li><p><strong>-EBUSY</strong> – Failed sampling the sensor value. </p></li>
<li><p><strong>-EALREADY</strong> – The sensor value has not changed sufficiently to require a publication. </p></li>
<li><p><strong>-EADDRNOTAVAIL</strong> – A message context was not provided and publishing is not configured. </p></li>
<li><p><strong>-EAGAIN</strong> – The device has not been provisioned. </p></li>
</ul>
</dd>
</dl>
</dd></dl>

</div>
<dl class="c struct">
<dt class="sig sig-object c" id="c.bt_mesh_sensor_srv">
<span class="target" id="structbt__mesh__sensor__srv"></span><span class="k"><span class="pre">struct</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">bt_mesh_sensor_srv</span></span></span><a class="headerlink" href="#c.bt_mesh_sensor_srv" title="Permalink to this definition"></a><br /></dt>
<dd><div class="docutils container">
<em>#include &lt;sensor_srv.h&gt;</em></div>
<p>Sensor server instance. </p>
<div class="breathe-sectiondef docutils container">
<p class="breathe-sectiondef-title rubric" id="breathe-section-title-public-members">Public Members</p>
<dl class="c var">
<dt class="sig sig-object c" id="c.bt_mesh_sensor_srv.sensor_array">
<span class="target" id="structbt__mesh__sensor__srv_1aa660d46e2d199061f48d2f816b21e907"></span><span class="k"><span class="pre">struct</span></span><span class="w"> </span><a class="reference internal" href="sensor.html#c.bt_mesh_sensor" title="bt_mesh_sensor"><span class="n"><span class="pre">bt_mesh_sensor</span></span></a><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="k"><span class="pre">const</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="sig-name descname"><span class="n"><span class="pre">sensor_array</span></span></span><a class="headerlink" href="#c.bt_mesh_sensor_srv.sensor_array" title="Permalink to this definition"></a><br /></dt>
<dd><p>Sensors owned by this server. </p>
</dd></dl>

<dl class="c var">
<dt class="sig sig-object c" id="c.bt_mesh_sensor_srv.sensors">
<span class="target" id="structbt__mesh__sensor__srv_1a437d549c56530b25b0c3701c72b43bcd"></span><span class="n"><span class="pre">sys_slist_t</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">sensors</span></span></span><a class="headerlink" href="#c.bt_mesh_sensor_srv.sensors" title="Permalink to this definition"></a><br /></dt>
<dd><p>Ordered linked list of sensors. </p>
</dd></dl>

<dl class="c var">
<dt class="sig sig-object c" id="c.bt_mesh_sensor_srv.seq">
<span class="target" id="structbt__mesh__sensor__srv_1afa797f6050d5c22fd6ddcd4b357441f4"></span><span class="n"><span class="pre">uint16_t</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">seq</span></span></span><a class="headerlink" href="#c.bt_mesh_sensor_srv.seq" title="Permalink to this definition"></a><br /></dt>
<dd><p>Publish sequence counter </p>
</dd></dl>

<dl class="c var">
<dt class="sig sig-object c" id="c.bt_mesh_sensor_srv.sensor_count">
<span class="target" id="structbt__mesh__sensor__srv_1a3f2574ff47034fbd31e11302c89fa8e6"></span><span class="n"><span class="pre">uint8_t</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">sensor_count</span></span></span><a class="headerlink" href="#c.bt_mesh_sensor_srv.sensor_count" title="Permalink to this definition"></a><br /></dt>
<dd><p>Number of sensors. </p>
</dd></dl>

<dl class="c var">
<dt class="sig sig-object c" id="c.bt_mesh_sensor_srv.pub">
<span class="target" id="structbt__mesh__sensor__srv_1a09f3098bed5b7e540724cf5fe35818c2"></span><span class="k"><span class="pre">struct</span></span><span class="w"> </span><span class="n"><span class="pre">bt_mesh_model_pub</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">pub</span></span></span><a class="headerlink" href="#c.bt_mesh_sensor_srv.pub" title="Permalink to this definition"></a><br /></dt>
<dd><p>Publish parameters. </p>
</dd></dl>

<dl class="c var">
<dt class="sig sig-object c" id="c.bt_mesh_sensor_srv.setup_pub">
<span class="target" id="structbt__mesh__sensor__srv_1a5f6557fca80c234de454839ac9543304"></span><span class="k"><span class="pre">struct</span></span><span class="w"> </span><span class="n"><span class="pre">bt_mesh_model_pub</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">setup_pub</span></span></span><a class="headerlink" href="#c.bt_mesh_sensor_srv.setup_pub" title="Permalink to this definition"></a><br /></dt>
<dd><p>Publish parameters for the setup server. </p>
</dd></dl>

<dl class="c var">
<dt class="sig sig-object c" id="c.bt_mesh_sensor_srv.model">
<span class="target" id="structbt__mesh__sensor__srv_1aa4c41f690cfe38314c3871b2cd16f87c"></span><span class="k"><span class="pre">struct</span></span><span class="w"> </span><span class="n"><span class="pre">bt_mesh_model</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="sig-name descname"><span class="n"><span class="pre">model</span></span></span><a class="headerlink" href="#c.bt_mesh_sensor_srv.model" title="Permalink to this definition"></a><br /></dt>
<dd><p>Composition data model pointer. </p>
</dd></dl>

</div>
</dd></dl>

</dd></dl>

</section>
</section>


           </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="sensor_cli.html" class="btn btn-neutral float-right" title="Sensor Client" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="sensor_models.html" class="btn btn-neutral" title="Sensor models" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">

<table>
<tr>
<td>
    <p>
        &copy; Copyright 2019-2023, Nordic Semiconductor.
      Last updated on Mar 20, 2023.

    </p>
</td>
<td id="nordiclogo">
  <a href="https://www.nordicsemi.com/"><img src="../../../_static/images/nordic-logo.png" border="0"/></a>
</td>
</tr>
</table>
  </div> 


</footer>

<div id="scroll-container">
  <button type="button" id="scroll-btn" class="btn">
    <svg xmlns="http://www.w3.org/2000/svg" height="24" viewBox="0 0 24 24" width="24"><path d="M0 0h24v24H0z" fill="none"/><path d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z" fill="#fff"/></svg>
  </button>
</div>

<script>
  const scrollBtn = document.querySelector("#scroll-btn");

  document.addEventListener("scroll", () => {
    if (window.scrollY > 400) {
          scrollBtn.style.visibility = "visible";
      } else {
          scrollBtn.style.visibility = "hidden";
      }
  });

  scrollBtn.addEventListener("click", () => {
      window.scrollTo({ top: 0, behavior: "smooth" });
  });
</script>
        </div>
      </div>
    </section>
  </div>
  
  <div class="rst-versions" data-toggle="rst-versions" role="note" aria-label="versions">
    <span class="rst-current-version" data-toggle="rst-current-version">
      <span class="fa fa-book"> nRF Connect SDK</span>
       <span class="fa fa-caret-down"></span>
    </span>
    <div class="rst-other-versions">
      
      <div class="rst-other-version ncs">
        <a href="../../../../nrf/index.html">nRF Connect SDK</a>
      </div>
      
      <div class="rst-other-version nrfx">
        <a href="../../../../nrfx/index.html">nrfx</a>
      </div>
      
      <div class="rst-other-version nrfxlib">
        <a href="../../../../nrfxlib/README.html">nrfxlib</a>
      </div>
      
      <div class="rst-other-version zephyr">
        <a href="../../../../zephyr/index.html">Zephyr Project</a>
      </div>
      
      <div class="rst-other-version mcuboot">
        <a href="../../../../mcuboot/wrapper.html">MCUboot</a>
      </div>
      
      <div class="rst-other-version tfm">
        <a href="../../../../tfm/index.html">Trusted Firmware-M</a>
      </div>
      
      <div class="rst-other-version matter">
        <a href="../../../../matter/index.html">Matter</a>
      </div>
      
      <div class="rst-other-version kconfig">
        <a href="../../../../kconfig/index.html">Kconfig Reference</a>
      </div>
    </div>
  </div><script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>