<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Hardware unique key &mdash; nRF Connect SDK 2.3.99 documentation</title>
      <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="../../_static/css/nordic.css" type="text/css" />
      <link rel="stylesheet" href="../../_static/togglebutton.css" type="text/css" />
      <link rel="stylesheet" href="../../_static/css/nrf.css" type="text/css" />
      <link rel="stylesheet" href="../../_static/tabs.css" type="text/css" /> 
  <!--[if lt IE 9]>
    <script src="../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="../../" id="documentation_options" src="../../_static/documentation_options.js"></script>
        <script src="../../_static/jquery.js"></script>
        <script src="../../_static/underscore.js"></script>
        <script src="../../_static/_sphinx_javascript_frameworks_compat.js"></script>
        <script src="../../_static/doctools.js"></script>
        <script src="../../_static/sphinx_highlight.js"></script>
        <script src="https://www.googletagmanager.com/gtag/js?id=G-ZPVZRKFQJR"></script>
        <script src="../../_static/js/ga-tracker.js"></script>
        <script data-culture="EN" id="CookieConsent" type="text/javascript" src="https://policy.app.cookieinformation.com/uc.js"></script>
        <script>let toggleHintShow = 'Click to show';</script>
        <script>let toggleHintHide = 'Click to hide';</script>
        <script>let toggleOpenOnPrint = 'true';</script>
        <script src="../../_static/togglebutton.js"></script>
        <script>var togglebuttonSelector = '.toggle, .admonition.dropdown';</script>
    <script src="../../_static/js/theme.js"></script>
<script
  type="text/javascript"
  src="../../_static/js/ncs.js"
></script>
<script src="../../_static/js/bootstrap.bundle.min.js"></script>

    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="Identity key" href="identity_key.html" />
    <link rel="prev" title="Hardware ID" href="hw_id.html" />
<link
  href="../../_static/css/bootstrap.min.css"
  rel="stylesheet"
/>
<link
  rel="shortcut icon"
  href="../../_static/images/favicon.ico"
/>

</head>

<body class="wy-body-for-nav">
<div class="announcement"></div>
<div class="d-print-none ncs-header">
  <div class="container-xl ncs-header-top">
    <div class="row h-100">
      <div class="d-none d-md-block col-2">
        <div class="bg-white py-4 px-3 ml-2 ncs-header-logo">
          <img
            class="ncs-header-logo"
            src="../../_static/images/nordic-logo.png"
            alt=""
          />
        </div>
      </div>
      <div
        class="col-8 col-md-7 pl-md-4 d-flex align-self-center justify-content-center"
      >
        <form class="w-75" action="../../search.html" method="get">
          <div class="form-group">
            <input
              type="text"
              name="q"
              class="ncs-search-input form-control"
              placeholder="Search all docs..."
            />
          </div>
        </form>
      </div>
      <div class="col-4 col-md-3 d-md-block p-3 text-end">
        <div class="dropdown">
          <button
            class="btn dropdown-toggle ncs-btn-versions"
            type="button"
            id="dropdownMenuButton1"
            data-bs-toggle="dropdown"
            aria-expanded="false"
          >
            <span class="d-none d-md-inline">nRF Connect SDK</span>
            <span id="ncsversion" class="d-inline"></span>
          </button>
          <div class="dropdown-menu" aria-labelledby="dropdownMenuButton"></div>
        </div>
      </div>
    </div>
  </div>
  <div class="ncs-header-nav">
    <div class="container-xl">
      <div class="row">
        <div class="col col-12 d-flex justify-content-center">
          <nav class="navbar navbar-dark navbar-expand-lg p-0">
            <span class="navbar-brand d-block d-lg-none py-2 pl-1"
              >Documentation sets</span
            >
            <button
              class="navbar-toggler"
              type="button"
              data-bs-toggle="collapse"
              data-bs-target="#navbarNavAltMarkup"
              aria-controls="navbarNavAltMarkup"
              aria-expanded="false"
              aria-label="Toggle navigation"
            >
              <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="navbarNavAltMarkup">
              <ul class="navbar-nav">
                <li class="nav-item active py-1 px-3">
                  <a
                    class="nav-link"
                    href="../../../nrf/index.html"
                    >nRF Connect SDK</a
                  >
                </li>
                <li><hr class="dropdown-divider" /></li>
                <li class="nav-item  py-1 px-3">
                  <a
                    class="nav-link"
                    href="../../../nrfx/index.html"
                    >nrfx</a
                  >
                </li>
                <li><hr class="dropdown-divider" /></li>
                <li class="nav-item  py-1 px-3">
                  <a
                    class="nav-link"
                    href="../../../nrfxlib/README.html"
                    >nrfxlib</a
                  >
                </li>
                <li><hr class="dropdown-divider" /></li>
                <li class="nav-item  py-1 px-3">
                  <a
                    class="nav-link"
                    href="../../../zephyr/index.html"
                    >Zephyr Project</a
                  >
                </li>
                <li><hr class="dropdown-divider" /></li>
                <li class="nav-item  py-1 px-3">
                  <a
                    class="nav-link"
                    href="../../../mcuboot/wrapper.html"
                    >MCUboot</a
                  >
                </li>
                <li><hr class="dropdown-divider" /></li>
                <li class="nav-item  py-1 px-3">
                  <a
                    class="nav-link"
                    href="../../../tfm/index.html"
                    >Trusted Firmware-M</a
                  >
                </li>
                <li><hr class="dropdown-divider" /></li>
                <li class="nav-item  py-1 px-3">
                  <a
                    class="nav-link"
                    href="../../../matter/index.html"
                    >Matter</a
                  >
                </li>
                <li><hr class="dropdown-divider" /></li>
                <li class="nav-item  py-1 px-3">
                  <a
                    class="nav-link"
                    href="../../../kconfig/index.html"
                    >Kconfig Reference</a
                  >
                </li>
                <li><hr class="dropdown-divider" /></li>
              </ul>
            </div>
          </nav>
        </div>
      </div>
    </div>
  </div>
</div>

  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
            <a href="../../index.html" class="icon icon-home"> nRF Connect SDK
          </a>
              <div class="version">
                2.3.99
              </div>
<div id="searchbox" role="search">
  <div class="searchformwrapper">
    <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
      <input type="text" name="q" placeholder="Search docs" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
  </div>
</div>
<script>$('#searchbox').show(0);</script>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Contents</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../introduction.html">Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../getting_started.html">Getting started</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../dev_model.html">Development model</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../app_dev.html">Application development</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../security.html">Security</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../ecosystem_integration.html">Ecosystems integration</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../nrf91.html">Working with nRF91 Series</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../nrf70.html">Working with nRF70 Series</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../nrf53.html">Working with nRF53 Series</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../nrf52.html">Working with nRF52 Series</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../protocols.html">Protocols</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../applications.html">Applications</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../samples.html">Samples</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../drivers.html">Drivers</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../index.html">Libraries</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../bin/index.html">Binary libraries</a></li>
<li class="toctree-l2"><a class="reference internal" href="../bluetooth_services/index.html">Bluetooth libraries and services</a></li>
<li class="toctree-l2"><a class="reference internal" href="../bootloader/index.html">Bootloader libraries</a></li>
<li class="toctree-l2"><a class="reference internal" href="../caf/index.html">Common Application Framework</a></li>
<li class="toctree-l2"><a class="reference internal" href="../debug/index.html">Debug libraries</a></li>
<li class="toctree-l2"><a class="reference internal" href="../dfu/index.html">DFU libraries</a></li>
<li class="toctree-l2"><a class="reference internal" href="../gazell/index.html">Gazell libraries</a></li>
<li class="toctree-l2"><a class="reference internal" href="../modem/index.html">Modem libraries</a></li>
<li class="toctree-l2"><a class="reference internal" href="../mpsl/index.html">Multiprotocol Service Layer libraries</a></li>
<li class="toctree-l2"><a class="reference internal" href="../networking/index.html">Libraries for networking</a></li>
<li class="toctree-l2"><a class="reference internal" href="../nfc/index.html">Libraries for NFC</a></li>
<li class="toctree-l2"><a class="reference internal" href="../nrf_rpc/index.html">nRF RPC libraries</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="index.html">Other libraries</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="adp536x.html">adp536x</a></li>
<li class="toctree-l3"><a class="reference internal" href="app_event_manager.html">Application Event Manager</a></li>
<li class="toctree-l3"><a class="reference internal" href="app_event_manager_profiler_tracer.html">Application Event Manager profiler tracer</a></li>
<li class="toctree-l3"><a class="reference internal" href="contin_array.html">Continuous array</a></li>
<li class="toctree-l3"><a class="reference internal" href="data_fifo.html">Data FIFO</a></li>
<li class="toctree-l3"><a class="reference internal" href="date_time.html">Date-Time</a></li>
<li class="toctree-l3"><a class="reference internal" href="dk_buttons_and_leds.html">DK Buttons and LEDs</a></li>
<li class="toctree-l3"><a class="reference internal" href="dm.html">Distance Measurement</a></li>
<li class="toctree-l3"><a class="reference internal" href="ei_wrapper.html">Edge Impulse wrapper</a></li>
<li class="toctree-l3"><a class="reference internal" href="emds.html">Emergency data storage</a></li>
<li class="toctree-l3"><a class="reference internal" href="esb.html">Enhanced ShockBurst</a></li>
<li class="toctree-l3"><a class="reference internal" href="event_manager_proxy.html">Event Manager Proxy</a></li>
<li class="toctree-l3"><a class="reference internal" href="fatal_error.html">Fatal error handler</a></li>
<li class="toctree-l3"><a class="reference internal" href="flash_map_pm.html">Partition Manager flash map</a></li>
<li class="toctree-l3"><a class="reference internal" href="flash_patch.html">Flash patch</a></li>
<li class="toctree-l3"><a class="reference internal" href="fprotect.html">Hardware flash write protection</a></li>
<li class="toctree-l3"><a class="reference internal" href="fw_info.html">Firmware information</a></li>
<li class="toctree-l3"><a class="reference internal" href="hw_id.html">Hardware ID</a></li>
<li class="toctree-l3 current"><a class="current reference internal" href="#">Hardware unique key</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#functionality">Functionality</a></li>
<li class="toctree-l4"><a class="reference internal" href="#prerequisites">Prerequisites</a></li>
<li class="toctree-l4"><a class="reference internal" href="#usage">Usage</a></li>
<li class="toctree-l4"><a class="reference internal" href="#api-documentation">API documentation</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="identity_key.html">Identity key</a></li>
<li class="toctree-l3"><a class="reference internal" href="memfault_ncs.html">Memfault</a></li>
<li class="toctree-l3"><a class="reference internal" href="nrf_profiler.html">nRF Profiler</a></li>
<li class="toctree-l3"><a class="reference internal" href="pcm_mix.html">Pulse Code Modulation audio mixer</a></li>
<li class="toctree-l3"><a class="reference internal" href="pcm_stream_channel_modifier.html">PCM Stream Channel Modifier</a></li>
<li class="toctree-l3"><a class="reference internal" href="qos.html">Quality of Service</a></li>
<li class="toctree-l3"><a class="reference internal" href="ram_pwrdn.html">RAM power-down</a></li>
<li class="toctree-l3"><a class="reference internal" href="sfloat.html">Short float (SFLOAT)</a></li>
<li class="toctree-l3"><a class="reference internal" href="st25r3911b_nfc.html">NFC Reader ST25R3911B</a></li>
<li class="toctree-l3"><a class="reference internal" href="supl_os_client.html">SUPL client and SUPL client OS integration</a></li>
<li class="toctree-l3"><a class="reference internal" href="tone.html">Tone generator</a></li>
<li class="toctree-l3"><a class="reference internal" href="wave_gen.html">Wave generator</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../shell/index.html">Shell libraries</a></li>
<li class="toctree-l2"><a class="reference internal" href="../tfm/index.html">TF-M libraries</a></li>
<li class="toctree-l2"><a class="reference internal" href="../zigbee/index.html">Libraries for Zigbee</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../scripts.html">Scripts</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../release_notes.html">Release notes</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../known_issues.html">Known issues</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../software_maturity.html">Software maturity levels</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../documentation.html">About this documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../glossary.html">Glossary</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">nRF Connect SDK</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../../index.html" class="icon icon-home"></a></li>
          <li class="breadcrumb-item"><a href="../index.html">Libraries</a></li>
          <li class="breadcrumb-item"><a href="index.html">Other libraries</a></li>
      <li class="breadcrumb-item active">Hardware unique key</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../../_sources/libraries/others/hw_unique_key.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="hardware-unique-key">
<span id="lib-hw-unique-key"></span><h1>Hardware unique key<a class="headerlink" href="#hardware-unique-key" title="Permalink to this heading"></a></h1>
<div class="contents local topic" id="contents">
<ul class="simple">
<li><p><a class="reference internal" href="#functionality" id="id7">Functionality</a></p></li>
<li><p><a class="reference internal" href="#prerequisites" id="id8">Prerequisites</a></p></li>
<li><p><a class="reference internal" href="#usage" id="id9">Usage</a></p></li>
<li><p><a class="reference internal" href="#api-documentation" id="id10">API documentation</a></p></li>
</ul>
</div>
<p>The hardware unique key library manages symmetric root keys on devices with the Arm CryptoCell security subsystem.</p>
<section id="functionality">
<h2><a class="toc-backref" href="#id7">Functionality</a><a class="headerlink" href="#functionality" title="Permalink to this heading"></a></h2>
<p>Hardware unique keys (HUKs) are device-specific keys that you can use with functions for key derivation to generate other keys.
Applications can use the generated keys for symmetric cryptographic operations.
By using HUKs, you can let your application use multiple keys without having to store them on the device, as they can be derived from a HUK, using a static label, when needed.</p>
<div class="admonition caution">
<p class="admonition-title">Caution</p>
<p>Use hardware unique keys only for key derivation, never directly for symmetric cryptographic operations.</p>
</div>
<p>The library supports 3 different types of HUKs, depending on the device:</p>
<ul class="simple">
<li><p>Device root key (KDR).
It is used for deriving general-purpose keys.
In devices with the Arm CryptoCell CC310, it must be written to a specific KDR register during the boot process, using the <a class="reference internal" href="#c.hw_unique_key_load_kdr" title="hw_unique_key_load_kdr"><code class="xref c c-func docutils literal notranslate"><span class="pre">hw_unique_key_load_kdr()</span></code></a> function.
The nRF Secure Immutable Bootloader does this automatically if you enable <code class="xref kconfig kconfig-option docutils literal notranslate"><span class="pre">CONFIG_HW_UNIQUE_KEY</span></code> in the bootloader image.</p></li>
<li><p>Master key encryption key (MKEK).
It is used for deriving Key Encryption Keys (KEKs), which are used to encrypt other keys when these are stored.
It is provided to CryptoCell when it is used.</p></li>
<li><p>Master key for encrypting external storage (MEXT).
It is used to derive keys for encrypting data in external non-secure storage.
It is provided to CryptoCell when it is used.</p></li>
</ul>
<p>See the following table for an overview of the key types supported by each device:</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 25%" />
<col style="width: 25%" />
<col style="width: 25%" />
<col style="width: 25%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Device</p></th>
<th class="head"><p>CryptoCell version</p></th>
<th class="head"><p>Key Management Unit</p></th>
<th class="head"><p>Supported HUK types</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>nRF9160</p></td>
<td><p>CC310</p></td>
<td><p>Yes</p></td>
<td><p>KDR, MKEK, MEXT</p></td>
</tr>
<tr class="row-odd"><td><p>nRF5340</p></td>
<td><p>CC312</p></td>
<td><p>Yes</p></td>
<td><p>MKEK, MEXT</p></td>
</tr>
<tr class="row-even"><td><p>nRF52840</p></td>
<td><p>CC310</p></td>
<td><p>No</p></td>
<td><p>KDR only</p></td>
</tr>
</tbody>
</table>
<p>In devices with a Key Management Unit (KMU), like nRF9160 or nRF5340, the keys reside in reserved slots in the KMU itself.
The KMU can make the keys non-readable and non-writable from the application, while still accessible by the Arm CryptoCell.</p>
<p>In devices without a KMU, like nRF52840, the bootloader writes the key to the Arm CryptoCell and locks the flash memory page where the key is stored.
In this case, only one key is supported.</p>
</section>
<section id="prerequisites">
<h2><a class="toc-backref" href="#id8">Prerequisites</a><a class="headerlink" href="#prerequisites" title="Permalink to this heading"></a></h2>
<p>To use hardware unique keys, you must first write them to the KMU or program them in the device firmware if no KMU is present.
You can also write the HUKs by programming the device with a debugger.
See <code class="file docutils literal notranslate"><span class="pre">tests/lib/hw_unique_key_tfm/write_kmu.py</span></code> for an example of programming the KMU with a debugger.</p>
</section>
<section id="usage">
<h2><a class="toc-backref" href="#id9">Usage</a><a class="headerlink" href="#usage" title="Permalink to this heading"></a></h2>
<p>The library provides a function for writing arbitrary keys and a function for writing random keys.</p>
<p>To use the library, enable the <code class="xref kconfig kconfig-option docutils literal notranslate"><span class="pre">CONFIG_HW_UNIQUE_KEY</span></code> option for the nRF Secure Immutable Bootloader image.
Additionally, you can enable the <code class="xref kconfig kconfig-option docutils literal notranslate"><span class="pre">CONFIG_HW_UNIQUE_KEY_RANDOM</span></code> option to enable the <a class="reference internal" href="#c.hw_unique_key_write_random" title="hw_unique_key_write_random"><code class="xref c c-func docutils literal notranslate"><span class="pre">hw_unique_key_write_random()</span></code></a> function and its dependencies, to generate random keys.</p>
<p>See <a class="reference internal" href="../../getting_started/modifying.html#configure-application"><span class="std std-ref">Configuring your application</span></a> for information on how to enable the required configuration options.</p>
<p>You can then use the HUKs through the APIs in the <span class="xref std std-ref">CC3xx platform libraries</span>.
You can also derive a key using <a class="reference internal" href="#c.hw_unique_key_derive_key" title="hw_unique_key_derive_key"><code class="xref c c-func docutils literal notranslate"><span class="pre">hw_unique_key_derive_key()</span></code></a>.</p>
<div class="admonition caution">
<p class="admonition-title">Caution</p>
<p>It is strongly recommended to generate random keys on-chip to avoid any outside knowledge of the keys.
If the application needs a specific key that the manufacturer also knows, and this key is also unique to the device, do not provide such a key as a HUK.
Instead, encrypt this key with another key derived from a hardware unique key, or store it in its own KMU slot.</p>
</div>
</section>
<section id="api-documentation">
<h2><a class="toc-backref" href="#id10">API documentation</a><a class="headerlink" href="#api-documentation" title="Permalink to this heading"></a></h2>
<div class="line-block">
<div class="line">Header file: <code class="file docutils literal notranslate"><span class="pre">include/hw_unique_key.h</span></code></div>
<div class="line">Source files: <code class="file docutils literal notranslate"><span class="pre">modules/lib/hw_unique_key/</span></code></div>
</div>
<dl>
<dt class="sig sig-object cpp">
<span class="target" id="group__hw__unique__key"></span><em><span class="pre">group</span></em> <span class="sig-name descname"><span class="pre">hw_unique_key</span></span></dt>
<dd><p>API for loading the Hardware Unique Key (HUK) in the CryptoCell KDR registers. </p>
<div class="breathe-sectiondef docutils container">
<p class="breathe-sectiondef-title rubric" id="breathe-section-title-defines">Defines</p>
<dl class="c macro">
<dt class="sig sig-object c" id="c.HUK_SIZE_BYTES">
<span class="target" id="group__hw__unique__key_1ga7044769049e13ecfaca657fd6e882854"></span><span class="sig-name descname"><span class="n"><span class="pre">HUK_SIZE_BYTES</span></span></span><a class="headerlink" href="#c.HUK_SIZE_BYTES" title="Permalink to this definition"></a><br /></dt>
<dd></dd></dl>

<dl class="c macro">
<dt class="sig sig-object c" id="c.ERR_HUK_MISSING">
<span class="target" id="group__hw__unique__key_1ga73bd9af92716c6eafcd65b42f4e8b064"></span><span class="sig-name descname"><span class="n"><span class="pre">ERR_HUK_MISSING</span></span></span><a class="headerlink" href="#c.ERR_HUK_MISSING" title="Permalink to this definition"></a><br /></dt>
<dd></dd></dl>

<dl class="c macro">
<dt class="sig sig-object c" id="c.KMU_SELECT_SLOT">
<span class="target" id="group__hw__unique__key_1ga57608247781e03c7e2c58d8a9963ba46"></span><span class="sig-name descname"><span class="n"><span class="pre">KMU_SELECT_SLOT</span></span></span><span class="sig-paren">(</span><span class="n"><span class="pre">KEYSLOT</span></span><span class="sig-paren">)</span><a class="headerlink" href="#c.KMU_SELECT_SLOT" title="Permalink to this definition"></a><br /></dt>
<dd></dd></dl>

</div>
<div class="breathe-sectiondef docutils container">
<p class="breathe-sectiondef-title rubric" id="breathe-section-title-enums">Enums</p>
<dl class="c enum">
<dt class="sig sig-object c" id="c.hw_unique_key_slot">
<span class="target" id="group__hw__unique__key_1ga382d8696f6adec5f05569a95bb2d8201"></span><span class="k"><span class="pre">enum</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">hw_unique_key_slot</span></span></span><a class="headerlink" href="#c.hw_unique_key_slot" title="Permalink to this definition"></a><br /></dt>
<dd><p><em>Values:</em></p>
<dl class="c enumerator">
<dt class="sig sig-object c" id="c.hw_unique_key_slot.HUK_KEYSLOT_KDR">
<span class="target" id="group__hw__unique__key_1gga382d8696f6adec5f05569a95bb2d8201a1778c5eb09bc483eaf8764e57c4d5e3d"></span><span class="k"><span class="pre">enumerator</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">HUK_KEYSLOT_KDR</span></span></span><a class="headerlink" href="#c.hw_unique_key_slot.HUK_KEYSLOT_KDR" title="Permalink to this definition"></a><br /></dt>
<dd></dd></dl>

</dd></dl>

</div>
<div class="breathe-sectiondef docutils container">
<p class="breathe-sectiondef-title rubric" id="breathe-section-title-functions">Functions</p>
<dl class="c function">
<dt class="sig sig-object c" id="c.hw_unique_key_write">
<span class="target" id="group__hw__unique__key_1gaafebed6474b6904d4cfd09498d28d4e5"></span><span class="kt"><span class="pre">void</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">hw_unique_key_write</span></span></span><span class="sig-paren">(</span><span class="k"><span class="pre">enum</span></span><span class="w"> </span><a class="reference internal" href="#c.hw_unique_key_slot" title="hw_unique_key_slot"><span class="n"><span class="pre">hw_unique_key_slot</span></span></a><span class="w"> </span><span class="n"><span class="pre">kmu_slot</span></span>, <span class="k"><span class="pre">const</span></span><span class="w"> </span><span class="n"><span class="pre">uint8_t</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">key</span></span><span class="sig-paren">)</span><a class="headerlink" href="#c.hw_unique_key_write" title="Permalink to this definition"></a><br /></dt>
<dd><p>Write a Hardware Unique Key to the KMU. </p>
<p>This can only be done once (until a mass erase happens). This function waits for the flash operation to finish before returning. Panic on failure.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>kmu_slot</strong> – <strong>[in]</strong> The keyslot to write to, see HUK_KEYSLOT_*. </p></li>
<li><p><strong>key</strong> – <strong>[in]</strong> The key to write. Must be <a class="reference internal" href="#group__hw__unique__key_1ga7044769049e13ecfaca657fd6e882854"><span class="std std-ref">HUK_SIZE_BYTES</span></a> bytes long. </p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="c function">
<dt class="sig sig-object c" id="c.hw_unique_key_write_random">
<span class="target" id="group__hw__unique__key_1gaf6f7cc103862eec58fa24c460ff5e679"></span><span class="kt"><span class="pre">void</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">hw_unique_key_write_random</span></span></span><span class="sig-paren">(</span><span class="kt"><span class="pre">void</span></span><span class="sig-paren">)</span><a class="headerlink" href="#c.hw_unique_key_write_random" title="Permalink to this definition"></a><br /></dt>
<dd><p>Read random numbers from nrf_cc3xx_platform_ctr_drbg_get and write them to all slots with <a class="reference internal" href="#group__hw__unique__key_1gaafebed6474b6904d4cfd09498d28d4e5"><span class="std std-ref">hw_unique_key_write</span></a>. Panic on failure. </p>
</dd></dl>

<dl class="c function">
<dt class="sig sig-object c" id="c.hw_unique_key_is_written">
<span class="target" id="group__hw__unique__key_1gac46a9be0a4a78a51a33b05a97082c81f"></span><span class="kt"><span class="pre">bool</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">hw_unique_key_is_written</span></span></span><span class="sig-paren">(</span><span class="k"><span class="pre">enum</span></span><span class="w"> </span><a class="reference internal" href="#c.hw_unique_key_slot" title="hw_unique_key_slot"><span class="n"><span class="pre">hw_unique_key_slot</span></span></a><span class="w"> </span><span class="n"><span class="pre">kmu_slot</span></span><span class="sig-paren">)</span><a class="headerlink" href="#c.hw_unique_key_is_written" title="Permalink to this definition"></a><br /></dt>
<dd><p>Check whether a Hardware Unique Key has been written to the KMU. </p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>kmu_slot</strong> – <strong>[in]</strong> The keyslot to check, see HUK_KEYSLOT_*.</p></li>
</ul>
</dd>
<dt class="field-even">Return values</dt>
<dd class="field-even"><ul class="simple">
<li><p><strong>true</strong> – if a HUK has been written to the specified keyslot, </p></li>
<li><p><strong>false</strong> – otherwise. </p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="c function">
<dt class="sig sig-object c" id="c.hw_unique_key_are_any_written">
<span class="target" id="group__hw__unique__key_1ga759799320ff7f7e46adbb7b0e7937146"></span><span class="kt"><span class="pre">bool</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">hw_unique_key_are_any_written</span></span></span><span class="sig-paren">(</span><span class="kt"><span class="pre">void</span></span><span class="sig-paren">)</span><a class="headerlink" href="#c.hw_unique_key_are_any_written" title="Permalink to this definition"></a><br /></dt>
<dd><p>Check whether any Hardware Unique Keys are written to the KMU. </p>
<dl class="field-list simple">
<dt class="field-odd">Return values</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>true</strong> – if one or more HUKs are written </p></li>
<li><p><strong>false</strong> – if all HUKs are unwritten. </p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="c function">
<dt class="sig sig-object c" id="c.hw_unique_key_load_kdr">
<span class="target" id="group__hw__unique__key_1gaa7c35ac2b88fcae30c2c6b7ef1190a48"></span><span class="kt"><span class="pre">void</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">hw_unique_key_load_kdr</span></span></span><span class="sig-paren">(</span><span class="kt"><span class="pre">void</span></span><span class="sig-paren">)</span><a class="headerlink" href="#c.hw_unique_key_load_kdr" title="Permalink to this definition"></a><br /></dt>
<dd><p>Load the Hardware Unique Key (HUK) into the KDR registers of the Cryptocell. </p>
<p>It also locks the flash page which contains the key material from reading and writing until the next reboot. Panic on failure. </p>
</dd></dl>

<dl class="c function">
<dt class="sig sig-object c" id="c.hw_unique_key_derive_key">
<span class="target" id="group__hw__unique__key_1ga6bd665a33bfe79f5ddcc3cb58fac2e53"></span><span class="kt"><span class="pre">int</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">hw_unique_key_derive_key</span></span></span><span class="sig-paren">(</span><span class="k"><span class="pre">enum</span></span><span class="w"> </span><a class="reference internal" href="#c.hw_unique_key_slot" title="hw_unique_key_slot"><span class="n"><span class="pre">hw_unique_key_slot</span></span></a><span class="w"> </span><span class="n"><span class="pre">kmu_slot</span></span>, <span class="k"><span class="pre">const</span></span><span class="w"> </span><span class="n"><span class="pre">uint8_t</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">context</span></span>, <span class="n"><span class="pre">size_t</span></span><span class="w"> </span><span class="n"><span class="pre">context_size</span></span>, <span class="n"><span class="pre">uint8_t</span></span><span class="w"> </span><span class="k"><span class="pre">const</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">label</span></span>, <span class="n"><span class="pre">size_t</span></span><span class="w"> </span><span class="n"><span class="pre">label_size</span></span>, <span class="n"><span class="pre">uint8_t</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">output</span></span>, <span class="n"><span class="pre">uint32_t</span></span><span class="w"> </span><span class="n"><span class="pre">output_size</span></span><span class="sig-paren">)</span><a class="headerlink" href="#c.hw_unique_key_derive_key" title="Permalink to this definition"></a><br /></dt>
<dd><p>Derive a key from the specified HUK, using the nrf_cc3xx_platform API. </p>
<p>See nrf_cc3xx_platform_kmu_shadow_key_derive() for more info.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>kmu_slot</strong> – <strong>[in]</strong> Keyslot to derive from. </p></li>
<li><p><strong>context</strong> – <strong>[in]</strong> Context for key derivation. </p></li>
<li><p><strong>context_size</strong> – <strong>[in]</strong> Size of context. </p></li>
<li><p><strong>label</strong> – <strong>[in]</strong> Label for key derivation. </p></li>
<li><p><strong>label_size</strong> – <strong>[in]</strong> Size of label. </p></li>
<li><p><strong>output</strong> – <strong>[out]</strong> The derived key. </p></li>
<li><p><strong>output_size</strong> – <strong>[in]</strong> Size of output.</p></li>
</ul>
</dd>
<dt class="field-even">Return values</dt>
<dd class="field-even"><ul class="simple">
<li><p><strong>0</strong> – on success </p></li>
<li><p><strong>-ERR_HUK_MISSING</strong> – if the slot has not been written. </p></li>
</ul>
</dd>
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>otherwise, an error from nrf_cc3xx_platform_kmu_shadow_key_derive() </p>
</dd>
</dl>
</dd></dl>

</div>
</dd></dl>

</section>
</section>


           </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="identity_key.html" class="btn btn-neutral float-right" title="Identity key" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="hw_id.html" class="btn btn-neutral" title="Hardware ID" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">

<table>
<tr>
<td>
    <p>
        &copy; Copyright 2019-2023, Nordic Semiconductor.
      Last updated on Mar 20, 2023.

    </p>
</td>
<td id="nordiclogo">
  <a href="https://www.nordicsemi.com/"><img src="../../_static/images/nordic-logo.png" border="0"/></a>
</td>
</tr>
</table>
  </div> 


</footer>

<div id="scroll-container">
  <button type="button" id="scroll-btn" class="btn">
    <svg xmlns="http://www.w3.org/2000/svg" height="24" viewBox="0 0 24 24" width="24"><path d="M0 0h24v24H0z" fill="none"/><path d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z" fill="#fff"/></svg>
  </button>
</div>

<script>
  const scrollBtn = document.querySelector("#scroll-btn");

  document.addEventListener("scroll", () => {
    if (window.scrollY > 400) {
          scrollBtn.style.visibility = "visible";
      } else {
          scrollBtn.style.visibility = "hidden";
      }
  });

  scrollBtn.addEventListener("click", () => {
      window.scrollTo({ top: 0, behavior: "smooth" });
  });
</script>
        </div>
      </div>
    </section>
  </div>
  
  <div class="rst-versions" data-toggle="rst-versions" role="note" aria-label="versions">
    <span class="rst-current-version" data-toggle="rst-current-version">
      <span class="fa fa-book"> nRF Connect SDK</span>
       <span class="fa fa-caret-down"></span>
    </span>
    <div class="rst-other-versions">
      
      <div class="rst-other-version ncs">
        <a href="../../../nrf/index.html">nRF Connect SDK</a>
      </div>
      
      <div class="rst-other-version nrfx">
        <a href="../../../nrfx/index.html">nrfx</a>
      </div>
      
      <div class="rst-other-version nrfxlib">
        <a href="../../../nrfxlib/README.html">nrfxlib</a>
      </div>
      
      <div class="rst-other-version zephyr">
        <a href="../../../zephyr/index.html">Zephyr Project</a>
      </div>
      
      <div class="rst-other-version mcuboot">
        <a href="../../../mcuboot/wrapper.html">MCUboot</a>
      </div>
      
      <div class="rst-other-version tfm">
        <a href="../../../tfm/index.html">Trusted Firmware-M</a>
      </div>
      
      <div class="rst-other-version matter">
        <a href="../../../matter/index.html">Matter</a>
      </div>
      
      <div class="rst-other-version kconfig">
        <a href="../../../kconfig/index.html">Kconfig Reference</a>
      </div>
    </div>
  </div><script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>