<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Edge Impulse wrapper &mdash; nRF Connect SDK 2.3.99 documentation</title>
      <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="../../_static/css/nordic.css" type="text/css" />
      <link rel="stylesheet" href="../../_static/togglebutton.css" type="text/css" />
      <link rel="stylesheet" href="../../_static/css/nrf.css" type="text/css" />
      <link rel="stylesheet" href="../../_static/tabs.css" type="text/css" /> 
  <!--[if lt IE 9]>
    <script src="../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="../../" id="documentation_options" src="../../_static/documentation_options.js"></script>
        <script src="../../_static/jquery.js"></script>
        <script src="../../_static/underscore.js"></script>
        <script src="../../_static/_sphinx_javascript_frameworks_compat.js"></script>
        <script src="../../_static/doctools.js"></script>
        <script src="../../_static/sphinx_highlight.js"></script>
        <script src="https://www.googletagmanager.com/gtag/js?id=G-ZPVZRKFQJR"></script>
        <script src="../../_static/js/ga-tracker.js"></script>
        <script data-culture="EN" id="CookieConsent" type="text/javascript" src="https://policy.app.cookieinformation.com/uc.js"></script>
        <script>let toggleHintShow = 'Click to show';</script>
        <script>let toggleHintHide = 'Click to hide';</script>
        <script>let toggleOpenOnPrint = 'true';</script>
        <script src="../../_static/togglebutton.js"></script>
        <script>var togglebuttonSelector = '.toggle, .admonition.dropdown';</script>
    <script src="../../_static/js/theme.js"></script>
<script
  type="text/javascript"
  src="../../_static/js/ncs.js"
></script>
<script src="../../_static/js/bootstrap.bundle.min.js"></script>

    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="Emergency data storage" href="emds.html" />
    <link rel="prev" title="Distance Measurement" href="dm.html" />
<link
  href="../../_static/css/bootstrap.min.css"
  rel="stylesheet"
/>
<link
  rel="shortcut icon"
  href="../../_static/images/favicon.ico"
/>

</head>

<body class="wy-body-for-nav">
<div class="announcement"></div>
<div class="d-print-none ncs-header">
  <div class="container-xl ncs-header-top">
    <div class="row h-100">
      <div class="d-none d-md-block col-2">
        <div class="bg-white py-4 px-3 ml-2 ncs-header-logo">
          <img
            class="ncs-header-logo"
            src="../../_static/images/nordic-logo.png"
            alt=""
          />
        </div>
      </div>
      <div
        class="col-8 col-md-7 pl-md-4 d-flex align-self-center justify-content-center"
      >
        <form class="w-75" action="../../search.html" method="get">
          <div class="form-group">
            <input
              type="text"
              name="q"
              class="ncs-search-input form-control"
              placeholder="Search all docs..."
            />
          </div>
        </form>
      </div>
      <div class="col-4 col-md-3 d-md-block p-3 text-end">
        <div class="dropdown">
          <button
            class="btn dropdown-toggle ncs-btn-versions"
            type="button"
            id="dropdownMenuButton1"
            data-bs-toggle="dropdown"
            aria-expanded="false"
          >
            <span class="d-none d-md-inline">nRF Connect SDK</span>
            <span id="ncsversion" class="d-inline"></span>
          </button>
          <div class="dropdown-menu" aria-labelledby="dropdownMenuButton"></div>
        </div>
      </div>
    </div>
  </div>
  <div class="ncs-header-nav">
    <div class="container-xl">
      <div class="row">
        <div class="col col-12 d-flex justify-content-center">
          <nav class="navbar navbar-dark navbar-expand-lg p-0">
            <span class="navbar-brand d-block d-lg-none py-2 pl-1"
              >Documentation sets</span
            >
            <button
              class="navbar-toggler"
              type="button"
              data-bs-toggle="collapse"
              data-bs-target="#navbarNavAltMarkup"
              aria-controls="navbarNavAltMarkup"
              aria-expanded="false"
              aria-label="Toggle navigation"
            >
              <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="navbarNavAltMarkup">
              <ul class="navbar-nav">
                <li class="nav-item active py-1 px-3">
                  <a
                    class="nav-link"
                    href="../../../nrf/index.html"
                    >nRF Connect SDK</a
                  >
                </li>
                <li><hr class="dropdown-divider" /></li>
                <li class="nav-item  py-1 px-3">
                  <a
                    class="nav-link"
                    href="../../../nrfx/index.html"
                    >nrfx</a
                  >
                </li>
                <li><hr class="dropdown-divider" /></li>
                <li class="nav-item  py-1 px-3">
                  <a
                    class="nav-link"
                    href="../../../nrfxlib/README.html"
                    >nrfxlib</a
                  >
                </li>
                <li><hr class="dropdown-divider" /></li>
                <li class="nav-item  py-1 px-3">
                  <a
                    class="nav-link"
                    href="../../../zephyr/index.html"
                    >Zephyr Project</a
                  >
                </li>
                <li><hr class="dropdown-divider" /></li>
                <li class="nav-item  py-1 px-3">
                  <a
                    class="nav-link"
                    href="../../../mcuboot/wrapper.html"
                    >MCUboot</a
                  >
                </li>
                <li><hr class="dropdown-divider" /></li>
                <li class="nav-item  py-1 px-3">
                  <a
                    class="nav-link"
                    href="../../../tfm/index.html"
                    >Trusted Firmware-M</a
                  >
                </li>
                <li><hr class="dropdown-divider" /></li>
                <li class="nav-item  py-1 px-3">
                  <a
                    class="nav-link"
                    href="../../../matter/index.html"
                    >Matter</a
                  >
                </li>
                <li><hr class="dropdown-divider" /></li>
                <li class="nav-item  py-1 px-3">
                  <a
                    class="nav-link"
                    href="../../../kconfig/index.html"
                    >Kconfig Reference</a
                  >
                </li>
                <li><hr class="dropdown-divider" /></li>
              </ul>
            </div>
          </nav>
        </div>
      </div>
    </div>
  </div>
</div>

  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
            <a href="../../index.html" class="icon icon-home"> nRF Connect SDK
          </a>
              <div class="version">
                2.3.99
              </div>
<div id="searchbox" role="search">
  <div class="searchformwrapper">
    <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
      <input type="text" name="q" placeholder="Search docs" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
  </div>
</div>
<script>$('#searchbox').show(0);</script>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Contents</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../introduction.html">Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../getting_started.html">Getting started</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../dev_model.html">Development model</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../app_dev.html">Application development</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../security.html">Security</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../ecosystem_integration.html">Ecosystems integration</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../nrf91.html">Working with nRF91 Series</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../nrf70.html">Working with nRF70 Series</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../nrf53.html">Working with nRF53 Series</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../nrf52.html">Working with nRF52 Series</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../protocols.html">Protocols</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../applications.html">Applications</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../samples.html">Samples</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../drivers.html">Drivers</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../index.html">Libraries</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../bin/index.html">Binary libraries</a></li>
<li class="toctree-l2"><a class="reference internal" href="../bluetooth_services/index.html">Bluetooth libraries and services</a></li>
<li class="toctree-l2"><a class="reference internal" href="../bootloader/index.html">Bootloader libraries</a></li>
<li class="toctree-l2"><a class="reference internal" href="../caf/index.html">Common Application Framework</a></li>
<li class="toctree-l2"><a class="reference internal" href="../debug/index.html">Debug libraries</a></li>
<li class="toctree-l2"><a class="reference internal" href="../dfu/index.html">DFU libraries</a></li>
<li class="toctree-l2"><a class="reference internal" href="../gazell/index.html">Gazell libraries</a></li>
<li class="toctree-l2"><a class="reference internal" href="../modem/index.html">Modem libraries</a></li>
<li class="toctree-l2"><a class="reference internal" href="../mpsl/index.html">Multiprotocol Service Layer libraries</a></li>
<li class="toctree-l2"><a class="reference internal" href="../networking/index.html">Libraries for networking</a></li>
<li class="toctree-l2"><a class="reference internal" href="../nfc/index.html">Libraries for NFC</a></li>
<li class="toctree-l2"><a class="reference internal" href="../nrf_rpc/index.html">nRF RPC libraries</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="index.html">Other libraries</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="adp536x.html">adp536x</a></li>
<li class="toctree-l3"><a class="reference internal" href="app_event_manager.html">Application Event Manager</a></li>
<li class="toctree-l3"><a class="reference internal" href="app_event_manager_profiler_tracer.html">Application Event Manager profiler tracer</a></li>
<li class="toctree-l3"><a class="reference internal" href="contin_array.html">Continuous array</a></li>
<li class="toctree-l3"><a class="reference internal" href="data_fifo.html">Data FIFO</a></li>
<li class="toctree-l3"><a class="reference internal" href="date_time.html">Date-Time</a></li>
<li class="toctree-l3"><a class="reference internal" href="dk_buttons_and_leds.html">DK Buttons and LEDs</a></li>
<li class="toctree-l3"><a class="reference internal" href="dm.html">Distance Measurement</a></li>
<li class="toctree-l3 current"><a class="current reference internal" href="#">Edge Impulse wrapper</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#overview">Overview</a></li>
<li class="toctree-l4"><a class="reference internal" href="#configuration">Configuration</a></li>
<li class="toctree-l4"><a class="reference internal" href="#using-edge-impulse-wrapper">Using Edge Impulse wrapper</a></li>
<li class="toctree-l4"><a class="reference internal" href="#api-documentation">API documentation</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="emds.html">Emergency data storage</a></li>
<li class="toctree-l3"><a class="reference internal" href="esb.html">Enhanced ShockBurst</a></li>
<li class="toctree-l3"><a class="reference internal" href="event_manager_proxy.html">Event Manager Proxy</a></li>
<li class="toctree-l3"><a class="reference internal" href="fatal_error.html">Fatal error handler</a></li>
<li class="toctree-l3"><a class="reference internal" href="flash_map_pm.html">Partition Manager flash map</a></li>
<li class="toctree-l3"><a class="reference internal" href="flash_patch.html">Flash patch</a></li>
<li class="toctree-l3"><a class="reference internal" href="fprotect.html">Hardware flash write protection</a></li>
<li class="toctree-l3"><a class="reference internal" href="fw_info.html">Firmware information</a></li>
<li class="toctree-l3"><a class="reference internal" href="hw_id.html">Hardware ID</a></li>
<li class="toctree-l3"><a class="reference internal" href="hw_unique_key.html">Hardware unique key</a></li>
<li class="toctree-l3"><a class="reference internal" href="identity_key.html">Identity key</a></li>
<li class="toctree-l3"><a class="reference internal" href="memfault_ncs.html">Memfault</a></li>
<li class="toctree-l3"><a class="reference internal" href="nrf_profiler.html">nRF Profiler</a></li>
<li class="toctree-l3"><a class="reference internal" href="pcm_mix.html">Pulse Code Modulation audio mixer</a></li>
<li class="toctree-l3"><a class="reference internal" href="pcm_stream_channel_modifier.html">PCM Stream Channel Modifier</a></li>
<li class="toctree-l3"><a class="reference internal" href="qos.html">Quality of Service</a></li>
<li class="toctree-l3"><a class="reference internal" href="ram_pwrdn.html">RAM power-down</a></li>
<li class="toctree-l3"><a class="reference internal" href="sfloat.html">Short float (SFLOAT)</a></li>
<li class="toctree-l3"><a class="reference internal" href="st25r3911b_nfc.html">NFC Reader ST25R3911B</a></li>
<li class="toctree-l3"><a class="reference internal" href="supl_os_client.html">SUPL client and SUPL client OS integration</a></li>
<li class="toctree-l3"><a class="reference internal" href="tone.html">Tone generator</a></li>
<li class="toctree-l3"><a class="reference internal" href="wave_gen.html">Wave generator</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../shell/index.html">Shell libraries</a></li>
<li class="toctree-l2"><a class="reference internal" href="../tfm/index.html">TF-M libraries</a></li>
<li class="toctree-l2"><a class="reference internal" href="../zigbee/index.html">Libraries for Zigbee</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../scripts.html">Scripts</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../release_notes.html">Release notes</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../known_issues.html">Known issues</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../software_maturity.html">Software maturity levels</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../documentation.html">About this documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../glossary.html">Glossary</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">nRF Connect SDK</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../../index.html" class="icon icon-home"></a></li>
          <li class="breadcrumb-item"><a href="../index.html">Libraries</a></li>
          <li class="breadcrumb-item"><a href="index.html">Other libraries</a></li>
      <li class="breadcrumb-item active">Edge Impulse wrapper</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../../_sources/libraries/others/ei_wrapper.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="edge-impulse-wrapper">
<span id="ei-wrapper"></span><h1>Edge Impulse wrapper<a class="headerlink" href="#edge-impulse-wrapper" title="Permalink to this heading"></a></h1>
<div class="contents local topic" id="contents">
<ul class="simple">
<li><p><a class="reference internal" href="#overview" id="id7">Overview</a></p></li>
<li><p><a class="reference internal" href="#configuration" id="id8">Configuration</a></p></li>
<li><p><a class="reference internal" href="#using-edge-impulse-wrapper" id="id9">Using Edge Impulse wrapper</a></p></li>
<li><p><a class="reference internal" href="#api-documentation" id="id10">API documentation</a></p></li>
</ul>
</div>
<p>The <a class="reference external" href="https://www.edgeimpulse.com/">Edge Impulse</a> wrapper provides an implementation for running an <a class="reference external" href="https://docs.edgeimpulse.com/docs/what-is-embedded-machine-learning-anyway">embedded machine learning</a> model on a device in nRF Connect SDK.
For more information about support for Edge Impulse in nRF Connect SDK, see <a class="reference internal" href="../../external_comp/edge_impulse.html#ug-edge-impulse"><span class="std std-ref">Edge Impulse integration</span></a>.</p>
<section id="overview">
<h2><a class="toc-backref" href="#id7">Overview</a><a class="headerlink" href="#overview" title="Permalink to this heading"></a></h2>
<p>The wrapper:</p>
<ul class="simple">
<li><p>Buffers input data for the machine learning model.</p></li>
<li><p>Runs the machine learning model in a separate thread.</p></li>
<li><p>Provides results through a dedicated callback.</p></li>
</ul>
<p>Before using the wrapper, you need to <a class="reference internal" href="../../external_comp/edge_impulse.html#ug-edge-impulse-adding"><span class="std std-ref">add the machine learning model</span></a> to your nRF Connect SDK application.</p>
</section>
<section id="configuration">
<h2><a class="toc-backref" href="#id8">Configuration</a><a class="headerlink" href="#configuration" title="Permalink to this heading"></a></h2>
<p>Enable the Edge Impulse wrapper by <code class="xref kconfig kconfig-option docutils literal notranslate"><span class="pre">CONFIG_EI_WRAPPER</span></code> option.
The option is enabled by default if <code class="xref kconfig kconfig-option docutils literal notranslate"><span class="pre">CONFIG_EDGE_IMPULSE</span></code> is set.</p>
<p>The Edge Impulse nRF Connect SDK library can be configured with the following Kconfig options:</p>
<ul class="simple">
<li><p><code class="xref kconfig kconfig-option docutils literal notranslate"><span class="pre">CONFIG_EI_WRAPPER_DATA_BUF_SIZE</span></code></p></li>
<li><p><code class="xref kconfig kconfig-option docutils literal notranslate"><span class="pre">CONFIG_EI_WRAPPER_THREAD_STACK_SIZE</span></code></p></li>
<li><p><code class="xref kconfig kconfig-option docutils literal notranslate"><span class="pre">CONFIG_EI_WRAPPER_THREAD_PRIORITY</span></code></p></li>
<li><p><code class="xref kconfig kconfig-option docutils literal notranslate"><span class="pre">CONFIG_EI_WRAPPER_PROFILING</span></code></p></li>
</ul>
<p>For more detailed description of these options, refer to the Kconfig help.</p>
</section>
<section id="using-edge-impulse-wrapper">
<h2><a class="toc-backref" href="#id9">Using Edge Impulse wrapper</a><a class="headerlink" href="#using-edge-impulse-wrapper" title="Permalink to this heading"></a></h2>
<p>After setting Edge Impulse wrapper <a class="reference internal" href="#configuration">Configuration</a> options, you can use it in your application.
Use the following Edge Impulse wrapper API:</p>
<ul>
<li><p>Use the <a class="reference internal" href="#c.ei_wrapper_init" title="ei_wrapper_init"><code class="xref c c-func docutils literal notranslate"><span class="pre">ei_wrapper_init()</span></code></a> function to initialize the wrapper.</p></li>
<li><p>Provide the input data using the <a class="reference internal" href="#c.ei_wrapper_add_data" title="ei_wrapper_add_data"><code class="xref c c-func docutils literal notranslate"><span class="pre">ei_wrapper_add_data()</span></code></a> function.
The provided data is appended to an internal circular buffer that is located in RAM.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Make sure that:</p>
<ul class="simple">
<li><p>The number of provided input values is divisible by the input frame size for the machine learning model used.
Otherwise, an error code is returned.</p></li>
<li><p>The value for the <code class="xref kconfig kconfig-option docutils literal notranslate"><span class="pre">CONFIG_EI_WRAPPER_DATA_BUF_SIZE</span></code> Kconfig option is big enough to temporarily store the data provided by your application.</p></li>
</ul>
</div>
</li>
<li><p>Call the <a class="reference internal" href="#c.ei_wrapper_start_prediction" title="ei_wrapper_start_prediction"><code class="xref c c-func docutils literal notranslate"><span class="pre">ei_wrapper_start_prediction()</span></code></a> function to shift the prediction window and start the prediction for the buffered data.
If the whole input window is filled with data right after the shift operation, the prediction is started instantly.
Otherwise, the prediction is delayed until the missing data is provided.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The input data that goes out of the input window is dropped from the input buffer after the shift operation.
This part of the input buffer can be reused to store new data.</p>
</div>
</li>
</ul>
<p>The Edge Impulse wrapper runs the machine learning model in a dedicated thread.
Results are provided through a callback registered during the initialization of the wrapper.
You can call the following functions to access results:</p>
<ul class="simple">
<li><p><a class="reference internal" href="#c.ei_wrapper_get_next_classification_result" title="ei_wrapper_get_next_classification_result"><code class="xref c c-func docutils literal notranslate"><span class="pre">ei_wrapper_get_next_classification_result()</span></code></a></p></li>
<li><p><a class="reference internal" href="#c.ei_wrapper_get_anomaly" title="ei_wrapper_get_anomaly"><code class="xref c c-func docutils literal notranslate"><span class="pre">ei_wrapper_get_anomaly()</span></code></a></p></li>
<li><p><a class="reference internal" href="#c.ei_wrapper_get_timing" title="ei_wrapper_get_timing"><code class="xref c c-func docutils literal notranslate"><span class="pre">ei_wrapper_get_timing()</span></code></a></p></li>
</ul>
<p>Refer to the API documentation for more detailed information about the API provided by the wrapper.</p>
</section>
<section id="api-documentation">
<h2><a class="toc-backref" href="#id10">API documentation</a><a class="headerlink" href="#api-documentation" title="Permalink to this heading"></a></h2>
<div class="line-block">
<div class="line">Header file: <code class="file docutils literal notranslate"><span class="pre">include/ei_wrapper.h</span></code></div>
<div class="line">Source files: <code class="file docutils literal notranslate"><span class="pre">lib/edge_impulse/</span></code></div>
</div>
<dl>
<dt class="sig sig-object cpp">
<span class="target" id="group__ei__wrapper"></span><em><span class="pre">group</span></em> <span class="sig-name descname"><span class="pre">ei_wrapper</span></span></dt>
<dd><p>Wrapper that uses Edge Impulse lib to run machine learning on device. </p>
<div class="breathe-sectiondef docutils container">
<p class="breathe-sectiondef-title rubric" id="breathe-section-title-typedefs">Typedefs</p>
<dl class="c type">
<dt class="sig sig-object c" id="c.ei_wrapper_result_ready_cb">
<span class="target" id="group__ei__wrapper_1ga7bdaa6028c57b15b377257db465b2fd3"></span><span class="k"><span class="pre">typedef</span></span><span class="w"> </span><span class="kt"><span class="pre">void</span></span><span class="w"> </span><span class="p"><span class="pre">(</span></span><span class="p"><span class="pre">*</span></span><span class="sig-name descname"><span class="n"><span class="pre">ei_wrapper_result_ready_cb</span></span></span><span class="p"><span class="pre">)</span></span><span class="p"><span class="pre">(</span></span><span class="kt"><span class="pre">int</span></span><span class="w"> </span><span class="n"><span class="pre">err</span></span><span class="p"><span class="pre">)</span></span><a class="headerlink" href="#c.ei_wrapper_result_ready_cb" title="Permalink to this definition"></a><br /></dt>
<dd><p>Callback executed by the wrapper when the result is ready. </p>
<dl class="field-list simple">
<dt class="field-odd">Param err</dt>
<dd class="field-odd"><p><strong>[in]</strong> Zero (if operation was successful) or negative error code. </p>
</dd>
</dl>
</dd></dl>

</div>
<div class="breathe-sectiondef docutils container">
<p class="breathe-sectiondef-title rubric" id="breathe-section-title-functions">Functions</p>
<dl class="c function">
<dt class="sig sig-object c" id="c.ei_wrapper_classifier_has_anomaly">
<span class="target" id="group__ei__wrapper_1ga745db416d6f8573893f1abf6ca6fcea4"></span><span class="kt"><span class="pre">bool</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">ei_wrapper_classifier_has_anomaly</span></span></span><span class="sig-paren">(</span><span class="kt"><span class="pre">void</span></span><span class="sig-paren">)</span><a class="headerlink" href="#c.ei_wrapper_classifier_has_anomaly" title="Permalink to this definition"></a><br /></dt>
<dd><p>Check if classifier calculates anomaly value.</p>
<dl class="field-list simple">
<dt class="field-odd">Return values</dt>
<dd class="field-odd"><p><strong>true</strong> – If the classifier calculates the anomaly value. Otherwise, false is returned. </p>
</dd>
</dl>
</dd></dl>

<dl class="c function">
<dt class="sig sig-object c" id="c.ei_wrapper_get_frame_size">
<span class="target" id="group__ei__wrapper_1ga4708d3fd01343a01837964ef662c5ae9"></span><span class="n"><span class="pre">size_t</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">ei_wrapper_get_frame_size</span></span></span><span class="sig-paren">(</span><span class="kt"><span class="pre">void</span></span><span class="sig-paren">)</span><a class="headerlink" href="#c.ei_wrapper_get_frame_size" title="Permalink to this definition"></a><br /></dt>
<dd><p>Get the size of the input frame.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>Size of the input frame, expressed as a number of floating-point values. </p>
</dd>
</dl>
</dd></dl>

<dl class="c function">
<dt class="sig sig-object c" id="c.ei_wrapper_get_window_size">
<span class="target" id="group__ei__wrapper_1ga38d1833168e3e3dca6b4698b743b997d"></span><span class="n"><span class="pre">size_t</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">ei_wrapper_get_window_size</span></span></span><span class="sig-paren">(</span><span class="kt"><span class="pre">void</span></span><span class="sig-paren">)</span><a class="headerlink" href="#c.ei_wrapper_get_window_size" title="Permalink to this definition"></a><br /></dt>
<dd><p>Get the size of the input window.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>Size of the input window, expressed as a number of floating-point values. </p>
</dd>
</dl>
</dd></dl>

<dl class="c function">
<dt class="sig sig-object c" id="c.ei_wrapper_get_classifier_frequency">
<span class="target" id="group__ei__wrapper_1gacb8b47961be296ab108d95c7e097b29f"></span><span class="n"><span class="pre">size_t</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">ei_wrapper_get_classifier_frequency</span></span></span><span class="sig-paren">(</span><span class="kt"><span class="pre">void</span></span><span class="sig-paren">)</span><a class="headerlink" href="#c.ei_wrapper_get_classifier_frequency" title="Permalink to this definition"></a><br /></dt>
<dd><p>Get input data sampling frequency of the classifier.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>The sampling frequency in Hz. </p>
</dd>
</dl>
</dd></dl>

<dl class="c function">
<dt class="sig sig-object c" id="c.ei_wrapper_get_classifier_label_count">
<span class="target" id="group__ei__wrapper_1ga72b375c5495c50315f0cc62c022c9562"></span><span class="n"><span class="pre">size_t</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">ei_wrapper_get_classifier_label_count</span></span></span><span class="sig-paren">(</span><span class="kt"><span class="pre">void</span></span><span class="sig-paren">)</span><a class="headerlink" href="#c.ei_wrapper_get_classifier_label_count" title="Permalink to this definition"></a><br /></dt>
<dd><p>Get number of labels used by the classifier.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>Number of labels. </p>
</dd>
</dl>
</dd></dl>

<dl class="c function">
<dt class="sig sig-object c" id="c.ei_wrapper_get_classifier_label">
<span class="target" id="group__ei__wrapper_1gaa0136251122eca97dfd8cc8fb450b9de"></span><span class="k"><span class="pre">const</span></span><span class="w"> </span><span class="kt"><span class="pre">char</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="sig-name descname"><span class="n"><span class="pre">ei_wrapper_get_classifier_label</span></span></span><span class="sig-paren">(</span><span class="n"><span class="pre">size_t</span></span><span class="w"> </span><span class="n"><span class="pre">idx</span></span><span class="sig-paren">)</span><a class="headerlink" href="#c.ei_wrapper_get_classifier_label" title="Permalink to this definition"></a><br /></dt>
<dd><p>Get classifier label with given index.</p>
<p>Index can be number from 0 to number of labels used by classifier minus one.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>idx</strong> – <strong>[in]</strong> Index of the selected classification label.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Classifier label or NULL if the index is out of range. </p>
</dd>
</dl>
</dd></dl>

<dl class="c function">
<dt class="sig sig-object c" id="c.ei_wrapper_add_data">
<span class="target" id="group__ei__wrapper_1ga3c63dadd263835c798bf7ecb724bce72"></span><span class="kt"><span class="pre">int</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">ei_wrapper_add_data</span></span></span><span class="sig-paren">(</span><span class="k"><span class="pre">const</span></span><span class="w"> </span><span class="kt"><span class="pre">float</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">data</span></span>, <span class="n"><span class="pre">size_t</span></span><span class="w"> </span><span class="n"><span class="pre">data_size</span></span><span class="sig-paren">)</span><a class="headerlink" href="#c.ei_wrapper_add_data" title="Permalink to this definition"></a><br /></dt>
<dd><p>Add input data for the library.</p>
<p>Size of the added data must be divisible by input frame size.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>data</strong> – <strong>[in]</strong> Pointer to the buffer with input data. </p></li>
<li><p><strong>data_size</strong> – <strong>[in]</strong> Size of the data (number of floating-point values).</p></li>
</ul>
</dd>
<dt class="field-even">Return values</dt>
<dd class="field-even"><p><strong>0</strong> – If the operation was successful. Otherwise, a (negative) error code is returned. </p>
</dd>
</dl>
</dd></dl>

<dl class="c function">
<dt class="sig sig-object c" id="c.ei_wrapper_clear_data">
<span class="target" id="group__ei__wrapper_1ga5e28d373865d57f90d86f65a460238a7"></span><span class="kt"><span class="pre">int</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">ei_wrapper_clear_data</span></span></span><span class="sig-paren">(</span><span class="kt"><span class="pre">bool</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">cancelled</span></span><span class="sig-paren">)</span><a class="headerlink" href="#c.ei_wrapper_clear_data" title="Permalink to this definition"></a><br /></dt>
<dd><p>Clear all buffered data.</p>
<p>The buffer cannot be cleared if the prediction was already started and the wrapper is not waiting for data. In that case, user must wait until the prediction is finished.</p>
<p>If the wrapper is waiting for data, the prediction is cancelled.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>cancelled</strong> – <strong>[out]</strong> Pointer to the variable that is used to store information if prediction was cancelled.</p></li>
</ul>
</dd>
<dt class="field-even">Return values</dt>
<dd class="field-even"><p><strong>0</strong> – If the operation was successful. Otherwise, a (negative) error code is returned. </p>
</dd>
</dl>
</dd></dl>

<dl class="c function">
<dt class="sig sig-object c" id="c.ei_wrapper_start_prediction">
<span class="target" id="group__ei__wrapper_1ga9fd659517c93f6f21aff253e375c0531"></span><span class="kt"><span class="pre">int</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">ei_wrapper_start_prediction</span></span></span><span class="sig-paren">(</span><span class="n"><span class="pre">size_t</span></span><span class="w"> </span><span class="n"><span class="pre">window_shift</span></span>, <span class="n"><span class="pre">size_t</span></span><span class="w"> </span><span class="n"><span class="pre">frame_shift</span></span><span class="sig-paren">)</span><a class="headerlink" href="#c.ei_wrapper_start_prediction" title="Permalink to this definition"></a><br /></dt>
<dd><p>Start a prediction using the Edge Impulse library.</p>
<p>If there is not enough data in the input buffer, the prediction start is delayed until the missing data is added.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>window_shift</strong> – <strong>[in]</strong> Number of windows the input window is shifted before prediction. </p></li>
<li><p><strong>frame_shift</strong> – <strong>[in]</strong> Number of frames the input window is shifted before prediction.</p></li>
</ul>
</dd>
<dt class="field-even">Return values</dt>
<dd class="field-even"><p><strong>0</strong> – If the operation was successful. Otherwise, a (negative) error code is returned. </p>
</dd>
</dl>
</dd></dl>

<dl class="c function">
<dt class="sig sig-object c" id="c.ei_wrapper_get_next_classification_result">
<span class="target" id="group__ei__wrapper_1gabaa7b328cb301ecf66278e0aef53d476"></span><span class="kt"><span class="pre">int</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">ei_wrapper_get_next_classification_result</span></span></span><span class="sig-paren">(</span><span class="k"><span class="pre">const</span></span><span class="w"> </span><span class="kt"><span class="pre">char</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">label</span></span>, <span class="kt"><span class="pre">float</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">value</span></span>, <span class="n"><span class="pre">size_t</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">idx</span></span><span class="sig-paren">)</span><a class="headerlink" href="#c.ei_wrapper_get_next_classification_result" title="Permalink to this definition"></a><br /></dt>
<dd><p>Get next classification result.</p>
<p>Results are ordered based on descending classification value. If there are more results with the given value, they are ordered based on ascending index.</p>
<p>This function can be executed only from the wrapper’s callback context. Otherwise it returns a (negative) error code.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>label</strong> – <strong>[out]</strong> Pointer to the variable that is used to store the pointer to the classification label. </p></li>
<li><p><strong>value</strong> – <strong>[out]</strong> Pointer to the variable that is used to store the classification value. </p></li>
<li><p><strong>idx</strong> – <strong>[out]</strong> Pointer to the variable that is used to store the index of the classification label.</p></li>
</ul>
</dd>
<dt class="field-even">Return values</dt>
<dd class="field-even"><ul class="simple">
<li><p><strong>0</strong> – On success. </p></li>
<li><p><strong>-EACCES</strong> – If function is executed from other context that the wrapper’s callback. </p></li>
<li><p><strong>-ENOENT</strong> – If no more results are available. </p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="c function">
<dt class="sig sig-object c" id="c.ei_wrapper_get_anomaly">
<span class="target" id="group__ei__wrapper_1gaac4706589d4059b3caf1d7878bbd38c8"></span><span class="kt"><span class="pre">int</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">ei_wrapper_get_anomaly</span></span></span><span class="sig-paren">(</span><span class="kt"><span class="pre">float</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">anomaly</span></span><span class="sig-paren">)</span><a class="headerlink" href="#c.ei_wrapper_get_anomaly" title="Permalink to this definition"></a><br /></dt>
<dd><p>Get anomaly value.</p>
<p>This function can be executed only from the wrapper’s callback context. Otherwise it returns a (negative) error code.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>anomaly</strong> – <strong>[out]</strong> Pointer to the variable that is used to store the anomaly.</p></li>
</ul>
</dd>
<dt class="field-even">Return values</dt>
<dd class="field-even"><ul class="simple">
<li><p><strong>0</strong> – On success. </p></li>
<li><p><strong>-EACCES</strong> – If function is executed from other context that the wrapper’s callback. </p></li>
<li><p><strong>-ENOTSUP</strong> – If calculating anomaly value is not supported. </p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="c function">
<dt class="sig sig-object c" id="c.ei_wrapper_get_timing">
<span class="target" id="group__ei__wrapper_1ga9d747219dd4863712440a74dc2b57b36"></span><span class="kt"><span class="pre">int</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">ei_wrapper_get_timing</span></span></span><span class="sig-paren">(</span><span class="kt"><span class="pre">int</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">dsp_time</span></span>, <span class="kt"><span class="pre">int</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">classification_time</span></span>, <span class="kt"><span class="pre">int</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">anomaly_time</span></span><span class="sig-paren">)</span><a class="headerlink" href="#c.ei_wrapper_get_timing" title="Permalink to this definition"></a><br /></dt>
<dd><p>Get execution times for operations performed by the library.</p>
<p>This function can be executed only from the wrapper’s callback context. Otherwise, it returns a (negative) error code.</p>
<p>The library uses Zephyr’s uptime for calculations. Because of that execution times can be affected by other operations performed by the CPU.</p>
<p>If calculating the anomaly value is not supported, anomaly_time is set to the value of -1.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>dsp_time</strong> – <strong>[out]</strong> Pointer to the variable that is used to store the dsp time. </p></li>
<li><p><strong>classification_time</strong> – <strong>[out]</strong> Pointer to the variable that is used to store the classification time. </p></li>
<li><p><strong>anomaly_time</strong> – <strong>[out]</strong> Pointer to the variable that is used to store the anomaly time.</p></li>
</ul>
</dd>
<dt class="field-even">Return values</dt>
<dd class="field-even"><p><strong>0</strong> – If the operation was successful. Otherwise, a (negative) error code is returned. </p>
</dd>
</dl>
</dd></dl>

<dl class="c function">
<dt class="sig sig-object c" id="c.ei_wrapper_init">
<span class="target" id="group__ei__wrapper_1ga0e6bcbf7f0224bccdb0417c7b9087e2b"></span><span class="kt"><span class="pre">int</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">ei_wrapper_init</span></span></span><span class="sig-paren">(</span><a class="reference internal" href="#c.ei_wrapper_result_ready_cb" title="ei_wrapper_result_ready_cb"><span class="n"><span class="pre">ei_wrapper_result_ready_cb</span></span></a><span class="w"> </span><span class="n"><span class="pre">cb</span></span><span class="sig-paren">)</span><a class="headerlink" href="#c.ei_wrapper_init" title="Permalink to this definition"></a><br /></dt>
<dd><p>Initialize the Edge Impulse wrapper.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>cb</strong> – <strong>[in]</strong> Callback used to receive results.</p></li>
</ul>
</dd>
<dt class="field-even">Return values</dt>
<dd class="field-even"><p><strong>0</strong> – If the operation was successful. Otherwise, a (negative) error code is returned. </p>
</dd>
</dl>
</dd></dl>

</div>
</dd></dl>

</section>
</section>


           </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="emds.html" class="btn btn-neutral float-right" title="Emergency data storage" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="dm.html" class="btn btn-neutral" title="Distance Measurement" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">

<table>
<tr>
<td>
    <p>
        &copy; Copyright 2019-2023, Nordic Semiconductor.
      Last updated on Mar 20, 2023.

    </p>
</td>
<td id="nordiclogo">
  <a href="https://www.nordicsemi.com/"><img src="../../_static/images/nordic-logo.png" border="0"/></a>
</td>
</tr>
</table>
  </div> 


</footer>

<div id="scroll-container">
  <button type="button" id="scroll-btn" class="btn">
    <svg xmlns="http://www.w3.org/2000/svg" height="24" viewBox="0 0 24 24" width="24"><path d="M0 0h24v24H0z" fill="none"/><path d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z" fill="#fff"/></svg>
  </button>
</div>

<script>
  const scrollBtn = document.querySelector("#scroll-btn");

  document.addEventListener("scroll", () => {
    if (window.scrollY > 400) {
          scrollBtn.style.visibility = "visible";
      } else {
          scrollBtn.style.visibility = "hidden";
      }
  });

  scrollBtn.addEventListener("click", () => {
      window.scrollTo({ top: 0, behavior: "smooth" });
  });
</script>
        </div>
      </div>
    </section>
  </div>
  
  <div class="rst-versions" data-toggle="rst-versions" role="note" aria-label="versions">
    <span class="rst-current-version" data-toggle="rst-current-version">
      <span class="fa fa-book"> nRF Connect SDK</span>
       <span class="fa fa-caret-down"></span>
    </span>
    <div class="rst-other-versions">
      
      <div class="rst-other-version ncs">
        <a href="../../../nrf/index.html">nRF Connect SDK</a>
      </div>
      
      <div class="rst-other-version nrfx">
        <a href="../../../nrfx/index.html">nrfx</a>
      </div>
      
      <div class="rst-other-version nrfxlib">
        <a href="../../../nrfxlib/README.html">nrfxlib</a>
      </div>
      
      <div class="rst-other-version zephyr">
        <a href="../../../zephyr/index.html">Zephyr Project</a>
      </div>
      
      <div class="rst-other-version mcuboot">
        <a href="../../../mcuboot/wrapper.html">MCUboot</a>
      </div>
      
      <div class="rst-other-version tfm">
        <a href="../../../tfm/index.html">Trusted Firmware-M</a>
      </div>
      
      <div class="rst-other-version matter">
        <a href="../../../matter/index.html">Matter</a>
      </div>
      
      <div class="rst-other-version kconfig">
        <a href="../../../kconfig/index.html">Kconfig Reference</a>
      </div>
    </div>
  </div><script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>