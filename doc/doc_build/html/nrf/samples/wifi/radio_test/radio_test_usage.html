<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Radio test usage &mdash; nRF Connect SDK 2.3.99 documentation</title>
      <link rel="stylesheet" href="../../../_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="../../../_static/css/nordic.css" type="text/css" />
      <link rel="stylesheet" href="../../../_static/togglebutton.css" type="text/css" />
      <link rel="stylesheet" href="../../../_static/css/nrf.css" type="text/css" />
      <link rel="stylesheet" href="../../../_static/tabs.css" type="text/css" /> 
  <!--[if lt IE 9]>
    <script src="../../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="../../../" id="documentation_options" src="../../../_static/documentation_options.js"></script>
        <script src="../../../_static/jquery.js"></script>
        <script src="../../../_static/underscore.js"></script>
        <script src="../../../_static/_sphinx_javascript_frameworks_compat.js"></script>
        <script src="../../../_static/doctools.js"></script>
        <script src="../../../_static/sphinx_highlight.js"></script>
        <script src="https://www.googletagmanager.com/gtag/js?id=G-ZPVZRKFQJR"></script>
        <script src="../../../_static/js/ga-tracker.js"></script>
        <script data-culture="EN" id="CookieConsent" type="text/javascript" src="https://policy.app.cookieinformation.com/uc.js"></script>
        <script>let toggleHintShow = 'Click to show';</script>
        <script>let toggleHintHide = 'Click to hide';</script>
        <script>let toggleOpenOnPrint = 'true';</script>
        <script src="../../../_static/togglebutton.js"></script>
        <script>var togglebuttonSelector = '.toggle, .admonition.dropdown';</script>
    <script src="../../../_static/js/theme.js"></script>
<script
  type="text/javascript"
  src="../../../_static/js/ncs.js"
></script>
<script src="../../../_static/js/bootstrap.bundle.min.js"></script>

    <link rel="index" title="Index" href="../../../genindex.html" />
    <link rel="search" title="Search" href="../../../search.html" />
    <link rel="next" title="FICR programming subcommands" href="ficr.html" />
    <link rel="prev" title="Radio test subcommands" href="radio_test_subcommands.html" />
<link
  href="../../../_static/css/bootstrap.min.css"
  rel="stylesheet"
/>
<link
  rel="shortcut icon"
  href="../../../_static/images/favicon.ico"
/>

</head>

<body class="wy-body-for-nav">
<div class="announcement"></div>
<div class="d-print-none ncs-header">
  <div class="container-xl ncs-header-top">
    <div class="row h-100">
      <div class="d-none d-md-block col-2">
        <div class="bg-white py-4 px-3 ml-2 ncs-header-logo">
          <img
            class="ncs-header-logo"
            src="../../../_static/images/nordic-logo.png"
            alt=""
          />
        </div>
      </div>
      <div
        class="col-8 col-md-7 pl-md-4 d-flex align-self-center justify-content-center"
      >
        <form class="w-75" action="../../../search.html" method="get">
          <div class="form-group">
            <input
              type="text"
              name="q"
              class="ncs-search-input form-control"
              placeholder="Search all docs..."
            />
          </div>
        </form>
      </div>
      <div class="col-4 col-md-3 d-md-block p-3 text-end">
        <div class="dropdown">
          <button
            class="btn dropdown-toggle ncs-btn-versions"
            type="button"
            id="dropdownMenuButton1"
            data-bs-toggle="dropdown"
            aria-expanded="false"
          >
            <span class="d-none d-md-inline">nRF Connect SDK</span>
            <span id="ncsversion" class="d-inline"></span>
          </button>
          <div class="dropdown-menu" aria-labelledby="dropdownMenuButton"></div>
        </div>
      </div>
    </div>
  </div>
  <div class="ncs-header-nav">
    <div class="container-xl">
      <div class="row">
        <div class="col col-12 d-flex justify-content-center">
          <nav class="navbar navbar-dark navbar-expand-lg p-0">
            <span class="navbar-brand d-block d-lg-none py-2 pl-1"
              >Documentation sets</span
            >
            <button
              class="navbar-toggler"
              type="button"
              data-bs-toggle="collapse"
              data-bs-target="#navbarNavAltMarkup"
              aria-controls="navbarNavAltMarkup"
              aria-expanded="false"
              aria-label="Toggle navigation"
            >
              <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="navbarNavAltMarkup">
              <ul class="navbar-nav">
                <li class="nav-item active py-1 px-3">
                  <a
                    class="nav-link"
                    href="../../../../nrf/index.html"
                    >nRF Connect SDK</a
                  >
                </li>
                <li><hr class="dropdown-divider" /></li>
                <li class="nav-item  py-1 px-3">
                  <a
                    class="nav-link"
                    href="../../../../nrfx/index.html"
                    >nrfx</a
                  >
                </li>
                <li><hr class="dropdown-divider" /></li>
                <li class="nav-item  py-1 px-3">
                  <a
                    class="nav-link"
                    href="../../../../nrfxlib/README.html"
                    >nrfxlib</a
                  >
                </li>
                <li><hr class="dropdown-divider" /></li>
                <li class="nav-item  py-1 px-3">
                  <a
                    class="nav-link"
                    href="../../../../zephyr/index.html"
                    >Zephyr Project</a
                  >
                </li>
                <li><hr class="dropdown-divider" /></li>
                <li class="nav-item  py-1 px-3">
                  <a
                    class="nav-link"
                    href="../../../../mcuboot/wrapper.html"
                    >MCUboot</a
                  >
                </li>
                <li><hr class="dropdown-divider" /></li>
                <li class="nav-item  py-1 px-3">
                  <a
                    class="nav-link"
                    href="../../../../tfm/index.html"
                    >Trusted Firmware-M</a
                  >
                </li>
                <li><hr class="dropdown-divider" /></li>
                <li class="nav-item  py-1 px-3">
                  <a
                    class="nav-link"
                    href="../../../../matter/index.html"
                    >Matter</a
                  >
                </li>
                <li><hr class="dropdown-divider" /></li>
                <li class="nav-item  py-1 px-3">
                  <a
                    class="nav-link"
                    href="../../../../kconfig/index.html"
                    >Kconfig Reference</a
                  >
                </li>
                <li><hr class="dropdown-divider" /></li>
              </ul>
            </div>
          </nav>
        </div>
      </div>
    </div>
  </div>
</div>

  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
            <a href="../../../index.html" class="icon icon-home"> nRF Connect SDK
          </a>
              <div class="version">
                2.3.99
              </div>
<div id="searchbox" role="search">
  <div class="searchformwrapper">
    <form id="rtd-search-form" class="wy-form" action="../../../search.html" method="get">
      <input type="text" name="q" placeholder="Search docs" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
  </div>
</div>
<script>$('#searchbox').show(0);</script>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Contents</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../../introduction.html">Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../getting_started.html">Getting started</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../dev_model.html">Development model</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../app_dev.html">Application development</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../security.html">Security</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../ecosystem_integration.html">Ecosystems integration</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../nrf91.html">Working with nRF91 Series</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../nrf70.html">Working with nRF70 Series</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../nrf53.html">Working with nRF53 Series</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../nrf52.html">Working with nRF52 Series</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../protocols.html">Protocols</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../applications.html">Applications</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../../../samples.html">Samples</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../../bl.html">Bluetooth samples</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../crypto.html">Cryptography samples</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../edge.html">Edge Impulse samples</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../gazell.html">Gazell samples</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../matter.html">Matter samples</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../nfc.html">NFC samples</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../nrf5340.html">nRF5340 samples</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../nrf9160.html">nRF9160 samples</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../tfm.html">Trusted Firmware-M (TF-M) samples</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../thread.html">Thread samples</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../zigbee.html">Zigbee samples</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="../../wifi.html">Wi-Fi samples</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="../provisioning/README.html">Wi-Fi: Provisioning Service</a></li>
<li class="toctree-l3 current"><a class="reference internal" href="README.html">Wi-Fi: Radio test</a><ul class="current">
<li class="toctree-l4"><a class="reference internal" href="sample_description.html">Sample description</a></li>
<li class="toctree-l4"><a class="reference internal" href="radio_test_subcommands.html">Radio test subcommands</a></li>
<li class="toctree-l4 current"><a class="current reference internal" href="#">Radio test usage</a></li>
<li class="toctree-l4"><a class="reference internal" href="ficr.html">FICR programming subcommands</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../scan/README.html">Wi-Fi: Scan</a></li>
<li class="toctree-l3"><a class="reference internal" href="../shell/README.html">Wi-Fi: Shell</a></li>
<li class="toctree-l3"><a class="reference internal" href="../sr_coex/README.html">Wi-Fi: Bluetooth LE coexistence</a></li>
<li class="toctree-l3"><a class="reference internal" href="../sta/README.html">Wi-Fi: Station</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../net/mqtt/README.html">MQTT</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../other.html">Other samples</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../drivers.html">Drivers</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../libraries/index.html">Libraries</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../scripts.html">Scripts</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../release_notes.html">Release notes</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../known_issues.html">Known issues</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../software_maturity.html">Software maturity levels</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../documentation.html">About this documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../glossary.html">Glossary</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../../index.html">nRF Connect SDK</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../../../index.html" class="icon icon-home"></a></li>
          <li class="breadcrumb-item"><a href="../../../samples.html">Samples</a></li>
          <li class="breadcrumb-item"><a href="../../wifi.html">Wi-Fi samples</a></li>
          <li class="breadcrumb-item"><a href="README.html">Wi-Fi: Radio test</a></li>
      <li class="breadcrumb-item active">Radio test usage</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../../../_sources/samples/wifi/radio_test/radio_test_usage.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="radio-test-usage">
<span id="wifi-radio-test-usage"></span><h1>Radio test usage<a class="headerlink" href="#radio-test-usage" title="Permalink to this heading"></a></h1>
<div class="contents local topic" id="contents">
<ul class="simple">
<li><p><a class="reference internal" href="#scope" id="id13">Scope</a></p></li>
<li><p><a class="reference internal" href="#kit-presentation" id="id14">Kit presentation</a></p></li>
<li><p><a class="reference internal" href="#setup-and-connections" id="id15">Setup and Connections</a></p></li>
<li><p><a class="reference internal" href="#firmware-for-tests-description-and-list-of-files" id="id16">Firmware for tests, description and list of files</a></p></li>
<li><p><a class="reference internal" href="#how-to-program-firmware-in-nrf7002-setup" id="id17">How to program Firmware in nRF7002 Setup</a></p></li>
<li><p><a class="reference internal" href="#how-to-use-radio-test" id="id18">How to use Radio Test</a></p></li>
<li><p><a class="reference internal" href="#how-to-use-wi-fi-radio-test" id="id19">How to use Wi-Fi Radio Test</a></p></li>
<li><p><a class="reference internal" href="#how-to-use-wi-fi-sta-sample" id="id20">How to use Wi-Fi STA Sample</a></p></li>
<li><p><a class="reference internal" href="#how-to-use-wi-fi-shell-sample" id="id21">How to use Wi-Fi Shell Sample</a></p></li>
<li><p><a class="reference internal" href="#how-to-use-thread-radio-testing" id="id22">How to use Thread Radio Testing</a></p></li>
<li><p><a class="reference internal" href="#general-note-on-vcom-setting" id="id23">General note on VCOM setting</a></p></li>
<li><p><a class="reference internal" href="#appendix-a" id="id24">Appendix A</a></p></li>
</ul>
</div>
<section id="scope">
<span id="id1"></span><h2><a class="toc-backref" href="#id13">Scope</a><a class="headerlink" href="#scope" title="Permalink to this heading"></a></h2>
<p>This document gives instructions for loading and running Wi-Fi and Short Range (SR) Radio Test software on the nRF7002 DK/EK</p>
</section>
<section id="kit-presentation">
<h2><a class="toc-backref" href="#id14">Kit presentation</a><a class="headerlink" href="#kit-presentation" title="Permalink to this heading"></a></h2>
<p>There are two development kits for nRF7002 – nRF7002DK and nRF7002EK. nRF7002DK is a single board solution while the nRF7002EK is a shield that sits on the Arduino connector of a nRF5340DK. In this document, nRF7002EK refers to the combination of nRF5340DK+nRF7002EK.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Buttons, battery are not used by the software outlined in the document.</p>
</div>
<p>DK Top view:</p>
<blockquote>
<div><figure class="align-center" id="id7">
<a class="reference internal image-reference" href="../../../_images/wifi_coex_ble.png"><img alt="DK Top view" src="../../../_images/wifi_coex_ble.png" style="width: 780px;" /></a>
<figcaption>
<p><span class="caption-text">DK Top view</span><a class="headerlink" href="#id7" title="Permalink to this image"></a></p>
</figcaption>
</figure>
</div></blockquote>
<p>EK Top view:</p>
<blockquote>
<div><figure class="align-center" id="id8">
<a class="reference internal image-reference" href="../../../_images/wifi_coex_ble.png"><img alt="EK Top view" src="../../../_images/wifi_coex_ble.png" style="width: 780px;" /></a>
<figcaption>
<p><span class="caption-text">EK Top view</span><a class="headerlink" href="#id8" title="Permalink to this image"></a></p>
</figcaption>
</figure>
</div></blockquote>
</section>
<section id="setup-and-connections">
<h2><a class="toc-backref" href="#id15">Setup and Connections</a><a class="headerlink" href="#setup-and-connections" title="Permalink to this heading"></a></h2>
<dl>
<dt>RF test setup:</dt><dd><p>The following connection is used for performing Wi-Fi and Short Range (SR) RF based tests.</p>
<figure class="align-center" id="id9">
<a class="reference internal image-reference" href="../../../_images/RF_test_setup.png"><img alt="RF test setup" src="../../../_images/RF_test_setup.png" style="width: 580px;" /></a>
<figcaption>
<p><span class="caption-text">RF test setup</span><a class="headerlink" href="#id9" title="Permalink to this image"></a></p>
</figcaption>
</figure>
</dd>
<dt>PER test setup:</dt><dd><p>The following connection is used for performing Wi-Fi and Short Range (SR) PER based tests.</p>
<figure class="align-center" id="id10">
<a class="reference internal image-reference" href="../../../_images/PER_test_setup.png"><img alt="PER test setup" src="../../../_images/PER_test_setup.png" style="width: 699px;" /></a>
<figcaption>
<p><span class="caption-text">PER test setup</span><a class="headerlink" href="#id10" title="Permalink to this image"></a></p>
</figcaption>
</figure>
<p>Alternatively, the “TX DUT” can be replaced with an appropriate Vector Signal Generator (VSG) if available, e.g. Rohde and Schwarz CMW-500 with appropriate personalities.
Wi-Fi System level test setup
The following connection is used for performing Wi-Fi association and ping tests with Wi-Fi capable access point.</p>
</dd>
<dt>Wi-Fi System level test setup:</dt><dd><p>The following connection is used for performing Wi-Fi association and ping tests with Wi-Fi capable access point.</p>
<figure class="align-center" id="id11">
<a class="reference internal image-reference" href="../../../_images/wifi_shell_test_setup.png"><img alt="Wi-Fi System level test setup" src="../../../_images/wifi_shell_test_setup.png" style="width: 546px;" /></a>
<figcaption>
<p><span class="caption-text">Wi-Fi System level test setup</span><a class="headerlink" href="#id11" title="Permalink to this image"></a></p>
</figcaption>
</figure>
</dd>
</dl>
</section>
<section id="firmware-for-tests-description-and-list-of-files">
<h2><a class="toc-backref" href="#id16">Firmware for tests, description and list of files</a><a class="headerlink" href="#firmware-for-tests-description-and-list-of-files" title="Permalink to this heading"></a></h2>
<p>nRF7002 firmware can be built as multiple samples – Radio Test and Wi-Fi Radio Test, Wi-Fi Station and Wi-Fi Shell.</p>
<p>The nRF7002 comprises an nRF5340 SR device and an nRF7002 Wi-Fi device.
The nRF5340 device contains two cores, an Application (APP) core and a Network (NET) core.
Radio Test executes directly on the NET core, while Wi-Fi Radio Test,
Station and Shell samples execute on the APP core and communicates with the nRF7002 slave device.</p>
<p>The combined build of Radio Test and Wi-Fi Radio Test firmware:</p>
<blockquote>
<div><blockquote>
<div><ul class="simple">
<li><p>Short Range Radio test description - <a class="reference internal" href="../../peripheral/radio_test/README.html#radio-test"><span class="std std-ref">Radio test (short-range)</span></a></p></li>
<li><p>Wi-Fi Radio test description - <a class="reference internal" href="sample_description.html#wifi-radio-sample-desc"><span class="std std-ref">Sample description</span></a></p></li>
<li><p>Radio Test controls the Short Range (SR) radio, while Wi-Fi Radio Test controls the Wi-Fi radio.</p></li>
<li><p>Allows to put the DUT in all needed Transmission / Reception modes to perform RF emissions tests both in Wi-Fi and Short Range Radio.</p></li>
<li><p>Allows to do all Bluetooth/Thread tests as required for EMI/EMC testing.</p></li>
<li><p>Allows to do all Wi-Fi tests as required for EMI/EMC testing.</p></li>
</ul>
</div></blockquote>
<p>Wi-Fi Station sample:</p>
<blockquote>
<div><ul class="simple">
<li><p>Detailed description - <a class="reference internal" href="../sta/README.html#wifi-station-sample"><span class="std std-ref">Wi-Fi: Station</span></a></p></li>
<li><p>Allows DUT to connect to a Wi-Fi Access Point device and gives visual indication of connected state (LED1 blinking) or not (LED1 off)</p></li>
<li><p>Allows an option to statically set a desired IP address to the DUT at build time via settings in <code class="docutils literal notranslate"><span class="pre">prj.conf</span></code> file.
This IP address will be used by the device up on connection to Access Point in case DHCP resolution fails for any reason.</p></li>
</ul>
</div></blockquote>
<p>Wi-Fi Shell sample:</p>
<blockquote>
<div><ul class="simple">
<li><p>Detailed description - <a class="reference internal" href="../shell/README.html#wifi-shell-sample"><span class="std std-ref">Wi-Fi: Shell</span></a></p></li>
<li><p>Allows DUT to connect to an Wi-Fi Access Point device and expose a shell interface via the UART console to run relevant Wi-Fi shell commands .</p></li>
<li><p>Allows an option to statically set a desired IP address to the DUT at build time via settings in <code class="docutils literal notranslate"><span class="pre">prj.conf</span></code> file.
This IP address will be used by the device up on connection to Access Point in case DHCP resolution fails for any reason.</p></li>
</ul>
</div></blockquote>
</div></blockquote>
<p>Build instructions:</p>
<ul>
<li><p>Standalone Wi-Fi Radio Test: <code class="docutils literal notranslate"><span class="pre">&lt;ncs_repo&gt;/ncs/nrf/samples/wifi/radio_test</span></code></p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>west<span class="w"> </span>build<span class="w"> </span>-p<span class="w"> </span>-b<span class="w"> </span>nrf7002dk_nrf5340_cpuapp<span class="w"> </span><span class="o">(</span>DK<span class="w"> </span>Build<span class="o">)</span>
<span class="gp">$ </span>west<span class="w"> </span>build<span class="w"> </span>-p<span class="w"> </span>-b<span class="w"> </span>nrf5340dk_nrf5340_cpuapp<span class="w"> </span>--<span class="w"> </span>-DSHIELD<span class="o">=</span>nrf7002_ek<span class="w"> </span><span class="o">(</span>EK<span class="w"> </span>build<span class="o">)</span>
</pre></div>
</div>
<p>Hex file generated – <code class="docutils literal notranslate"><span class="pre">build/zephyr/zephyr.hex</span></code></p>
</li>
<li><p>Radio Test and Wi-Fi Radio Test combined build: <code class="docutils literal notranslate"><span class="pre">&lt;ncs_repo&gt;/ncs/nrf/samples/wifi/radio_test</span></code></p>
<p>set CONFIG_BOARD_ENABLE_CPUNET=y in <code class="docutils literal notranslate"><span class="pre">&lt;ncs_repo&gt;/nrf/samples/wifi/radio/test/prj.conf</span></code></p>
<p>set CONFIG_NCS_SAMPLE_REMOTE_SHELL_CHILD_IMAGE=n in <code class="docutils literal notranslate"><span class="pre">&lt;ncs_repo&gt;/nrf/samples/peripheral/radio_test/prj_nrf5340dk_nrf5340_cpunet.conf</span></code></p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>west<span class="w"> </span>build<span class="w"> </span>-p<span class="w"> </span>-b<span class="w"> </span>nrf7002dk_nrf5340_cpuapp<span class="w">  </span><span class="o">(</span>DK<span class="w"> </span>build<span class="o">)</span>
<span class="gp">$ </span>west<span class="w"> </span>build<span class="w"> </span>-p<span class="w"> </span>-b<span class="w"> </span>nrf5340dk_nrf5340_cpuapp<span class="w"> </span>--<span class="w"> </span>-DSHIELD<span class="o">=</span>nrf7002_ek<span class="w"> </span><span class="o">(</span>EK<span class="w"> </span>build<span class="o">)</span>
</pre></div>
</div>
<p>Hex files generated –</p>
<ul class="simple">
<li><p>Combined hex file : <code class="docutils literal notranslate"><span class="pre">build/zephyr/merged_domains.hex</span></code></p></li>
<li><p>APP core hex file: <code class="docutils literal notranslate"><span class="pre">build/zephyr/merged.hex</span></code></p></li>
<li><p>NET core hex file: <code class="docutils literal notranslate"><span class="pre">build/peripheral_radio_test/zephyr/merged_CPUNET.hex</span></code></p></li>
</ul>
</li>
<li><p>Wi-Fi Station build : <code class="docutils literal notranslate"><span class="pre">&lt;ncs_repo&gt;/ncs/nrf/samples/wifi/sta</span></code></p>
<p>Change the CONFIG parameters in <code class="docutils literal notranslate"><span class="pre">prj.conf</span></code> as per Access Point requirements -</p>
<ul class="simple">
<li><p>Credentials - CONFIG_STA_KEY_MGMT_*, CONFIG_STA_SAMPLE_SSID, CONFIG_STA_SAMPLE_PASSWORD</p></li>
<li><p>Static IP address - CONFIG_NET_CONFIG_MY_IPV4_ADDR, CONFIG_NET_CONFIG_MY_IPV4_NETMASK, CONFIG_NET_CONFIG_MY_IPV4_GW
(These are only used if IP address is not acquired due to DHCP failure)</p></li>
</ul>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>west<span class="w"> </span>build<span class="w"> </span>-p<span class="w"> </span>-b<span class="w"> </span>nrf7002dk_nrf5340_cpuapp<span class="w">  </span><span class="o">(</span>DK<span class="w"> </span>build<span class="o">)</span>
<span class="gp">$ </span>west<span class="w"> </span>build<span class="w"> </span>-p<span class="w"> </span>-b<span class="w"> </span>nrf5340dk_nrf5340_cpuapp<span class="w"> </span>--<span class="w"> </span>-DSHIELD<span class="o">=</span>nrf7002_ek<span class="w"> </span><span class="o">(</span>EK<span class="w"> </span>build<span class="o">)</span>
</pre></div>
</div>
<p>Hex file generated – <code class="docutils literal notranslate"><span class="pre">build/zephyr/zephyr.hex</span></code></p>
</li>
<li><p>Wi-Fi Shell build : <code class="docutils literal notranslate"><span class="pre">&lt;ncs_repo&gt;/ncs/nrf/samples/wifi/shell</span></code></p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>west<span class="w"> </span>build<span class="w"> </span>-p<span class="w"> </span>-b<span class="w"> </span>nrf7002dk_nrf5340_cpuapp<span class="w">  </span><span class="o">(</span>DK<span class="w"> </span>build<span class="o">)</span>
<span class="gp">$ </span>west<span class="w"> </span>build<span class="w"> </span>-p<span class="w"> </span>-b<span class="w"> </span>nrf5340dk_nrf5340_cpuapp<span class="w"> </span>--<span class="w"> </span>-DSHIELD<span class="o">=</span>nrf7002_ek<span class="w"> </span><span class="o">(</span>EK<span class="w"> </span>build<span class="o">)</span>
</pre></div>
</div>
</li>
</ul>
<p>Firmware files:</p>
<ul class="simple">
<li><p>Applications Core -
<code class="docutils literal notranslate"><span class="pre">nrf_cefcc_combo_rf_test_APP_&lt;ncs_version&gt;.nrf7002_dk_RevB.hex</span></code></p></li>
<li><p>Network Core -
<code class="docutils literal notranslate"><span class="pre">nrf_cefcc_combo_rf_test_NET_&lt;ncs_version&gt;.nrf7002_dk_RevB.hex</span></code></p></li>
</ul>
</section>
<section id="how-to-program-firmware-in-nrf7002-setup">
<h2><a class="toc-backref" href="#id17">How to program Firmware in nRF7002 Setup</a><a class="headerlink" href="#how-to-program-firmware-in-nrf7002-setup" title="Permalink to this heading"></a></h2>
<ul class="simple">
<li><p>Have nRFJPROG tool installed on PC. This program is available at <a class="reference external" href="https://www.nordicsemi.com/Products/Development-tools/nRF-Command-Line-Tools/Download?lang=en#infotabs">Download nRF Command Line Tools</a></p></li>
<li><p>Connect PC to nRF7002 board with USB cable.</p></li>
<li><p>Switch nRF7002 board on.</p></li>
</ul>
<dl>
<dt>Program Radio Test Firmware:</dt><dd><ul class="simple">
<li><p>Program nrf_cefcc_combo_rf_test_APP_v3.nrf7002_dk_RevB.hex to application core on nRF7002- DK/EK</p></li>
</ul>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>nrfjprog<span class="w"> </span>--program<span class="w"> </span>nrf_cefcc_combo_rf_test_APP_v3.nrf7002_dk_RevB.hex<span class="w"> </span>-f<span class="w"> </span>NRF53<span class="w"> </span>--coprocessor<span class="w"> </span>CP_APPLICATION<span class="w"> </span>--verify<span class="w"> </span>--chiperase<span class="w"> </span>--reset
</pre></div>
</div>
<ul class="simple">
<li><p>Program nrf_cefcc_combo_rf_test_NET_v3.nrf7002_dk_RevB.hex to network core on nRF7002- DK/EK</p></li>
</ul>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>nrfjprog<span class="w"> </span>--program<span class="w"> </span>nrf_cefcc_combo_rf_test_NET_v3.nrf7002_dk_RevB.hex<span class="w"> </span>-f<span class="w"> </span>NRF53<span class="w"> </span>--coprocessor<span class="w"> </span>CP_NETWORK<span class="w"> </span>--verify<span class="w"> </span>--chiperase<span class="w"> </span>--reset
</pre></div>
</div>
<ul>
<li><p>Reset the nRF7002- DK/EK to start it running firmware</p>
<p>Press reset button, or
Invoke reset command in nRFJPROG, or
Power cycle the devkit</p>
</li>
</ul>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Baud rate shall be set to 115200bps. Details about COM port setup at the end of this document.</p>
</div>
</dd>
</dl>
</section>
<section id="how-to-use-radio-test">
<h2><a class="toc-backref" href="#id18">How to use Radio Test</a><a class="headerlink" href="#how-to-use-radio-test" title="Permalink to this heading"></a></h2>
<p>Radio Test is the sample (application) used to control the Short Range (SR) radio on the nRF5340 device.</p>
<dl>
<dt>How to use Radio Test firmware:</dt><dd><p>The Radio Test firmware supports configuration of the SR radio in specific modes and with various TX/RX parameters to test its performance.
The following links give further details –</p>
<ul class="simple">
<li><p>General information about Radio Test software in online documentation - <a class="reference internal" href="../../peripheral/radio_test/README.html#radio-test"><span class="std std-ref">Radio test (short-range)</span></a></p></li>
<li><p>Description of using Putty as the terminal application for controlling the DUT – <a class="reference internal" href="../../../getting_started/testing.html#gs-testing"><span class="std std-ref">Testing and debugging an application</span></a></p></li>
<li><p>Description of the sub-commands that can be used to configure the radio - <a class="reference internal" href="../../peripheral/radio_test/README.html#radio-test-ui"><span class="std std-ref">User interface</span></a></p></li>
</ul>
<p>The example below details how to perform a continuous transmit on a fixed channel -</p>
<ul class="simple">
<li><p>Configure 1 Mbps date rate, random data and 90% duty cycle:</p></li>
</ul>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">uart:~$ </span>data_rate<span class="w"> </span>ble_1Mbit
<span class="gp">uart:~$ </span>transmit_pattern<span class="w"> </span>pattern_random
</pre></div>
</div>
<ul class="simple">
<li><p>Select lowest channel (2400 MHz)</p></li>
</ul>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">uart:~$ </span>start_channel<span class="w"> </span><span class="m">0</span>
</pre></div>
</div>
<ul class="simple">
<li><p>Transmit packets continuously with high duty cycle</p></li>
</ul>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">uart:~$ </span>start_tx_modulated_carrier
</pre></div>
</div>
<ul class="simple">
<li><p>Terminate transmission</p></li>
</ul>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">uart:~$ </span>cancel
</pre></div>
</div>
</dd>
<dt>How to use Radio Test for PER measurements:</dt><dd><p>A PER measurement can be performed using the Radio Test application running on two nRF7002 DK/EK, one as a transmitter, and the other as a receiver.
The process is as follows –</p>
<ul class="simple">
<li><p>Configure the first DK/EK to receive packets with a known Access Address at centre frequency of 2400 MHz –</p></li>
</ul>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">uart:~$ </span>data_rate<span class="w"> </span>ble_1Mbit
<span class="gp">uart:~$ </span>transmit_pattern<span class="w"> </span>pattern_11110000
<span class="gp">uart:~$ </span>start_channel<span class="w"> </span><span class="m">0</span>
<span class="gp">uart:~$ </span>parameters_print
<span class="gp">uart:~$ </span>start_rx
</pre></div>
</div>
<ul class="simple">
<li><p>Configure the second DK/EK to transmit 10000 packets (TX transmit count) with the matching Access Address at centre frequency of 2400 MHz –</p></li>
</ul>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">uart:~$ </span>data_rate<span class="w"> </span>ble_1Mbit
<span class="gp">uart:~$ </span>transmit_pattern<span class="w"> </span>pattern_11110000
<span class="gp">uart:~$ </span>start_channel<span class="w"> </span><span class="m">0</span>
<span class="gp">uart:~$ </span>parameters_print
<span class="gp">uart:~$ </span>start_tx_modulated_carrier<span class="w"> </span><span class="m">10000</span>
</pre></div>
</div>
<ul class="simple">
<li><p>Record number of successfully received packets on the first DK/EK (repeat as necessary until count stops incrementing). RX success count is the final item in the print display, ‘Number of packets’.</p></li>
</ul>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">uart:~$ </span>print_rx
</pre></div>
</div>
<ul class="simple">
<li><p>Terminate receiving on the first DK/EK</p></li>
</ul>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">uart:~$ </span>cancel
</pre></div>
</div>
<ul class="simple">
<li><p>Calculate the PER as 1 – (RX success count / TX transmit count)</p></li>
</ul>
</dd>
</dl>
</section>
<section id="how-to-use-wi-fi-radio-test">
<h2><a class="toc-backref" href="#id19">How to use Wi-Fi Radio Test</a><a class="headerlink" href="#how-to-use-wi-fi-radio-test" title="Permalink to this heading"></a></h2>
<p>Wi-Fi Radio Test is the sample (application) used to control the Wi-Fi radio on the nRF7002 device.</p>
<p>The Wi-Fi Radio Test firmware supports configuration of the W-Fi radio in specific modes and with various TX/RX parameters to test its performance.
The following links give further details –</p>
<ul class="simple">
<li><p>Overall description of the Wi-Fi Radio Test mode - <a class="reference internal" href="sample_description.html#wifi-radio-sample-desc"><span class="std std-ref">Sample description</span></a></p></li>
<li><p>Description of the sub-commands that can be used to configure the radio - <a class="reference internal" href="radio_test_subcommands.html#wifi-radio-subcommands"><span class="std std-ref">Radio test subcommands</span></a></p></li>
</ul>
<dl>
<dt>Wi-Fi radio test subcommands ordering:</dt><dd><p>Order of usage of Wi-Fi radio test sub-commands is very important. The <code class="docutils literal notranslate"><span class="pre">init</span></code> sub-command must be called first.</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">uart:~$ </span>wifi_radio_test<span class="w"> </span>init<span class="w"> </span>&lt;channel<span class="w"> </span>number&gt;
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The <code class="docutils literal notranslate"><span class="pre">init</span></code> sub-command disables any ongoing TX or RX testing and sets all configured parameters to default.</p>
</div>
<p>The second sub-command to call is <code class="docutils literal notranslate"><span class="pre">tx_pkt_tput_mode</span></code>.</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">uart:~$ </span>wifi_radio_test<span class="w"> </span>tx_pkt_tput_mode<span class="w"> </span>&lt;Throughput<span class="w"> </span>mode&gt;
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The <code class="docutils literal notranslate"><span class="pre">tx_pkt_tput_mode</span></code> sub-command is used to set frame format of the transmitted packet.</p>
</div>
<p>For HETB packets (tx_pkt_tput_mode 5), <code class="docutils literal notranslate"><span class="pre">ru_tone</span></code> sub-command must be called before <code class="docutils literal notranslate"><span class="pre">ru_index</span></code> sub-command.
And <code class="docutils literal notranslate"><span class="pre">ru_index</span></code> sub-command must be called before <code class="docutils literal notranslate"><span class="pre">tx_pkt_len</span></code> sub-command.</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">uart:~$ </span>wifi_radio_test<span class="w"> </span>ru_tone<span class="w"> </span><span class="m">106</span>
<span class="gp">uart:~$ </span>wifi_radio_test<span class="w"> </span>ru_index<span class="w"> </span><span class="m">2</span>
<span class="gp">uart:~$ </span>wifi_radio_test<span class="w"> </span>tx_pkt_len<span class="w"> </span><span class="m">1024</span>
</pre></div>
</div>
<p>TX start must be given only after all parameters are configured.</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">uart:~$ </span>wifi_radio_test<span class="w"> </span>tx<span class="w"> </span><span class="m">1</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>While TX transmission is going on further changes in TX parameters are not permitted.</p>
</div>
<p>Remaining sub-commands can be called in any order after <code class="docutils literal notranslate"><span class="pre">tx_pkt_tput_mode</span></code> sub-command and before TX start.</p>
</dd>
</dl>
<p>How to use Wi-Fi Radio Test for transmit tests:</p>
<ol class="arabic">
<li><dl>
<dt>To run a continuous (DSSS/CCK) TX sequence in 802.11b mode:</dt><dd><ul class="simple">
<li><p>Channel: 1</p></li>
<li><p>Payload length: 1024 bytes</p></li>
<li><p>Inter-frame gap: 8600 us</p></li>
<li><p>datarate: 1Mbps</p></li>
<li><p>Long Preamble: 1</p></li>
<li><p>TX power: 20 dBm</p></li>
</ul>
<p>Execute the following sequence of commands:</p>
<blockquote>
<div><div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">uart:~$ </span>wifi_radio_test<span class="w"> </span>init<span class="w"> </span><span class="m">1</span>
<span class="gp">uart:~$ </span>wifi_radio_test<span class="w"> </span>tx_pkt_tput_mode<span class="w"> </span><span class="m">0</span>
<span class="gp">uart:~$ </span>wifi_radio_test<span class="w"> </span>tx_pkt_preamble<span class="w"> </span><span class="m">1</span>
<span class="gp">uart:~$ </span>wifi_radio_test<span class="w"> </span>tx_pkt_rate<span class="w"> </span><span class="m">1</span>
<span class="gp">uart:~$ </span>wifi_radio_test<span class="w"> </span>tx_pkt_len<span class="w"> </span><span class="m">1024</span>
<span class="gp">uart:~$ </span>wifi_radio_test<span class="w"> </span>tx_pkt_gap<span class="w"> </span><span class="m">8600</span>
<span class="gp">uart:~$ </span>wifi_radio_test<span class="w"> </span>tx_power<span class="w"> </span><span class="m">20</span>
<span class="gp">uart:~$ </span>wifi_radio_test<span class="w"> </span>tx_pkt_num<span class="w"> </span>-1
<span class="gp">uart:~$ </span>wifi_radio_test<span class="w"> </span>tx<span class="w"> </span><span class="m">1</span>
</pre></div>
</div>
</div></blockquote>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Frame duration with above config = 8624 us, duty-cycle achieved = 50.07%</p>
</div>
</dd>
</dl>
</li>
<li><dl>
<dt>To run a continuous (OFDM) TX traffic sequence in 11g mode:</dt><dd><ul class="simple">
<li><p>Channel: 11</p></li>
<li><p>Payload length 4000 bytes</p></li>
<li><p>Inter-frame gap: 200 us</p></li>
<li><p>data rate : 6Mbps</p></li>
<li><p>TX power : 0 dBm</p></li>
</ul>
<p>Execute the following sequence of commands:</p>
<blockquote>
<div><div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">uart:~$ </span>wifi_radio_test<span class="w"> </span>init<span class="w"> </span><span class="m">11</span>
<span class="gp">uart:~$ </span>wifi_radio_test<span class="w"> </span>tx_pkt_tput_mode<span class="w"> </span><span class="m">0</span>
<span class="gp">uart:~$ </span>wifi_radio_test<span class="w"> </span>tx_pkt_rate<span class="w"> </span><span class="m">6</span>
<span class="gp">uart:~$ </span>wifi_radio_test<span class="w"> </span>tx_pkt_len<span class="w"> </span><span class="m">4000</span>
<span class="gp">uart:~$ </span>wifi_radio_test<span class="w"> </span>tx_pkt_gap<span class="w"> </span><span class="m">200</span>
<span class="gp">uart:~$ </span>wifi_radio_test<span class="w"> </span>tx_power<span class="w"> </span><span class="m">0</span>
<span class="gp">uart:~$ </span>wifi_radio_test<span class="w"> </span>tx_pkt_num<span class="w"> </span>-1
<span class="gp">uart:~$ </span>wifi_radio_test<span class="w"> </span>tx<span class="w"> </span><span class="m">1</span>
</pre></div>
</div>
</div></blockquote>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Frame duration with above config = 5400 us, duty-cycle achieved = 96.4%</p>
</div>
</dd>
</dl>
</li>
<li><dl>
<dt>To run a continuous (OFDM) TX traffic sequence in 11a mode:</dt><dd><ul class="simple">
<li><p>Channel: 40</p></li>
<li><p>Payload length 4000 bytes</p></li>
<li><p>Inter-frame gap: 200 us</p></li>
<li><p>data rate : 54Mbps</p></li>
<li><p>TX power : 10 dBm</p></li>
</ul>
<p>Execute the following sequence of commands:</p>
<blockquote>
<div><div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">uart:~$ </span>wifi_radio_test<span class="w"> </span>init<span class="w"> </span><span class="m">40</span>
<span class="gp">uart:~$ </span>wifi_radio_test<span class="w"> </span>tx_pkt_tput_mode<span class="w"> </span><span class="m">0</span>
<span class="gp">uart:~$ </span>wifi_radio_test<span class="w"> </span>tx_pkt_rate<span class="w"> </span><span class="m">54</span>
<span class="gp">uart:~$ </span>wifi_radio_test<span class="w"> </span>tx_pkt_len<span class="w"> </span><span class="m">4000</span>
<span class="gp">uart:~$ </span>wifi_radio_test<span class="w"> </span>tx_pkt_gap<span class="w"> </span><span class="m">200</span>
<span class="gp">uart:~$ </span>wifi_radio_test<span class="w"> </span>tx_power<span class="w"> </span><span class="m">10</span>
<span class="gp">uart:~$ </span>wifi_radio_test<span class="w"> </span>tx_pkt_num<span class="w"> </span>-1
<span class="gp">uart:~$ </span>wifi_radio_test<span class="w"> </span>tx<span class="w"> </span><span class="m">1</span>
</pre></div>
</div>
</div></blockquote>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Frame duration with above config = 620 us, duty-cycle achieved = 75.6%</p>
</div>
</dd>
</dl>
</li>
<li><dl>
<dt>To run a continuous (OFDM) TX traffic sequence in HT (11n) mode:</dt><dd><ul class="simple">
<li><p>Channel: 11</p></li>
<li><p>Frame format: HT (11n)</p></li>
<li><p>Payload len: 4000 bytes</p></li>
<li><p>Inter-frame gap: 200 us</p></li>
<li><p>data rate : MCS7</p></li>
<li><dl class="simple">
<dt>Long Guard</dt><dd><ul>
<li><p>TX power :  0 dBm</p></li>
</ul>
</dd>
</dl>
</li>
</ul>
<p>Execute the following sequence of commands:</p>
<blockquote>
<div><div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">uart:~$ </span>wifi_radio_test<span class="w"> </span>init<span class="w"> </span><span class="m">11</span>
<span class="gp">uart:~$ </span>wifi_radio_test<span class="w"> </span>tx_pkt_tput_mode<span class="w"> </span><span class="m">1</span>
<span class="gp">uart:~$ </span>wifi_radio_test<span class="w"> </span>tx_pkt_preamble<span class="w"> </span><span class="m">2</span>
<span class="gp">uart:~$ </span>wifi_radio_test<span class="w"> </span>tx_pkt_mcs<span class="w"> </span><span class="m">7</span>
<span class="gp">uart:~$ </span>wifi_radio_test<span class="w"> </span>tx_pkt_len<span class="w"> </span><span class="m">4000</span>
<span class="gp">uart:~$ </span>wifi_radio_test<span class="w"> </span>tx_pkt_sgi<span class="w"> </span><span class="m">0</span>
<span class="gp">uart:~$ </span>wifi_radio_test<span class="w"> </span>tx_pkt_gap<span class="w"> </span><span class="m">200</span>
<span class="gp">uart:~$ </span>wifi_radio_test<span class="w"> </span>tx_power<span class="w"> </span><span class="m">0</span>
<span class="gp">uart:~$ </span>wifi_radio_test<span class="w"> </span>tx_pkt_num<span class="w"> </span>-1
<span class="gp">uart:~$ </span>wifi_radio_test<span class="w"> </span>tx<span class="w"> </span><span class="m">1</span>
</pre></div>
</div>
</div></blockquote>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Frame duration with above config = 536 us, duty-cycle achieved = 72.8%</p>
</div>
</dd>
</dl>
</li>
<li><dl>
<dt>To run a continuous (OFDM) TX traffic sequence in VHT (11ac) mode:</dt><dd><ul class="simple">
<li><p>Channel: 40</p></li>
<li><p>Frame format: VHT (11ac)</p></li>
<li><p>Payload len: 4000 bytes</p></li>
<li><p>Inter-frame gap: 200 us</p></li>
<li><p>data rate : MCS7</p></li>
<li><p>Long Guard</p></li>
<li><p>TX power :  0 dBm</p></li>
</ul>
<p>Execute the following sequence of commands:</p>
<blockquote>
<div><div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">uart:~$ </span>wifi_radio_test<span class="w"> </span>init<span class="w"> </span><span class="m">40</span>
<span class="gp">uart:~$ </span>wifi_radio_test<span class="w"> </span>tx_pkt_tput_mode<span class="w"> </span><span class="m">2</span>
<span class="gp">uart:~$ </span>wifi_radio_test<span class="w"> </span>tx_pkt_mcs<span class="w"> </span><span class="m">7</span>
<span class="gp">uart:~$ </span>wifi_radio_test<span class="w"> </span>tx_pkt_len<span class="w"> </span><span class="m">4000</span>
<span class="gp">uart:~$ </span>wifi_radio_test<span class="w"> </span>tx_pkt_sgi<span class="w"> </span><span class="m">0</span>
<span class="gp">uart:~$ </span>wifi_radio_test<span class="w"> </span>tx_pkt_gap<span class="w"> </span><span class="m">200</span>
<span class="gp">uart:~$ </span>wifi_radio_test<span class="w"> </span>tx_power<span class="w"> </span><span class="m">0</span>
<span class="gp">uart:~$ </span>wifi_radio_test<span class="w"> </span>tx_pkt_num<span class="w"> </span>-1
<span class="gp">uart:~$ </span>wifi_radio_test<span class="w"> </span>tx<span class="w"> </span><span class="m">1</span>
</pre></div>
</div>
</div></blockquote>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Frame duration with above config = 540 us, duty-cycle achieved = 73%</p>
</div>
</dd>
</dl>
</li>
<li><dl>
<dt>To run a continuous (OFDM) TX traffic sequence in HE-SU (11ax) mode:</dt><dd><ul class="simple">
<li><p>Channel: 116</p></li>
<li><p>Frame format: HESU (11ax)</p></li>
<li><p>Payload len: 4000</p></li>
<li><p>Inter-frame gap: 200 us</p></li>
<li><p>data rate : MCS7</p></li>
<li><p>3.2us GI</p></li>
<li><p>4x HELTF</p></li>
<li><p>TX power :  0 dBm</p></li>
</ul>
<p>Execute the following sequence of commands:</p>
<blockquote>
<div><div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">uart:~$ </span>wifi_radio_test<span class="w"> </span>init<span class="w"> </span><span class="m">116</span>
<span class="gp">uart:~$ </span>wifi_radio_test<span class="w"> </span>tx_pkt_tput_mode<span class="w"> </span><span class="m">3</span>
<span class="gp">uart:~$ </span>wifi_radio_test<span class="w"> </span>tx_pkt_mcs<span class="w"> </span><span class="m">7</span>
<span class="gp">uart:~$ </span>wifi_radio_test<span class="w"> </span>tx_pkt_len<span class="w"> </span><span class="m">4000</span>
<span class="gp">uart:~$ </span>wifi_radio_test<span class="w"> </span>he_ltf<span class="w"> </span><span class="m">2</span>
<span class="gp">uart:~$ </span>wifi_radio_test<span class="w"> </span>he_gi<span class="w"> </span><span class="m">2</span>
<span class="gp">uart:~$ </span>wifi_radio_test<span class="w"> </span>tx_pkt_gap<span class="w"> </span><span class="m">200</span>
<span class="gp">uart:~$ </span>wifi_radio_test<span class="w"> </span>tx_power<span class="w"> </span><span class="m">0</span>
<span class="gp">uart:~$ </span>wifi_radio_test<span class="w"> </span>tx_pkt_num<span class="w"> </span>-1
<span class="gp">uart:~$ </span>wifi_radio_test<span class="w"> </span>tx<span class="w"> </span><span class="m">1</span>
</pre></div>
</div>
</div></blockquote>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Frame duration with above config = 488 us, duty-cycle achieved = 70.9%</p>
</div>
</dd>
</dl>
</li>
<li><dl>
<dt>To run a continuous (OFDM) TX traffic sequence in HE-ER-SU (11ax) mode:</dt><dd><ul class="simple">
<li><p>Channel: 100</p></li>
<li><p>Frame format: HE-ERSU (11ax)</p></li>
<li><p>Payload len: 1000</p></li>
<li><p>Inter-frame gap: 200 us1</p></li>
<li><p>data rate : MCS0</p></li>
<li><p>3.2us GI</p></li>
<li><p>4x HELTF</p></li>
<li><p>TX power: 10dBm</p></li>
</ul>
<p>Execute the following sequence of commands:</p>
<blockquote>
<div><div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">uart:~$ </span>wifi_radio_test<span class="w"> </span>init<span class="w"> </span><span class="m">100</span>
<span class="gp">uart:~$ </span>wifi_radio_test<span class="w"> </span>tx_pkt_tput_mode<span class="w"> </span><span class="m">4</span>
<span class="gp">uart:~$ </span>wifi_radio_test<span class="w"> </span>tx_pkt_mcs<span class="w"> </span><span class="m">0</span>
<span class="gp">uart:~$ </span>wifi_radio_test<span class="w"> </span>tx_pkt_len<span class="w"> </span><span class="m">1000</span>
<span class="gp">uart:~$ </span>wifi_radio_test<span class="w"> </span>he_ltf<span class="w"> </span><span class="m">2</span>
<span class="gp">uart:~$ </span>wifi_radio_test<span class="w"> </span>he_gi<span class="w"> </span><span class="m">2</span>
<span class="gp">uart:~$ </span>wifi_radio_test<span class="w"> </span>tx_pkt_gap<span class="w"> </span><span class="m">200</span>
<span class="gp">uart:~$ </span>wifi_radio_test<span class="w"> </span>tx_power<span class="w"> </span><span class="m">10</span>
<span class="gp">uart:~$ </span>wifi_radio_test<span class="w"> </span>tx_pkt_num<span class="w"> </span>-1
<span class="gp">uart:~$ </span>wifi_radio_test<span class="w"> </span>tx<span class="w"> </span><span class="m">1</span>
</pre></div>
</div>
</div></blockquote>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Frame duration with above config = 1184 us, duty-cycle achieved = 85.5%</p>
</div>
</dd>
</dl>
</li>
<li><dl>
<dt>To run a continuous (OFDM) TX traffic sequence in HE-TB-PPDU (11ax) mode:</dt><dd><ul class="simple">
<li><p>Channel: 100</p></li>
<li><p>Frame format: HE-TB (11ax)</p></li>
<li><p>Payload len: 1024</p></li>
<li><p>Inter-frame gap: 200 us</p></li>
<li><p>data rate : MCS7</p></li>
<li><p>3.2us GI</p></li>
<li><p>106 Tone</p></li>
<li><p>4x HELTF</p></li>
<li><p>RU Index 2</p></li>
<li><p>TX power: 10dBm</p></li>
</ul>
<p>Execute the following sequence of commands:</p>
<blockquote>
<div><div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">uart:~$ </span>wifi_radio_test<span class="w"> </span>init<span class="w"> </span><span class="m">100</span>
<span class="gp">uart:~$ </span>wifi_radio_test<span class="w"> </span>tx_pkt_tput_mode<span class="w"> </span><span class="m">5</span>
<span class="gp">uart:~$ </span>wifi_radio_test<span class="w"> </span>ru_tone<span class="w"> </span><span class="m">106</span>
<span class="gp">uart:~$ </span>wifi_radio_test<span class="w"> </span>ru_index<span class="w"> </span><span class="m">2</span>
<span class="gp">uart:~$ </span>wifi_radio_test<span class="w"> </span>tx_pkt_len<span class="w"> </span><span class="m">1024</span>
<span class="gp">uart:~$ </span>wifi_radio_test<span class="w"> </span>tx_pkt_mcs<span class="w"> </span><span class="m">7</span>
<span class="gp">uart:~$ </span>wifi_radio_test<span class="w"> </span>he_ltf<span class="w"> </span><span class="m">2</span>
<span class="gp">uart:~$ </span>wifi_radio_test<span class="w"> </span>he_gi<span class="w"> </span><span class="m">2</span>
<span class="gp">uart:~$ </span>wifi_radio_test<span class="w"> </span>tx_pkt_gap<span class="w"> </span><span class="m">200</span>
<span class="gp">uart:~$ </span>wifi_radio_test<span class="w"> </span>tx_power<span class="w"> </span><span class="m">10</span>
<span class="gp">uart:~$ </span>wifi_radio_test<span class="w"> </span>tx_pkt_num<span class="w"> </span>-1
<span class="gp">uart:~$ </span>wifi_radio_test<span class="w"> </span>tx<span class="w"> </span><span class="m">1</span>
</pre></div>
</div>
</div></blockquote>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Frame duration with above config = 332us, duty-cycle achieved = 62.4%</p>
</div>
</dd>
</dl>
<p>At any point of time, we can use the following command to verify the configurations set (do this before setting tx or rx to 1):</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">uart:~$ </span>wifi_radio_test<span class="w"> </span>show_config
</pre></div>
</div>
<p>Payload parameters for Maximum duty cycle</p>
<p>Assuming 200us interpacket gap, we need to set tx_pkt_len to the values as below
11b - 1Mbps : 1024 (97% duty cycle)
OFDM - 6Mbps/MCS0 : 4000 (&gt; 95% duty cycle)</p>
</li>
</ol>
<dl class="simple">
<dt>How to use Wi-Fi Radio Test for PER measurements:</dt><dd><p>A PER measurement can be performed using the Wi-Fi Radio Test application running on two nRF7002-DK/EK’s,
one as a transmitter, and the other as a receiver. The process is as follows –</p>
</dd>
</dl>
<ol class="arabic">
<li><p>802.11b PER measurements:</p>
<ul>
<li><p>Configure the first DK/EK to receive packets on the required channel number:
Following set of commands configure DUT in channel 1, receive mode.</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">uart:~$ </span>wifi_radio_test<span class="w"> </span>init<span class="w"> </span><span class="m">1</span>
<span class="gp">uart:~$ </span>wifi_radio_test<span class="w"> </span>rx<span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="c1">#this will clear the earlier stats and wait for packets</span>
</pre></div>
</div>
</li>
<li><p>Configure the second DK to transmit 10000 packets (TX transmit count) with the required modulation, TX power and channel (e.g. 11b, 1 Mbps, 10 dBm, channel 1):
Change the Tx commands to below - (Note keep interpacket gap min 200us else it will take a lot of time)</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">uart:~$ </span>wifi_radio_test<span class="w"> </span>init<span class="w"> </span><span class="m">1</span>
<span class="gp">uart:~$ </span>wifi_radio_test<span class="w"> </span>tx_pkt_tput_mode<span class="w"> </span><span class="m">0</span>
<span class="gp">uart:~$ </span>wifi_radio_test<span class="w"> </span>tx_pkt_preamble<span class="w"> </span><span class="m">1</span>
<span class="gp">uart:~$ </span>wifi_radio_test<span class="w"> </span>tx_pkt_rate<span class="w"> </span><span class="m">1</span>
<span class="gp">uart:~$ </span>wifi_radio_test<span class="w"> </span>tx_pkt_len<span class="w"> </span><span class="m">1024</span>
<span class="gp">uart:~$ </span>wifi_radio_test<span class="w"> </span>tx_pkt_gap<span class="w"> </span><span class="m">200</span>
<span class="gp">uart:~$ </span>wifi_radio_test<span class="w"> </span>tx_power<span class="w"> </span><span class="m">10</span>
<span class="gp">uart:~$ </span>wifi_radio_test<span class="w"> </span>tx_pkt_num<span class="w"> </span><span class="m">10000</span>
<span class="gp">uart:~$ </span>wifi_radio_test<span class="w"> </span>tx<span class="w"> </span><span class="m">1</span>
</pre></div>
</div>
</li>
<li><p>Record number of successfully received packets on the first DK (repeat as necessary until count stops incrementing).
RX success count is displayed as ofdm_crc32_pass_cnt:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">uart:~$ </span>wifi_radio_test<span class="w"> </span>get_stats
</pre></div>
</div>
</li>
<li><p>Terminate receiving on the first DK:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">uart:~$ </span>wifi_radio_test<span class="w"> </span>rx<span class="w"> </span><span class="m">0</span>
</pre></div>
</div>
</li>
<li><p>Calculate the PER as 1 – (RX success count / TX transmit count).</p></li>
</ul>
</li>
<li><p>802.11a PER measurements:</p>
<ul>
<li><p>Configure the first DK to receive packets on the required channel number:</p>
<blockquote>
<div><div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">uart:~$ </span>wifi_radio_test<span class="w"> </span>init<span class="w"> </span><span class="m">36</span>
<span class="gp">uart:~$ </span>wifi_radio_test<span class="w"> </span>rx<span class="w"> </span><span class="m">1</span><span class="w">     </span><span class="c1">#this will clear the earlier stats and wait for packets</span>
</pre></div>
</div>
</div></blockquote>
</li>
<li><p>Configure the second DK to transmit 10000 packets (TX transmit count) with the required modulation, TX power and channel (e.g. 11g, 54 Mbps, 10 dBm, channel 36):</p>
<blockquote>
<div><div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">uart:~$ </span>wifi_radio_test<span class="w"> </span>init<span class="w"> </span><span class="m">36</span>
<span class="gp">uart:~$ </span>wifi_radio_test<span class="w"> </span>tx_pkt_tput_mode<span class="w"> </span><span class="m">0</span>
<span class="gp">uart:~$ </span>wifi_radio_test<span class="w"> </span>tx_pkt_rate<span class="w"> </span><span class="m">54</span>
<span class="gp">uart:~$ </span>wifi_radio_test<span class="w"> </span>tx_pkt_len<span class="w"> </span><span class="m">1024</span>
<span class="gp">uart:~$ </span>wifi_radio_test<span class="w"> </span>tx_pkt_gap<span class="w"> </span><span class="m">200</span>
<span class="gp">uart:~$ </span>wifi_radio_test<span class="w"> </span>tx_power<span class="w"> </span><span class="m">10</span>
<span class="gp">uart:~$ </span>wifi_radio_test<span class="w"> </span>tx_pkt_num<span class="w"> </span><span class="m">10000</span>
<span class="gp">uart:~$ </span>wifi_radio_test<span class="w"> </span>tx<span class="w"> </span><span class="m">1</span>
</pre></div>
</div>
</div></blockquote>
</li>
<li><p>Record number of successfully received packets on the first DK (repeat as necessary until count stops incrementing).
RX success count is displayed as ofdm_crc32_pass_cnt:</p>
<blockquote>
<div><div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">uart:~$ </span>wifi_radio_test<span class="w"> </span>get_stats
</pre></div>
</div>
<ul class="simple">
<li><p>Terminate receiving on the first DK:</p></li>
</ul>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">uart:~$ </span>wifi_radio_test<span class="w"> </span>rx<span class="w"> </span><span class="m">0</span>
</pre></div>
</div>
<ul class="simple">
<li><p>Calculate the PER as 1 – (RX success count / TX transmit count).</p></li>
</ul>
</div></blockquote>
</li>
</ul>
</li>
<li><p>802.11n PER measurements:</p>
<ul>
<li><p>Configure the first DK to receive packets on the required channel number:</p>
<blockquote>
<div><div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">uart:~$ </span>wifi_radio_test<span class="w"> </span>init<span class="w"> </span><span class="m">36</span>
<span class="gp">uart:~$ </span>wifi_radio_test<span class="w"> </span>rx<span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="c1">#this will clear the earlier stats and wait for packets</span>
</pre></div>
</div>
</div></blockquote>
</li>
<li><p>Configure the second DK to transmit 10000 packets (TX transmit count) with the required modulation,
TX power and channel (e.g. 11n, MCS0, 10 dBm, channel 36):</p>
<blockquote>
<div><div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">uart:~$ </span>wifi_radio_test<span class="w"> </span>init<span class="w"> </span><span class="m">36</span>
<span class="gp">uart:~$ </span>wifi_radio_test<span class="w"> </span>tx_pkt_tput_mode<span class="w"> </span><span class="m">1</span>
<span class="gp">uart:~$ </span>wifi_radio_test<span class="w"> </span>tx_pkt_preamble<span class="w"> </span><span class="m">2</span>
<span class="gp">uart:~$ </span>wifi_radio_test<span class="w"> </span>tx_pkt_mcs<span class="w"> </span><span class="m">0</span>
<span class="gp">uart:~$ </span>wifi_radio_test<span class="w"> </span>tx_pkt_len<span class="w"> </span><span class="m">4000</span>
<span class="gp">uart:~$ </span>wifi_radio_test<span class="w"> </span>tx_pkt_sgi<span class="w"> </span><span class="m">0</span>
<span class="gp">uart:~$ </span>wifi_radio_test<span class="w"> </span>tx_pkt_gap<span class="w"> </span><span class="m">1000</span>
<span class="gp">uart:~$ </span>wifi_radio_test<span class="w"> </span>tx_power<span class="w"> </span><span class="m">10</span>
<span class="gp">uart:~$ </span>wifi_radio_test<span class="w"> </span>tx_pkt_num<span class="w"> </span><span class="m">10000</span>
<span class="gp">uart:~$ </span>wifi_radio_test<span class="w"> </span>tx<span class="w"> </span><span class="m">1</span>
</pre></div>
</div>
</div></blockquote>
</li>
<li><p>Record number of successfully received packets on the first DK (repeat as necessary until count stops incrementing).
RX success count is displayed as ofdm_crc32_pass_cnt:</p>
<blockquote>
<div><div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">uart:~$ </span>wifi_radio_test<span class="w"> </span>get_stats
</pre></div>
</div>
</div></blockquote>
</li>
<li><p>Terminate receiving on the first DK:</p>
<blockquote>
<div><div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">uart:~$ </span>wifi_radio_test<span class="w"> </span>rx<span class="w"> </span><span class="m">0</span>
</pre></div>
</div>
</div></blockquote>
</li>
<li><p>Calculate the PER as 1 – (RX success count / TX transmit count).</p></li>
</ul>
</li>
<li><p>802. 11ac PER measurements:
- Configure the first DK to receive packets on the required channel number:</p>
<blockquote>
<div><blockquote>
<div><div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">uart:~$ </span>wifi_radio_test<span class="w"> </span>init<span class="w"> </span><span class="m">40</span>
<span class="gp">uart:~$ </span>wifi_radio_test<span class="w"> </span>rx<span class="w"> </span><span class="m">1</span><span class="w">  </span><span class="c1">#this will clear the earlier stats and wait for packets</span>
</pre></div>
</div>
</div></blockquote>
<p>802.11ac, MCS7, 10 dBm, channel 40 - PER measurements</p>
</div></blockquote>
<ul>
<li><p>Configure the second DK to transmit 10000 packets (TX transmit count) with the required modulation, TX power and channel:</p>
<blockquote>
<div><div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">uart:~$ </span>wifi_radio_test<span class="w"> </span>init<span class="w"> </span><span class="m">40</span>
<span class="gp">uart:~$ </span>wifi_radio_test<span class="w"> </span>tx_pkt_tput_mode<span class="w"> </span><span class="m">2</span>
<span class="gp">uart:~$ </span>wifi_radio_test<span class="w"> </span>tx_pkt_mcs<span class="w"> </span><span class="m">7</span>
<span class="gp">uart:~$ </span>wifi_radio_test<span class="w"> </span>tx_pkt_len<span class="w"> </span><span class="m">4000</span>
<span class="gp">uart:~$ </span>wifi_radio_test<span class="w"> </span>tx_pkt_sgi<span class="w"> </span><span class="m">0</span>
<span class="gp">uart:~$ </span>wifi_radio_test<span class="w"> </span>tx_pkt_gap<span class="w"> </span><span class="m">200</span>
<span class="gp">uart:~$ </span>wifi_radio_test<span class="w"> </span>tx_power<span class="w"> </span><span class="m">10</span>
<span class="gp">uart:~$ </span>wifi_radio_test<span class="w"> </span>tx_pkt_num<span class="w"> </span><span class="m">10000</span>
<span class="gp">uart:~$ </span>wifi_radio_test<span class="w"> </span>tx<span class="w"> </span><span class="m">1</span>
</pre></div>
</div>
</div></blockquote>
</li>
<li><p>Record number of successfully received packets on the first DK (repeat as necessary until count stops incrementing). RX success count is displayed as ofdm_crc32_pass_cnt:</p>
<blockquote>
<div><div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">uart:~$ </span>wifi_radio_test<span class="w"> </span>get_stats
</pre></div>
</div>
</div></blockquote>
</li>
<li><p>Terminate receiving on the first DK:</p>
<blockquote>
<div><div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">uart:~$ </span>wifi_radio_test<span class="w"> </span>rx<span class="w"> </span><span class="m">0</span>
</pre></div>
</div>
</div></blockquote>
</li>
<li><p>Calculate the PER as 1 – (RX success count / TX transmit count).</p></li>
</ul>
</li>
<li><p>802.11ax PER measurements:
- Configure the first DK to receive packets on the required channel number:</p>
<blockquote>
<div><blockquote>
<div><div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">uart:~$ </span>wifi_radio_test<span class="w"> </span>init<span class="w"> </span><span class="m">100</span>
<span class="gp">uart:~$ </span>wifi_radio_test<span class="w"> </span>rx<span class="w"> </span><span class="m">1</span><span class="w">  </span><span class="c1">#this will clear the earlier stats and wait for packets.</span>
</pre></div>
</div>
</div></blockquote>
<p>802.11ax, MCS0, 10 dBm, channel 100 - PER measurements</p>
<blockquote>
<div><div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">uart:~$ </span>wifi_radio_test<span class="w"> </span>init<span class="w"> </span><span class="m">100</span>
<span class="gp">uart:~$ </span>wifi_radio_test<span class="w"> </span>tx_pkt_tput_mode<span class="w"> </span><span class="m">3</span>
<span class="gp">uart:~$ </span>wifi_radio_test<span class="w"> </span>tx_pkt_mcs<span class="w"> </span><span class="m">0</span>
<span class="gp">uart:~$ </span>wifi_radio_test<span class="w"> </span>tx_pkt_len<span class="w"> </span><span class="m">4000</span>
<span class="gp">uart:~$ </span>wifi_radio_test<span class="w"> </span>he_ltf<span class="w"> </span><span class="m">2</span>
<span class="gp">uart:~$ </span>wifi_radio_test<span class="w"> </span>he_gi<span class="w"> </span><span class="m">2</span>
<span class="gp">uart:~$ </span>wifi_radio_test<span class="w"> </span>tx_pkt_gap<span class="w"> </span><span class="m">200</span>
<span class="gp">uart:~$ </span>wifi_radio_test<span class="w"> </span>tx_power<span class="w"> </span><span class="m">10</span>
<span class="gp">uart:~$ </span>wifi_radio_test<span class="w"> </span>tx_pkt_num<span class="w"> </span><span class="m">10000</span>
<span class="gp">uart:~$ </span>wifi_radio_test<span class="w"> </span>tx<span class="w"> </span><span class="m">1</span>
</pre></div>
</div>
</div></blockquote>
</div></blockquote>
<ul>
<li><p>Record number of successfully received packets on the first DK (repeat as necessary until count stops incrementing).
RX success count is displayed as ofdm_crc32_pass_cnt:</p>
<blockquote>
<div><div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">uart:~$ </span>wifi_radio_test<span class="w"> </span>get_stats
</pre></div>
</div>
</div></blockquote>
</li>
<li><p>Terminate receiving on the first DK:</p>
<blockquote>
<div><div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">uart:~$ </span>wifi_radio_test<span class="w"> </span>rx<span class="w"> </span><span class="m">0</span>
</pre></div>
</div>
</div></blockquote>
</li>
<li><p>Calculate the PER as 1 – (RX success count / TX transmit count).</p></li>
</ul>
</li>
</ol>
</section>
<section id="how-to-use-wi-fi-sta-sample">
<h2><a class="toc-backref" href="#id20">How to use Wi-Fi STA Sample</a><a class="headerlink" href="#how-to-use-wi-fi-sta-sample" title="Permalink to this heading"></a></h2>
<p>The Wi-Fi station sample (see <a class="reference internal" href="../sta/README.html#wifi-station-sample"><span class="std std-ref">Wi-Fi: Station</span></a>)is designed to be built with a SSID, password (set in the <code class="docutils literal notranslate"><span class="pre">prj.conf</span></code> file) and once executing on the nRF7002 board,
it automatically connects to the Wi-Fi Access Point and once connected, LED1 starts blinking indicating a successful connection.
If the connection is lost, the LED1 stops blinking. The process repeats every time a board reset button is pressed.</p>
<p>By default, an IP address is acquired by the nRF7002 board via the DHCP protocol exchanges with the Access Point.
If for any reason, the DHCP exchange fails and hence IP address is not successfully acquired,
one can set an expected static IP address in the <code class="docutils literal notranslate"><span class="pre">prj.conf</span></code> file which will then become the default IP address.
If the DHCP exchange is successful, the IP address acquired is used in the place of static IP address settings.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>there is no UART shell support in this sample. The UART console will only display debug information from the sample.</p>
</div>
</section>
<section id="how-to-use-wi-fi-shell-sample">
<h2><a class="toc-backref" href="#id21">How to use Wi-Fi Shell Sample</a><a class="headerlink" href="#how-to-use-wi-fi-shell-sample" title="Permalink to this heading"></a></h2>
<p>Wi-Fi Shell sample (see <a class="reference internal" href="../shell/README.html#wifi-shell-sample"><span class="std std-ref">Wi-Fi: Shell</span></a>) lets you scan, connect and ping to a desired network/Access Point via a Shell as described below –
Scan all the access points in the vicinity</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">uart:~$ </span>wifi<span class="w"> </span>scan
</pre></div>
</div>
<p>Connect to the desired access point (using SSID from the scan command)</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">uart:~$ </span>wifi<span class="w"> </span>connect<span class="w"> </span>&lt;SSID&gt;<span class="w"> </span>&lt;Password&gt;
</pre></div>
</div>
<p>Query the status of the connection –</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">uart:~$ </span>wifi<span class="w"> </span>status
</pre></div>
</div>
<p>Once the connection is established, you can run network tools like ping</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">uart:~$ </span>net<span class="w"> </span>ping<span class="w"> </span><span class="m">10</span><span class="w"> </span><span class="m">192</span>.168.1.100
</pre></div>
</div>
<p>To disconnect</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">uart:~$ </span>wifi<span class="w"> </span>disconnect
</pre></div>
</div>
</section>
<section id="how-to-use-thread-radio-testing">
<h2><a class="toc-backref" href="#id22">How to use Thread Radio Testing</a><a class="headerlink" href="#how-to-use-thread-radio-testing" title="Permalink to this heading"></a></h2>
<p>The example below details how to perform a continuous transmit on a fixed channel -</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">uart:~$ </span>data_rate<span class="w"> </span>ieee802154_250Kbit
</pre></div>
</div>
<ul class="simple">
<li><p>Select lowest channel 11. Replace 11 with 18 for mid channel. Replace 11 with 26 for high channel.</p></li>
</ul>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">uart:~$ </span>start_channel<span class="w"> </span><span class="m">11</span>
</pre></div>
</div>
<ul class="simple">
<li><p>Transmit packets continuously with high duty cycle</p></li>
</ul>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">uart:~$ </span>start_tx_modulated_carrier
</pre></div>
</div>
<ul class="simple">
<li><p>Terminate transmission</p></li>
</ul>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">uart:~$ </span>cancel
</pre></div>
</div>
<dl>
<dt>How to use Thread Radio Test for PER measurements:</dt><dd><p>A PER measurement can be performed using the Radio Test application running on two nRF7002- DK/EK’s, one as a transmitter, and the other as a receiver. The process is as follows –
- Configure the first DK/EK to receive packets with a known Access Address at center channel 18</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">uart:~$ </span>data_rate<span class="w"> </span>ieee802154_250Kbit
<span class="gp">uart:~$ </span>start_channel<span class="w"> </span><span class="m">18</span>
<span class="gp">uart:~$ </span>parameters_print
<span class="gp">uart:~$ </span>start_rx
</pre></div>
</div>
<ul class="simple">
<li><p>Configure the second DK/EK to transmit 10000 packets (TX transmit count) with the matching Access Address at center channel 18</p></li>
</ul>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">uart:~$ </span>data_rate<span class="w"> </span>ieee802154_250Kbit
<span class="gp">uart:~$ </span>start_channel<span class="w"> </span><span class="m">18</span>
<span class="gp">uart:~$ </span>parameters_print
<span class="gp">uart:~$ </span>start_tx_modulated_carrier<span class="w"> </span><span class="m">10000</span>
</pre></div>
</div>
<ul class="simple">
<li><p>Record number of successfully received packets on the first DK/EK (repeat as necessary until count stops incrementing). RX success count is the final item in the print display,
‘Number of packets’.</p></li>
</ul>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">uart:~$ </span>print_rx
</pre></div>
</div>
<ul class="simple">
<li><p>Terminate receiving on the first DK/EK</p></li>
</ul>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">uart:~$ </span>cancel
</pre></div>
</div>
<ul class="simple">
<li><p>Calculate the PER as 1 – (RX success count / TX transmit count).</p></li>
</ul>
</dd>
</dl>
</section>
<section id="general-note-on-vcom-setting">
<h2><a class="toc-backref" href="#id23">General note on VCOM setting</a><a class="headerlink" href="#general-note-on-vcom-setting" title="Permalink to this heading"></a></h2>
<ul>
<li><p>For choosing the correct COM port to interact with network core on nRF7002- DK/EK:</p>
<ul class="simple">
<li><p>Attach the nRF7002- DK/EK on PC</p></li>
<li><p>Enter the following command in a command line interface</p></li>
</ul>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">&gt; nrfjprog --com</span>
</pre></div>
</div>
<ul class="simple">
<li><p>Typically, VCOM0 is connected to the n RF5340 network core (running SR Radio Test) and VCOM1 is connected to the nRF5340 application core (running Wi-Fi Radio Test).
Please verify the mapping of the COM ports based on the available commands for each port referring to the example figure shown.</p></li>
<li><p>Example below</p></li>
</ul>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">&gt; nrfjprog --com</span>
<span class="go">960311844    COM47    VCOM0  //This is for Radio Test</span>
<span class="go">960311844    COM48    VCOM1  //This is for Wi-Fi Radio Test</span>
</pre></div>
</div>
</li>
</ul>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The correct baud rate setting is 115200 bps.</p>
</div>
</section>
<section id="appendix-a">
<h2><a class="toc-backref" href="#id24">Appendix A</a><a class="headerlink" href="#appendix-a" title="Permalink to this heading"></a></h2>
<p>This section gives a general guidance/recommendation for mapping different Wi-Fi Test application samples to use for different category of tests defined in the CE
certification standards.</p>
<table class="docutils align-default" id="id12">
<caption><span class="caption-text">CE certification standards</span><a class="headerlink" href="#id12" title="Permalink to this table"></a></caption>
<colgroup>
<col style="width: 25%" />
<col style="width: 25%" />
<col style="width: 25%" />
<col style="width: 25%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Test Category</p></th>
<th class="head"><p>Standard(s)</p></th>
<th class="head"><p>Test Application</p></th>
<th class="head"><p>Reference section in doc</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>Power Spectral Density</p></td>
<td><p>EN 300 328 v2.2.2, EN 301 893 V2.1.1</p></td>
<td><p>Radio Test</p></td>
<td><p>Section 7.A.1 to 7.A.8</p></td>
</tr>
<tr class="row-odd"><td><p>Duty Cycle, Tx-sequence, Tx-gap</p></td>
<td><p>EN 300 328 v2.2.2</p></td>
<td><p>Radio Test</p></td>
<td><p>Section 7.A.1 to 7.A.8</p></td>
</tr>
<tr class="row-even"><td><p>Adaptivity (Channel access mechanism)</p></td>
<td><p>EN 300 328 v2.2.2, EN 301 893 V2.1.1</p></td>
<td><p>Radio Test or Shell Sample</p></td>
<td><p>Section 7.A.1 to 7.A.8 or Section 8</p></td>
</tr>
<tr class="row-odd"><td><p>Occupied Channel Bandwidth</p></td>
<td><p>EN 300 328 v2.2.2, EN 301 893 V2.1.1</p></td>
<td><p>Radio Test</p></td>
<td><p>Section 7.A.1 to 7.A.8</p></td>
</tr>
<tr class="row-even"><td><p>Transmitter unwanted emissions in the out-of-band domain</p></td>
<td><p>EN 300 328 v2.2.2</p></td>
<td><p>Radio Test</p></td>
<td><p>Section 7.A.1 to 7.A.8</p></td>
</tr>
<tr class="row-odd"><td><p>Transmitter unwanted emissions in the spurious domain (radiated)</p></td>
<td><p>EN 300 328 v2.2.2</p></td>
<td><p>Radio Test</p></td>
<td><p>Section 7.A.1 to 7.A.8</p></td>
</tr>
<tr class="row-even"><td><p>Receiver spurious emissions (radiated)</p></td>
<td><p>EN 300 328 v2.2.2, EN 301 893 V2.1.1</p></td>
<td><p>Radio Test</p></td>
<td><p>Section 7.B.1 to 7.B.6</p></td>
</tr>
<tr class="row-odd"><td><p>Receiver</p></td>
<td><p>EN 300 328 v2.2.2</p></td>
<td><p>Radio Test</p></td>
<td><p>Section 7.B.1 to 7.B.6</p></td>
</tr>
<tr class="row-even"><td><p>Centre frequencies</p></td>
<td><p>EN 301 893 V2.1.1</p></td>
<td><p>Radio Test</p></td>
<td><p>Section 7.A.3 to 7.A.8</p></td>
</tr>
<tr class="row-odd"><td><p>RF Output Power</p></td>
<td><p>EN 301 893 V2.1.1</p></td>
<td><p>Radio Test</p></td>
<td><p>Section 7.A.3 to 7.A.8</p></td>
</tr>
<tr class="row-even"><td><p>Transmitter unwanted emissions within the 5 GHz RLAN bands</p></td>
<td><p>EN 301 893 V2.1.1</p></td>
<td><p>Radio Test</p></td>
<td><p>Section 7.A.3 to 7.A.8</p></td>
</tr>
<tr class="row-odd"><td><p>Transmitter unwanted emissions outside the 5 GHz RLAN bands</p></td>
<td><p>EN 301 893 V2.1.1</p></td>
<td><p>Radio Test</p></td>
<td><p>Section 7.A.3 to 7.A.8</p></td>
</tr>
<tr class="row-even"><td><p>Receiver Blocking</p></td>
<td><p>EN 301 893 V2.1.1</p></td>
<td><p>Radio Test</p></td>
<td><p>Section 7.B.3 to 7.B.6</p></td>
</tr>
<tr class="row-odd"><td><p>Electrostatic Discharge (ESD)</p></td>
<td><p>EN 301 489-1 V2.2.3 and EN 301 489-17 V3.2.4</p></td>
<td><p>STA sample</p></td>
<td><p>Section 9</p></td>
</tr>
<tr class="row-even"><td><p>Radiated Emissions</p></td>
<td><p>EN 301 489-1 V2.2.3 and EN 301 489-17 V3.2.4</p></td>
<td><p>Radio Test  or Shell Sample?</p></td>
<td><p>Section 7.A.1 to 7.A.8 or Section 8</p></td>
</tr>
</tbody>
</table>
</section>
</section>


           </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="ficr.html" class="btn btn-neutral float-right" title="FICR programming subcommands" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="radio_test_subcommands.html" class="btn btn-neutral" title="Radio test subcommands" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">

<table>
<tr>
<td>
    <p>
        &copy; Copyright 2019-2023, Nordic Semiconductor.
      Last updated on Mar 20, 2023.

    </p>
</td>
<td id="nordiclogo">
  <a href="https://www.nordicsemi.com/"><img src="../../../_static/images/nordic-logo.png" border="0"/></a>
</td>
</tr>
</table>
  </div> 


</footer>

<div id="scroll-container">
  <button type="button" id="scroll-btn" class="btn">
    <svg xmlns="http://www.w3.org/2000/svg" height="24" viewBox="0 0 24 24" width="24"><path d="M0 0h24v24H0z" fill="none"/><path d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z" fill="#fff"/></svg>
  </button>
</div>

<script>
  const scrollBtn = document.querySelector("#scroll-btn");

  document.addEventListener("scroll", () => {
    if (window.scrollY > 400) {
          scrollBtn.style.visibility = "visible";
      } else {
          scrollBtn.style.visibility = "hidden";
      }
  });

  scrollBtn.addEventListener("click", () => {
      window.scrollTo({ top: 0, behavior: "smooth" });
  });
</script>
        </div>
      </div>
    </section>
  </div>
  
  <div class="rst-versions" data-toggle="rst-versions" role="note" aria-label="versions">
    <span class="rst-current-version" data-toggle="rst-current-version">
      <span class="fa fa-book"> nRF Connect SDK</span>
       <span class="fa fa-caret-down"></span>
    </span>
    <div class="rst-other-versions">
      
      <div class="rst-other-version ncs">
        <a href="../../../../nrf/index.html">nRF Connect SDK</a>
      </div>
      
      <div class="rst-other-version nrfx">
        <a href="../../../../nrfx/index.html">nrfx</a>
      </div>
      
      <div class="rst-other-version nrfxlib">
        <a href="../../../../nrfxlib/README.html">nrfxlib</a>
      </div>
      
      <div class="rst-other-version zephyr">
        <a href="../../../../zephyr/index.html">Zephyr Project</a>
      </div>
      
      <div class="rst-other-version mcuboot">
        <a href="../../../../mcuboot/wrapper.html">MCUboot</a>
      </div>
      
      <div class="rst-other-version tfm">
        <a href="../../../../tfm/index.html">Trusted Firmware-M</a>
      </div>
      
      <div class="rst-other-version matter">
        <a href="../../../../matter/index.html">Matter</a>
      </div>
      
      <div class="rst-other-version kconfig">
        <a href="../../../../kconfig/index.html">Kconfig Reference</a>
      </div>
    </div>
  </div><script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>