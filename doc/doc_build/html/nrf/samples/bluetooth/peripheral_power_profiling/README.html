<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Bluetooth: Peripheral power profiling &mdash; nRF Connect SDK 2.3.99 documentation</title>
      <link rel="stylesheet" href="../../../_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="../../../_static/css/nordic.css" type="text/css" />
      <link rel="stylesheet" href="../../../_static/togglebutton.css" type="text/css" />
      <link rel="stylesheet" href="../../../_static/css/nrf.css" type="text/css" />
      <link rel="stylesheet" href="../../../_static/tabs.css" type="text/css" /> 
  <!--[if lt IE 9]>
    <script src="../../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="../../../" id="documentation_options" src="../../../_static/documentation_options.js"></script>
        <script src="../../../_static/jquery.js"></script>
        <script src="../../../_static/underscore.js"></script>
        <script src="../../../_static/_sphinx_javascript_frameworks_compat.js"></script>
        <script src="../../../_static/doctools.js"></script>
        <script src="../../../_static/sphinx_highlight.js"></script>
        <script src="https://www.googletagmanager.com/gtag/js?id=G-ZPVZRKFQJR"></script>
        <script src="../../../_static/js/ga-tracker.js"></script>
        <script data-culture="EN" id="CookieConsent" type="text/javascript" src="https://policy.app.cookieinformation.com/uc.js"></script>
        <script>let toggleHintShow = 'Click to show';</script>
        <script>let toggleHintHide = 'Click to hide';</script>
        <script>let toggleOpenOnPrint = 'true';</script>
        <script src="../../../_static/togglebutton.js"></script>
        <script>var togglebuttonSelector = '.toggle, .admonition.dropdown';</script>
    <script src="../../../_static/js/theme.js"></script>
<script
  type="text/javascript"
  src="../../../_static/js/ncs.js"
></script>
<script src="../../../_static/js/bootstrap.bundle.min.js"></script>

    <link rel="index" title="Index" href="../../../genindex.html" />
    <link rel="search" title="Search" href="../../../search.html" />
    <link rel="next" title="Bluetooth: Peripheral Running Speed and Cadence Service (RSCS)" href="../peripheral_rscs/README.html" />
    <link rel="prev" title="Bluetooth: NFC pairing" href="../peripheral_nfc_pairing/README.html" />
<link
  href="../../../_static/css/bootstrap.min.css"
  rel="stylesheet"
/>
<link
  rel="shortcut icon"
  href="../../../_static/images/favicon.ico"
/>

</head>

<body class="wy-body-for-nav">
<div class="announcement"></div>
<div class="d-print-none ncs-header">
  <div class="container-xl ncs-header-top">
    <div class="row h-100">
      <div class="d-none d-md-block col-2">
        <div class="bg-white py-4 px-3 ml-2 ncs-header-logo">
          <img
            class="ncs-header-logo"
            src="../../../_static/images/nordic-logo.png"
            alt=""
          />
        </div>
      </div>
      <div
        class="col-8 col-md-7 pl-md-4 d-flex align-self-center justify-content-center"
      >
        <form class="w-75" action="../../../search.html" method="get">
          <div class="form-group">
            <input
              type="text"
              name="q"
              class="ncs-search-input form-control"
              placeholder="Search all docs..."
            />
          </div>
        </form>
      </div>
      <div class="col-4 col-md-3 d-md-block p-3 text-end">
        <div class="dropdown">
          <button
            class="btn dropdown-toggle ncs-btn-versions"
            type="button"
            id="dropdownMenuButton1"
            data-bs-toggle="dropdown"
            aria-expanded="false"
          >
            <span class="d-none d-md-inline">nRF Connect SDK</span>
            <span id="ncsversion" class="d-inline"></span>
          </button>
          <div class="dropdown-menu" aria-labelledby="dropdownMenuButton"></div>
        </div>
      </div>
    </div>
  </div>
  <div class="ncs-header-nav">
    <div class="container-xl">
      <div class="row">
        <div class="col col-12 d-flex justify-content-center">
          <nav class="navbar navbar-dark navbar-expand-lg p-0">
            <span class="navbar-brand d-block d-lg-none py-2 pl-1"
              >Documentation sets</span
            >
            <button
              class="navbar-toggler"
              type="button"
              data-bs-toggle="collapse"
              data-bs-target="#navbarNavAltMarkup"
              aria-controls="navbarNavAltMarkup"
              aria-expanded="false"
              aria-label="Toggle navigation"
            >
              <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="navbarNavAltMarkup">
              <ul class="navbar-nav">
                <li class="nav-item active py-1 px-3">
                  <a
                    class="nav-link"
                    href="../../../../nrf/index.html"
                    >nRF Connect SDK</a
                  >
                </li>
                <li><hr class="dropdown-divider" /></li>
                <li class="nav-item  py-1 px-3">
                  <a
                    class="nav-link"
                    href="../../../../nrfx/index.html"
                    >nrfx</a
                  >
                </li>
                <li><hr class="dropdown-divider" /></li>
                <li class="nav-item  py-1 px-3">
                  <a
                    class="nav-link"
                    href="../../../../nrfxlib/README.html"
                    >nrfxlib</a
                  >
                </li>
                <li><hr class="dropdown-divider" /></li>
                <li class="nav-item  py-1 px-3">
                  <a
                    class="nav-link"
                    href="../../../../zephyr/index.html"
                    >Zephyr Project</a
                  >
                </li>
                <li><hr class="dropdown-divider" /></li>
                <li class="nav-item  py-1 px-3">
                  <a
                    class="nav-link"
                    href="../../../../mcuboot/wrapper.html"
                    >MCUboot</a
                  >
                </li>
                <li><hr class="dropdown-divider" /></li>
                <li class="nav-item  py-1 px-3">
                  <a
                    class="nav-link"
                    href="../../../../tfm/index.html"
                    >Trusted Firmware-M</a
                  >
                </li>
                <li><hr class="dropdown-divider" /></li>
                <li class="nav-item  py-1 px-3">
                  <a
                    class="nav-link"
                    href="../../../../matter/index.html"
                    >Matter</a
                  >
                </li>
                <li><hr class="dropdown-divider" /></li>
                <li class="nav-item  py-1 px-3">
                  <a
                    class="nav-link"
                    href="../../../../kconfig/index.html"
                    >Kconfig Reference</a
                  >
                </li>
                <li><hr class="dropdown-divider" /></li>
              </ul>
            </div>
          </nav>
        </div>
      </div>
    </div>
  </div>
</div>

  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
            <a href="../../../index.html" class="icon icon-home"> nRF Connect SDK
          </a>
              <div class="version">
                2.3.99
              </div>
<div id="searchbox" role="search">
  <div class="searchformwrapper">
    <form id="rtd-search-form" class="wy-form" action="../../../search.html" method="get">
      <input type="text" name="q" placeholder="Search docs" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
  </div>
</div>
<script>$('#searchbox').show(0);</script>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Contents</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../../introduction.html">Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../getting_started.html">Getting started</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../dev_model.html">Development model</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../app_dev.html">Application development</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../security.html">Security</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../ecosystem_integration.html">Ecosystems integration</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../nrf91.html">Working with nRF91 Series</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../nrf70.html">Working with nRF70 Series</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../nrf53.html">Working with nRF53 Series</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../nrf52.html">Working with nRF52 Series</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../protocols.html">Protocols</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../applications.html">Applications</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../../../samples.html">Samples</a><ul class="current">
<li class="toctree-l2 current"><a class="reference internal" href="../../bl.html">Bluetooth samples</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="../central_and_peripheral_hr/README.html">Bluetooth: Central and Peripheral HRS</a></li>
<li class="toctree-l3"><a class="reference internal" href="../central_bas/README.html">Bluetooth: Central BAS</a></li>
<li class="toctree-l3"><a class="reference internal" href="../central_hids/README.html">Bluetooth: Central HIDS</a></li>
<li class="toctree-l3"><a class="reference internal" href="../central_hr_coded/README.html">Bluetooth: Central Heart Rate Monitor with Coded PHY</a></li>
<li class="toctree-l3"><a class="reference internal" href="../central_nfc_pairing/README.html">Bluetooth: Central NFC pairing</a></li>
<li class="toctree-l3"><a class="reference internal" href="../central_smp_client/README.html">Bluetooth: Central SMP Client</a></li>
<li class="toctree-l3"><a class="reference internal" href="../central_uart/README.html">Bluetooth: Central UART</a></li>
<li class="toctree-l3"><a class="reference internal" href="../direct_test_mode/README.html">Bluetooth: Direct Test Mode</a></li>
<li class="toctree-l3"><a class="reference internal" href="../direction_finding_central/README.html">Bluetooth: Direction finding central</a></li>
<li class="toctree-l3"><a class="reference internal" href="../direction_finding_connectionless_rx/README.html">Bluetooth: Direction finding connectionless locator</a></li>
<li class="toctree-l3"><a class="reference internal" href="../direction_finding_connectionless_tx/README.html">Bluetooth: Direction finding connectionless beacon</a></li>
<li class="toctree-l3"><a class="reference internal" href="../direction_finding_peripheral/README.html">Bluetooth: Direction finding peripheral</a></li>
<li class="toctree-l3"><a class="reference internal" href="../enocean/README.html">Bluetooth: EnOcean</a></li>
<li class="toctree-l3"><a class="reference internal" href="../hci_lpuart/README.html">Bluetooth: HCI low power UART</a></li>
<li class="toctree-l3"><a class="reference internal" href="../llpm/README.html">Bluetooth: LLPM</a></li>
<li class="toctree-l3"><a class="reference internal" href="../multiple_adv_sets/README.html">Bluetooth: Multiple advertising sets</a></li>
<li class="toctree-l3"><a class="reference internal" href="../nrf_dm/README.html">Bluetooth: nRF Distance Measurement with Bluetooth LE discovery</a></li>
<li class="toctree-l3"><a class="reference internal" href="../peripheral_ams_client/README.html">Bluetooth: Peripheral AMS client</a></li>
<li class="toctree-l3"><a class="reference internal" href="../peripheral_ancs_client/README.html">Bluetooth: Peripheral ANCS client</a></li>
<li class="toctree-l3"><a class="reference internal" href="../peripheral_bms/README.html">Bluetooth: Peripheral Bond Management Service (BMS)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../peripheral_cgms/README.html">Bluetooth: Continuous Glucose Monitoring Service (CGMS)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../peripheral_cts_client/README.html">Bluetooth: Peripheral CTS client</a></li>
<li class="toctree-l3"><a class="reference internal" href="../peripheral_fast_pair/README.html">Bluetooth: Fast Pair</a></li>
<li class="toctree-l3"><a class="reference internal" href="../peripheral_gatt_dm/README.html">Bluetooth: Peripheral GATT Discovery Manager</a></li>
<li class="toctree-l3"><a class="reference internal" href="../peripheral_hids_keyboard/README.html">Bluetooth: Peripheral HIDS keyboard</a></li>
<li class="toctree-l3"><a class="reference internal" href="../peripheral_hids_mouse/README.html">Bluetooth: Peripheral HIDS mouse</a></li>
<li class="toctree-l3"><a class="reference internal" href="../peripheral_hr_coded/README.html">Bluetooth: Peripheral Heart Rate Monitor with Coded PHY</a></li>
<li class="toctree-l3"><a class="reference internal" href="../peripheral_lbs/README.html">Bluetooth: Peripheral LBS</a></li>
<li class="toctree-l3"><a class="reference internal" href="../peripheral_mds/README.html">Bluetooth: Peripheral Memfault Diagnostic Service (MDS)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../peripheral_nfc_pairing/README.html">Bluetooth: NFC pairing</a></li>
<li class="toctree-l3 current"><a class="current reference internal" href="#">Bluetooth: Peripheral power profiling</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#requirements">Requirements</a></li>
<li class="toctree-l4"><a class="reference internal" href="#overview">Overview</a></li>
<li class="toctree-l4"><a class="reference internal" href="#user-interface">User interface</a></li>
<li class="toctree-l4"><a class="reference internal" href="#configuration">Configuration</a></li>
<li class="toctree-l4"><a class="reference internal" href="#building-and-running">Building and running</a></li>
<li class="toctree-l4"><a class="reference internal" href="#dependencies">Dependencies</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../peripheral_rscs/README.html">Bluetooth: Peripheral Running Speed and Cadence Service (RSCS)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../peripheral_status/README.html">Bluetooth: Peripheral Status</a></li>
<li class="toctree-l3"><a class="reference internal" href="../peripheral_uart/README.html">Bluetooth: Peripheral UART</a></li>
<li class="toctree-l3"><a class="reference internal" href="../radio_coex_1wire/README.html">Bluetooth: External radio coexistence using 1-wire interface</a></li>
<li class="toctree-l3"><a class="reference internal" href="../rpc_host/README.html">Bluetooth: Host for nRF RPC Bluetooth Low Energy</a></li>
<li class="toctree-l3"><a class="reference internal" href="../shell_bt_nus/README.html">Bluetooth: NUS shell transport</a></li>
<li class="toctree-l3"><a class="reference internal" href="../throughput/README.html">Bluetooth: Throughput</a></li>
<li class="toctree-l3"><a class="reference internal" href="../mesh/ble_peripheral_lbs_coex/README.html">Bluetooth: Mesh and peripheral coexistence</a></li>
<li class="toctree-l3"><a class="reference internal" href="../mesh/chat/README.html">Bluetooth: Mesh chat</a></li>
<li class="toctree-l3"><a class="reference internal" href="../mesh/light/README.html">Bluetooth: Mesh light</a></li>
<li class="toctree-l3"><a class="reference internal" href="../mesh/light_ctrl/README.html">Bluetooth: Mesh light fixture</a></li>
<li class="toctree-l3"><a class="reference internal" href="../mesh/light_switch/README.html">Bluetooth: Mesh light switch</a></li>
<li class="toctree-l3"><a class="reference internal" href="../mesh/sensor_client/README.html">Bluetooth: Mesh sensor observer</a></li>
<li class="toctree-l3"><a class="reference internal" href="../mesh/sensor_server/README.html">Bluetooth: Mesh sensor</a></li>
<li class="toctree-l3"><a class="reference internal" href="../mesh/silvair_enocean/README.html">Bluetooth: Mesh Silvair EnOcean</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../crypto.html">Cryptography samples</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../edge.html">Edge Impulse samples</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../gazell.html">Gazell samples</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../matter.html">Matter samples</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../nfc.html">NFC samples</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../nrf5340.html">nRF5340 samples</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../nrf9160.html">nRF9160 samples</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../tfm.html">Trusted Firmware-M (TF-M) samples</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../thread.html">Thread samples</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../zigbee.html">Zigbee samples</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../wifi.html">Wi-Fi samples</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../other.html">Other samples</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../drivers.html">Drivers</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../libraries/index.html">Libraries</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../scripts.html">Scripts</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../release_notes.html">Release notes</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../known_issues.html">Known issues</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../software_maturity.html">Software maturity levels</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../documentation.html">About this documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../glossary.html">Glossary</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../../index.html">nRF Connect SDK</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../../../index.html" class="icon icon-home"></a></li>
          <li class="breadcrumb-item"><a href="../../../samples.html">Samples</a></li>
          <li class="breadcrumb-item"><a href="../../bl.html">Bluetooth samples</a></li>
      <li class="breadcrumb-item active">Bluetooth: Peripheral power profiling</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../../../_sources/samples/bluetooth/peripheral_power_profiling/README.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="bluetooth-peripheral-power-profiling">
<span id="power-profiling"></span><h1>Bluetooth: Peripheral power profiling<a class="headerlink" href="#bluetooth-peripheral-power-profiling" title="Permalink to this heading"></a></h1>
<div class="contents local topic" id="contents">
<ul class="simple">
<li><p><a class="reference internal" href="#requirements" id="id9">Requirements</a></p></li>
<li><p><a class="reference internal" href="#overview" id="id10">Overview</a></p>
<ul>
<li><p><a class="reference internal" href="#id1" id="id11">Power profiling</a></p></li>
<li><p><a class="reference internal" href="#service-uuid" id="id12">Service UUID</a></p></li>
<li><p><a class="reference internal" href="#characteristics" id="id13">Characteristics</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#user-interface" id="id14">User interface</a></p></li>
<li><p><a class="reference internal" href="#configuration" id="id15">Configuration</a></p></li>
<li><p><a class="reference internal" href="#building-and-running" id="id16">Building and running</a></p>
<ul>
<li><p><a class="reference internal" href="#testing" id="id17">Testing</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#dependencies" id="id18">Dependencies</a></p></li>
</ul>
</div>
<p>The Peripheral power profiling sample can be used to measure power consumption when Bluetooth® Low Energy stack is used for communication.
You can measure power consumption during advertising and data transmission.
For this purpose, the sample uses the vendor-specific service and demonstrates advertising in a connectable and non-connectable mode.</p>
<section id="requirements">
<h2><a class="toc-backref" href="#id9">Requirements</a><a class="headerlink" href="#requirements" title="Permalink to this heading"></a></h2>
<p>The sample supports the following development kits:</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 26%" />
<col style="width: 7%" />
<col style="width: 41%" />
<col style="width: 26%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Hardware platforms</p></th>
<th class="head"><p>PCA</p></th>
<th class="head"><p>Board name</p></th>
<th class="head"><p>Build target</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><a class="reference internal" href="../../../working_with_nrf/nrf53/nrf5340.html#ug-nrf5340"><span class="std std-ref">nRF5340 DK</span></a></p></td>
<td><p>PCA10095</p></td>
<td><p><span class="xref std std-ref">nrf5340dk_nrf5340</span></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">nrf5340dk_nrf5340_cpuapp_ns</span></code>
<code class="docutils literal notranslate"><span class="pre">nrf5340dk_nrf5340_cpuapp</span></code></p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="../../../working_with_nrf/nrf52/developing.html#ug-nrf52"><span class="std std-ref">nRF52 DK</span></a></p></td>
<td><p>PCA10040</p></td>
<td><p><span class="xref std std-ref">nrf52dk_nrf52832</span></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">nrf52dk_nrf52832</span></code></p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="../../../working_with_nrf/nrf52/developing.html#ug-nrf52"><span class="std std-ref">nRF52840 DK</span></a></p></td>
<td><p>PCA10056</p></td>
<td><p><span class="xref std std-ref">nrf52840dk_nrf52840</span></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">nrf52840dk_nrf52840</span></code></p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="../../../working_with_nrf/nrf52/developing.html#ug-nrf52"><span class="std std-ref">nRF52833 DK</span></a></p></td>
<td><p>PCA10100</p></td>
<td><p><span class="xref std std-ref">nrf52833dk_nrf52833</span></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">nrf52833dk_nrf52833</span></code></p></td>
</tr>
</tbody>
</table>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>If you use nRF5340 DK, the additional configuration of the network core will be taken from the <code class="file docutils literal notranslate"><span class="pre">child_image</span></code> directory.
For more details, see <a class="reference internal" href="../../../app_dev/multi_image/index.html#ug-multi-image-variables"><span class="std std-ref">Image-specific variables</span></a>.</p>
</div>
<p>Optionally, you can use the <a class="reference external" href="https://infocenter.nordicsemi.com/topic/ug_ppk2/UG/ppk/PPK_user_guide_Intro.html">Power Profiler Kit II (PPK2)</a> for power profiling and optimizing your configuration.
You can use also your proprietary solution for measuring the power consumption.</p>
</section>
<section id="overview">
<h2><a class="toc-backref" href="#id10">Overview</a><a class="headerlink" href="#overview" title="Permalink to this heading"></a></h2>
<p>This sample uses Zephyr’s power management mechanism to implement the low power mode and the system off mode.</p>
<p><strong>Low power mode</strong></p>
<p>The application enters CPU sleep mode when the kernel is in idle state, which means it has nothing to schedule.
Wake-up events are interrupts triggered by one of the SoC peripheral modules, such as RTC or SystemTick.</p>
<p><strong>System off mode</strong></p>
<p>This is the deepest power saving mode the system can enter.
In this mode, all core functionalities are powered down, and most peripherals are non-functional or non-responsive.
The only mechanisms that are functional in this mode are reset and wake-up.</p>
<p>To wake up your development kit from the system off state, you have the following options:</p>
<ul>
<li><p>Press the <strong>RESET</strong> button on your development kit.</p></li>
<li><p>Press <strong>Button 1</strong> to start connectable advertising.</p></li>
<li><p>Press <strong>Button 2</strong> to start non-connectable advertising.</p></li>
<li><p>Approach the NFC field of the development kit antenna.</p>
<p>The development kit starts advertising automatically.
If you use a mobile phone, it connects and bonds with your device.</p>
</li>
</ul>
<p>When you establish a connection with the central device, you can test different connection parameters to optimize the power consumption.
When the central device enables the notification characteristic, your development kit starts sending notifications until the timeout expires.
The device disconnects from the central and enters the system off mode.
You can press a button or bring your phone close to the NFC antenna to wake up the device and continue testing.</p>
<p>For more details about power saving, refer to the <a class="reference internal" href="../../../app_dev/optimizing/power.html#app-power-opt"><span class="std std-ref">Power optimization</span></a> section.</p>
<section id="id1">
<h3><a class="toc-backref" href="#id11">Power profiling</a><a class="headerlink" href="#id1" title="Permalink to this heading"></a></h3>
<p>You can use the <a class="reference external" href="https://infocenter.nordicsemi.com/topic/ug_ppk2/UG/ppk/PPK_user_guide_Intro.html">Power Profiler Kit II (PPK2)</a> for power profiling with this sample.
See the device documentation for details about preparing your development kit for measurements.</p>
<p>The following parameters have an impact on power consumption:</p>
<blockquote>
<div><ul class="simple">
<li><p>Connection interval</p></li>
<li><p>Advertising duration</p></li>
<li><p>Latency</p></li>
<li><p>Notifications data size and interval</p></li>
</ul>
</div></blockquote>
<p>You can configure these parameters with the Kconfig options.
If your central device is the Bluetooth Low Energy app from <a class="reference external" href="https://www.nordicsemi.com/Software-and-Tools/Development-Tools/nRF-Connect-for-desktop">nRF Connect for Desktop</a>, you can use it to change the current connection parameters.</p>
<p>Example measurements:</p>
<figure class="align-default" id="id7">
<img alt="Power consumption measurement" src="../../../_images/power_profiling_meas.png" />
<figcaption>
<p><span class="caption-text">Connection interval 150 ms, the signal peaks on the chart indicate connection event every 150 milliseconds interval.</span><a class="headerlink" href="#id7" title="Permalink to this image"></a></p>
</figcaption>
</figure>
<figure class="align-default" id="id8">
<img alt="Non-connectable advertising measurement" src="../../../_images/power_profiling_meas_adv.png" />
<figcaption>
<p><span class="caption-text">Non-connectable advertising setup: Minimal interval - 1000 ms, maximum interval - 1200 ms.</span><a class="headerlink" href="#id8" title="Permalink to this image"></a></p>
</figcaption>
</figure>
</section>
<section id="service-uuid">
<h3><a class="toc-backref" href="#id12">Service UUID</a><a class="headerlink" href="#service-uuid" title="Permalink to this heading"></a></h3>
<p>This sample implements the vendor-specific service.</p>
<p>The 128-bit service UUID is <strong>00001630-1212-EFDE-1523-785FEABCD123</strong>.</p>
</section>
<section id="characteristics">
<h3><a class="toc-backref" href="#id13">Characteristics</a><a class="headerlink" href="#characteristics" title="Permalink to this heading"></a></h3>
<p>The 128-bit characteristic UUID is <strong>00001630-1212-EFDE-1524-785FEABCD123</strong>.
This characteristic value can be read or sent by the notification mechanism.
The value is an array filled with zeroes.
You can configure the length of data using the <code class="xref kconfig kconfig-option docutils literal notranslate"><span class="pre">CONFIG_BT_POWER_PROFILING_DATA_LENGTH</span></code> Kconfig option.</p>
<p>This characteristic has a CCC descriptor associated with it.</p>
</section>
</section>
<section id="user-interface">
<h2><a class="toc-backref" href="#id14">User interface</a><a class="headerlink" href="#user-interface" title="Permalink to this heading"></a></h2>
<p>The sample uses buttons and LEDs to provide a simple user interface.</p>
<dl class="simple">
<dt>LED 1:</dt><dd><dl class="simple">
<dt>Blinks when main loop is running with a period of two seconds, duty cycle 50%.</dt><dd><p>Off when the device is in system off state.</p>
</dd>
</dl>
</dd>
<dt>LED 2:</dt><dd><p>Lit when an NFC field is detected.</p>
</dd>
<dt>Button 1:</dt><dd><p>Starts connectable advertising and wakes up the SoC from the system off state.</p>
</dd>
<dt>Button 2:</dt><dd><p>Starts non-connectable advertising and wakes up the SoC from the system off state.</p>
</dd>
</dl>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>When you use buttons to wake up the SoC from the system off state, the button state is read in the main thread after booting the Zephyr kernel.
This causes a delay between the SoC wake up and button press processing.
If you want to start advertising on system start, you must keep pressing the button until you see a log message confirming the advertising start on the terminal.</p>
</div>
</section>
<section id="configuration">
<h2><a class="toc-backref" href="#id15">Configuration</a><a class="headerlink" href="#configuration" title="Permalink to this heading"></a></h2>
<p>See <a class="reference internal" href="../../../getting_started/modifying.html#configure-application"><span class="std std-ref">Configuring your application</span></a> for information about how to permanently or temporarily change the configuration.</p>
<p>The Peripheral Power Profiling sample allows configuring some of its settings using Kconfig.
You can set different options to monitor the power consumption of your development kit.
You can modify the following options:</p>
<blockquote>
<div><ul>
<li><p><code class="xref kconfig kconfig-option docutils literal notranslate"><span class="pre">CONFIG_BT_POWER_PROFILING_DATA_LENGTH</span></code> - sets notification data length.</p></li>
<li><p><code class="xref kconfig kconfig-option docutils literal notranslate"><span class="pre">CONFIG_BT_POWER_PROFILING_NOTIFICATION_INTERVAL</span></code> - sets notification sending interval in milliseconds.</p>
<blockquote>
<div><p>Notifications are started when the central device enables it by writing to the characteristic CCC descriptor.</p>
</div></blockquote>
</li>
<li><p><code class="xref kconfig kconfig-option docutils literal notranslate"><span class="pre">CONFIG_BT_POWER_PROFILING_NOTIFICATION_TIMEOUT</span></code> - sets notification timeout.</p>
<blockquote>
<div><p>Notifications are sent until this timeout is fired.
After that, the sample disconnects and enters the system off mode.</p>
</div></blockquote>
</li>
<li><p><code class="xref kconfig kconfig-option docutils literal notranslate"><span class="pre">CONFIG_BT_POWER_PROFILING_CONNECTABLE_ADV_DURATION</span></code> - sets connectable advertising duration in (N * 10) milliseconds.</p>
<blockquote>
<div><p>If the connection is not established during advertising, the device enters the system off state.</p>
</div></blockquote>
</li>
<li><p><code class="xref kconfig kconfig-option docutils literal notranslate"><span class="pre">CONFIG_BT_POWER_PROFILING_NON_CONNECTABLE_ADV_DURATION</span></code> - sets non-connectable advertising duration in (N * 10) milliseconds.</p>
<blockquote>
<div><p>When the advertising ends, the device enters the system off state if there is no outgoing connection.</p>
</div></blockquote>
</li>
<li><p><code class="xref kconfig kconfig-option docutils literal notranslate"><span class="pre">CONFIG_BT_POWER_PROFILING_NFC_ADV_DURATION</span></code> - sets advertising duration after the NFC field detection in (N * 10) milliseconds.</p>
<blockquote>
<div><p>If the connection was not established during advertising, the device enters the system off state.</p>
</div></blockquote>
</li>
<li><p><code class="xref kconfig kconfig-option docutils literal notranslate"><span class="pre">CONFIG_BT_POWER_PROFILING_CONNECTABLE_ADV_INTERVAL_MIN</span></code> - sets connectable advertising minimum interval in (N * 0.625) milliseconds.</p></li>
<li><p><code class="xref kconfig kconfig-option docutils literal notranslate"><span class="pre">CONFIG_BT_POWER_PROFILING_CONNECTABLE_ADV_INTERVAL_MAX</span></code> - sets connectable advertising maximum interval in (N * 0.625) milliseconds.</p></li>
<li><p><code class="xref kconfig kconfig-option docutils literal notranslate"><span class="pre">CONFIG_BT_POWER_PROFILING_NON_CONNECTABLE_ADV_INTERVAL_MIN</span></code> - sets non-connectable advertising minimum interval in (N * 0.625) milliseconds.</p></li>
<li><p><code class="xref kconfig kconfig-option docutils literal notranslate"><span class="pre">CONFIG_BT_POWER_PROFILING_NON_CONNECTABLE_ADV_INTERVAL_MAX</span></code> - sets non-connectable advertising maximum interval in (N * 0.625) milliseconds.</p></li>
</ul>
</div></blockquote>
</section>
<section id="building-and-running">
<h2><a class="toc-backref" href="#id16">Building and running</a><a class="headerlink" href="#building-and-running" title="Permalink to this heading"></a></h2>
<p>This sample can be found under <code class="file docutils literal notranslate"><span class="pre">samples/bluetooth/peripheral_power_profiling</span></code> in the nRF Connect SDK folder structure.</p>
<p>To build the sample with Visual Studio Code, follow the steps listed on the <a class="reference external" href="https://nrfconnect.github.io/vscode-nrf-connect/get_started/build_app_ncs.html">How to build an application</a> page in the nRF Connect for VS Code extension documentation.
See <a class="reference internal" href="../../../getting_started/programming.html#gs-programming"><span class="std std-ref">Building and programming an application</span></a> for other building and programming scenarios and <a class="reference internal" href="../../../getting_started/testing.html#gs-testing"><span class="std std-ref">Testing and debugging an application</span></a> for general information about testing and debugging in the nRF Connect SDK.</p>
<section id="testing">
<h3><a class="toc-backref" href="#id17">Testing</a><a class="headerlink" href="#testing" title="Permalink to this heading"></a></h3>
<p>This testing procedure assumes that you are using <a class="reference external" href="https://www.nordicsemi.com/Software-and-Tools/Development-Tools/nRF-Connect-for-mobile">nRF Connect for Mobile</a> or <a class="reference external" href="https://www.nordicsemi.com/Software-and-Tools/Development-Tools/nRF-Connect-for-desktop">nRF Connect for Desktop</a>.
After programming the sample to your development kit, you need another device for measuring the power consumption.
<a class="reference external" href="https://infocenter.nordicsemi.com/topic/ug_ppk2/UG/ppk/PPK_user_guide_Intro.html">Power Profiler Kit II (PPK2)</a> is the recommended device for the measurement.</p>
<section id="testing-with-nrf-connect-for-desktop-and-power-profiler-kit-ii-ppk2">
<h4>Testing with nRF Connect for Desktop and Power Profiler Kit II (PPK2)<a class="headerlink" href="#testing-with-nrf-connect-for-desktop-and-power-profiler-kit-ii-ppk2" title="Permalink to this heading"></a></h4>
<ol class="arabic">
<li><p>Set up <a class="reference external" href="https://infocenter.nordicsemi.com/topic/ug_ppk2/UG/ppk/PPK_user_guide_Intro.html">Power Profiler Kit II (PPK2)</a> and prepare your development kit for current measurement.</p></li>
<li><p>Run the Power Profiler app from nRF Connect for Desktop.</p></li>
<li><p>Connect to the kit with a terminal emulator that supports VT100/ANSI escape characters (for example, PuTTY).
See <a class="reference internal" href="../../../getting_started/testing.html#putty"><span class="std std-ref">How to connect with PuTTY</span></a> for the required settings.</p></li>
<li><p>Reset your development kit.</p></li>
<li><p>Observe that the sample starts.</p>
<p>The device enters the system off state after five seconds.
Observe a significant power consumption drop when the device enters the system off state.</p>
</li>
<li><p>Use the device buttons to wake up your device and start advertising or approach the NFC field of the kit antenna.</p>
<p>You can measure power consumption during advertising with different intervals.
Use the Kconfig options to change the interval or other parameters.</p>
</li>
<li><p>Connect to the device through the Bluetooth Low Energy app.</p>
<p>Observe the power consumption on the current connection interval.</p>
</li>
<li><p>Set different connection parameters:</p>
<ol class="loweralpha simple">
<li><p>Click <span class="guilabel">Settings</span> for the connected device in the Bluetooth Low Energy app.</p></li>
<li><p>Select <span class="guilabel">Update connection</span>.</p></li>
<li><p>Set new connection parameters.</p></li>
<li><p>Click <span class="guilabel">Update</span> to negotiate new parameters with your device.</p></li>
</ol>
</li>
<li><p>Observe the power consumption with the new connection parameters.</p></li>
<li><p>In <span class="guilabel">000016301212EFDE1523785FEABCD123</span>, click <span class="guilabel">Notify</span> for the characteristic.</p></li>
<li><p>Observe that notifications are received.</p>
<p>Monitor the power consumption during notification sending.</p>
</li>
<li><p>After the timeout set by the <code class="xref kconfig kconfig-option docutils literal notranslate"><span class="pre">CONFIG_BT_POWER_PROFILING_NOTIFICATION_TIMEOUT</span></code> option, your development kit disconnects and enters the system off mode.</p></li>
<li><p>Repeat this test using different wake-up methods and different parameters, and monitor the power consumption for your new setup.</p></li>
</ol>
</section>
</section>
</section>
<section id="dependencies">
<h2><a class="toc-backref" href="#id18">Dependencies</a><a class="headerlink" href="#dependencies" title="Permalink to this heading"></a></h2>
<p>This sample uses the following nRF Connect SDK libraries:</p>
<ul class="simple">
<li><p><a class="reference internal" href="../../../libraries/others/dk_buttons_and_leds.html#dk-buttons-and-leds-readme"><span class="std std-ref">DK Buttons and LEDs</span></a></p></li>
<li><p><a class="reference internal" href="../../../libraries/nfc/ndef/msg.html#nfc-ndef-msg"><span class="std std-ref">NDEF messages</span></a></p></li>
<li><p><a class="reference internal" href="../../../libraries/nfc/ndef/ch_msg.html#nfc-ch"><span class="std std-ref">Connection Handover messages and records</span></a></p></li>
<li><p><a class="reference internal" href="../../../libraries/nfc/ndef/le_oob_rec.html#nfc-ndef-le-oob"><span class="std std-ref">Bluetooth LE OOB records</span></a></p></li>
</ul>
<p>It uses the Type 2 Tag library from <a class="reference external" href="https://github.com/nrfconnect/sdk-nrfxlib">sdk-nrfxlib</a>:</p>
<ul class="simple">
<li><p><span class="xref std std-ref">nrfxlib:nfc_api_type2</span></p></li>
</ul>
<p>In addition, it uses the following Zephyr libraries:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">include/zephyr/sys/kernel.h</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">include/zephyr/sys/atomic.h</span></code></p></li>
<li><p><span class="xref std std-ref">zephyr:settings_api</span></p></li>
<li><p><span class="xref std std-ref">zephyr:bluetooth_api</span>:</p>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">include/zephyr/bluetooth/bluetooth.h</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">include/zephyr/bluetooth/conn.h</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">include/zephyr/bluetooth/uuid.h</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">include/zephyr/bluetooth/gatt.h</span></code></p></li>
</ul>
</li>
<li><p><span class="xref std std-ref">zephyr:pm-guide</span>:</p>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">include/zephyr/pm/pm.h</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">include/zephyr/pm/policy.h</span></code></p></li>
</ul>
</li>
</ul>
</section>
</section>


           </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="../peripheral_rscs/README.html" class="btn btn-neutral float-right" title="Bluetooth: Peripheral Running Speed and Cadence Service (RSCS)" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="../peripheral_nfc_pairing/README.html" class="btn btn-neutral" title="Bluetooth: NFC pairing" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">

<table>
<tr>
<td>
    <p>
        &copy; Copyright 2019-2023, Nordic Semiconductor.
      Last updated on Mar 20, 2023.

    </p>
</td>
<td id="nordiclogo">
  <a href="https://www.nordicsemi.com/"><img src="../../../_static/images/nordic-logo.png" border="0"/></a>
</td>
</tr>
</table>
  </div> 


</footer>

<div id="scroll-container">
  <button type="button" id="scroll-btn" class="btn">
    <svg xmlns="http://www.w3.org/2000/svg" height="24" viewBox="0 0 24 24" width="24"><path d="M0 0h24v24H0z" fill="none"/><path d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z" fill="#fff"/></svg>
  </button>
</div>

<script>
  const scrollBtn = document.querySelector("#scroll-btn");

  document.addEventListener("scroll", () => {
    if (window.scrollY > 400) {
          scrollBtn.style.visibility = "visible";
      } else {
          scrollBtn.style.visibility = "hidden";
      }
  });

  scrollBtn.addEventListener("click", () => {
      window.scrollTo({ top: 0, behavior: "smooth" });
  });
</script>
        </div>
      </div>
    </section>
  </div>
  
  <div class="rst-versions" data-toggle="rst-versions" role="note" aria-label="versions">
    <span class="rst-current-version" data-toggle="rst-current-version">
      <span class="fa fa-book"> nRF Connect SDK</span>
       <span class="fa fa-caret-down"></span>
    </span>
    <div class="rst-other-versions">
      
      <div class="rst-other-version ncs">
        <a href="../../../../nrf/index.html">nRF Connect SDK</a>
      </div>
      
      <div class="rst-other-version nrfx">
        <a href="../../../../nrfx/index.html">nrfx</a>
      </div>
      
      <div class="rst-other-version nrfxlib">
        <a href="../../../../nrfxlib/README.html">nrfxlib</a>
      </div>
      
      <div class="rst-other-version zephyr">
        <a href="../../../../zephyr/index.html">Zephyr Project</a>
      </div>
      
      <div class="rst-other-version mcuboot">
        <a href="../../../../mcuboot/wrapper.html">MCUboot</a>
      </div>
      
      <div class="rst-other-version tfm">
        <a href="../../../../tfm/index.html">Trusted Firmware-M</a>
      </div>
      
      <div class="rst-other-version matter">
        <a href="../../../../matter/index.html">Matter</a>
      </div>
      
      <div class="rst-other-version kconfig">
        <a href="../../../../kconfig/index.html">Kconfig Reference</a>
      </div>
    </div>
  </div><script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>