<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>nRF9160: Location &mdash; nRF Connect SDK 2.3.99 documentation</title>
      <link rel="stylesheet" href="../../../_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="../../../_static/css/nordic.css" type="text/css" />
      <link rel="stylesheet" href="../../../_static/togglebutton.css" type="text/css" />
      <link rel="stylesheet" href="../../../_static/css/nrf.css" type="text/css" />
      <link rel="stylesheet" href="../../../_static/tabs.css" type="text/css" /> 
  <!--[if lt IE 9]>
    <script src="../../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="../../../" id="documentation_options" src="../../../_static/documentation_options.js"></script>
        <script src="../../../_static/jquery.js"></script>
        <script src="../../../_static/underscore.js"></script>
        <script src="../../../_static/_sphinx_javascript_frameworks_compat.js"></script>
        <script src="../../../_static/doctools.js"></script>
        <script src="../../../_static/sphinx_highlight.js"></script>
        <script src="https://www.googletagmanager.com/gtag/js?id=G-ZPVZRKFQJR"></script>
        <script src="../../../_static/js/ga-tracker.js"></script>
        <script data-culture="EN" id="CookieConsent" type="text/javascript" src="https://policy.app.cookieinformation.com/uc.js"></script>
        <script>let toggleHintShow = 'Click to show';</script>
        <script>let toggleHintHide = 'Click to hide';</script>
        <script>let toggleOpenOnPrint = 'true';</script>
        <script src="../../../_static/togglebutton.js"></script>
        <script>var togglebuttonSelector = '.toggle, .admonition.dropdown';</script>
    <script src="../../../_static/js/theme.js"></script>
<script
  type="text/javascript"
  src="../../../_static/js/ncs.js"
></script>
<script src="../../../_static/js/bootstrap.bundle.min.js"></script>

    <link rel="index" title="Index" href="../../../genindex.html" />
    <link rel="search" title="Search" href="../../../search.html" />
    <link rel="next" title="nRF9160: LTE Sensor Gateway" href="../lte_ble_gateway/README.html" />
    <link rel="prev" title="nRF9160: HTTPS Client" href="../https_client/README.html" />
<link
  href="../../../_static/css/bootstrap.min.css"
  rel="stylesheet"
/>
<link
  rel="shortcut icon"
  href="../../../_static/images/favicon.ico"
/>

</head>

<body class="wy-body-for-nav">
<div class="announcement"></div>
<div class="d-print-none ncs-header">
  <div class="container-xl ncs-header-top">
    <div class="row h-100">
      <div class="d-none d-md-block col-2">
        <div class="bg-white py-4 px-3 ml-2 ncs-header-logo">
          <img
            class="ncs-header-logo"
            src="../../../_static/images/nordic-logo.png"
            alt=""
          />
        </div>
      </div>
      <div
        class="col-8 col-md-7 pl-md-4 d-flex align-self-center justify-content-center"
      >
        <form class="w-75" action="../../../search.html" method="get">
          <div class="form-group">
            <input
              type="text"
              name="q"
              class="ncs-search-input form-control"
              placeholder="Search all docs..."
            />
          </div>
        </form>
      </div>
      <div class="col-4 col-md-3 d-md-block p-3 text-end">
        <div class="dropdown">
          <button
            class="btn dropdown-toggle ncs-btn-versions"
            type="button"
            id="dropdownMenuButton1"
            data-bs-toggle="dropdown"
            aria-expanded="false"
          >
            <span class="d-none d-md-inline">nRF Connect SDK</span>
            <span id="ncsversion" class="d-inline"></span>
          </button>
          <div class="dropdown-menu" aria-labelledby="dropdownMenuButton"></div>
        </div>
      </div>
    </div>
  </div>
  <div class="ncs-header-nav">
    <div class="container-xl">
      <div class="row">
        <div class="col col-12 d-flex justify-content-center">
          <nav class="navbar navbar-dark navbar-expand-lg p-0">
            <span class="navbar-brand d-block d-lg-none py-2 pl-1"
              >Documentation sets</span
            >
            <button
              class="navbar-toggler"
              type="button"
              data-bs-toggle="collapse"
              data-bs-target="#navbarNavAltMarkup"
              aria-controls="navbarNavAltMarkup"
              aria-expanded="false"
              aria-label="Toggle navigation"
            >
              <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="navbarNavAltMarkup">
              <ul class="navbar-nav">
                <li class="nav-item active py-1 px-3">
                  <a
                    class="nav-link"
                    href="../../../../nrf/index.html"
                    >nRF Connect SDK</a
                  >
                </li>
                <li><hr class="dropdown-divider" /></li>
                <li class="nav-item  py-1 px-3">
                  <a
                    class="nav-link"
                    href="../../../../nrfx/index.html"
                    >nrfx</a
                  >
                </li>
                <li><hr class="dropdown-divider" /></li>
                <li class="nav-item  py-1 px-3">
                  <a
                    class="nav-link"
                    href="../../../../nrfxlib/README.html"
                    >nrfxlib</a
                  >
                </li>
                <li><hr class="dropdown-divider" /></li>
                <li class="nav-item  py-1 px-3">
                  <a
                    class="nav-link"
                    href="../../../../zephyr/index.html"
                    >Zephyr Project</a
                  >
                </li>
                <li><hr class="dropdown-divider" /></li>
                <li class="nav-item  py-1 px-3">
                  <a
                    class="nav-link"
                    href="../../../../mcuboot/wrapper.html"
                    >MCUboot</a
                  >
                </li>
                <li><hr class="dropdown-divider" /></li>
                <li class="nav-item  py-1 px-3">
                  <a
                    class="nav-link"
                    href="../../../../tfm/index.html"
                    >Trusted Firmware-M</a
                  >
                </li>
                <li><hr class="dropdown-divider" /></li>
                <li class="nav-item  py-1 px-3">
                  <a
                    class="nav-link"
                    href="../../../../matter/index.html"
                    >Matter</a
                  >
                </li>
                <li><hr class="dropdown-divider" /></li>
                <li class="nav-item  py-1 px-3">
                  <a
                    class="nav-link"
                    href="../../../../kconfig/index.html"
                    >Kconfig Reference</a
                  >
                </li>
                <li><hr class="dropdown-divider" /></li>
              </ul>
            </div>
          </nav>
        </div>
      </div>
    </div>
  </div>
</div>

  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
            <a href="../../../index.html" class="icon icon-home"> nRF Connect SDK
          </a>
              <div class="version">
                2.3.99
              </div>
<div id="searchbox" role="search">
  <div class="searchformwrapper">
    <form id="rtd-search-form" class="wy-form" action="../../../search.html" method="get">
      <input type="text" name="q" placeholder="Search docs" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
  </div>
</div>
<script>$('#searchbox').show(0);</script>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Contents</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../../introduction.html">Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../getting_started.html">Getting started</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../dev_model.html">Development model</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../app_dev.html">Application development</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../security.html">Security</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../ecosystem_integration.html">Ecosystems integration</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../nrf91.html">Working with nRF91 Series</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../nrf70.html">Working with nRF70 Series</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../nrf53.html">Working with nRF53 Series</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../nrf52.html">Working with nRF52 Series</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../protocols.html">Protocols</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../applications.html">Applications</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../../../samples.html">Samples</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../../bl.html">Bluetooth samples</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../crypto.html">Cryptography samples</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../edge.html">Edge Impulse samples</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../gazell.html">Gazell samples</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../matter.html">Matter samples</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../nfc.html">NFC samples</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../nrf5340.html">nRF5340 samples</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="../../nrf9160.html">nRF9160 samples</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="../at_client/README.html">nRF9160: AT Client</a></li>
<li class="toctree-l3"><a class="reference internal" href="../at_monitor/README.html">nRF9160: AT monitor</a></li>
<li class="toctree-l3"><a class="reference internal" href="../aws_iot/README.html">nRF9160: AWS IoT</a></li>
<li class="toctree-l3"><a class="reference internal" href="../azure_fota/README.html">nRF9160: Azure FOTA</a></li>
<li class="toctree-l3"><a class="reference internal" href="../azure_iot_hub/README.html">nRF9160: Azure IoT Hub</a></li>
<li class="toctree-l3"><a class="reference internal" href="../ciphersuites/README.html">nRF9160: TLS cipher suites</a></li>
<li class="toctree-l3"><a class="reference internal" href="../coap_client/README.html">nRF9160: nRF CoAP Client</a></li>
<li class="toctree-l3"><a class="reference internal" href="../download/README.html">nRF9160: Download client</a></li>
<li class="toctree-l3"><a class="reference internal" href="../fmfu_smp_svr/README.html">nRF9160: Full modem firmware update using SMP Server</a></li>
<li class="toctree-l3"><a class="reference internal" href="../gnss/README.html">nRF9160: GNSS</a></li>
<li class="toctree-l3"><a class="reference internal" href="../https_client/README.html">nRF9160: HTTPS Client</a></li>
<li class="toctree-l3 current"><a class="current reference internal" href="#">nRF9160: Location</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#requirements">Requirements</a></li>
<li class="toctree-l4"><a class="reference internal" href="#overview">Overview</a></li>
<li class="toctree-l4"><a class="reference internal" href="#configuration">Configuration</a></li>
<li class="toctree-l4"><a class="reference internal" href="#building-and-running">Building and running</a></li>
<li class="toctree-l4"><a class="reference internal" href="#dependencies">Dependencies</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../lte_ble_gateway/README.html">nRF9160: LTE Sensor Gateway</a></li>
<li class="toctree-l3"><a class="reference internal" href="../lwm2m_carrier/README.html">nRF9160: LwM2M carrier</a></li>
<li class="toctree-l3"><a class="reference internal" href="../lwm2m_client/README.html">nRF9160: LwM2M Client</a></li>
<li class="toctree-l3"><a class="reference internal" href="../memfault/README.html">nRF9160: Memfault</a></li>
<li class="toctree-l3"><a class="reference internal" href="../modem_callbacks/README.html">nRF9160: Modem callbacks</a></li>
<li class="toctree-l3"><a class="reference internal" href="../modem_shell/README.html">nRF9160: Modem Shell</a></li>
<li class="toctree-l3"><a class="reference internal" href="../modem_trace_backend/README.html">nRF9160: Modem trace backend</a></li>
<li class="toctree-l3"><a class="reference internal" href="../modem_trace_flash/README.html">nRF9160: Modem trace external flash backend</a></li>
<li class="toctree-l3"><a class="reference internal" href="../nidd/README.html">nRF9160: NIDD</a></li>
<li class="toctree-l3"><a class="reference internal" href="../nrf_cloud_mqtt_multi_service/README.html">nRF9160: nRF Cloud MQTT multi-service</a></li>
<li class="toctree-l3"><a class="reference internal" href="../nrf_cloud_rest_cell_location/README.html">nRF9160: nRF Cloud REST cellular location</a></li>
<li class="toctree-l3"><a class="reference internal" href="../nrf_cloud_rest_device_message/README.html">nRF9160: nRF Cloud REST Device Message</a></li>
<li class="toctree-l3"><a class="reference internal" href="../nrf_cloud_rest_fota/README.html">nRF9160: nRF Cloud REST FOTA</a></li>
<li class="toctree-l3"><a class="reference internal" href="../pdn/README.html">nRF9160: PDN</a></li>
<li class="toctree-l3"><a class="reference internal" href="../slm_shell/README.html">nRF9160: SLM Shell</a></li>
<li class="toctree-l3"><a class="reference internal" href="../sms/README.html">nRF9160: SMS</a></li>
<li class="toctree-l3"><a class="reference internal" href="../udp/README.html">nRF9160: UDP</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../net/mqtt/README.html">MQTT</a></li>
<li class="toctree-l3"><a class="reference internal" href="../http_update/application_update/README.html">nRF9160: HTTP application update</a></li>
<li class="toctree-l3"><a class="reference internal" href="../http_update/full_modem_update/README.html">nRF9160: HTTP full modem update</a></li>
<li class="toctree-l3"><a class="reference internal" href="../http_update/modem_delta_update/README.html">nRF9160: HTTP modem delta update</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../tfm.html">Trusted Firmware-M (TF-M) samples</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../thread.html">Thread samples</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../zigbee.html">Zigbee samples</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../wifi.html">Wi-Fi samples</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../other.html">Other samples</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../drivers.html">Drivers</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../libraries/index.html">Libraries</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../scripts.html">Scripts</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../release_notes.html">Release notes</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../known_issues.html">Known issues</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../software_maturity.html">Software maturity levels</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../documentation.html">About this documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../glossary.html">Glossary</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../../index.html">nRF Connect SDK</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../../../index.html" class="icon icon-home"></a></li>
          <li class="breadcrumb-item"><a href="../../../samples.html">Samples</a></li>
          <li class="breadcrumb-item"><a href="../../nrf9160.html">nRF9160 samples</a></li>
      <li class="breadcrumb-item active">nRF9160: Location</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../../../_sources/samples/nrf9160/location/README.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="nrf9160-location">
<span id="location-sample"></span><h1>nRF9160: Location<a class="headerlink" href="#nrf9160-location" title="Permalink to this heading"></a></h1>
<div class="contents local topic" id="contents">
<ul class="simple">
<li><p><a class="reference internal" href="#requirements" id="id6">Requirements</a></p></li>
<li><p><a class="reference internal" href="#overview" id="id7">Overview</a></p></li>
<li><p><a class="reference internal" href="#configuration" id="id8">Configuration</a></p>
<ul>
<li><p><a class="reference internal" href="#additional-configuration" id="id9">Additional configuration</a></p></li>
<li><p><a class="reference internal" href="#configuration-files" id="id10">Configuration files</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#building-and-running" id="id11">Building and running</a></p>
<ul>
<li><p><a class="reference internal" href="#nrf9160-dk-with-nrf7002-ek-wi-fi-support" id="id12">nRF9160 DK with nRF7002 EK Wi-Fi support</a></p></li>
<li><p><a class="reference internal" href="#esp8266-wi-fi-support" id="id13">ESP8266 Wi-Fi support</a></p></li>
<li><p><a class="reference internal" href="#p-gps-support" id="id14">P-GPS support</a></p></li>
<li><p><a class="reference internal" href="#testing" id="id15">Testing</a></p></li>
<li><p><a class="reference internal" href="#sample-output" id="id16">Sample output</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#dependencies" id="id17">Dependencies</a></p></li>
</ul>
</div>
<p>The Location sample demonstrates how you can retrieve the location of a device using GNSS, cellular or Wi-Fi positioning method.
This sample uses the <a class="reference internal" href="../../../libraries/modem/location.html#lib-location"><span class="std std-ref">Location</span></a> library.</p>
<section id="requirements">
<h2><a class="toc-backref" href="#id6">Requirements</a><a class="headerlink" href="#requirements" title="Permalink to this heading"></a></h2>
<p>The sample supports the following development kits:</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 28%" />
<col style="width: 8%" />
<col style="width: 42%" />
<col style="width: 23%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Hardware platforms</p></th>
<th class="head"><p>PCA</p></th>
<th class="head"><p>Board name</p></th>
<th class="head"><p>Build target</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><a class="reference internal" href="../../../working_with_nrf/nrf91/nrf9160.html#ug-nrf9160"><span class="std std-ref">nRF9160 DK</span></a></p></td>
<td><p>PCA10090</p></td>
<td><p><span class="xref std std-ref">nrf9160dk_nrf9160</span></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">nrf9160dk_nrf9160_ns</span></code></p></td>
</tr>
</tbody>
</table>
<p>When built for an <code class="docutils literal notranslate"><span class="pre">_ns</span></code> build target, the sample is configured to compile and run as a non-secure application with <a class="reference internal" href="../../../app_dev/board_support/index.html#app-boards-spe-nspe-cpuapp-ns"><span class="std std-ref">Cortex-M Security Extensions enabled</span></a>.
Therefore, it automatically includes <a class="reference internal" href="../../../app_dev/tfm/index.html#ug-tfm"><span class="std std-ref">Trusted Firmware-M</span></a> that prepares the required peripherals and secure services to be available for the application.</p>
<p>See also the requirements in <a class="reference internal" href="../../../libraries/modem/location.html#lib-location"><span class="std std-ref">Location</span></a> library document.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This sample uses the <a class="reference external" href="https://docs.nrfcloud.com/APIs/REST/RESTIntro/">nRF Cloud REST API</a>, which requires that your device has a valid signing key installed and registered with <a class="reference external" href="https://nrfcloud.com/">nRF Cloud</a>.</p>
<p>(See <a class="reference external" href="https://docs.nrfcloud.com/APIs/REST/RESTIntro/">nRF Cloud REST API</a> and <a class="reference external" href="https://docs.nrfcloud.com/Devices/Security/Credentials/">Securely generating credentials on the nRF9160</a> for more details on this requirement).</p>
<p>Modem version v1.3.x or later is also required.</p>
<ul class="simple">
<li><p>Your device may ship with modem firmware older than v1.3.x, so verify that you have the latest installed.</p></li>
<li><p>For instructions on updating your device’s modem firmware, see the following documents:</p>
<ul>
<li><p><a class="reference internal" href="../../../working_with_nrf/nrf91/nrf9160_gs.html#nrf9160-gs-updating-fw-modem"><span class="std std-ref">Updating modem firmware on nRF9160 DK</span></a></p></li>
<li><p><a class="reference internal" href="../../../working_with_nrf/nrf91/thingy91_gsg.html#programming-thingy"><span class="std std-ref">Updating modem firmware on Thingy:91</span></a></p></li>
</ul>
</li>
</ul>
<p>To obtain and register a valid signing key, you can do one of the following:</p>
<ul class="simple">
<li><p>Provision your device on nRF Cloud using Just-In-Time Provisioning (JITP) (detailed below).</p></li>
<li><p>Provision your device on nRF Cloud with preconnect provisioning (detailed in <a class="reference external" href="https://docs.nrfcloud.com/Devices/Associations/Provisioning/">nRF Cloud Provisioning</a>).</p></li>
<li><p>Install or generate a private key on your device and register its public key with nRF Cloud (detailed in <a class="reference external" href="https://docs.nrfcloud.com/Devices/Security/Credentials/">Securely generating credentials on the nRF9160</a>).</p></li>
</ul>
<p>To provision your device on nRF Cloud using JITP, complete the following steps:</p>
<ol class="arabic simple">
<li><p><a class="reference internal" href="../../../working_with_nrf/nrf91/nrf9160.html#nrf9160-ug-updating-cloud-certificate"><span class="std std-ref">Ensure valid nRF Cloud credentials are installed</span></a>.
nRF9160 DK and Thingy:91 have credentials pre-installed, but some may be shipped with RSA256 credentials; JWT signing requires ES256 credentials.
These devices need new credentials to be installed before they can perform REST requests.</p></li>
<li><p>Install a sample or application that supports JITP.
You can use the <a class="reference internal" href="../../../applications/asset_tracker_v2/README.html#asset-tracker-v2"><span class="std std-ref">Asset Tracker V2</span></a> application for this purpose.</p></li>
<li><p>Allow your device to connect to nRF Cloud and add it to the nRF Cloud portal.
When successfully provisioned, the device appears in the devices list of the nRF Cloud portal.</p></li>
<li><p>Once your device is provisioned, you may reinstall this sample and the provisioning persists.</p></li>
</ol>
</div>
</section>
<section id="overview">
<h2><a class="toc-backref" href="#id7">Overview</a><a class="headerlink" href="#overview" title="Permalink to this heading"></a></h2>
<p>The Location sample retrieves the location multiple times to illustrate the different ways of retrieving the location of a device.
Each individual location request has been implemented in a separate function within the sample.
In addition to the <a class="reference internal" href="../../../libraries/modem/location.html#lib-location"><span class="std std-ref">Location</span></a> library, this sample uses <a class="reference internal" href="../../../libraries/modem/lte_lc.html#lte-lc-readme"><span class="std std-ref">LTE link controller</span></a> to control the LTE connection.</p>
</section>
<section id="configuration">
<h2><a class="toc-backref" href="#id8">Configuration</a><a class="headerlink" href="#configuration" title="Permalink to this heading"></a></h2>
<p>See <a class="reference internal" href="../../../getting_started/modifying.html#configure-application"><span class="std std-ref">Configuring your application</span></a> for information about how to permanently or temporarily change the configuration.</p>
<section id="additional-configuration">
<h3><a class="toc-backref" href="#id9">Additional configuration</a><a class="headerlink" href="#additional-configuration" title="Permalink to this heading"></a></h3>
<p>Refer to the <a class="reference internal" href="../../../libraries/modem/location.html#lib-location"><span class="std std-ref">Location</span></a> library document for configuring the location retrieval behavior, including supported location methods and services.</p>
<p>If you use an external GNSS antenna, add the following configuration:</p>
<ul class="simple">
<li><p><code class="xref kconfig kconfig-option docutils literal notranslate"><span class="pre">CONFIG_MODEM_ANTENNA_GNSS_EXTERNAL</span></code> - Selects an external GNSS antenna.</p></li>
</ul>
</section>
<section id="configuration-files">
<h3><a class="toc-backref" href="#id10">Configuration files</a><a class="headerlink" href="#configuration-files" title="Permalink to this heading"></a></h3>
<p>The sample provides predefined configuration files for typical use cases.
The configuration files are in the <code class="file docutils literal notranslate"><span class="pre">samples/nrf9160/location</span></code> directory.</p>
<p>The following files are available:</p>
<ul class="simple">
<li><p><code class="file docutils literal notranslate"><span class="pre">nrf9160dk_with_nrf7002ek.overlay</span></code> - DTC overlay for nRF7002 EK Wi-Fi chip support.</p></li>
<li><p><code class="file docutils literal notranslate"><span class="pre">nrf7002ek-wifi-scan-only.conf</span></code> - Config overlay for nRF7002 EK Wi-Fi chip support.</p></li>
<li><p><code class="file docutils literal notranslate"><span class="pre">esp_8266_nrf9160ns.overlay</span></code> - DTC overlay for ESP8266 Wi-Fi chip support.</p></li>
<li><p><code class="file docutils literal notranslate"><span class="pre">overlay-esp-wifi.conf</span></code> - Config overlay for ESP8266 Wi-Fi chip support.</p></li>
<li><p><code class="file docutils literal notranslate"><span class="pre">overlay-pgps.conf</span></code> - Config overlay for P-GPS support.</p></li>
</ul>
</section>
</section>
<section id="building-and-running">
<h2><a class="toc-backref" href="#id11">Building and running</a><a class="headerlink" href="#building-and-running" title="Permalink to this heading"></a></h2>
<p>This sample can be found under <code class="file docutils literal notranslate"><span class="pre">samples/nrf9160/location</span></code> in the nRF Connect SDK folder structure.</p>
<p>When built as firmware image for the <code class="docutils literal notranslate"><span class="pre">_ns</span></code> build target, the sample has Cortex-M Security Extensions (CMSE) enabled and separates the firmware between Non-Secure Processing Environment (NSPE) and Secure Processing Environment (SPE).
Because of this, it automatically includes the <a class="reference internal" href="../../../app_dev/tfm/index.html#ug-tfm"><span class="std std-ref">Trusted Firmware-M (TF-M)</span></a>.
To read more about CMSE, see <a class="reference internal" href="../../../app_dev/board_support/index.html#app-boards-spe-nspe"><span class="std std-ref">Processing environments</span></a>.</p>
<p>To build the sample with Visual Studio Code, follow the steps listed on the <a class="reference external" href="https://nrfconnect.github.io/vscode-nrf-connect/get_started/build_app_ncs.html">How to build an application</a> page in the nRF Connect for VS Code extension documentation.
See <a class="reference internal" href="../../../getting_started/programming.html#gs-programming"><span class="std std-ref">Building and programming an application</span></a> for other building and programming scenarios and <a class="reference internal" href="../../../getting_started/testing.html#gs-testing"><span class="std std-ref">Testing and debugging an application</span></a> for general information about testing and debugging in the nRF Connect SDK.</p>
<section id="nrf9160-dk-with-nrf7002-ek-wi-fi-support">
<h3><a class="toc-backref" href="#id12">nRF9160 DK with nRF7002 EK Wi-Fi support</a><a class="headerlink" href="#nrf9160-dk-with-nrf7002-ek-wi-fi-support" title="Permalink to this heading"></a></h3>
<p>To build the sample with nRF9160 DK and nRF7002 EK Wi-Fi support, use the <code class="docutils literal notranslate"><span class="pre">-DSHIELD=nrf7002_ek</span></code>, <code class="docutils literal notranslate"><span class="pre">-DDTC_OVERLAY_FILE=nrf9160dk_with_nrf7002ek.overlay</span></code> and  <code class="docutils literal notranslate"><span class="pre">-DOVERLAY_CONFIG=overlay-nrf7002ek-wifi-scan-only.conf</span></code> options.</p>
<p>For example:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">west build -p -b nrf9160dk_nrf9160ns -- -DSHIELD=nrf7002_ek -DDTC_OVERLAY_FILE=nrf9160dk_with_nrf7002ek.overlay -DOVERLAY_CONFIG=overlay-nrf7002ek-wifi-scan-only.conf</span>
</pre></div>
</div>
<p>See <a class="reference internal" href="../../../getting_started/modifying.html#cmake-options"><span class="std std-ref">Providing CMake options</span></a> for more instructions on how to add these options.</p>
</section>
<section id="esp8266-wi-fi-support">
<h3><a class="toc-backref" href="#id13">ESP8266 Wi-Fi support</a><a class="headerlink" href="#esp8266-wi-fi-support" title="Permalink to this heading"></a></h3>
<p>To build the Location sample with ESP8266 Wi-Fi chip support, use the <code class="docutils literal notranslate"><span class="pre">-DDTC_OVERLAY_FILE=esp_8266_nrf9160ns.overlay</span></code> and  <code class="docutils literal notranslate"><span class="pre">-DOVERLAY_CONFIG=overlay-esp-wifi.conf</span></code> options.</p>
<p>For example:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">west build -p -b nrf9160dk_nrf9160_ns -- -DDTC_OVERLAY_FILE=esp_8266_nrf9160ns.overlay -DOVERLAY_CONFIG=overlay-esp-wifi.conf</span>
</pre></div>
</div>
<p>See <a class="reference internal" href="../../../getting_started/modifying.html#cmake-options"><span class="std std-ref">Providing CMake options</span></a> for more instructions on how to add these options.</p>
</section>
<section id="p-gps-support">
<h3><a class="toc-backref" href="#id14">P-GPS support</a><a class="headerlink" href="#p-gps-support" title="Permalink to this heading"></a></h3>
<p>To build the Location sample with P-GPS support, use the <code class="docutils literal notranslate"><span class="pre">-DOVERLAY_CONFIG=overlay-pgps.conf</span></code> option.
For example:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">west build -p -b nrf9160dk_nrf9160_ns -- -DOVERLAY_CONFIG=overlay-pgps.conf</span>
</pre></div>
</div>
<p>See <a class="reference internal" href="../../../getting_started/modifying.html#cmake-options"><span class="std std-ref">Providing CMake options</span></a> for more instructions on how to add this option.</p>
</section>
<section id="testing">
<h3><a class="toc-backref" href="#id15">Testing</a><a class="headerlink" href="#testing" title="Permalink to this heading"></a></h3>
<p>After programming the sample to your development kit, complete the following steps to test it:</p>
<ol class="arabic simple">
<li><p>Connect the kit to the computer using a USB cable.
The kit is assigned a COM port (Windows) or ttyACM device (Linux), which is visible in the Device Manager.</p></li>
<li><p>Connect to the kit with a terminal emulator (for example, PuTTY).
See <a class="reference internal" href="../../../getting_started/testing.html#putty"><span class="std std-ref">How to connect with PuTTY</span></a> for the required settings.</p></li>
<li><p>Observe that the sample prints to the terminal.</p></li>
</ol>
</section>
<section id="sample-output">
<h3><a class="toc-backref" href="#id16">Sample output</a><a class="headerlink" href="#sample-output" title="Permalink to this heading"></a></h3>
<p>An example output of the sample:</p>
<blockquote>
<div><div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">Location sample started</span>

<span class="go">Connecting to LTE...</span>
<span class="go">Connected to LTE</span>

<span class="go">Requesting location with short GNSS timeout to trigger fallback to cellular...</span>
<span class="go">[00:00:06.481,262] &lt;wrn&gt; location: Timeout occurred</span>
<span class="go">[00:00:06.487,335] &lt;wrn&gt; location: Failed to acquire location using &#39;GNSS&#39;, trying with &#39;Cellular&#39; next</span>
<span class="go">Got location:</span>
<span class="go">method: cellular</span>
<span class="go">latitude: 12.887095</span>
<span class="go">longitude: 55.580397</span>
<span class="go">accuracy: 1250.0 m</span>
<span class="go">Google maps URL: https://maps.google.com/?q=12.887095,55.580397</span>

<span class="go">Requesting location with the default configuration...</span>
<span class="go">Got location:</span>
<span class="go">method: GNSS</span>
<span class="go">latitude: 12.893736</span>
<span class="go">longitude: 55.575859</span>
<span class="go">accuracy: 4.4 m</span>
<span class="go">date: 2021-10-28</span>
<span class="go">time: 13:36:29.072 UTC</span>
<span class="go">Google maps URL: https://maps.google.com/?q=12.893736,55.575859</span>

<span class="go">Requesting location with high GNSS accuracy...</span>
<span class="go">Got location:</span>
<span class="go">method: GNSS</span>
<span class="go">latitude: 12.893755</span>
<span class="go">longitude: 55.575879</span>
<span class="go">accuracy: 2.8 m</span>
<span class="go">date: 2021-10-28</span>
<span class="go">time: 13:36:32.339 UTC</span>
<span class="go">Google maps URL: https://maps.google.com/?q=12.893755,55.575879</span>

<span class="go">Requesting Wi-Fi location with GNSS and cellular fallback...</span>
<span class="go">Got location:</span>
<span class="go">method: GNSS</span>
<span class="go">latitude: 12.893770</span>
<span class="go">longitude: 55.575884</span>
<span class="go">accuracy: 4.5 m</span>
<span class="go">date: 2021-10-28</span>
<span class="go">time: 13:36:45.895 UTC</span>
<span class="go">Google maps URL: https://maps.google.com/?q=12.893770,55.575884</span>

<span class="go">Requesting 30s periodic GNSS location...</span>
<span class="go">Got location:</span>
<span class="go">method: GNSS</span>
<span class="go">latitude: 12.893765</span>
<span class="go">longitude: 55.575912</span>
<span class="go">accuracy: 4.4 m</span>
<span class="go">date: 2021-10-28</span>
<span class="go">time: 13:36:47.536 UTC</span>
<span class="go">Google maps URL: https://maps.google.com/?q=12.893765,55.575912</span>

<span class="go">Got location:</span>
<span class="go">method: GNSS</span>
<span class="go">latitude: 12.893892</span>
<span class="go">longitude: 55.576090</span>
<span class="go">accuracy: 8.4 m</span>
<span class="go">date: 2021-10-28</span>
<span class="go">time: 13:37:17.685 UTC</span>
<span class="go">Google maps URL: https://maps.google.com/?q=12.893892,55.576090</span>
</pre></div>
</div>
</div></blockquote>
</section>
</section>
<section id="dependencies">
<h2><a class="toc-backref" href="#id17">Dependencies</a><a class="headerlink" href="#dependencies" title="Permalink to this heading"></a></h2>
<p>This sample uses the following nRF Connect SDK libraries:</p>
<ul class="simple">
<li><p><a class="reference internal" href="../../../libraries/modem/location.html#lib-location"><span class="std std-ref">Location</span></a></p></li>
<li><p><a class="reference internal" href="../../../libraries/modem/lte_lc.html#lte-lc-readme"><span class="std std-ref">LTE link controller</span></a></p></li>
<li><p><a class="reference internal" href="../../../libraries/others/date_time.html#lib-date-time"><span class="std std-ref">Date-Time</span></a></p></li>
<li><p><a class="reference internal" href="../../../libraries/modem/at_host.html#lib-at-host"><span class="std std-ref">AT Host</span></a></p></li>
</ul>
<p>In addition, it uses the following secure firmware component:</p>
<ul class="simple">
<li><p><a class="reference internal" href="../../../app_dev/tfm/index.html#ug-tfm"><span class="std std-ref">Trusted Firmware-M</span></a></p></li>
</ul>
</section>
</section>


           </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="../lte_ble_gateway/README.html" class="btn btn-neutral float-right" title="nRF9160: LTE Sensor Gateway" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="../https_client/README.html" class="btn btn-neutral" title="nRF9160: HTTPS Client" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">

<table>
<tr>
<td>
    <p>
        &copy; Copyright 2019-2023, Nordic Semiconductor.
      Last updated on Mar 20, 2023.

    </p>
</td>
<td id="nordiclogo">
  <a href="https://www.nordicsemi.com/"><img src="../../../_static/images/nordic-logo.png" border="0"/></a>
</td>
</tr>
</table>
  </div> 


</footer>

<div id="scroll-container">
  <button type="button" id="scroll-btn" class="btn">
    <svg xmlns="http://www.w3.org/2000/svg" height="24" viewBox="0 0 24 24" width="24"><path d="M0 0h24v24H0z" fill="none"/><path d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z" fill="#fff"/></svg>
  </button>
</div>

<script>
  const scrollBtn = document.querySelector("#scroll-btn");

  document.addEventListener("scroll", () => {
    if (window.scrollY > 400) {
          scrollBtn.style.visibility = "visible";
      } else {
          scrollBtn.style.visibility = "hidden";
      }
  });

  scrollBtn.addEventListener("click", () => {
      window.scrollTo({ top: 0, behavior: "smooth" });
  });
</script>
        </div>
      </div>
    </section>
  </div>
  
  <div class="rst-versions" data-toggle="rst-versions" role="note" aria-label="versions">
    <span class="rst-current-version" data-toggle="rst-current-version">
      <span class="fa fa-book"> nRF Connect SDK</span>
       <span class="fa fa-caret-down"></span>
    </span>
    <div class="rst-other-versions">
      
      <div class="rst-other-version ncs">
        <a href="../../../../nrf/index.html">nRF Connect SDK</a>
      </div>
      
      <div class="rst-other-version nrfx">
        <a href="../../../../nrfx/index.html">nrfx</a>
      </div>
      
      <div class="rst-other-version nrfxlib">
        <a href="../../../../nrfxlib/README.html">nrfxlib</a>
      </div>
      
      <div class="rst-other-version zephyr">
        <a href="../../../../zephyr/index.html">Zephyr Project</a>
      </div>
      
      <div class="rst-other-version mcuboot">
        <a href="../../../../mcuboot/wrapper.html">MCUboot</a>
      </div>
      
      <div class="rst-other-version tfm">
        <a href="../../../../tfm/index.html">Trusted Firmware-M</a>
      </div>
      
      <div class="rst-other-version matter">
        <a href="../../../../matter/index.html">Matter</a>
      </div>
      
      <div class="rst-other-version kconfig">
        <a href="../../../../kconfig/index.html">Kconfig Reference</a>
      </div>
    </div>
  </div><script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>