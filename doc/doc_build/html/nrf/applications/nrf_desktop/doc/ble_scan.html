<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Bluetooth LE scanning module &mdash; nRF Connect SDK 2.3.99 documentation</title>
      <link rel="stylesheet" href="../../../_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="../../../_static/css/nordic.css" type="text/css" />
      <link rel="stylesheet" href="../../../_static/togglebutton.css" type="text/css" />
      <link rel="stylesheet" href="../../../_static/css/nrf.css" type="text/css" />
      <link rel="stylesheet" href="../../../_static/tabs.css" type="text/css" /> 
  <!--[if lt IE 9]>
    <script src="../../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="../../../" id="documentation_options" src="../../../_static/documentation_options.js"></script>
        <script src="../../../_static/jquery.js"></script>
        <script src="../../../_static/underscore.js"></script>
        <script src="../../../_static/_sphinx_javascript_frameworks_compat.js"></script>
        <script src="../../../_static/doctools.js"></script>
        <script src="../../../_static/sphinx_highlight.js"></script>
        <script src="https://www.googletagmanager.com/gtag/js?id=G-ZPVZRKFQJR"></script>
        <script src="../../../_static/js/ga-tracker.js"></script>
        <script data-culture="EN" id="CookieConsent" type="text/javascript" src="https://policy.app.cookieinformation.com/uc.js"></script>
        <script>let toggleHintShow = 'Click to show';</script>
        <script>let toggleHintHide = 'Click to hide';</script>
        <script>let toggleOpenOnPrint = 'true';</script>
        <script src="../../../_static/togglebutton.js"></script>
        <script>var togglebuttonSelector = '.toggle, .admonition.dropdown';</script>
    <script src="../../../_static/js/theme.js"></script>
<script
  type="text/javascript"
  src="../../../_static/js/ncs.js"
></script>
<script src="../../../_static/js/bootstrap.bundle.min.js"></script>

    <link rel="index" title="Index" href="../../../genindex.html" />
    <link rel="search" title="Search" href="../../../search.html" />
    <link rel="next" title="Bluetooth state power manager module" href="ble_state_pm.html" />
    <link rel="prev" title="Bluetooth LE Quality of Service module" href="ble_qos.html" />
<link
  href="../../../_static/css/bootstrap.min.css"
  rel="stylesheet"
/>
<link
  rel="shortcut icon"
  href="../../../_static/images/favicon.ico"
/>

</head>

<body class="wy-body-for-nav">
<div class="announcement"></div>
<div class="d-print-none ncs-header">
  <div class="container-xl ncs-header-top">
    <div class="row h-100">
      <div class="d-none d-md-block col-2">
        <div class="bg-white py-4 px-3 ml-2 ncs-header-logo">
          <img
            class="ncs-header-logo"
            src="../../../_static/images/nordic-logo.png"
            alt=""
          />
        </div>
      </div>
      <div
        class="col-8 col-md-7 pl-md-4 d-flex align-self-center justify-content-center"
      >
        <form class="w-75" action="../../../search.html" method="get">
          <div class="form-group">
            <input
              type="text"
              name="q"
              class="ncs-search-input form-control"
              placeholder="Search all docs..."
            />
          </div>
        </form>
      </div>
      <div class="col-4 col-md-3 d-md-block p-3 text-end">
        <div class="dropdown">
          <button
            class="btn dropdown-toggle ncs-btn-versions"
            type="button"
            id="dropdownMenuButton1"
            data-bs-toggle="dropdown"
            aria-expanded="false"
          >
            <span class="d-none d-md-inline">nRF Connect SDK</span>
            <span id="ncsversion" class="d-inline"></span>
          </button>
          <div class="dropdown-menu" aria-labelledby="dropdownMenuButton"></div>
        </div>
      </div>
    </div>
  </div>
  <div class="ncs-header-nav">
    <div class="container-xl">
      <div class="row">
        <div class="col col-12 d-flex justify-content-center">
          <nav class="navbar navbar-dark navbar-expand-lg p-0">
            <span class="navbar-brand d-block d-lg-none py-2 pl-1"
              >Documentation sets</span
            >
            <button
              class="navbar-toggler"
              type="button"
              data-bs-toggle="collapse"
              data-bs-target="#navbarNavAltMarkup"
              aria-controls="navbarNavAltMarkup"
              aria-expanded="false"
              aria-label="Toggle navigation"
            >
              <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="navbarNavAltMarkup">
              <ul class="navbar-nav">
                <li class="nav-item active py-1 px-3">
                  <a
                    class="nav-link"
                    href="../../../../nrf/index.html"
                    >nRF Connect SDK</a
                  >
                </li>
                <li><hr class="dropdown-divider" /></li>
                <li class="nav-item  py-1 px-3">
                  <a
                    class="nav-link"
                    href="../../../../nrfx/index.html"
                    >nrfx</a
                  >
                </li>
                <li><hr class="dropdown-divider" /></li>
                <li class="nav-item  py-1 px-3">
                  <a
                    class="nav-link"
                    href="../../../../nrfxlib/README.html"
                    >nrfxlib</a
                  >
                </li>
                <li><hr class="dropdown-divider" /></li>
                <li class="nav-item  py-1 px-3">
                  <a
                    class="nav-link"
                    href="../../../../zephyr/index.html"
                    >Zephyr Project</a
                  >
                </li>
                <li><hr class="dropdown-divider" /></li>
                <li class="nav-item  py-1 px-3">
                  <a
                    class="nav-link"
                    href="../../../../mcuboot/wrapper.html"
                    >MCUboot</a
                  >
                </li>
                <li><hr class="dropdown-divider" /></li>
                <li class="nav-item  py-1 px-3">
                  <a
                    class="nav-link"
                    href="../../../../tfm/index.html"
                    >Trusted Firmware-M</a
                  >
                </li>
                <li><hr class="dropdown-divider" /></li>
                <li class="nav-item  py-1 px-3">
                  <a
                    class="nav-link"
                    href="../../../../matter/index.html"
                    >Matter</a
                  >
                </li>
                <li><hr class="dropdown-divider" /></li>
                <li class="nav-item  py-1 px-3">
                  <a
                    class="nav-link"
                    href="../../../../kconfig/index.html"
                    >Kconfig Reference</a
                  >
                </li>
                <li><hr class="dropdown-divider" /></li>
              </ul>
            </div>
          </nav>
        </div>
      </div>
    </div>
  </div>
</div>

  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
            <a href="../../../index.html" class="icon icon-home"> nRF Connect SDK
          </a>
              <div class="version">
                2.3.99
              </div>
<div id="searchbox" role="search">
  <div class="searchformwrapper">
    <form id="rtd-search-form" class="wy-form" action="../../../search.html" method="get">
      <input type="text" name="q" placeholder="Search docs" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
  </div>
</div>
<script>$('#searchbox').show(0);</script>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Contents</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../../introduction.html">Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../getting_started.html">Getting started</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../dev_model.html">Development model</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../app_dev.html">Application development</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../security.html">Security</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../ecosystem_integration.html">Ecosystems integration</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../nrf91.html">Working with nRF91 Series</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../nrf70.html">Working with nRF70 Series</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../nrf53.html">Working with nRF53 Series</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../nrf52.html">Working with nRF52 Series</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../protocols.html">Protocols</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../../../applications.html">Applications</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../../connectivity_bridge/README.html">Connectivity bridge</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../asset_tracker_v2/README.html">nRF9160: Asset Tracker v2</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../serial_lte_modem/README.html">nRF9160: Serial LTE modem</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="../README.html">nRF Desktop</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="../README.html#overview-firmware-architecture">Overview: Firmware architecture</a></li>
<li class="toctree-l3"><a class="reference internal" href="../README.html#requirements">Requirements</a></li>
<li class="toctree-l3"><a class="reference internal" href="../README.html#user-interface">User interface</a></li>
<li class="toctree-l3"><a class="reference internal" href="../README.html#configuration">Configuration</a></li>
<li class="toctree-l3"><a class="reference internal" href="../README.html#building-and-running">Building and running</a></li>
<li class="toctree-l3"><a class="reference internal" href="../README.html#integrating-your-own-hardware">Integrating your own hardware</a></li>
<li class="toctree-l3"><a class="reference internal" href="../README.html#dependencies">Dependencies</a></li>
<li class="toctree-l3 current"><a class="reference internal" href="../README.html#application-internal-modules">Application internal modules</a><ul class="current">
<li class="toctree-l4"><a class="reference internal" href="main.html">Basic module (main)</a></li>
<li class="toctree-l4"><a class="reference internal" href="battery_charger.html">Battery charger module</a></li>
<li class="toctree-l4"><a class="reference internal" href="battery_meas.html">Battery measurement module</a></li>
<li class="toctree-l4"><a class="reference internal" href="ble_adv.html">Bluetooth LE advertising module</a></li>
<li class="toctree-l4"><a class="reference internal" href="ble_bond.html">Bluetooth LE bond module</a></li>
<li class="toctree-l4"><a class="reference internal" href="ble_conn_params.html">Bluetooth LE connection parameters module</a></li>
<li class="toctree-l4"><a class="reference internal" href="ble_discovery.html">Bluetooth LE discovery module</a></li>
<li class="toctree-l4"><a class="reference internal" href="ble_latency.html">Bluetooth LE latency module</a></li>
<li class="toctree-l4"><a class="reference internal" href="ble_passkey.html">Bluetooth LE passkey module</a></li>
<li class="toctree-l4"><a class="reference internal" href="ble_qos.html">Bluetooth LE Quality of Service module</a></li>
<li class="toctree-l4 current"><a class="current reference internal" href="#">Bluetooth LE scanning module</a></li>
<li class="toctree-l4"><a class="reference internal" href="ble_state_pm.html">Bluetooth state power manager module</a></li>
<li class="toctree-l4"><a class="reference internal" href="ble_state.html">Bluetooth LE state module</a></li>
<li class="toctree-l4"><a class="reference internal" href="board.html">Board module</a></li>
<li class="toctree-l4"><a class="reference internal" href="buttons.html">Buttons module</a></li>
<li class="toctree-l4"><a class="reference internal" href="buttons_sim.html">Button simulator module</a></li>
<li class="toctree-l4"><a class="reference internal" href="click_detector.html">Click detector module</a></li>
<li class="toctree-l4"><a class="reference internal" href="config_channel.html">Configuration channel</a></li>
<li class="toctree-l4"><a class="reference internal" href="cpu_meas.html">CPU measurement module</a></li>
<li class="toctree-l4"><a class="reference internal" href="dev_descr.html">Device description module</a></li>
<li class="toctree-l4"><a class="reference internal" href="dfu.html">Device Firmware Upgrade module</a></li>
<li class="toctree-l4"><a class="reference internal" href="failsafe.html">Failsafe module</a></li>
<li class="toctree-l4"><a class="reference internal" href="fast_pair_app.html">Fast Pair module</a></li>
<li class="toctree-l4"><a class="reference internal" href="fn_keys.html">Function key module</a></li>
<li class="toctree-l4"><a class="reference internal" href="bas.html">GATT Battery Service module</a></li>
<li class="toctree-l4"><a class="reference internal" href="hid_forward.html">HID forward module</a></li>
<li class="toctree-l4"><a class="reference internal" href="hid_state.html">HID state module</a></li>
<li class="toctree-l4"><a class="reference internal" href="hid_state_pm.html">HID state power manager module</a></li>
<li class="toctree-l4"><a class="reference internal" href="hids.html">HID Service module</a></li>
<li class="toctree-l4"><a class="reference internal" href="info.html">Info module</a></li>
<li class="toctree-l4"><a class="reference internal" href="led_state.html">LED state module</a></li>
<li class="toctree-l4"><a class="reference internal" href="led_stream.html">LED stream module</a></li>
<li class="toctree-l4"><a class="reference internal" href="leds.html">LEDs module</a></li>
<li class="toctree-l4"><a class="reference internal" href="motion.html">Motion module</a></li>
<li class="toctree-l4"><a class="reference internal" href="passkey.html">Passkey module</a></li>
<li class="toctree-l4"><a class="reference internal" href="power_manager.html">Power manager module</a></li>
<li class="toctree-l4"><a class="reference internal" href="nrf_profiler_sync.html">nRF Profiler synchronization module</a></li>
<li class="toctree-l4"><a class="reference internal" href="qos.html">Quality of Service module</a></li>
<li class="toctree-l4"><a class="reference internal" href="selector.html">Selector module</a></li>
<li class="toctree-l4"><a class="reference internal" href="smp.html">Simple Management Protocol module</a></li>
<li class="toctree-l4"><a class="reference internal" href="settings_loader.html">Settings loader module</a></li>
<li class="toctree-l4"><a class="reference internal" href="usb_state_pm.html">USB state power manager module</a></li>
<li class="toctree-l4"><a class="reference internal" href="usb_state.html">USB state module</a></li>
<li class="toctree-l4"><a class="reference internal" href="watchdog.html">Watchdog module</a></li>
<li class="toctree-l4"><a class="reference internal" href="wheel.html">Wheel module</a></li>
<li class="toctree-l4"><a class="reference internal" href="constlat.html">Constant latency hotfix module</a></li>
<li class="toctree-l4"><a class="reference internal" href="hfclk_lock.html">High frequency clock lock hotfix module</a></li>
<li class="toctree-l4"><a class="reference internal" href="event_rel_modules.html">Source and sink module lists</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../README.html#application-configuration-options">Application configuration options</a></li>
<li class="toctree-l3"><a class="reference internal" href="../README.html#api-documentation">API documentation</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../nrf5340_audio/README.html">nRF5340 Audio</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../machine_learning/README.html">nRF Machine Learning</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../matter_weather_station/README.html">Thingy:53: Matter weather station</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../zigbee_weather_station/README.html">Thingy:53: Zigbee weather station</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../samples.html">Samples</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../drivers.html">Drivers</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../libraries/index.html">Libraries</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../scripts.html">Scripts</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../release_notes.html">Release notes</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../known_issues.html">Known issues</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../software_maturity.html">Software maturity levels</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../documentation.html">About this documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../glossary.html">Glossary</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../../index.html">nRF Connect SDK</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../../../index.html" class="icon icon-home"></a></li>
          <li class="breadcrumb-item"><a href="../../../applications.html">Applications</a></li>
          <li class="breadcrumb-item"><a href="../README.html">nRF Desktop</a></li>
      <li class="breadcrumb-item active">Bluetooth LE scanning module</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../../../_sources/applications/nrf_desktop/doc/ble_scan.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="bluetooth-le-scanning-module">
<span id="nrf-desktop-ble-scan"></span><h1>Bluetooth LE scanning module<a class="headerlink" href="#bluetooth-le-scanning-module" title="Permalink to this heading"></a></h1>
<div class="contents local topic" id="contents">
<ul class="simple">
<li><p><a class="reference internal" href="#module-events" id="id6">Module events</a></p></li>
<li><p><a class="reference internal" href="#configuration" id="id7">Configuration</a></p>
<ul>
<li><p><a class="reference internal" href="#scanning-module-configuration" id="id8">Scanning module configuration</a></p></li>
<li><p><a class="reference internal" href="#scanning-not-started" id="id9">Scanning not started</a></p></li>
<li><p><a class="reference internal" href="#scanning-interrupted" id="id10">Scanning interrupted</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#implementation-details" id="id11">Implementation details</a></p>
<ul>
<li><p><a class="reference internal" href="#bluetooth-connection-interval" id="id12">Bluetooth connection interval</a></p></li>
</ul>
</li>
</ul>
</div>
<p>The nRF Desktop’s Bluetooth® LE scanning module is based on the nRF Connect SDK’s <a class="reference internal" href="../../../libraries/bluetooth_services/scan.html#nrf-bt-scan-readme"><span class="std std-ref">Scanning module</span></a>.</p>
<p>Use the Bluetooth LE scanning module for the following purposes:</p>
<ul class="simple">
<li><p>Apply scanning filters.</p></li>
<li><p>Control the Bluetooth scanning.</p></li>
<li><p>Initiate the Bluetooth connections.</p></li>
</ul>
<p>This module can only be used by an nRF Desktop central.</p>
<section id="module-events">
<h2><a class="toc-backref" href="#id6">Module events</a><a class="headerlink" href="#module-events" title="Permalink to this heading"></a></h2>
<table class="docutils align-default">
<colgroup>
<col style="width: 28%" />
<col style="width: 20%" />
<col style="width: 8%" />
<col style="width: 16%" />
<col style="width: 27%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Source Module</p></th>
<th class="head"><p>Input Event</p></th>
<th class="head"><p>This Module</p></th>
<th class="head"><p>Output Event</p></th>
<th class="head"><p>Sink Module</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><a class="reference internal" href="ble_discovery.html#nrf-desktop-ble-discovery"><span class="std std-ref">Bluetooth LE discovery module</span></a></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">ble_discovery_complete_event</span></code></p></td>
<td rowspan="18"><p><code class="docutils literal notranslate"><span class="pre">ble_scan</span></code></p></td>
<td rowspan="16"></td>
<td rowspan="16"></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="ble_adv.html#nrf-desktop-ble-adv"><span class="std std-ref">Bluetooth LE advertising module</span></a></p></td>
<td rowspan="2"><p><code class="docutils literal notranslate"><span class="pre">ble_peer_event</span></code></p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="ble_state.html#nrf-desktop-ble-state"><span class="std std-ref">Bluetooth LE state module</span></a></p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="ble_bond.html#nrf-desktop-ble-bond"><span class="std std-ref">Bluetooth LE bond module</span></a></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">ble_peer_operation_event</span></code></p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="hid_forward.html#nrf-desktop-hid-forward"><span class="std std-ref">HID forward module</span></a></p></td>
<td rowspan="4"><p><code class="docutils literal notranslate"><span class="pre">hid_report_event</span></code></p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="hid_state.html#nrf-desktop-hid-state"><span class="std std-ref">HID state module</span></a></p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="hids.html#nrf-desktop-hids"><span class="std std-ref">HID Service module</span></a></p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="usb_state.html#nrf-desktop-usb-state"><span class="std std-ref">USB state module</span></a></p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="event_rel_modules.html#nrf-desktop-module-state-event-sources"><span class="std std-ref">Source modules for module_state_event</span></a></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">module_state_event</span></code></p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="power_manager.html#nrf-desktop-power-manager"><span class="std std-ref">Power manager module</span></a></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">power_down_event</span></code></p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="ble_adv.html#nrf-desktop-ble-adv"><span class="std std-ref">Bluetooth LE advertising module</span></a></p></td>
<td rowspan="6"><p><code class="docutils literal notranslate"><span class="pre">wake_up_event</span></code></p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="buttons.html#nrf-desktop-buttons"><span class="std std-ref">Buttons module</span></a></p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="hid_forward.html#nrf-desktop-hid-forward"><span class="std std-ref">HID forward module</span></a></p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="motion.html#nrf-desktop-motion"><span class="std std-ref">Motion module</span></a></p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="power_manager.html#nrf-desktop-power-manager"><span class="std std-ref">Power manager module</span></a></p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="wheel.html#nrf-desktop-wheel"><span class="std std-ref">Wheel module</span></a></p></td>
</tr>
<tr class="row-even"><td rowspan="2"></td>
<td rowspan="2"></td>
<td><p><code class="docutils literal notranslate"><span class="pre">ble_peer_search_event</span></code></p></td>
<td><p><a class="reference internal" href="led_state.html#nrf-desktop-led-state"><span class="std std-ref">LED state module</span></a></p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">module_state_event</span></code></p></td>
<td><p><a class="reference internal" href="event_rel_modules.html#nrf-desktop-module-state-event-sinks"><span class="std std-ref">Sink modules for module_state_event</span></a></p></td>
</tr>
</tbody>
</table>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>See the <a class="reference internal" href="../README.html#nrf-desktop-architecture"><span class="std std-ref">Overview: Firmware architecture</span></a> for more information about the event-based communication in the nRF Desktop application and about how to read this table.</p>
</div>
</section>
<section id="configuration">
<h2><a class="toc-backref" href="#id7">Configuration</a><a class="headerlink" href="#configuration" title="Permalink to this heading"></a></h2>
<p>Complete the following steps to enable the Bluetooth LE scanning module:</p>
<ol class="arabic">
<li><p>Complete the basic Bluetooth configuration, as described in the <a class="reference internal" href="../README.html#nrf-desktop-bluetooth-guide"><span class="std std-ref">Bluetooth in nRF Desktop</span></a> documentation.
Make sure that both <a class="reference internal" href="../README.html#config-desktop-app-options"><span class="std std-ref">CONFIG_DESKTOP_ROLE_HID_DONGLE</span></a> and <a class="reference internal" href="../README.html#config-desktop-app-options"><span class="std std-ref">CONFIG_DESKTOP_BT_CENTRAL</span></a> options are enabled.
The Bluetooth LE scanning module is enabled by the <a class="reference internal" href="../README.html#config-desktop-app-options"><span class="std std-ref">CONFIG_DESKTOP_BLE_SCAN_ENABLE</span></a> Kconfig option which is implied by <a class="reference internal" href="../README.html#config-desktop-app-options"><span class="std std-ref">CONFIG_DESKTOP_BT_CENTRAL</span></a> Kconfig option together with other application modules.
These modules that are required for HID dongle that forwards the data from HID peripherals connected over Bluetooth.</p></li>
<li><p>Make sure that the number of scan filters based on the Bluetooth address (<code class="xref kconfig kconfig-option docutils literal notranslate"><span class="pre">CONFIG_BT_SCAN_ADDRESS_CNT</span></code>) is equal to the number of Bluetooth bonds.
The number of Bluetooth bonds is defined by the <code class="xref kconfig kconfig-option docutils literal notranslate"><span class="pre">CONFIG_BT_MAX_PAIRED</span></code> Kconfig option.
The Bluetooth LE scanning module uses the Bluetooth address filters to look for bonded peripherals.</p></li>
<li><p>Make sure that the number of scan filters based on the Bluetooth name (<code class="xref kconfig kconfig-option docutils literal notranslate"><span class="pre">CONFIG_BT_SCAN_NAME_CNT</span></code>) is equal to the number of peripheral types the nRF Desktop central connects to.
The Bluetooth LE scanning module uses Bluetooth name filters to look for unbonded peripherals.
The peripheral type may be either a mouse or a keyboard.</p></li>
<li><p>If you want to limit the number of attempts to connect to a device, you can use the connection attempt filter (<code class="xref kconfig kconfig-option docutils literal notranslate"><span class="pre">CONFIG_BT_SCAN_CONN_ATTEMPTS_FILTER</span></code>).
The Kconfig option is enabled by default.
After the predefined number of disconnections or connection failures, the nRF Desktop central will no longer try to connect with the given peripheral device.
This is done to prevent connecting and disconnecting with a peripheral in a never-ending loop.</p>
<p>You can further configure this setting with the following Kconfig options:</p>
<ul class="simple">
<li><p><code class="xref kconfig kconfig-option docutils literal notranslate"><span class="pre">CONFIG_BT_SCAN_CONN_ATTEMPTS_FILTER_LEN</span></code> - This option defines the maximum number of filtered devices.</p></li>
<li><p><code class="xref kconfig kconfig-option docutils literal notranslate"><span class="pre">CONFIG_BT_SCAN_CONN_ATTEMPTS_COUNT</span></code> - This option defines the connection attempt count for a given peripheral.</p></li>
</ul>
<p>The <a class="reference internal" href="../../../libraries/bluetooth_services/scan.html#nrf-bt-scan-readme"><span class="std std-ref">Scanning module</span></a> counts all disconnections for a peripheral.
The Bluetooth LE scanning module uses <a class="reference internal" href="../../../libraries/bluetooth_services/scan.html#c.bt_scan_conn_attempts_filter_clear" title="bt_scan_conn_attempts_filter_clear"><code class="xref c c-func docutils literal notranslate"><span class="pre">bt_scan_conn_attempts_filter_clear()</span></code></a> to clear all the connection attempt counters on the following occasions:</p>
<ul class="simple">
<li><p>After a successful peripheral discovery takes place (on <code class="docutils literal notranslate"><span class="pre">ble_discovery_complete_event</span></code>).</p></li>
<li><p>When you request scan start or peer erase.</p></li>
</ul>
<p>If filters are not cleared by the application, the Bluetooth Central will be unable to reconnect to the peripheral after exceeding the maximum connection attempts.</p>
</li>
<li><p>Configure the maximum number of bonded mice (<a class="reference internal" href="../README.html#config-desktop-app-options"><span class="std std-ref">CONFIG_DESKTOP_BLE_SCAN_MOUSE_LIMIT</span></a>) and keyboards (<a class="reference internal" href="../README.html#config-desktop-app-options"><span class="std std-ref">CONFIG_DESKTOP_BLE_SCAN_KEYBOARD_LIMIT</span></a>) for the nRF Desktop central.
By default, the nRF Desktop central connects and bonds with only one mouse and one keyboard.</p></li>
<li><p>Define the Bluetooth name filters in the <code class="file docutils literal notranslate"><span class="pre">ble_scan_def.h</span></code> file that is located in the board-specific directory in the application configuration directory.
You must define a Bluetooth name filter for every peripheral type the nRF Desktop central connects to.
For an example, see <code class="file docutils literal notranslate"><span class="pre">configuration/nrf52840dongle_nrf52840/ble_scan_def.h</span></code>.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The Bluetooth device name for given peripheral is defined as the <code class="xref kconfig kconfig-option docutils literal notranslate"><span class="pre">CONFIG_BT_DEVICE_NAME</span></code> Kconfig option in the peripheral’s configuration.
For more detailed information about the Bluetooth advertising configuration in the nRF Desktop application, see the <a class="reference internal" href="ble_adv.html#nrf-desktop-ble-adv"><span class="std std-ref">Bluetooth LE advertising module</span></a> documentation.</p>
</div>
</li>
<li><p>Set the <a class="reference internal" href="../README.html#config-desktop-app-options"><span class="std std-ref">CONFIG_DESKTOP_BLE_SCAN_PM_EVENTS</span></a> to block scanning in the power down mode to decrease the power consumption.
The Kconfig option is enabled by default.</p></li>
</ol>
<p>By default, the nRF Desktop central always looks for both bonded and unbonded peripherals.
You can set the <a class="reference internal" href="../README.html#config-desktop-app-options"><span class="std std-ref">CONFIG_DESKTOP_BLE_NEW_PEER_SCAN_REQUEST</span></a> option to make the device look for unbonded peripherals only on user request.
The request is submitted by <a class="reference internal" href="ble_bond.html#nrf-desktop-ble-bond"><span class="std std-ref">Bluetooth LE bond module</span></a> as <a class="reference internal" href="../../../libraries/caf/caf_overview.html#c.ble_peer_operation_event" title="ble_peer_operation_event"><code class="xref c c-struct docutils literal notranslate"><span class="pre">ble_peer_operation_event</span></code></a> with <a class="reference internal" href="../../../libraries/caf/caf_overview.html#c.ble_peer_operation_event.op" title="ble_peer_operation_event.op"><code class="xref c c-member docutils literal notranslate"><span class="pre">ble_peer_operation_event.op</span></code></a> set to <a class="reference internal" href="../../../libraries/caf/caf_overview.html#c.peer_operation.PEER_OPERATION_SCAN_REQUEST" title="PEER_OPERATION_SCAN_REQUEST"><code class="xref c c-enumerator docutils literal notranslate"><span class="pre">PEER_OPERATION_SCAN_REQUEST</span></code></a>.</p>
<p>The central always looks for new bonds also after the bond erase (on <a class="reference internal" href="../../../libraries/caf/caf_overview.html#c.ble_peer_operation_event" title="ble_peer_operation_event"><code class="xref c c-struct docutils literal notranslate"><span class="pre">ble_peer_operation_event</span></code></a> with <a class="reference internal" href="../../../libraries/caf/caf_overview.html#c.ble_peer_operation_event.op" title="ble_peer_operation_event.op"><code class="xref c c-member docutils literal notranslate"><span class="pre">ble_peer_operation_event.op</span></code></a> set to <a class="reference internal" href="../../../libraries/caf/caf_overview.html#c.peer_operation.PEER_OPERATION_ERASED" title="PEER_OPERATION_ERASED"><code class="xref c c-enumerator docutils literal notranslate"><span class="pre">PEER_OPERATION_ERASED</span></code></a>).
If <a class="reference internal" href="../README.html#config-desktop-app-options"><span class="std std-ref">CONFIG_DESKTOP_BLE_NEW_PEER_SCAN_REQUEST</span></a> is enabled, you can also set the <a class="reference internal" href="../README.html#config-desktop-app-options"><span class="std std-ref">CONFIG_DESKTOP_BLE_NEW_PEER_SCAN_ON_BOOT</span></a> option to make the central scan for new peers after every boot.</p>
<p>The following scanning scenarios are possible:</p>
<ul class="simple">
<li><p>If no peripheral is connected, the central scans for the peripheral devices without interruption.</p></li>
<li><p>If a peripheral is connected, the scanning is triggered periodically.
If none of the connected peripherals is in use for at least <a class="reference internal" href="../README.html#config-desktop-app-options"><span class="std std-ref">CONFIG_DESKTOP_BLE_SCAN_START_TIMEOUT_S</span></a>, the scanning is started.</p></li>
</ul>
<section id="scanning-module-configuration">
<h3><a class="toc-backref" href="#id8">Scanning module configuration</a><a class="headerlink" href="#scanning-module-configuration" title="Permalink to this heading"></a></h3>
<p>The Bluetooth LE scanning module relies on <a class="reference internal" href="../../../libraries/bluetooth_services/scan.html#nrf-bt-scan-readme"><span class="std std-ref">Scanning module</span></a> to perform Bluetooth scanning.
The Bluetooth LE scanning module selects <code class="xref kconfig kconfig-option docutils literal notranslate"><span class="pre">CONFIG_BT_SCAN</span></code> and <code class="xref kconfig kconfig-option docutils literal notranslate"><span class="pre">CONFIG_BT_SCAN_FILTER_ENABLE</span></code>.
Apart from that the following default values are applied:</p>
<ul class="simple">
<li><p><code class="xref kconfig kconfig-option docutils literal notranslate"><span class="pre">CONFIG_BT_SCAN_NAME_CNT</span></code> is set to <code class="docutils literal notranslate"><span class="pre">2</span></code>.
By default, nRF Desktop dongle connects to peripherals that are either keyboard or mouse.</p></li>
<li><p><code class="xref kconfig kconfig-option docutils literal notranslate"><span class="pre">CONFIG_BT_SCAN_ADDRESS_CNT</span></code> is set to <code class="xref kconfig kconfig-option docutils literal notranslate"><span class="pre">CONFIG_BT_MAX_PAIRED</span></code>.
The dongle scans for all of the bonded peripherals.</p></li>
<li><p><code class="xref kconfig kconfig-option docutils literal notranslate"><span class="pre">CONFIG_BT_SCAN_CONN_ATTEMPTS_FILTER</span></code> is enabled.</p></li>
</ul>
</section>
<section id="scanning-not-started">
<h3><a class="toc-backref" href="#id9">Scanning not started</a><a class="headerlink" href="#scanning-not-started" title="Permalink to this heading"></a></h3>
<p>The scanning will not start if one of the following conditions occurs:</p>
<ul class="simple">
<li><p>There are no more free Bluetooth connections.</p></li>
<li><p>The <a class="reference internal" href="ble_discovery.html#nrf-desktop-ble-discovery"><span class="std std-ref">Bluetooth LE discovery module</span></a> is in the process of discovering a peer.</p></li>
<li><p>The central is going to scan only for bonded peers and all the bonded peers are already connected.</p></li>
<li><p>The central is in the power down mode and <code class="xref kconfig kconfig-option docutils literal notranslate"><span class="pre">CONFIG_DESKTOP_BLE_SCAN_PM_EVENTS</span></code> is enabled.</p></li>
</ul>
<p>The number of Bluetooth connections is defined as the <code class="xref kconfig kconfig-option docutils literal notranslate"><span class="pre">CONFIG_BT_MAX_CONN</span></code> Kconfig option.</p>
</section>
<section id="scanning-interrupted">
<h3><a class="toc-backref" href="#id10">Scanning interrupted</a><a class="headerlink" href="#scanning-interrupted" title="Permalink to this heading"></a></h3>
<p>The scanning is interrupted if one of the following conditions occurs:</p>
<ul class="simple">
<li><p>A connected peripheral is in use.
Scanning in this situation will have a negative impact on user experience.</p></li>
<li><p>The maximum scan duration specified by <a class="reference internal" href="../README.html#config-desktop-app-options"><span class="std std-ref">CONFIG_DESKTOP_BLE_SCAN_DURATION_S</span></a> times out.</p></li>
</ul>
<p>The scanning is never interrupted if there is no connected Bluetooth peer.
If <code class="xref kconfig kconfig-option docutils literal notranslate"><span class="pre">CONFIG_DESKTOP_BLE_SCAN_PM_EVENTS</span></code> is enabled, the power down event will also interrupt scanning.</p>
</section>
</section>
<section id="implementation-details">
<h2><a class="toc-backref" href="#id11">Implementation details</a><a class="headerlink" href="#implementation-details" title="Permalink to this heading"></a></h2>
<p>The Bluetooth LE scanning module stores the following information for every bonded peer:</p>
<ul class="simple">
<li><p>Peripheral Bluetooth address.</p></li>
<li><p>Peripheral type (mouse or keyboard).</p></li>
<li><p>Information about Low Latency Packet Mode (LLPM) support.</p></li>
</ul>
<p>The module uses Zephyr’s <span class="xref std std-ref">zephyr:settings_api</span> subsystem to store the information in the non-volatile memory.
This information is required to filter out unbonded devices, because the nRF Desktop central connects and bonds only with a defined number of mice and keyboards.</p>
<section id="bluetooth-connection-interval">
<h3><a class="toc-backref" href="#id12">Bluetooth connection interval</a><a class="headerlink" href="#bluetooth-connection-interval" title="Permalink to this heading"></a></h3>
<p>After the scan filter match, the following happens:</p>
<ol class="loweralpha simple">
<li><p>The scanning is stopped and the nRF Connect SDK’s <a class="reference internal" href="../../../libraries/bluetooth_services/scan.html#nrf-bt-scan-readme"><span class="std std-ref">Scanning module</span></a> automatically establishes the Bluetooth connection with the peripheral.
The initial Bluetooth connection interval is set by default to 7.5 ms, that is to the shortest connection interval allowed by the Bluetooth specification.</p></li>
<li><p>The peer discovery is started.</p></li>
<li><p>After the <a class="reference internal" href="ble_discovery.html#nrf-desktop-ble-discovery"><span class="std std-ref">Bluetooth LE discovery module</span></a> completes the peer discovery, the <a class="reference internal" href="ble_conn_params.html#nrf-desktop-ble-conn-params"><span class="std std-ref">Bluetooth LE connection parameters module</span></a> receives the <code class="docutils literal notranslate"><span class="pre">ble_discovery_complete_event</span></code> and updates the Bluetooth connection interval.
At this point, the scanning can be restarted.</p></li>
</ol>
<div class="admonition important">
<p class="admonition-title">Important</p>
<p>If the dongle supports Low Latency Packet Mode (<code class="xref kconfig kconfig-option docutils literal notranslate"><span class="pre">CONFIG_CAF_BLE_USE_LLPM</span></code>) and more than one Bluetooth connection (<code class="xref kconfig kconfig-option docutils literal notranslate"><span class="pre">CONFIG_BT_MAX_CONN</span></code>), a 10-ms connection interval is used instead of 7.5 ms.
This is done to avoid Bluetooth scheduling issues that may lead to HID input report rate drops and disconnections.</p>
</div>
</section>
</section>
</section>


           </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="ble_state_pm.html" class="btn btn-neutral float-right" title="Bluetooth state power manager module" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="ble_qos.html" class="btn btn-neutral" title="Bluetooth LE Quality of Service module" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">

<table>
<tr>
<td>
    <p>
        &copy; Copyright 2019-2023, Nordic Semiconductor.
      Last updated on Mar 20, 2023.

    </p>
</td>
<td id="nordiclogo">
  <a href="https://www.nordicsemi.com/"><img src="../../../_static/images/nordic-logo.png" border="0"/></a>
</td>
</tr>
</table>
  </div> 


</footer>

<div id="scroll-container">
  <button type="button" id="scroll-btn" class="btn">
    <svg xmlns="http://www.w3.org/2000/svg" height="24" viewBox="0 0 24 24" width="24"><path d="M0 0h24v24H0z" fill="none"/><path d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z" fill="#fff"/></svg>
  </button>
</div>

<script>
  const scrollBtn = document.querySelector("#scroll-btn");

  document.addEventListener("scroll", () => {
    if (window.scrollY > 400) {
          scrollBtn.style.visibility = "visible";
      } else {
          scrollBtn.style.visibility = "hidden";
      }
  });

  scrollBtn.addEventListener("click", () => {
      window.scrollTo({ top: 0, behavior: "smooth" });
  });
</script>
        </div>
      </div>
    </section>
  </div>
  
  <div class="rst-versions" data-toggle="rst-versions" role="note" aria-label="versions">
    <span class="rst-current-version" data-toggle="rst-current-version">
      <span class="fa fa-book"> nRF Connect SDK</span>
       <span class="fa fa-caret-down"></span>
    </span>
    <div class="rst-other-versions">
      
      <div class="rst-other-version ncs">
        <a href="../../../../nrf/index.html">nRF Connect SDK</a>
      </div>
      
      <div class="rst-other-version nrfx">
        <a href="../../../../nrfx/index.html">nrfx</a>
      </div>
      
      <div class="rst-other-version nrfxlib">
        <a href="../../../../nrfxlib/README.html">nrfxlib</a>
      </div>
      
      <div class="rst-other-version zephyr">
        <a href="../../../../zephyr/index.html">Zephyr Project</a>
      </div>
      
      <div class="rst-other-version mcuboot">
        <a href="../../../../mcuboot/wrapper.html">MCUboot</a>
      </div>
      
      <div class="rst-other-version tfm">
        <a href="../../../../tfm/index.html">Trusted Firmware-M</a>
      </div>
      
      <div class="rst-other-version matter">
        <a href="../../../../matter/index.html">Matter</a>
      </div>
      
      <div class="rst-other-version kconfig">
        <a href="../../../../kconfig/index.html">Kconfig Reference</a>
      </div>
    </div>
  </div><script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>