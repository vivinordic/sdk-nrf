<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Configuration channel &mdash; nRF Connect SDK 2.3.99 documentation</title>
      <link rel="stylesheet" href="../../../_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="../../../_static/css/nordic.css" type="text/css" />
      <link rel="stylesheet" href="../../../_static/togglebutton.css" type="text/css" />
      <link rel="stylesheet" href="../../../_static/css/nrf.css" type="text/css" />
      <link rel="stylesheet" href="../../../_static/tabs.css" type="text/css" /> 
  <!--[if lt IE 9]>
    <script src="../../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="../../../" id="documentation_options" src="../../../_static/documentation_options.js"></script>
        <script src="../../../_static/jquery.js"></script>
        <script src="../../../_static/underscore.js"></script>
        <script src="../../../_static/_sphinx_javascript_frameworks_compat.js"></script>
        <script src="../../../_static/doctools.js"></script>
        <script src="../../../_static/sphinx_highlight.js"></script>
        <script src="https://www.googletagmanager.com/gtag/js?id=G-ZPVZRKFQJR"></script>
        <script src="../../../_static/js/ga-tracker.js"></script>
        <script data-culture="EN" id="CookieConsent" type="text/javascript" src="https://policy.app.cookieinformation.com/uc.js"></script>
        <script>let toggleHintShow = 'Click to show';</script>
        <script>let toggleHintHide = 'Click to hide';</script>
        <script>let toggleOpenOnPrint = 'true';</script>
        <script src="../../../_static/togglebutton.js"></script>
        <script>var togglebuttonSelector = '.toggle, .admonition.dropdown';</script>
    <script src="../../../_static/js/theme.js"></script>
<script
  type="text/javascript"
  src="../../../_static/js/ncs.js"
></script>
<script src="../../../_static/js/bootstrap.bundle.min.js"></script>

    <link rel="index" title="Index" href="../../../genindex.html" />
    <link rel="search" title="Search" href="../../../search.html" />
    <link rel="next" title="CPU measurement module" href="cpu_meas.html" />
    <link rel="prev" title="Click detector module" href="click_detector.html" />
<link
  href="../../../_static/css/bootstrap.min.css"
  rel="stylesheet"
/>
<link
  rel="shortcut icon"
  href="../../../_static/images/favicon.ico"
/>

</head>

<body class="wy-body-for-nav">
<div class="announcement"></div>
<div class="d-print-none ncs-header">
  <div class="container-xl ncs-header-top">
    <div class="row h-100">
      <div class="d-none d-md-block col-2">
        <div class="bg-white py-4 px-3 ml-2 ncs-header-logo">
          <img
            class="ncs-header-logo"
            src="../../../_static/images/nordic-logo.png"
            alt=""
          />
        </div>
      </div>
      <div
        class="col-8 col-md-7 pl-md-4 d-flex align-self-center justify-content-center"
      >
        <form class="w-75" action="../../../search.html" method="get">
          <div class="form-group">
            <input
              type="text"
              name="q"
              class="ncs-search-input form-control"
              placeholder="Search all docs..."
            />
          </div>
        </form>
      </div>
      <div class="col-4 col-md-3 d-md-block p-3 text-end">
        <div class="dropdown">
          <button
            class="btn dropdown-toggle ncs-btn-versions"
            type="button"
            id="dropdownMenuButton1"
            data-bs-toggle="dropdown"
            aria-expanded="false"
          >
            <span class="d-none d-md-inline">nRF Connect SDK</span>
            <span id="ncsversion" class="d-inline"></span>
          </button>
          <div class="dropdown-menu" aria-labelledby="dropdownMenuButton"></div>
        </div>
      </div>
    </div>
  </div>
  <div class="ncs-header-nav">
    <div class="container-xl">
      <div class="row">
        <div class="col col-12 d-flex justify-content-center">
          <nav class="navbar navbar-dark navbar-expand-lg p-0">
            <span class="navbar-brand d-block d-lg-none py-2 pl-1"
              >Documentation sets</span
            >
            <button
              class="navbar-toggler"
              type="button"
              data-bs-toggle="collapse"
              data-bs-target="#navbarNavAltMarkup"
              aria-controls="navbarNavAltMarkup"
              aria-expanded="false"
              aria-label="Toggle navigation"
            >
              <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="navbarNavAltMarkup">
              <ul class="navbar-nav">
                <li class="nav-item active py-1 px-3">
                  <a
                    class="nav-link"
                    href="../../../../nrf/index.html"
                    >nRF Connect SDK</a
                  >
                </li>
                <li><hr class="dropdown-divider" /></li>
                <li class="nav-item  py-1 px-3">
                  <a
                    class="nav-link"
                    href="../../../../nrfx/index.html"
                    >nrfx</a
                  >
                </li>
                <li><hr class="dropdown-divider" /></li>
                <li class="nav-item  py-1 px-3">
                  <a
                    class="nav-link"
                    href="../../../../nrfxlib/README.html"
                    >nrfxlib</a
                  >
                </li>
                <li><hr class="dropdown-divider" /></li>
                <li class="nav-item  py-1 px-3">
                  <a
                    class="nav-link"
                    href="../../../../zephyr/index.html"
                    >Zephyr Project</a
                  >
                </li>
                <li><hr class="dropdown-divider" /></li>
                <li class="nav-item  py-1 px-3">
                  <a
                    class="nav-link"
                    href="../../../../mcuboot/wrapper.html"
                    >MCUboot</a
                  >
                </li>
                <li><hr class="dropdown-divider" /></li>
                <li class="nav-item  py-1 px-3">
                  <a
                    class="nav-link"
                    href="../../../../tfm/index.html"
                    >Trusted Firmware-M</a
                  >
                </li>
                <li><hr class="dropdown-divider" /></li>
                <li class="nav-item  py-1 px-3">
                  <a
                    class="nav-link"
                    href="../../../../matter/index.html"
                    >Matter</a
                  >
                </li>
                <li><hr class="dropdown-divider" /></li>
                <li class="nav-item  py-1 px-3">
                  <a
                    class="nav-link"
                    href="../../../../kconfig/index.html"
                    >Kconfig Reference</a
                  >
                </li>
                <li><hr class="dropdown-divider" /></li>
              </ul>
            </div>
          </nav>
        </div>
      </div>
    </div>
  </div>
</div>

  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
            <a href="../../../index.html" class="icon icon-home"> nRF Connect SDK
          </a>
              <div class="version">
                2.3.99
              </div>
<div id="searchbox" role="search">
  <div class="searchformwrapper">
    <form id="rtd-search-form" class="wy-form" action="../../../search.html" method="get">
      <input type="text" name="q" placeholder="Search docs" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
  </div>
</div>
<script>$('#searchbox').show(0);</script>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Contents</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../../introduction.html">Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../getting_started.html">Getting started</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../dev_model.html">Development model</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../app_dev.html">Application development</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../security.html">Security</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../ecosystem_integration.html">Ecosystems integration</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../nrf91.html">Working with nRF91 Series</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../nrf70.html">Working with nRF70 Series</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../nrf53.html">Working with nRF53 Series</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../nrf52.html">Working with nRF52 Series</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../protocols.html">Protocols</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../../../applications.html">Applications</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../../connectivity_bridge/README.html">Connectivity bridge</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../asset_tracker_v2/README.html">nRF9160: Asset Tracker v2</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../serial_lte_modem/README.html">nRF9160: Serial LTE modem</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="../README.html">nRF Desktop</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="../README.html#overview-firmware-architecture">Overview: Firmware architecture</a></li>
<li class="toctree-l3"><a class="reference internal" href="../README.html#requirements">Requirements</a></li>
<li class="toctree-l3"><a class="reference internal" href="../README.html#user-interface">User interface</a></li>
<li class="toctree-l3"><a class="reference internal" href="../README.html#configuration">Configuration</a></li>
<li class="toctree-l3"><a class="reference internal" href="../README.html#building-and-running">Building and running</a></li>
<li class="toctree-l3"><a class="reference internal" href="../README.html#integrating-your-own-hardware">Integrating your own hardware</a></li>
<li class="toctree-l3"><a class="reference internal" href="../README.html#dependencies">Dependencies</a></li>
<li class="toctree-l3 current"><a class="reference internal" href="../README.html#application-internal-modules">Application internal modules</a><ul class="current">
<li class="toctree-l4"><a class="reference internal" href="main.html">Basic module (main)</a></li>
<li class="toctree-l4"><a class="reference internal" href="battery_charger.html">Battery charger module</a></li>
<li class="toctree-l4"><a class="reference internal" href="battery_meas.html">Battery measurement module</a></li>
<li class="toctree-l4"><a class="reference internal" href="ble_adv.html">Bluetooth LE advertising module</a></li>
<li class="toctree-l4"><a class="reference internal" href="ble_bond.html">Bluetooth LE bond module</a></li>
<li class="toctree-l4"><a class="reference internal" href="ble_conn_params.html">Bluetooth LE connection parameters module</a></li>
<li class="toctree-l4"><a class="reference internal" href="ble_discovery.html">Bluetooth LE discovery module</a></li>
<li class="toctree-l4"><a class="reference internal" href="ble_latency.html">Bluetooth LE latency module</a></li>
<li class="toctree-l4"><a class="reference internal" href="ble_passkey.html">Bluetooth LE passkey module</a></li>
<li class="toctree-l4"><a class="reference internal" href="ble_qos.html">Bluetooth LE Quality of Service module</a></li>
<li class="toctree-l4"><a class="reference internal" href="ble_scan.html">Bluetooth LE scanning module</a></li>
<li class="toctree-l4"><a class="reference internal" href="ble_state_pm.html">Bluetooth state power manager module</a></li>
<li class="toctree-l4"><a class="reference internal" href="ble_state.html">Bluetooth LE state module</a></li>
<li class="toctree-l4"><a class="reference internal" href="board.html">Board module</a></li>
<li class="toctree-l4"><a class="reference internal" href="buttons.html">Buttons module</a></li>
<li class="toctree-l4"><a class="reference internal" href="buttons_sim.html">Button simulator module</a></li>
<li class="toctree-l4"><a class="reference internal" href="click_detector.html">Click detector module</a></li>
<li class="toctree-l4 current"><a class="current reference internal" href="#">Configuration channel</a></li>
<li class="toctree-l4"><a class="reference internal" href="cpu_meas.html">CPU measurement module</a></li>
<li class="toctree-l4"><a class="reference internal" href="dev_descr.html">Device description module</a></li>
<li class="toctree-l4"><a class="reference internal" href="dfu.html">Device Firmware Upgrade module</a></li>
<li class="toctree-l4"><a class="reference internal" href="failsafe.html">Failsafe module</a></li>
<li class="toctree-l4"><a class="reference internal" href="fast_pair_app.html">Fast Pair module</a></li>
<li class="toctree-l4"><a class="reference internal" href="fn_keys.html">Function key module</a></li>
<li class="toctree-l4"><a class="reference internal" href="bas.html">GATT Battery Service module</a></li>
<li class="toctree-l4"><a class="reference internal" href="hid_forward.html">HID forward module</a></li>
<li class="toctree-l4"><a class="reference internal" href="hid_state.html">HID state module</a></li>
<li class="toctree-l4"><a class="reference internal" href="hid_state_pm.html">HID state power manager module</a></li>
<li class="toctree-l4"><a class="reference internal" href="hids.html">HID Service module</a></li>
<li class="toctree-l4"><a class="reference internal" href="info.html">Info module</a></li>
<li class="toctree-l4"><a class="reference internal" href="led_state.html">LED state module</a></li>
<li class="toctree-l4"><a class="reference internal" href="led_stream.html">LED stream module</a></li>
<li class="toctree-l4"><a class="reference internal" href="leds.html">LEDs module</a></li>
<li class="toctree-l4"><a class="reference internal" href="motion.html">Motion module</a></li>
<li class="toctree-l4"><a class="reference internal" href="passkey.html">Passkey module</a></li>
<li class="toctree-l4"><a class="reference internal" href="power_manager.html">Power manager module</a></li>
<li class="toctree-l4"><a class="reference internal" href="nrf_profiler_sync.html">nRF Profiler synchronization module</a></li>
<li class="toctree-l4"><a class="reference internal" href="qos.html">Quality of Service module</a></li>
<li class="toctree-l4"><a class="reference internal" href="selector.html">Selector module</a></li>
<li class="toctree-l4"><a class="reference internal" href="smp.html">Simple Management Protocol module</a></li>
<li class="toctree-l4"><a class="reference internal" href="settings_loader.html">Settings loader module</a></li>
<li class="toctree-l4"><a class="reference internal" href="usb_state_pm.html">USB state power manager module</a></li>
<li class="toctree-l4"><a class="reference internal" href="usb_state.html">USB state module</a></li>
<li class="toctree-l4"><a class="reference internal" href="watchdog.html">Watchdog module</a></li>
<li class="toctree-l4"><a class="reference internal" href="wheel.html">Wheel module</a></li>
<li class="toctree-l4"><a class="reference internal" href="constlat.html">Constant latency hotfix module</a></li>
<li class="toctree-l4"><a class="reference internal" href="hfclk_lock.html">High frequency clock lock hotfix module</a></li>
<li class="toctree-l4"><a class="reference internal" href="event_rel_modules.html">Source and sink module lists</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../README.html#application-configuration-options">Application configuration options</a></li>
<li class="toctree-l3"><a class="reference internal" href="../README.html#api-documentation">API documentation</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../nrf5340_audio/README.html">nRF5340 Audio</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../machine_learning/README.html">nRF Machine Learning</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../matter_weather_station/README.html">Thingy:53: Matter weather station</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../zigbee_weather_station/README.html">Thingy:53: Zigbee weather station</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../samples.html">Samples</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../drivers.html">Drivers</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../libraries/index.html">Libraries</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../scripts.html">Scripts</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../release_notes.html">Release notes</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../known_issues.html">Known issues</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../software_maturity.html">Software maturity levels</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../documentation.html">About this documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../glossary.html">Glossary</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../../index.html">nRF Connect SDK</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../../../index.html" class="icon icon-home"></a></li>
          <li class="breadcrumb-item"><a href="../../../applications.html">Applications</a></li>
          <li class="breadcrumb-item"><a href="../README.html">nRF Desktop</a></li>
      <li class="breadcrumb-item active">Configuration channel</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../../../_sources/applications/nrf_desktop/doc/config_channel.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="configuration-channel">
<span id="nrf-desktop-config-channel"></span><h1>Configuration channel<a class="headerlink" href="#configuration-channel" title="Permalink to this heading"></a></h1>
<div class="contents local topic" id="contents">
<ul class="simple">
<li><p><a class="reference internal" href="#transport-overview" id="id7">Transport overview</a></p></li>
<li><p><a class="reference internal" href="#transaction-request-and-response" id="id8">Transaction request and response</a></p></li>
<li><p><a class="reference internal" href="#transaction-types" id="id9">Transaction types</a></p></li>
<li><p><a class="reference internal" href="#transaction-forwarding" id="id10">Transaction forwarding</a></p></li>
<li><p><a class="reference internal" href="#data-format" id="id11">Data format</a></p>
<ul>
<li><p><a class="reference internal" href="#report-id" id="id12">Report ID</a></p></li>
<li><p><a class="reference internal" href="#recipient" id="id13">Recipient</a></p></li>
<li><p><a class="reference internal" href="#event-id" id="id14">Event ID</a></p></li>
<li><p><a class="reference internal" href="#status" id="id15">Status</a></p></li>
<li><p><a class="reference internal" href="#data-length" id="id16">Data length</a></p></li>
<li><p><a class="reference internal" href="#data" id="id17">Data</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#device-discovery" id="id18">Device discovery</a></p>
<ul>
<li><p><a class="reference internal" href="#recipient-discovery" id="id19">Recipient discovery</a></p></li>
<li><p><a class="reference internal" href="#device-identification" id="id20">Device identification</a></p></li>
<li><p><a class="reference internal" href="#module-discovery" id="id21">Module discovery</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#handling-configuration-channel-in-firmware" id="id22">Handling configuration channel in firmware</a></p>
<ul>
<li><p><a class="reference internal" href="#transport-configuration" id="id23">Transport configuration</a></p></li>
<li><p><a class="reference internal" href="#listener-configuration" id="id24">Listener configuration</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#dependencies" id="id25">Dependencies</a></p></li>
<li><p><a class="reference internal" href="#api-documentation" id="id26">API documentation</a></p></li>
</ul>
</div>
<p>The configuration channel lets you exchange data between the host computer and an nRF Desktop’s HID device.
On the logical level, it creates a bridge between the application modules and the corresponding part of the host script.
If there are more compatible devices connected to the host, you can select which device will receive data.
The configuration channel allows a dongle type device to act as a proxy for Bluetooth® LE Peripheral devices.</p>
<p>Among the types of data that you can send through the configuration channel are the following:</p>
<ul class="simple">
<li><p>Device configuration parameters, for example mouse sensor CPI.</p></li>
<li><p>Firmware updates.</p></li>
<li><p>LED effect display data, after it has been generated on the computer.</p></li>
</ul>
<p>For instructions on how to install and use the configuration channel tools that are provided in the nRF Connect SDK on a host computer, see the <a class="reference internal" href="../../../scripts/hid_configurator/README.html#nrf-desktop-config-channel-script"><span class="std std-ref">HID configurator for nRF Desktop</span></a>.</p>
<section id="transport-overview">
<h2><a class="toc-backref" href="#id7">Transport overview</a><a class="headerlink" href="#transport-overview" title="Permalink to this heading"></a></h2>
<p>The configuration channel activity is performed using a dedicated HID feature report.
The cross-platform <a class="reference external" href="https://github.com/libusb/hidapi">HIDAPI library</a> is used for exchanging the reports.
The library supports both Bluetooth® LE and USB.</p>
<p>On the HID feature report level, the host can set or get report, either to or from the connected device.
The host initiates all data exchange.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>If the device supports multiple USB or Bluetooth® LE HID instances, only one USB HID instance and only one Bluetooth® LE HID instance can be used to configure the device.
Other HID instances ignore the HID report set method and respond with the disconnected status on the HID report get method to indicate that the HID instance is not used for the configuration channel.</p>
</div>
</section>
<section id="transaction-request-and-response">
<h2><a class="toc-backref" href="#id8">Transaction request and response</a><a class="headerlink" href="#transaction-request-and-response" title="Permalink to this heading"></a></h2>
<p>To maintain the communication pace between the host and the device, the configuration channel uses transactions.
Each transaction consists of a single request send from the host to the device, followed by a single response that provides the completion status of the requested activity.</p>
<ul class="simple">
<li><p>A request from the host to the device is a single HID feature report set operation.</p></li>
<li><p>The response is a single HID feature report get operation.</p></li>
</ul>
<p>Since the device works asynchronously from the host, it might happen that an activity requested by the host through the configuration channel is still pending when the host-side operation is done.</p>
<ul class="simple">
<li><p>If the received request completion status indicates that the request is still pending, the host must retry asking the device for status update after some time.</p></li>
<li><p>If the received status indicates that the request was completed by the device, the host can send another request.</p></li>
</ul>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>There can be only one pending configuration channel request.
The host can send the following request only after it has received a response for the previous request.</p>
</div>
</section>
<section id="transaction-types">
<h2><a class="toc-backref" href="#id9">Transaction types</a><a class="headerlink" href="#transaction-types" title="Permalink to this heading"></a></h2>
<p>The configuration channel has the following transaction types:</p>
<ul class="simple">
<li><p>set - Used to write configurable options.</p></li>
<li><p>fetch - Used to read the values of options from the device.</p></li>
</ul>
<p>Both transactions can be used to trigger a device to perform an activity, but the fetch transaction can ensure that such activity is completed.</p>
</section>
<section id="transaction-forwarding">
<h2><a class="toc-backref" href="#id10">Transaction forwarding</a><a class="headerlink" href="#transaction-forwarding" title="Permalink to this heading"></a></h2>
<p>The nRF Desktop dongle can forward the request from the host to a peripheral.
In such case, the dongle also forwards the response from the peripheral to the host.
The <a class="reference internal" href="hid_forward.html#nrf-desktop-hid-forward"><span class="std std-ref">HID forward module</span></a> implements this functionality.</p>
<p>See the following diagrams for example transactions:</p>
<p>Setting a configuration value</p>
<blockquote>
<div><p class="mscgen">
msc {
hscale = &quot;1.3&quot;;
Host,Device;
Host&gt;&gt;Device      [label=&quot;set report: set value 1600&quot;];
Host&lt;&lt;Device      [label=&quot;get report: SUCCESS&quot;];
}
</p>
</div></blockquote>
<p>Fetching a configuration value</p>
<blockquote>
<div><p class="mscgen">
msc {
hscale = &quot;1.3&quot;;
Host,Device;
Host&gt;&gt;Device      [label=&quot;set report: request value fetch&quot;];
Host&lt;&lt;Device      [label=&quot;get report: PENDING&quot;];
Host&lt;&lt;Device      [label=&quot;get report: value 1600, SUCCESS&quot;];
}
</p>
</div></blockquote>
<p>Setting a configuration value of a device, forwarded by the dongle to a paired device</p>
<blockquote>
<div><p class="mscgen">
msc {
hscale = &quot;1.3&quot;;
Host,Dongle,Device;
Host&gt;&gt;Dongle      [label=&quot;set report: set value 1600&quot;];
Dongle&gt;&gt;Device    [label=&quot;set report: set value 1600&quot;];
Host&lt;&lt;Dongle      [label=&quot;get report: PENDING&quot;];
Dongle&lt;&lt;Device    [label=&quot;get report: SUCCESS&quot;];
Host&lt;&lt;Dongle      [label=&quot;get report: SUCCESS&quot;];
}
</p>
</div></blockquote>
</section>
<section id="data-format">
<h2><a class="toc-backref" href="#id11">Data format</a><a class="headerlink" href="#data-format" title="Permalink to this heading"></a></h2>
<p>Both request and response share the same data format, which is described in the following table.</p>
<table class="docutils align-default" id="nrf-desktop-table">
<colgroup>
<col style="width: 15%" />
<col style="width: 15%" />
<col style="width: 15%" />
<col style="width: 15%" />
<col style="width: 11%" />
<col style="width: 18%" />
<col style="width: 4%" />
<col style="width: 7%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head" colspan="8"><p>Feature report</p></th>
</tr>
<tr class="row-even"><th class="head"><p>0</p></th>
<th class="head"><p>1</p></th>
<th class="head" colspan="2"><p>2</p></th>
<th class="head"><p>3</p></th>
<th class="head"><p>4</p></th>
<th class="head"><p>5</p></th>
<th class="head"><p>…</p></th>
</tr>
</thead>
<tbody>
<tr class="row-odd"><td rowspan="3"><p>Report ID</p></td>
<td rowspan="3"><p>Recipient</p></td>
<td colspan="2"><p>Event ID
bits:</p></td>
<td rowspan="3"><p>Status</p></td>
<td rowspan="3"><p>Data length</p></td>
<td colspan="2" rowspan="3"><p>Data</p></td>
</tr>
<tr class="row-even"><td><p>0..3</p></td>
<td><p>4..7</p></td>
</tr>
<tr class="row-odd"><td><p>Option ID</p></td>
<td><p>Module ID</p></td>
</tr>
</tbody>
</table>
<p>See the following sections for a detailed description of each HID feature report component.</p>
<section id="report-id">
<h3><a class="toc-backref" href="#id12">Report ID</a><a class="headerlink" href="#report-id" title="Permalink to this heading"></a></h3>
<p>This is the HID report identifier of the feature report used for transmitting data.</p>
<p>The configuration channel uses a predefined HID feature report.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Bluetooth® LE HID Service removes the leading report ID byte.
As a result, the firmware obtains a data frame shorter by one byte.</p>
<p>The USB HID class transmits the whole report, including the report ID byte.</p>
</div>
</section>
<section id="recipient">
<h3><a class="toc-backref" href="#id13">Recipient</a><a class="headerlink" href="#recipient" title="Permalink to this heading"></a></h3>
<p>This is the identifier of the device to which the request is addressed.</p>
<p>This field is used to route requests in a multidevice setup.
The field can have the following values:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">0</span></code> - The transaction is intended for a directly connected device.</p></li>
<li><p>Other values - The transaction should be forwarded by the <a class="reference internal" href="hid_forward.html#nrf-desktop-hid-forward"><span class="std std-ref">HID forward module</span></a> to the peripheral connected over Bluetooth® LE.
The recipients connected over Bluetooth® LE are discovered during the <a class="reference internal" href="#nrf-desktop-config-channel-device-discovery"><span class="std std-ref">device discovery</span></a>.</p></li>
</ul>
</section>
<section id="event-id">
<h3><a class="toc-backref" href="#id14">Event ID</a><a class="headerlink" href="#event-id" title="Permalink to this heading"></a></h3>
<p>This is the identifier for both module and option for the set or fetch operation.</p>
<p>The field is composed of the following subfields:</p>
<ul class="simple">
<li><p>Module ID - The application module that should handle the transaction, stored on the 4 most significant bits of the Event ID field.</p></li>
<li><p>Option ID - The module option the transaction refers to, stored on the 4 least significant bits of the Event ID field.</p></li>
</ul>
<p>The values of Module ID and Option ID are assigned during the application build time.
These values are obtained during the <a class="reference internal" href="#nrf-desktop-config-channel-device-discovery"><span class="std std-ref">device discovery</span></a> performed by the host.
The same application module can have different ID values, when it is compiled at a different configuration.</p>
</section>
<section id="status">
<h3><a class="toc-backref" href="#id15">Status</a><a class="headerlink" href="#status" title="Permalink to this heading"></a></h3>
<p>The usage of the Status field is different for request and response operations.</p>
<section id="request">
<h4>Request<a class="headerlink" href="#request" title="Permalink to this heading"></a></h4>
<p>In the case of a request, the value of Status field denotes a requested operation.
The request operations can be grouped as follows:</p>
<dl>
<dt>Generic operations</dt><dd><p>There are two generic operations:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">CONFIG_STATUS_SET</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">CONFIG_STATUS_FETCH</span></code></p></li>
</ul>
<p>These operations perform, respectively, set or fetch actions related to a given application module and option (as denoted by Event ID).
The request is handled by the selected application module.
The content and length of the associated data depends on module and option.</p>
</dd>
<dt>Module discovery operations</dt><dd><p>The <a class="reference internal" href="info.html#nrf-desktop-info"><span class="std std-ref">Info module</span></a> handles module discovery operations.
These operations are used during the <a class="reference internal" href="#nrf-desktop-config-channel-device-discovery"><span class="std std-ref">device discovery</span></a> to obtain information about the device.</p>
<p>The Event ID field is not used and it should be set to <code class="docutils literal notranslate"><span class="pre">0</span></code>.
The following operations belong to this group:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">CONFIG_STATUS_GET_MAX_MOD_ID</span></code> - Obtain the maximum value of Module ID supported by the device.
The maximum Module ID is returned as a single unsigned byte.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">CONFIG_STATUS_GET_HWID</span></code> - Obtain a unique Hardware ID of the device.
The Hardware ID is represented as 8 bytes.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">CONFIG_STATUS_GET_BOARD_NAME</span></code> - Obtain the device’s board name.
The board name is part of the Zephyr board name (<code class="xref kconfig kconfig-option docutils literal notranslate"><span class="pre">CONFIG_BOARD</span></code>) from a beginning to the first underscore (<code class="docutils literal notranslate"><span class="pre">_</span></code>) character.
For example, the <code class="docutils literal notranslate"><span class="pre">nrf52840gmouse_nrf52840</span></code> build target would return <code class="docutils literal notranslate"><span class="pre">nrf52840gmouse</span></code> as the board name.</p></li>
</ul>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>You must use <a class="reference internal" href="info.html#nrf-desktop-info"><span class="std std-ref">Info module</span></a> for every device that is configurable with the configuration channel.
The module provides information that is necessary to identify the device.</p>
</div>
</dd>
<dt>Recipient discovery operations</dt><dd><p>The <a class="reference internal" href="hid_forward.html#nrf-desktop-hid-forward"><span class="std std-ref">HID forward module</span></a> handles recipients discovery operations.
These operations are performed to obtain IDs of Bluetooth® LE Peripherals connected to the device.
See <a class="reference internal" href="#nrf-desktop-config-channel-recipient-discovery"><span class="std std-ref">discovering devices connected through dongle</span></a> for more information.</p>
<p>The Event ID field is not used and it should be set to <code class="docutils literal notranslate"><span class="pre">0</span></code>.
The following operations belong to this group:</p>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">CONFIG_STATUS_INDEX_PEERS</span></code> - Request Recipient ID re-evaluation.
Response to this request returns no data.
When performed, the device will map each connected Bluetooth® LE Peripheral to an integer.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">CONFIG_STATUS_GET_PEER</span></code> - Obtain Recipient ID of Bluetooth® LE Peripheral.
Response to this request contains the following information:</p>
<ul class="simple">
<li><p>Peripheral’s Hardware ID on the first 8 bytes of response data.</p></li>
<li><p>Recipient ID assigned to the peripheral on the last meaningful byte of the response data.</p></li>
</ul>
<p>Performing the operation multiple times returns information about subsequent Bluetooth® LE Peripherals.
This operation should be performed until Recipient ID is set to <code class="docutils literal notranslate"><span class="pre">0xFF</span></code>, in which case there are no more peripherals.</p>
</li>
</ul>
</dd>
</dl>
</section>
<section id="response">
<h4>Response<a class="headerlink" href="#response" title="Permalink to this heading"></a></h4>
<p>In the case of a response, the value of the Status field indicates the state of the earlier request.
The following values are possible:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">CONFIG_STATUS_PENDING</span></code> - The operation has not completed.
The response is not ready and the data field should not be interpreted.
The host should not send new requests before the operation completes.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">CONFIG_STATUS_SUCCESS</span></code> - The operation was successful.
The host tool can access data returned by the response.
The host can send a new request.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">CONFIG_STATUS_TIMEOUT</span></code> - The operation timed out on the device.
The request was accepted by an application module but the response was not prepared in time.
The host can send a new request.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">CONFIG_STATUS_REJECT</span></code> - The operation was rejected.
The host can send a new request.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">CONFIG_STATUS_WRITE_FAIL</span></code> - Forwarding configuration channel transaction failed.
The host can send a new request.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">CONFIG_STATUS_DISCONNECTED</span></code> - The operation failed because a module or a device addressed by the request did not respond.
This can happen when Bluetooth® LE Peripheral disconnects.
The host can send a new request.</p></li>
</ul>
</section>
</section>
<section id="data-length">
<h3><a class="toc-backref" href="#id16">Data length</a><a class="headerlink" href="#data-length" title="Permalink to this heading"></a></h3>
<p>Indicates how many meaningful bytes of data the request or the response holds.
As the HID feature report has a fixed length, this field indicates the size of the meaningful data.</p>
</section>
<section id="data">
<h3><a class="toc-backref" href="#id17">Data</a><a class="headerlink" href="#data" title="Permalink to this heading"></a></h3>
<p>The piece of data of the length defined by Data length, related to the request or the response.</p>
</section>
</section>
<section id="device-discovery">
<span id="nrf-desktop-config-channel-device-discovery"></span><h2><a class="toc-backref" href="#id18">Device discovery</a><a class="headerlink" href="#device-discovery" title="Permalink to this heading"></a></h2>
<p>Before the device can be configured over the configuration channel, it needs to be discovered by the host scripts.
The discovery procedure identifies the device and gets information about its configurable application modules and their options.</p>
<p>If you are developing a custom host tool, you need to ensure your tool performs the following steps to discover the device:</p>
<ol class="arabic simple">
<li><p>Enumerate all of the connected HID devices.</p></li>
<li><p>Filter the enumerated devices using Vendor ID and Product ID specified for your devices.</p></li>
<li><p>For each applicable device, perform recipient discovery.</p></li>
<li><p>For each device, perform device identification.</p></li>
<li><p>For each device, perform module discovery.</p></li>
</ol>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>The host tools do not need to perform complete discovery of the device every time the device is connected.
The Module ID and Options ID cannot change until firmware is updated on the device.
The module descriptor can be cached by the host for a given device and firmware version.</p>
</div>
<section id="recipient-discovery">
<span id="nrf-desktop-config-channel-recipient-discovery"></span><h3><a class="toc-backref" href="#id19">Recipient discovery</a><a class="headerlink" href="#recipient-discovery" title="Permalink to this heading"></a></h3>
<p>The Recipient ID equal to <code class="docutils literal notranslate"><span class="pre">0</span></code> is used to communicate with any device directly connected to the host.</p>
<p>The configuration channel allows a dongle type device to act as a proxy for Bluetooth® LE Peripheral devices.
If you are developing a custom host tool, you need to ensure your tool performs the following steps to discover all of the peripherals that are connected to the dongle over Bluetooth® LE:</p>
<ol class="arabic simple">
<li><p>Trigger a Recipient ID re-evaluation with the <code class="docutils literal notranslate"><span class="pre">CONFIG_STATUS_INDEX_PEERS</span></code> request.</p></li>
<li><p>Obtain a list of connected devices by calling the <code class="docutils literal notranslate"><span class="pre">CONFIG_STATUS_GET_PEER</span></code> request.</p></li>
</ol>
<p>Once the Recipient ID list is obtained, you can perform <a class="reference internal" href="#nrf-desktop-config-channel-device-identification"><span class="std std-ref">Device identification</span></a> and <a class="reference internal" href="#nrf-desktop-config-channel-module-discovery"><span class="std std-ref">Module discovery</span></a> procedures on selected or all connected devices.
When sending the requests, use the chosen Recipient ID.</p>
<p>The assigned Recipient ID is valid only during the connection time between the remote device and the dongle.
If a remote device disconnects from the dongle, the recipient discovery must be repeated when the device reconnects.</p>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>The recipient discovery is not needed if the host does not interact with remote devices connected through the dongle or if the device is a directly connected peripheral.</p>
</div>
</section>
<section id="device-identification">
<span id="nrf-desktop-config-channel-device-identification"></span><h3><a class="toc-backref" href="#id20">Device identification</a><a class="headerlink" href="#device-identification" title="Permalink to this heading"></a></h3>
<p>The following requests provide the information about the device hardware:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">CONFIG_STATUS_GET_BOARD_NAME</span></code> - For reading the board name.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">CONFIG_STATUS_GET_HWID</span></code> - For the Hardware ID.
The Hardware ID allows to differentiate devices of the same type (that have the same board name).</p></li>
</ul>
<p>If you are developing a custom host tool, use the Recipient ID linked with the device that is being discovered.
Your tool should note which Recipient ID and HID instance on the host is associated with the board name and the Hardware ID.</p>
</section>
<section id="module-discovery">
<span id="nrf-desktop-config-channel-module-discovery"></span><h3><a class="toc-backref" href="#id21">Module discovery</a><a class="headerlink" href="#module-discovery" title="Permalink to this heading"></a></h3>
<p>The host can access options provided by the application modules.
Before it gets access to the options, the host must identify which modules are available and what options are provided by them.</p>
<p>Both modules and their options are identified by a name, sent as a string during discovery procedure:</p>
<ul class="simple">
<li><p>The module of the given name is linked with a specific value of Module ID.</p></li>
<li><p>The option of the given name is linked with a specific value of Option ID.</p></li>
</ul>
<p>The Module ID and Option ID associated with the module and the option name can vary between devices, but they do not change between connections to the same device and firmware version.</p>
<p>If you are developing a custom host tool, you need to ensure your tool performs the following steps for the module discovery procedure:</p>
<ol class="arabic simple">
<li><p>Obtain the number of configurable application modules using the <code class="docutils literal notranslate"><span class="pre">CONFIG_STATUS_GET_MAX_MOD_ID</span></code> request.
The response returns the highest value of Module ID available on the device.</p></li>
<li><p>Read the module descriptor of every application module (iterate Module ID from <code class="docutils literal notranslate"><span class="pre">0</span></code> up to and including the maximum supported Module ID).</p></li>
</ol>
<p>For reading the module descriptor, the following conditions must be met:</p>
<ul class="simple">
<li><p>The module descriptor is read using fetch request with the current Module ID while Option ID is set to <code class="docutils literal notranslate"><span class="pre">0</span></code>.
The transaction must be performed multiple times, with responses for following requests containing strings that are part of the module descriptor.</p></li>
<li><p>The end line character (<code class="docutils literal notranslate"><span class="pre">\n</span></code>) indicates the end of the descriptor.
After the end line character is fetched, following requests should loop around and repeat descriptor strings.</p></li>
<li><p>The module descriptor strings are provided in a predefined order, but the host should make no assumption about the descriptor string that will be provided by the device as the first one.</p></li>
<li><p>The duplicated string is fetched after the host has received all of the strings related to the given module.
The host can stop the option discovery procedure when a duplicated string is fetched.</p></li>
<li><p>The module name should be provided as the first string in the module descriptor.</p></li>
<li><p>The following strings should indicate the module option names.
The first option on the descriptor must be identified with Option ID equal to <code class="docutils literal notranslate"><span class="pre">1</span></code>.
The following options will be identified by monotonically increasing Option ID values (second option by <code class="docutils literal notranslate"><span class="pre">2</span></code>, third by <code class="docutils literal notranslate"><span class="pre">3</span></code>, and so on).</p></li>
<li><p>Once the descriptor is read, the module options can be accessed.
When performing a set or fetch request on the option, the Event ID contains the Option ID and the Module ID of the module that owns the option.</p></li>
</ul>
<p>The module descriptor can contain an optional <code class="docutils literal notranslate"><span class="pre">module_variant</span></code> option.
The nRF Desktop application modules come in various variants with different characteristics.
The <code class="docutils literal notranslate"><span class="pre">module_variant</span></code> option allows to differentiate which module variant was compiled into the firmware.
For example, <a class="reference internal" href="motion.html#nrf-desktop-motion"><span class="std std-ref">Motion module</span></a> uses this option to identify a motion sensor model.</p>
</section>
</section>
<section id="handling-configuration-channel-in-firmware">
<h2><a class="toc-backref" href="#id22">Handling configuration channel in firmware</a><a class="headerlink" href="#handling-configuration-channel-in-firmware" title="Permalink to this heading"></a></h2>
<p>To enable the configuration channel in the nRF Desktop firmware, set the <a class="reference internal" href="../README.html#config-desktop-app-options"><span class="std std-ref">CONFIG_DESKTOP_CONFIG_CHANNEL_ENABLE</span></a> Kconfig option.
This option also enables the mandatory <a class="reference internal" href="info.html#nrf-desktop-info"><span class="std std-ref">Info module</span></a>.</p>
<p>Make sure you also configure the following configuration channel elements:</p>
<ul class="simple">
<li><p><a class="reference internal" href="#transport-configuration">Transport configuration</a></p></li>
<li><p><a class="reference internal" href="#listener-configuration">Listener configuration</a></p></li>
</ul>
<section id="transport-configuration">
<h3><a class="toc-backref" href="#id23">Transport configuration</a><a class="headerlink" href="#transport-configuration" title="Permalink to this heading"></a></h3>
<p>The HID configurator uses the HID feature reports to exchange the data.</p>
<p>Depending on the connection method:</p>
<ul>
<li><p>If the device is connected through USB, data exchange between the device and the host is handled by the <a class="reference internal" href="usb_state.html#nrf-desktop-usb-state"><span class="std std-ref">USB state module</span></a> in the functions <code class="xref c c-func docutils literal notranslate"><span class="pre">get_report()</span></code> and <code class="xref c c-func docutils literal notranslate"><span class="pre">set_report()</span></code>.</p></li>
<li><p>If the device is connected over Bluetooth® LE, data exchange between the device and the host is handled in <a class="reference internal" href="hids.html#nrf-desktop-hids"><span class="std std-ref">HID Service module</span></a> in <code class="xref c c-func docutils literal notranslate"><span class="pre">feature_report_handler()</span></code>.
The argument <code class="xref c c-data docutils literal notranslate"><span class="pre">write</span></code> indicates whether the report is a GATT write (set report) or a GATT read (get report).</p>
<p>Forwarding requests through a dongle to a connected peripheral is handled in <a class="reference internal" href="hid_forward.html#nrf-desktop-hid-forward"><span class="std std-ref">HID forward module</span></a>.
The dongle, which is a Bluetooth® LE Central, uses the HID Client module to find the feature report of the paired device and access it in order to forward the request.
The request forwarding is based on Recipient ID, which is assigned by the <a class="reference internal" href="hid_forward.html#nrf-desktop-hid-forward"><span class="std std-ref">HID forward module</span></a>.
From the script user perspective, the device can be identified using type, board name or Hardware ID.</p>
</li>
</ul>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>If the Low Latency Packet Mode (LLPM) connection interval is in use, the Bluetooth Peripheral can provide either an HID input report or a GATT write response during a single connection event.</p>
<p>To prevent HID input report rate drop while forwarding config channel report set operation, nRF Desktop Dongle can forward the data using GATT write without response.
In that case, the peripheral does not have to provide the GATT write response instead of sending the HID input report.</p>
<p>The “GATT write without response” operation cannot be performed on the HID feature report.
To allow the “GATT write without response”, the Peripheral must provide an additional HID output report.
Use the <a class="reference internal" href="../README.html#config-desktop-app-options"><span class="std std-ref">CONFIG_DESKTOP_CONFIG_CHANNEL_OUT_REPORT</span></a> Kconfig option in the nRF Desktop peripheral configuration to add the mentioned HID output report.
Disabling this option reduces the memory consumption.</p>
</div>
<p>The <code class="xref c c-struct docutils literal notranslate"><span class="pre">config_event</span></code> is used to propagate the configuration channel data.
The configuration channel request received from the host is propagated using the mentioned event with <code class="xref c c-member docutils literal notranslate"><span class="pre">config_event.is_request</span></code> set to <code class="docutils literal notranslate"><span class="pre">true</span></code>.
The application module that handles the request consumes the event and provides the response.
The response is provided as <code class="xref c c-struct docutils literal notranslate"><span class="pre">config_event</span></code> with <code class="xref c c-member docutils literal notranslate"><span class="pre">config_event.is_request</span></code> set to <code class="docutils literal notranslate"><span class="pre">false</span></code>.
In case a request is not handled by any application module, the configuration channel transport will eventually receive it and generate an error response.</p>
</section>
<section id="listener-configuration">
<h3><a class="toc-backref" href="#id24">Listener configuration</a><a class="headerlink" href="#listener-configuration" title="Permalink to this heading"></a></h3>
<p>The configuration channel listener is an application module that provides a set of options that are accessible through the configuration channel.
For example, depending on the listener, it can provide the CPI option from <a class="reference internal" href="motion.html#nrf-desktop-motion"><span class="std std-ref">Motion module</span></a> or the option for searching for a new peer from <a class="reference internal" href="ble_bond.html#nrf-desktop-ble-bond"><span class="std std-ref">Bluetooth LE bond module</span></a>.
The host computer can use set or fetch request to access these options.</p>
<p>On the firmware side, the configuration channel listener and its options are referenced with module ID and option ID numbers, respectively.</p>
<p>On the host side, these IDs are translated to strings based on the registered listener and option names.
Details are described in the <a class="reference internal" href="../../../scripts/hid_configurator/README.html#nrf-desktop-config-channel-script"><span class="std std-ref">HID configurator for nRF Desktop</span></a>.</p>
<p>To register an application module as a configuration channel listener, complete the following steps:</p>
<ol class="arabic">
<li><p>Make sure that the application module is an <a class="reference internal" href="../../../libraries/others/app_event_manager.html#app-event-manager"><span class="std std-ref">Application Event Manager</span></a> listener.</p></li>
<li><p>Include the <code class="file docutils literal notranslate"><span class="pre">config_event.h</span></code> header.</p></li>
<li><p>Subscribe for the <code class="xref c c-struct docutils literal notranslate"><span class="pre">config_event</span></code> using the <a class="reference internal" href="../../../libraries/others/app_event_manager.html#c.APP_EVENT_SUBSCRIBE_EARLY" title="APP_EVENT_SUBSCRIBE_EARLY"><code class="xref c c-macro docutils literal notranslate"><span class="pre">APP_EVENT_SUBSCRIBE_EARLY</span></code></a> macro:</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="n">APP_EVENT_LISTENER</span><span class="p">(</span><span class="n">MODULE</span><span class="p">,</span><span class="w"> </span><span class="n">app_event_handler</span><span class="p">);</span>
<span class="cp">#if CONFIG_DESKTOP_CONFIG_CHANNEL_ENABLE</span>
<span class="n">APP_EVENT_SUBSCRIBE_EARLY</span><span class="p">(</span><span class="n">MODULE</span><span class="p">,</span><span class="w"> </span><span class="n">config_event</span><span class="p">);</span>
<span class="cp">#endif</span>
</pre></div>
</div>
<p>The module should subscribe only if the configuration channel is enabled.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The module must be an early subscriber to make sure it will receive the event before the configuration channel transports (<a class="reference internal" href="usb_state.html#nrf-desktop-usb-state"><span class="std std-ref">USB state module</span></a> and <a class="reference internal" href="hids.html#nrf-desktop-hids"><span class="std std-ref">HID Service module</span></a>).
Otherwise, the module may not receive the configuration channel requests at all.
In that case an error responses will be generated by configuration channel transport.</p>
</div>
</li>
<li><p>Call <code class="xref c c-macro docutils literal notranslate"><span class="pre">GEN_CONFIG_EVENT_HANDLERS</span></code> in the <a class="reference internal" href="../../../libraries/others/app_event_manager.html#app-event-manager"><span class="std std-ref">Application Event Manager</span></a> event handler function registered by the application module:</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="k">static</span><span class="w"> </span><span class="kt">bool</span><span class="w"> </span><span class="nf">app_event_handler</span><span class="p">(</span><span class="k">const</span><span class="w"> </span><span class="k">struct</span><span class="w"> </span><span class="nc">app_event_header</span><span class="w"> </span><span class="o">*</span><span class="n">aeh</span><span class="p">)</span>
<span class="p">{</span>
<span class="w">    </span><span class="cm">/* Functions used to handle other events. */</span>
<span class="w">    </span><span class="p">...</span>

<span class="w">    </span><span class="n">GEN_CONFIG_EVENT_HANDLERS</span><span class="p">(</span><span class="n">STRINGIFY</span><span class="p">(</span><span class="n">MODULE</span><span class="p">),</span><span class="w"> </span><span class="n">opt_descr</span><span class="p">,</span>
<span class="w">                              </span><span class="n">config_set</span><span class="p">,</span><span class="w"> </span><span class="n">config_get</span><span class="p">);</span>

<span class="w">    </span><span class="cm">/* Functions used to handle other events. */</span>
<span class="w">    </span><span class="p">...</span>
<span class="p">}</span>
</pre></div>
</div>
<p>You must provide the following arguments to the macro:</p>
<ul>
<li><p>Module name - String representing the module name (<code class="docutils literal notranslate"><span class="pre">STRINGIFY(MODULE)</span></code>).</p></li>
<li><p>Array with the names of the module’s options (<code class="docutils literal notranslate"><span class="pre">opt_descr</span></code>):</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="cm">/* Creating enum to denote the module options is recommended,</span>
<span class="cm"> * because it makes code more readable.</span>
<span class="cm"> */</span>
<span class="k">enum</span><span class="w"> </span><span class="n">test_module_opt</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="n">TEST_MODULE_OPT_FILTER_PARAM</span><span class="p">,</span>
<span class="w">    </span><span class="n">TEST_MODULE_OPT_PARAM_BLE</span><span class="p">,</span>
<span class="w">    </span><span class="n">TEST_MODULE_OPT_PARAM_WIFI</span><span class="p">,</span>

<span class="w">    </span><span class="n">TEST_MODULE_OPT_COUNT</span>
<span class="p">};</span>

<span class="k">static</span><span class="w"> </span><span class="k">const</span><span class="w"> </span><span class="kt">char</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="k">const</span><span class="w"> </span><span class="n">opt_descr</span><span class="p">[]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="p">[</span><span class="n">TEST_MODULE_OPT_FILTER_PARAM</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;filter_param&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="p">[</span><span class="n">TEST_MODULE_OPT_PARAM_BLE</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;param_ble&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="p">[</span><span class="n">TEST_MODULE_OPT_PARAM_WIFI</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;param_wifi&quot;</span>
<span class="p">};</span>
</pre></div>
</div>
</li>
<li><p>Set operation handler (<code class="xref c c-func docutils literal notranslate"><span class="pre">config_set()</span></code>):</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="k">static</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">config_set</span><span class="p">(</span><span class="k">const</span><span class="w"> </span><span class="kt">uint8_t</span><span class="w"> </span><span class="n">opt_id</span><span class="p">,</span><span class="w"> </span><span class="k">const</span><span class="w"> </span><span class="kt">uint8_t</span><span class="w"> </span><span class="o">*</span><span class="n">data</span><span class="p">,</span>
<span class="w">                       </span><span class="k">const</span><span class="w"> </span><span class="kt">size_t</span><span class="w"> </span><span class="n">size</span><span class="p">)</span>
<span class="p">{</span>
<span class="w">    </span><span class="k">switch</span><span class="w"> </span><span class="p">(</span><span class="n">opt_id</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="k">case</span><span class="w"> </span><span class="no">TEST_MODULE_OPT_FILTER_PARAM</span><span class="p">:</span>
<span class="w">        </span><span class="cm">/* Handle the data received under the &quot;data&quot; pointer.</span>
<span class="cm">         * Number of received bytes is described as &quot;size&quot;.</span>
<span class="cm">         */</span>
<span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">size</span><span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="k">sizeof</span><span class="p">(</span><span class="k">struct</span><span class="w"> </span><span class="nc">filter_parameters</span><span class="p">))</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="n">LOG_WRN</span><span class="p">(</span><span class="s">&quot;Invalid size&quot;</span><span class="p">);</span>
<span class="w">        </span><span class="p">}</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="n">update_filter_params</span><span class="p">(</span><span class="n">data</span><span class="p">);</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">    </span><span class="k">break</span><span class="p">;</span>

<span class="w">    </span><span class="k">case</span><span class="w"> </span><span class="no">TEST_MODULE_OPT_PARAM_BLE</span><span class="p">:</span>
<span class="w">        </span><span class="cm">/* Handle the data. */</span>
<span class="w">        </span><span class="p">....</span>
<span class="w">    </span><span class="k">break</span><span class="p">;</span>

<span class="w">    </span><span class="cm">/* Handlers for other option IDs. */</span>
<span class="w">    </span><span class="p">....</span>

<span class="w">    </span><span class="k">default</span><span class="o">:</span>
<span class="w">        </span><span class="cm">/* The option is not supported by the module. */</span>
<span class="w">        </span><span class="n">LOG_WRN</span><span class="p">(</span><span class="s">&quot;Unknown opt %&quot;</span><span class="w"> </span><span class="n">PRIu8</span><span class="p">,</span><span class="w"> </span><span class="n">opt_id</span><span class="p">);</span>
<span class="w">        </span><span class="k">break</span><span class="p">;</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
</li>
<li><p>Fetch operation handler (<code class="xref c c-func docutils literal notranslate"><span class="pre">config_get()</span></code>):</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="k">static</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">config_get</span><span class="p">(</span><span class="k">const</span><span class="w"> </span><span class="kt">uint8_t</span><span class="w"> </span><span class="n">opt_id</span><span class="p">,</span><span class="w"> </span><span class="kt">uint8_t</span><span class="w"> </span><span class="o">*</span><span class="n">data</span><span class="p">,</span><span class="w"> </span><span class="kt">size_t</span><span class="w"> </span><span class="o">*</span><span class="n">size</span><span class="p">)</span>
<span class="p">{</span>
<span class="w">    </span><span class="k">switch</span><span class="w"> </span><span class="p">(</span><span class="n">opt_id</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="k">case</span><span class="w"> </span><span class="no">TEST_MODULE_OPT_FILTER_PARAM</span><span class="p">:</span>
<span class="w">        </span><span class="cm">/* Fill the buffer under the &quot;data&quot; pointer with</span>
<span class="cm">         * requested data. Number of written bytes must be</span>
<span class="cm">         * reflected by the value under the &quot;size&quot; pointer.</span>
<span class="cm">         */</span>
<span class="w">        </span><span class="n">memcpy</span><span class="p">(</span><span class="n">data</span><span class="p">,</span><span class="w"> </span><span class="n">filter_param</span><span class="p">,</span><span class="w"> </span><span class="k">sizeof</span><span class="p">(</span><span class="n">filter_param</span><span class="p">));</span>
<span class="w">        </span><span class="o">*</span><span class="n">size</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">sizeof</span><span class="p">(</span><span class="n">filter_param</span><span class="p">);</span>
<span class="w">        </span><span class="k">break</span><span class="p">;</span>

<span class="w">    </span><span class="k">case</span><span class="w"> </span><span class="no">TEST_MODULE_OPT_PARAM_BLE</span><span class="p">:</span>
<span class="w">        </span><span class="cm">/* Handle the request. */</span>
<span class="w">        </span><span class="p">....</span>
<span class="w">        </span><span class="k">break</span><span class="p">;</span>

<span class="w">    </span><span class="cm">/* Handlers for other option IDs. */</span>
<span class="w">    </span><span class="p">....</span>

<span class="w">    </span><span class="k">default</span><span class="o">:</span>
<span class="w">        </span><span class="cm">/* The option is not supported by the module. */</span>
<span class="w">        </span><span class="n">LOG_WRN</span><span class="p">(</span><span class="s">&quot;Unknown opt: %&quot;</span><span class="w"> </span><span class="n">PRIu8</span><span class="p">,</span><span class="w"> </span><span class="n">opt_id</span><span class="p">);</span>
<span class="w">        </span><span class="k">break</span><span class="p">;</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
</li>
</ul>
</li>
</ol>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>A configuration channel listener can specify its variant by providing an option named <code class="xref c c-macro docutils literal notranslate"><span class="pre">OPT_DESCR_MODULE_VARIANT</span></code>.
On a fetch operation of this option, the module must provide an array of characters that represents the module variant.</p>
<ul class="simple">
<li><p>The <a class="reference internal" href="motion.html#nrf-desktop-motion"><span class="std std-ref">Motion module</span></a> uses the module variant to specify the motion sensor model.</p></li>
<li><p>The <a class="reference internal" href="../../../scripts/hid_configurator/README.html#nrf-desktop-config-channel-script"><span class="std std-ref">HID configurator for nRF Desktop</span></a> uses the module variant to provide a separate description of the configurable module for every module variant.</p></li>
</ul>
</div>
<p>For an example of a module that uses the configuration channel, see the following files:</p>
<ul class="simple">
<li><p><code class="file docutils literal notranslate"><span class="pre">src/modules/ble_qos.c</span></code></p></li>
<li><p><code class="file docutils literal notranslate"><span class="pre">src/modules/led_stream.c</span></code></p></li>
<li><p><code class="file docutils literal notranslate"><span class="pre">src/modules/dfu.c</span></code></p></li>
<li><p><code class="file docutils literal notranslate"><span class="pre">src/hw_interface/motion_sensor.c</span></code></p></li>
</ul>
</section>
</section>
<section id="dependencies">
<h2><a class="toc-backref" href="#id25">Dependencies</a><a class="headerlink" href="#dependencies" title="Permalink to this heading"></a></h2>
<p>The configuration channel uses the <a class="reference internal" href="../../../libraries/others/app_event_manager.html#app-event-manager"><span class="std std-ref">Application Event Manager</span></a> events to propagate the configuration data.</p>
<p>Dependencies for the host software are described in the <a class="reference internal" href="../../../scripts/hid_configurator/README.html#nrf-desktop-config-channel-script"><span class="std std-ref">HID configurator for nRF Desktop</span></a>.</p>
</section>
<section id="api-documentation">
<h2><a class="toc-backref" href="#id26">API documentation</a><a class="headerlink" href="#api-documentation" title="Permalink to this heading"></a></h2>
<p>The following API is used by the configuration channel transports.
The configurable application modules (configuration channel listeners) do not use it.</p>
<div class="line-block">
<div class="line">Header file: <code class="file docutils literal notranslate"><span class="pre">applications/nrf_desktop/src/util/config_channel_transport.h</span></code></div>
<div class="line">Source file: <code class="file docutils literal notranslate"><span class="pre">applications/nrf_desktop/src/util/config_channel_transport.c</span></code></div>
</div>
<dl>
<dt class="sig sig-object cpp">
<span class="target" id="group__config__channel__transport"></span><em><span class="pre">group</span></em> <span class="sig-name descname"><span class="pre">config_channel_transport</span></span></dt>
<dd><p>API for the configuration channel transport. </p>
<div class="breathe-sectiondef docutils container">
<p class="breathe-sectiondef-title rubric" id="breathe-section-title-enums">Enums</p>
<dl class="c enum">
<dt class="sig sig-object c" id="c.config_channel_transport_state">
<span class="target" id="group__config__channel__transport_1ga9050bf9076cc5b6f94390c0a0d39c95c"></span><span class="k"><span class="pre">enum</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">config_channel_transport_state</span></span></span><a class="headerlink" href="#c.config_channel_transport_state" title="Permalink to this definition"></a><br /></dt>
<dd><p>Config channel transport states. </p>
<p><em>Values:</em></p>
<dl class="c enumerator">
<dt class="sig sig-object c" id="c.config_channel_transport_state.CONFIG_CHANNEL_TRANSPORT_DISABLED">
<span class="target" id="group__config__channel__transport_1gga9050bf9076cc5b6f94390c0a0d39c95cac750eb4396b664d68b842f9aa2a06278"></span><span class="k"><span class="pre">enumerator</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">CONFIG_CHANNEL_TRANSPORT_DISABLED</span></span></span><a class="headerlink" href="#c.config_channel_transport_state.CONFIG_CHANNEL_TRANSPORT_DISABLED" title="Permalink to this definition"></a><br /></dt>
<dd></dd></dl>

<dl class="c enumerator">
<dt class="sig sig-object c" id="c.config_channel_transport_state.CONFIG_CHANNEL_TRANSPORT_IDLE">
<span class="target" id="group__config__channel__transport_1gga9050bf9076cc5b6f94390c0a0d39c95ca914597e2f1557f8ee5a018ebaf51ad9c"></span><span class="k"><span class="pre">enumerator</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">CONFIG_CHANNEL_TRANSPORT_IDLE</span></span></span><a class="headerlink" href="#c.config_channel_transport_state.CONFIG_CHANNEL_TRANSPORT_IDLE" title="Permalink to this definition"></a><br /></dt>
<dd></dd></dl>

<dl class="c enumerator">
<dt class="sig sig-object c" id="c.config_channel_transport_state.CONFIG_CHANNEL_TRANSPORT_WAIT_RSP">
<span class="target" id="group__config__channel__transport_1gga9050bf9076cc5b6f94390c0a0d39c95ca21501edfa747e452859f1b8b8f6d51b8"></span><span class="k"><span class="pre">enumerator</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">CONFIG_CHANNEL_TRANSPORT_WAIT_RSP</span></span></span><a class="headerlink" href="#c.config_channel_transport_state.CONFIG_CHANNEL_TRANSPORT_WAIT_RSP" title="Permalink to this definition"></a><br /></dt>
<dd></dd></dl>

<dl class="c enumerator">
<dt class="sig sig-object c" id="c.config_channel_transport_state.CONFIG_CHANNEL_TRANSPORT_RSP_READY">
<span class="target" id="group__config__channel__transport_1gga9050bf9076cc5b6f94390c0a0d39c95cacea543c83f9964eb473de51ff3f0b4a9"></span><span class="k"><span class="pre">enumerator</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">CONFIG_CHANNEL_TRANSPORT_RSP_READY</span></span></span><a class="headerlink" href="#c.config_channel_transport_state.CONFIG_CHANNEL_TRANSPORT_RSP_READY" title="Permalink to this definition"></a><br /></dt>
<dd></dd></dl>

</dd></dl>

</div>
<div class="breathe-sectiondef docutils container">
<p class="breathe-sectiondef-title rubric" id="breathe-section-title-functions">Functions</p>
<dl class="c function">
<dt class="sig sig-object c" id="c.config_channel_report_parse">
<span class="target" id="group__config__channel__transport_1ga89c57f55b78d35634c18f01661184d79"></span><span class="kt"><span class="pre">int</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">config_channel_report_parse</span></span></span><span class="sig-paren">(</span><span class="k"><span class="pre">const</span></span><span class="w"> </span><span class="n"><span class="pre">uint8_t</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">buffer</span></span>, <span class="n"><span class="pre">size_t</span></span><span class="w"> </span><span class="n"><span class="pre">length</span></span>, <span class="k"><span class="pre">struct</span></span><span class="w"> </span><span class="n"><span class="pre">config_event</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">event</span></span><span class="sig-paren">)</span><a class="headerlink" href="#c.config_channel_report_parse" title="Permalink to this definition"></a><br /></dt>
<dd><p>Parse the configuration channel report. </p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>buffer</strong> – Pointer to the report buffer to be parsed. </p></li>
<li><p><strong>length</strong> – Length of the buffer. </p></li>
<li><p><strong>event</strong> – Pointer to the event used to store the parsed values.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Number of parsed bytes if the operation was successful. Otherwise, a negative error code is returned. </p>
</dd>
</dl>
</dd></dl>

<dl class="c function">
<dt class="sig sig-object c" id="c.config_channel_report_fill">
<span class="target" id="group__config__channel__transport_1ga95318bb6af1353f5f8312648c8cae88a"></span><span class="kt"><span class="pre">int</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">config_channel_report_fill</span></span></span><span class="sig-paren">(</span><span class="n"><span class="pre">uint8_t</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">buffer</span></span>, <span class="k"><span class="pre">const</span></span><span class="w"> </span><span class="n"><span class="pre">size_t</span></span><span class="w"> </span><span class="n"><span class="pre">length</span></span>, <span class="k"><span class="pre">const</span></span><span class="w"> </span><span class="k"><span class="pre">struct</span></span><span class="w"> </span><span class="n"><span class="pre">config_event</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">event</span></span><span class="sig-paren">)</span><a class="headerlink" href="#c.config_channel_report_fill" title="Permalink to this definition"></a><br /></dt>
<dd><p>Fill the configuration channel report with values from a provided event. </p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>buffer</strong> – Pointer to the report buffer to be filled. </p></li>
<li><p><strong>length</strong> – Length of the buffer. </p></li>
<li><p><strong>event</strong> – Pointer to an event with values to be copied to the buffer.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Number of written bytes if the operation was successful. Otherwise, a negative error code is returned. </p>
</dd>
</dl>
</dd></dl>

<dl class="c function">
<dt class="sig sig-object c" id="c.config_channel_transport_init">
<span class="target" id="group__config__channel__transport_1ga404b12e238955d37ecf91a89b10e5fd0"></span><span class="kt"><span class="pre">void</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">config_channel_transport_init</span></span></span><span class="sig-paren">(</span><span class="k"><span class="pre">struct</span></span><span class="w"> </span><a class="reference internal" href="#c.config_channel_transport" title="config_channel_transport"><span class="n"><span class="pre">config_channel_transport</span></span></a><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">transport</span></span><span class="sig-paren">)</span><a class="headerlink" href="#c.config_channel_transport_init" title="Permalink to this definition"></a><br /></dt>
<dd><p>Initialize the configuration channel transport instance. </p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>transport</strong> – Pointer to the configuration channel transport instance. </p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="c function">
<dt class="sig sig-object c" id="c.config_channel_transport_get">
<span class="target" id="group__config__channel__transport_1gaa08f360b06141e79501fe60ce277f6f0"></span><span class="kt"><span class="pre">int</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">config_channel_transport_get</span></span></span><span class="sig-paren">(</span><span class="k"><span class="pre">struct</span></span><span class="w"> </span><a class="reference internal" href="#c.config_channel_transport" title="config_channel_transport"><span class="n"><span class="pre">config_channel_transport</span></span></a><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">transport</span></span>, <span class="n"><span class="pre">uint8_t</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">buffer</span></span>, <span class="n"><span class="pre">size_t</span></span><span class="w"> </span><span class="n"><span class="pre">length</span></span><span class="sig-paren">)</span><a class="headerlink" href="#c.config_channel_transport_get" title="Permalink to this definition"></a><br /></dt>
<dd><p>Handle a get operation on the configuration channel. </p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>transport</strong> – Pointer to the configuration channel transport instance. </p></li>
<li><p><strong>buffer</strong> – Pointer to the buffer to be filled when handling the get request. </p></li>
<li><p><strong>length</strong> – Length of the data to be filled.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>0 if the operation was successful. Otherwise, a (negative) error code is returned. </p>
</dd>
</dl>
</dd></dl>

<dl class="c function">
<dt class="sig sig-object c" id="c.config_channel_transport_set">
<span class="target" id="group__config__channel__transport_1ga876b1471d74f3925092e00cae212811b"></span><span class="kt"><span class="pre">int</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">config_channel_transport_set</span></span></span><span class="sig-paren">(</span><span class="k"><span class="pre">struct</span></span><span class="w"> </span><a class="reference internal" href="#c.config_channel_transport" title="config_channel_transport"><span class="n"><span class="pre">config_channel_transport</span></span></a><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">transport</span></span>, <span class="k"><span class="pre">const</span></span><span class="w"> </span><span class="n"><span class="pre">uint8_t</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">buffer</span></span>, <span class="n"><span class="pre">size_t</span></span><span class="w"> </span><span class="n"><span class="pre">length</span></span><span class="sig-paren">)</span><a class="headerlink" href="#c.config_channel_transport_set" title="Permalink to this definition"></a><br /></dt>
<dd><p>Handle a set operation on the configuration channel. </p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>transport</strong> – Pointer to the configuration channel transport instance. </p></li>
<li><p><strong>buffer</strong> – Pointer to the report buffer to be parsed to handle the set request. </p></li>
<li><p><strong>length</strong> – Length of the incoming data.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>0 if the operation was successful. Otherwise, a (negative) error code is returned. </p>
</dd>
</dl>
</dd></dl>

<dl class="c function">
<dt class="sig sig-object c" id="c.config_channel_transport_get_disabled">
<span class="target" id="group__config__channel__transport_1ga2c0ab2b64579203812ef5a88d3e99c7e"></span><span class="kt"><span class="pre">int</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">config_channel_transport_get_disabled</span></span></span><span class="sig-paren">(</span><span class="n"><span class="pre">uint8_t</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">buffer</span></span>, <span class="n"><span class="pre">size_t</span></span><span class="w"> </span><span class="n"><span class="pre">length</span></span><span class="sig-paren">)</span><a class="headerlink" href="#c.config_channel_transport_get_disabled" title="Permalink to this definition"></a><br /></dt>
<dd><p>Handle a get operation and inform that the transport is disabled. </p>
<p>Fills the buffer with response informing that the transport is disabled and cannot be used to configure device. If a given transport is disabled, set operation should be ignored and get operation should use this function to prepare response for host.</p>
<p>The disabled transport returns disconnected status.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>buffer</strong> – Pointer to the buffer to be filled. </p></li>
<li><p><strong>length</strong> – Length of the data to be filled.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>0 if the operation was successful. Otherwise, a (negative) error code is returned. </p>
</dd>
</dl>
</dd></dl>

<dl class="c function">
<dt class="sig sig-object c" id="c.config_channel_transport_rsp_receive">
<span class="target" id="group__config__channel__transport_1gabb9e5f5174e787d72c837ccd2770ab00"></span><span class="kt"><span class="pre">bool</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">config_channel_transport_rsp_receive</span></span></span><span class="sig-paren">(</span><span class="k"><span class="pre">struct</span></span><span class="w"> </span><a class="reference internal" href="#c.config_channel_transport" title="config_channel_transport"><span class="n"><span class="pre">config_channel_transport</span></span></a><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">transport</span></span>, <span class="k"><span class="pre">struct</span></span><span class="w"> </span><span class="n"><span class="pre">config_event</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">event</span></span><span class="sig-paren">)</span><a class="headerlink" href="#c.config_channel_transport_rsp_receive" title="Permalink to this definition"></a><br /></dt>
<dd><p>Handle the response received from higher layer. </p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>transport</strong> – Pointer to the configuration channel transport instance. </p></li>
<li><p><strong>event</strong> – Pointer to the event carrying the received response.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>true if response was designated for this transport. Otherwise returns false. </p>
</dd>
</dl>
</dd></dl>

<dl class="c function">
<dt class="sig sig-object c" id="c.config_channel_transport_disconnect">
<span class="target" id="group__config__channel__transport_1gad3b69515199cbf3c197309e76702c3aa"></span><span class="kt"><span class="pre">void</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">config_channel_transport_disconnect</span></span></span><span class="sig-paren">(</span><span class="k"><span class="pre">struct</span></span><span class="w"> </span><a class="reference internal" href="#c.config_channel_transport" title="config_channel_transport"><span class="n"><span class="pre">config_channel_transport</span></span></a><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">transport</span></span><span class="sig-paren">)</span><a class="headerlink" href="#c.config_channel_transport_disconnect" title="Permalink to this definition"></a><br /></dt>
<dd><p>Handle the configuration channel transport disconnection. </p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>transport</strong> – Pointer to the configuration channel transport instance </p></li>
</ul>
</dd>
</dl>
</dd></dl>

</div>
<dl class="c struct">
<dt class="sig sig-object c" id="c.config_channel_transport">
<span class="target" id="structconfig__channel__transport"></span><span class="k"><span class="pre">struct</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">config_channel_transport</span></span></span><a class="headerlink" href="#c.config_channel_transport" title="Permalink to this definition"></a><br /></dt>
<dd><div class="docutils container">
<em>#include &lt;config_channel_transport.h&gt;</em></div>
<p>Configuration channel transport. </p>
</dd></dl>

</dd></dl>

</section>
</section>


           </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="cpu_meas.html" class="btn btn-neutral float-right" title="CPU measurement module" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="click_detector.html" class="btn btn-neutral" title="Click detector module" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">

<table>
<tr>
<td>
    <p>
        &copy; Copyright 2019-2023, Nordic Semiconductor.
      Last updated on Mar 20, 2023.

    </p>
</td>
<td id="nordiclogo">
  <a href="https://www.nordicsemi.com/"><img src="../../../_static/images/nordic-logo.png" border="0"/></a>
</td>
</tr>
</table>
  </div> 


</footer>

<div id="scroll-container">
  <button type="button" id="scroll-btn" class="btn">
    <svg xmlns="http://www.w3.org/2000/svg" height="24" viewBox="0 0 24 24" width="24"><path d="M0 0h24v24H0z" fill="none"/><path d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z" fill="#fff"/></svg>
  </button>
</div>

<script>
  const scrollBtn = document.querySelector("#scroll-btn");

  document.addEventListener("scroll", () => {
    if (window.scrollY > 400) {
          scrollBtn.style.visibility = "visible";
      } else {
          scrollBtn.style.visibility = "hidden";
      }
  });

  scrollBtn.addEventListener("click", () => {
      window.scrollTo({ top: 0, behavior: "smooth" });
  });
</script>
        </div>
      </div>
    </section>
  </div>
  
  <div class="rst-versions" data-toggle="rst-versions" role="note" aria-label="versions">
    <span class="rst-current-version" data-toggle="rst-current-version">
      <span class="fa fa-book"> nRF Connect SDK</span>
       <span class="fa fa-caret-down"></span>
    </span>
    <div class="rst-other-versions">
      
      <div class="rst-other-version ncs">
        <a href="../../../../nrf/index.html">nRF Connect SDK</a>
      </div>
      
      <div class="rst-other-version nrfx">
        <a href="../../../../nrfx/index.html">nrfx</a>
      </div>
      
      <div class="rst-other-version nrfxlib">
        <a href="../../../../nrfxlib/README.html">nrfxlib</a>
      </div>
      
      <div class="rst-other-version zephyr">
        <a href="../../../../zephyr/index.html">Zephyr Project</a>
      </div>
      
      <div class="rst-other-version mcuboot">
        <a href="../../../../mcuboot/wrapper.html">MCUboot</a>
      </div>
      
      <div class="rst-other-version tfm">
        <a href="../../../../tfm/index.html">Trusted Firmware-M</a>
      </div>
      
      <div class="rst-other-version matter">
        <a href="../../../../matter/index.html">Matter</a>
      </div>
      
      <div class="rst-other-version kconfig">
        <a href="../../../../kconfig/index.html">Kconfig Reference</a>
      </div>
    </div>
  </div><script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>