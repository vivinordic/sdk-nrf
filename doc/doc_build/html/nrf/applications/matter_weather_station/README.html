<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Thingy:53: Matter weather station &mdash; nRF Connect SDK 2.3.99 documentation</title>
      <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="../../_static/css/nordic.css" type="text/css" />
      <link rel="stylesheet" href="../../_static/togglebutton.css" type="text/css" />
      <link rel="stylesheet" href="../../_static/css/nrf.css" type="text/css" />
      <link rel="stylesheet" href="../../_static/tabs.css" type="text/css" /> 
  <!--[if lt IE 9]>
    <script src="../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="../../" id="documentation_options" src="../../_static/documentation_options.js"></script>
        <script src="../../_static/jquery.js"></script>
        <script src="../../_static/underscore.js"></script>
        <script src="../../_static/_sphinx_javascript_frameworks_compat.js"></script>
        <script src="../../_static/doctools.js"></script>
        <script src="../../_static/sphinx_highlight.js"></script>
        <script src="https://www.googletagmanager.com/gtag/js?id=G-ZPVZRKFQJR"></script>
        <script src="../../_static/js/ga-tracker.js"></script>
        <script data-culture="EN" id="CookieConsent" type="text/javascript" src="https://policy.app.cookieinformation.com/uc.js"></script>
        <script>let toggleHintShow = 'Click to show';</script>
        <script>let toggleHintHide = 'Click to hide';</script>
        <script>let toggleOpenOnPrint = 'true';</script>
        <script src="../../_static/togglebutton.js"></script>
        <script>var togglebuttonSelector = '.toggle, .admonition.dropdown';</script>
    <script src="../../_static/js/theme.js"></script>
<script
  type="text/javascript"
  src="../../_static/js/ncs.js"
></script>
<script src="../../_static/js/bootstrap.bundle.min.js"></script>

    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="Thingy:53: Zigbee weather station" href="../zigbee_weather_station/README.html" />
    <link rel="prev" title="nRF Machine Learning" href="../machine_learning/README.html" />
<link
  href="../../_static/css/bootstrap.min.css"
  rel="stylesheet"
/>
<link
  rel="shortcut icon"
  href="../../_static/images/favicon.ico"
/>

</head>

<body class="wy-body-for-nav">
<div class="announcement"></div>
<div class="d-print-none ncs-header">
  <div class="container-xl ncs-header-top">
    <div class="row h-100">
      <div class="d-none d-md-block col-2">
        <div class="bg-white py-4 px-3 ml-2 ncs-header-logo">
          <img
            class="ncs-header-logo"
            src="../../_static/images/nordic-logo.png"
            alt=""
          />
        </div>
      </div>
      <div
        class="col-8 col-md-7 pl-md-4 d-flex align-self-center justify-content-center"
      >
        <form class="w-75" action="../../search.html" method="get">
          <div class="form-group">
            <input
              type="text"
              name="q"
              class="ncs-search-input form-control"
              placeholder="Search all docs..."
            />
          </div>
        </form>
      </div>
      <div class="col-4 col-md-3 d-md-block p-3 text-end">
        <div class="dropdown">
          <button
            class="btn dropdown-toggle ncs-btn-versions"
            type="button"
            id="dropdownMenuButton1"
            data-bs-toggle="dropdown"
            aria-expanded="false"
          >
            <span class="d-none d-md-inline">nRF Connect SDK</span>
            <span id="ncsversion" class="d-inline"></span>
          </button>
          <div class="dropdown-menu" aria-labelledby="dropdownMenuButton"></div>
        </div>
      </div>
    </div>
  </div>
  <div class="ncs-header-nav">
    <div class="container-xl">
      <div class="row">
        <div class="col col-12 d-flex justify-content-center">
          <nav class="navbar navbar-dark navbar-expand-lg p-0">
            <span class="navbar-brand d-block d-lg-none py-2 pl-1"
              >Documentation sets</span
            >
            <button
              class="navbar-toggler"
              type="button"
              data-bs-toggle="collapse"
              data-bs-target="#navbarNavAltMarkup"
              aria-controls="navbarNavAltMarkup"
              aria-expanded="false"
              aria-label="Toggle navigation"
            >
              <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="navbarNavAltMarkup">
              <ul class="navbar-nav">
                <li class="nav-item active py-1 px-3">
                  <a
                    class="nav-link"
                    href="../../../nrf/index.html"
                    >nRF Connect SDK</a
                  >
                </li>
                <li><hr class="dropdown-divider" /></li>
                <li class="nav-item  py-1 px-3">
                  <a
                    class="nav-link"
                    href="../../../nrfx/index.html"
                    >nrfx</a
                  >
                </li>
                <li><hr class="dropdown-divider" /></li>
                <li class="nav-item  py-1 px-3">
                  <a
                    class="nav-link"
                    href="../../../nrfxlib/README.html"
                    >nrfxlib</a
                  >
                </li>
                <li><hr class="dropdown-divider" /></li>
                <li class="nav-item  py-1 px-3">
                  <a
                    class="nav-link"
                    href="../../../zephyr/index.html"
                    >Zephyr Project</a
                  >
                </li>
                <li><hr class="dropdown-divider" /></li>
                <li class="nav-item  py-1 px-3">
                  <a
                    class="nav-link"
                    href="../../../mcuboot/wrapper.html"
                    >MCUboot</a
                  >
                </li>
                <li><hr class="dropdown-divider" /></li>
                <li class="nav-item  py-1 px-3">
                  <a
                    class="nav-link"
                    href="../../../tfm/index.html"
                    >Trusted Firmware-M</a
                  >
                </li>
                <li><hr class="dropdown-divider" /></li>
                <li class="nav-item  py-1 px-3">
                  <a
                    class="nav-link"
                    href="../../../matter/index.html"
                    >Matter</a
                  >
                </li>
                <li><hr class="dropdown-divider" /></li>
                <li class="nav-item  py-1 px-3">
                  <a
                    class="nav-link"
                    href="../../../kconfig/index.html"
                    >Kconfig Reference</a
                  >
                </li>
                <li><hr class="dropdown-divider" /></li>
              </ul>
            </div>
          </nav>
        </div>
      </div>
    </div>
  </div>
</div>

  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
            <a href="../../index.html" class="icon icon-home"> nRF Connect SDK
          </a>
              <div class="version">
                2.3.99
              </div>
<div id="searchbox" role="search">
  <div class="searchformwrapper">
    <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
      <input type="text" name="q" placeholder="Search docs" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
  </div>
</div>
<script>$('#searchbox').show(0);</script>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Contents</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../introduction.html">Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../getting_started.html">Getting started</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../dev_model.html">Development model</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../app_dev.html">Application development</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../security.html">Security</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../ecosystem_integration.html">Ecosystems integration</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../nrf91.html">Working with nRF91 Series</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../nrf70.html">Working with nRF70 Series</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../nrf53.html">Working with nRF53 Series</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../nrf52.html">Working with nRF52 Series</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../protocols.html">Protocols</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../../applications.html">Applications</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../connectivity_bridge/README.html">Connectivity bridge</a></li>
<li class="toctree-l2"><a class="reference internal" href="../asset_tracker_v2/README.html">nRF9160: Asset Tracker v2</a></li>
<li class="toctree-l2"><a class="reference internal" href="../serial_lte_modem/README.html">nRF9160: Serial LTE modem</a></li>
<li class="toctree-l2"><a class="reference internal" href="../nrf_desktop/README.html">nRF Desktop</a></li>
<li class="toctree-l2"><a class="reference internal" href="../nrf5340_audio/README.html">nRF5340 Audio</a></li>
<li class="toctree-l2"><a class="reference internal" href="../machine_learning/README.html">nRF Machine Learning</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">Thingy:53: Matter weather station</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#requirements">Requirements</a></li>
<li class="toctree-l3"><a class="reference internal" href="#overview">Overview</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#remote-testing-in-a-network">Remote testing in a network</a></li>
<li class="toctree-l4"><a class="reference internal" href="#matter-weather-station-build-types">Matter weather station build types</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#user-interface">User interface</a></li>
<li class="toctree-l3"><a class="reference internal" href="#configuration">Configuration</a></li>
<li class="toctree-l3"><a class="reference internal" href="#building-and-running">Building and running</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#selecting-a-build-type">Selecting a build type</a></li>
<li class="toctree-l4"><a class="reference internal" href="#generating-factory-data">Generating factory data</a></li>
<li class="toctree-l4"><a class="reference internal" href="#testing">Testing</a></li>
<li class="toctree-l4"><a class="reference internal" href="#updating-the-device-firmware">Updating the device firmware</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#dependencies">Dependencies</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../zigbee_weather_station/README.html">Thingy:53: Zigbee weather station</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../samples.html">Samples</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../drivers.html">Drivers</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../libraries/index.html">Libraries</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../scripts.html">Scripts</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../release_notes.html">Release notes</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../known_issues.html">Known issues</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../software_maturity.html">Software maturity levels</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../documentation.html">About this documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../glossary.html">Glossary</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">nRF Connect SDK</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../../index.html" class="icon icon-home"></a></li>
          <li class="breadcrumb-item"><a href="../../applications.html">Applications</a></li>
      <li class="breadcrumb-item active">Thingy:53: Matter weather station</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../../_sources/applications/matter_weather_station/README.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="thingy-53-matter-weather-station">
<span id="matter-weather-station-app"></span><h1>Thingy:53: Matter weather station<a class="headerlink" href="#thingy-53-matter-weather-station" title="Permalink to this heading"></a></h1>
<div class="contents local topic" id="contents">
<ul class="simple">
<li><p><a class="reference internal" href="#requirements" id="id8">Requirements</a></p></li>
<li><p><a class="reference internal" href="#overview" id="id9">Overview</a></p>
<ul>
<li><p><a class="reference internal" href="#remote-testing-in-a-network" id="id10">Remote testing in a network</a></p></li>
<li><p><a class="reference internal" href="#matter-weather-station-build-types" id="id11">Matter weather station build types</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#user-interface" id="id12">User interface</a></p></li>
<li><p><a class="reference internal" href="#configuration" id="id13">Configuration</a></p></li>
<li><p><a class="reference internal" href="#building-and-running" id="id14">Building and running</a></p>
<ul>
<li><p><a class="reference internal" href="#selecting-a-build-type" id="id15">Selecting a build type</a></p></li>
<li><p><a class="reference internal" href="#generating-factory-data" id="id16">Generating factory data</a></p></li>
<li><p><a class="reference internal" href="#testing" id="id17">Testing</a></p></li>
<li><p><a class="reference internal" href="#updating-the-device-firmware" id="id18">Updating the device firmware</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#dependencies" id="id19">Dependencies</a></p></li>
</ul>
</div>
<p>This Matter weather station application demonstrates the usage of the <a class="reference internal" href="../../protocols/matter/index.html#ug-matter"><span class="std std-ref">Matter</span></a> application layer to build a weather station device using the Nordic Thingy:53.
Such a device lets you remotely gather different kinds of data using the device sensors, such as temperature, air pressure, and relative humidity.
The device works as a Matter accessory device, meaning it can be paired and controlled remotely over a Matter network built on top of a low-power, 802.15.4 Thread network.
You can use this application as a reference for creating your own application.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The <a class="reference external" href="https://developer.nordicsemi.com/nRF_Connect_SDK/doc/2.1.1/nrf/applications/matter_weather_station/README.html">Matter weather station application from the v2.1.1</a> nRF Connect SDK release participated in Matter Specification Validation Event (SVE) and successfully passed all required test cases to be considered as a device compliant with Matter 1.0.
You can use the nRF Connect SDK v2.1.1 release to see the application configuration and the files that were originally used in Matter 1.0 certification.</p>
</div>
<section id="requirements">
<h2><a class="toc-backref" href="#id8">Requirements</a><a class="headerlink" href="#requirements" title="Permalink to this heading"></a></h2>
<p>The application supports the following development kits:</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 28%" />
<col style="width: 7%" />
<col style="width: 39%" />
<col style="width: 25%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Hardware platforms</p></th>
<th class="head"><p>PCA</p></th>
<th class="head"><p>Board name</p></th>
<th class="head"><p>Build target</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><a class="reference internal" href="../../working_with_nrf/nrf53/thingy53.html#ug-thingy53"><span class="std std-ref">Thingy:53</span></a></p></td>
<td><p>PCA20053</p></td>
<td><p><span class="xref std std-ref">thingy53_nrf5340</span></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">thingy53_nrf5340_cpuapp</span></code></p></td>
</tr>
</tbody>
</table>
<p>To commission the weather station device and control it remotely through a Thread network, you also need a Matter controller device <a class="reference internal" href="../../protocols/matter/getting_started/testing/index.html#ug-matter-configuring"><span class="std std-ref">configured on PC or smartphone</span></a>.
This requires additional hardware depending on your setup.
The recommended way of getting measurement values is using the mobile Matter controller application that comes with a graphical interface, performs measurements automatically and visualizes the data.</p>
<p>To program a Thingy:53 device where the preprogrammed MCUboot bootloader has been erased, you need the external J-Link programmer.
If you have an nRF5340 DK that has an onboard J-Link programmer, you can also use it for this purpose.</p>
<p>If the Thingy:53 is programmed with Thingy:53-compatible sample or application, you can also update the firmware using MCUboot’s serial recovery or DFU over Bluetooth LE.
See <a class="reference internal" href="../../working_with_nrf/nrf53/thingy53.html#thingy53-app-guide"><span class="std std-ref">Thingy:53 application guide</span></a> for details.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Matter requires the GN tool.
If you are updating from the nRF Connect SDK version earlier than v1.5.0, see the <a class="reference internal" href="../../getting_started/installing.html#gs-installing-gn"><span class="std std-ref">GN installation instructions</span></a>.</p>
</div>
</section>
<section id="overview">
<h2><a class="toc-backref" href="#id9">Overview</a><a class="headerlink" href="#overview" title="Permalink to this heading"></a></h2>
<p>The application uses a single button for controlling the device state.
The weather station device is periodically performing temperature, air pressure, and relative humidity measurements.
The measurement results are stored in the device memory and can be read using the Matter controller.
The controller communicates with the weather station device over the Matter protocol using Zigbee Cluster Library (ZCL).
The library describes data measurements within the proper clusters that correspond to the measurement type.</p>
<p>The application supports over-the-air (OTA) device firmware upgrade (DFU) using one of the two following protocols:</p>
<ul class="simple">
<li><p>Matter OTA update protocol that uses the Matter operational network for querying and downloading a new firmware image.</p></li>
<li><p>Simple Management Protocol (SMP) over Bluetooth® LE.
In this case, the DFU can be done either using a smartphone application or a PC command line tool.
Note that this protocol is not part of the Matter specification.</p></li>
</ul>
<p>In both cases, MCUboot secure bootloader is used to apply the new firmware image.
For information about how to upgrade the device firmware using a PC or a mobile, see the <a class="reference internal" href="#matter-weather-station-app-dfu"><span class="std std-ref">Updating the device firmware</span></a> section.</p>
<section id="remote-testing-in-a-network">
<span id="matter-weather-station-network-mode"></span><h3><a class="toc-backref" href="#id10">Remote testing in a network</a><a class="headerlink" href="#remote-testing-in-a-network" title="Permalink to this heading"></a></h3>
<p>By default, the Matter accessory device has Thread disabled, and it must be paired with the Matter controller over Bluetooth LE to get configuration from it if you want to use the device within a Thread network.
To do this, the device must be made discoverable over Bluetooth LE.</p>
<p>The Bluetooth LE advertising starts automatically upon the device startup, but only for a predefined period of time (15 minutes by default).
If the Bluetooth LE advertising times out, you can re-enable it manually using <strong>Button (SW3)</strong>.</p>
<p>Additionally, the controller must get the onboarding information from the Matter accessory device and provision the device into the network.
For details, see the <a class="reference internal" href="#testing">Testing</a> section.</p>
</section>
<section id="matter-weather-station-build-types">
<span id="matter-weather-station-app-build-types"></span><h3><a class="toc-backref" href="#id11">Matter weather station build types</a><a class="headerlink" href="#matter-weather-station-build-types" title="Permalink to this heading"></a></h3>
<p>The Matter weather station application does not use a single <code class="file docutils literal notranslate"><span class="pre">prj.conf</span></code> file.
Configuration files are provided for different build types and they are located in the <code class="file docutils literal notranslate"><span class="pre">configuration/thingy53_nrf5340_cpuapp</span></code> directory.</p>
<p>The <code class="file docutils literal notranslate"><span class="pre">prj.conf</span></code> file represents a <code class="docutils literal notranslate"><span class="pre">debug</span></code> build type.
Other build types are covered by dedicated files with the build type added as a suffix to the <code class="docutils literal notranslate"><span class="pre">prj</span></code> part, as per the following list.
For example, the <code class="docutils literal notranslate"><span class="pre">release</span></code> build type file name is <code class="file docutils literal notranslate"><span class="pre">prj_release.conf</span></code>.
If a board has other configuration files, for example associated with partition layout or child image configuration, these follow the same pattern.</p>
<p>When the <code class="docutils literal notranslate"><span class="pre">CONF_FILE</span></code> variable contains a single file and this file follows the naming pattern <code class="file docutils literal notranslate"><span class="pre">prj_&lt;buildtype&gt;.conf</span></code>, then the build type will be inferred to be <em>&lt;buildtype&gt;</em>.
The build type cannot be set explicitly.
The <em>&lt;buildtype&gt;</em> can be any string, but it is common to use <code class="docutils literal notranslate"><span class="pre">release</span></code> and <code class="docutils literal notranslate"><span class="pre">debug</span></code>.</p>
<p>For information about how to set variables, see <span class="xref std std-ref">zephyr:important-build-vars</span> in the Zephyr documentation.</p>
<p>The Partition Manager’s <a class="reference internal" href="../../scripts/partition_manager/partition_manager.html#ug-pm-static"><span class="std std-ref">static configuration</span></a> can also be made dependent on the build type.
When the build type has been inferred, the file <code class="file docutils literal notranslate"><span class="pre">pm_static_&lt;buildtype&gt;.yml</span></code> will have precedence over <code class="file docutils literal notranslate"><span class="pre">pm_static.yml</span></code>.</p>
<p>The child image Kconfig configuration can also be made dependent on the build type.
The child image Kconfig overlay file is named <code class="file docutils literal notranslate"><span class="pre">child_image/&lt;child_image_name&gt;.conf</span></code> instead of <code class="file docutils literal notranslate"><span class="pre">prj.conf</span></code>, but otherwise follows the same pattern as the parent Kconfig.</p>
<p>Alternatively, the child image Kconfig configuration file can be introduced as <code class="file docutils literal notranslate"><span class="pre">child_image/&lt;child_image_name&gt;/prj.conf</span></code> and follow the same pattern as the parent Kconfig.
For example, <code class="file docutils literal notranslate"><span class="pre">child_image/mcuboot/prj_release.conf</span></code> can be used to define <code class="docutils literal notranslate"><span class="pre">release</span></code> build type for <code class="docutils literal notranslate"><span class="pre">mcuboot</span></code> child image.</p>
<p>Before you start testing the application, you can select one of the build types supported by Matter weather station application, depending on the building method.
This application supports the following build types:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">debug</span></code> - Debug version of the application. You can use this version to enable additional features for verifying the application behavior, such as logs or command-line shell.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">release</span></code> - Release version of the application. You can use this version to enable only the necessary application functionalities to optimize its performance.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">factory_data</span></code> - Release version of the application that has factory data storage enabled.
You can use this version to enable reading factory data necessary from a separate partition in the device non-volatile memory.
This way, you can read information such as product information, keys, and certificates, useful for example for Matter certification.
See <a class="reference internal" href="#generating-factory-data">Generating factory data</a> to learn how to put factory data into device’s storage.
To learn more about factory data, read the <span class="xref std std-doc">matter:nrfconnect_factory_data_configuration</span> page in the Matter documentation.</p></li>
</ul>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p><a class="reference internal" href="#selecting-a-build-type">Selecting a build type</a> is optional.
The <code class="docutils literal notranslate"><span class="pre">debug</span></code> build type is used by default if no build type is explicitly selected.</p>
</div>
</section>
</section>
<section id="user-interface">
<h2><a class="toc-backref" href="#id12">User interface</a><a class="headerlink" href="#user-interface" title="Permalink to this heading"></a></h2>
<dl>
<dt>LED (LD1):</dt><dd><p>Shows the overall state of the device and its connectivity.
The following states are possible:</p>
<ul class="simple">
<li><p>Short flash on (green color, 50 ms on/950 ms off) - The device is in the unprovisioned (unpaired) state and is not advertising over Bluetooth LE.</p></li>
<li><p>Short flash on (blue color, 50 ms on/950 ms off) - The device is in the unprovisioned (unpaired) state, but is advertising over Bluetooth LE.</p></li>
<li><p>Rapid even flashing (blue color, 100 ms on/100 ms off) - The device is in the unprovisioned state and a commissioning application is connected through Bluetooth LE.</p></li>
<li><p>Short flash on (purple color, 50 ms on/950 ms off) - The device is fully provisioned and has Thread enabled.</p></li>
</ul>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Thingy:53 allows to control RGB components of its single LED independently.
This means that the listed color components can overlap, creating additional color effects.</p>
</div>
</dd>
<dt>Button (SW3):</dt><dd><p>Used during the commissioning procedure.
Depending on how long you press the button:</p>
<ul class="simple">
<li><p>If pressed for 6 seconds, it initiates the factory reset of the device.
Releasing the button within the 6-second window cancels the factory reset procedure.</p></li>
<li><p>If pressed for less than 3 seconds, it starts the NFC tag emulation, enables Bluetooth LE advertising for the predefined period of time (15 minutes by default), and makes the device discoverable over Bluetooth LE.</p></li>
</ul>
</dd>
<dt>USB port:</dt><dd><p>Used for getting logs from the device or communicating with it through the command-line interface.
It is enabled only for the debug configuration of an application.
See the <a class="reference internal" href="#selecting-a-build-type">Selecting a build type</a> section to learn how to select the debug configuration.</p>
</dd>
<dt>NFC port with antenna attached:</dt><dd><p>Used for obtaining the <a class="reference internal" href="#onboarding-information">Onboarding information</a> from the Matter accessory device to start the commissioning procedure.</p>
</dd>
</dl>
</section>
<section id="configuration">
<h2><a class="toc-backref" href="#id13">Configuration</a><a class="headerlink" href="#configuration" title="Permalink to this heading"></a></h2>
<p>See <a class="reference internal" href="../../getting_started/modifying.html#configure-application"><span class="std std-ref">Configuring your application</span></a> for information about how to permanently or temporarily change the configuration.</p>
</section>
<section id="building-and-running">
<h2><a class="toc-backref" href="#id14">Building and running</a><a class="headerlink" href="#building-and-running" title="Permalink to this heading"></a></h2>
<p>This sample can be found under <code class="file docutils literal notranslate"><span class="pre">applications/matter_weather_station</span></code> in the nRF Connect SDK folder structure.</p>
<p>To build the sample with Visual Studio Code, follow the steps listed on the <a class="reference external" href="https://nrfconnect.github.io/vscode-nrf-connect/get_started/build_app_ncs.html">How to build an application</a> page in the nRF Connect for VS Code extension documentation.
See <a class="reference internal" href="../../getting_started/programming.html#gs-programming"><span class="std std-ref">Building and programming an application</span></a> for other building and programming scenarios and <a class="reference internal" href="../../getting_started/testing.html#gs-testing"><span class="std std-ref">Testing and debugging an application</span></a> for general information about testing and debugging in the nRF Connect SDK.</p>
<section id="selecting-a-build-type">
<h3><a class="toc-backref" href="#id15">Selecting a build type</a><a class="headerlink" href="#selecting-a-build-type" title="Permalink to this heading"></a></h3>
<p>Before you start testing the application, you can select one of the <a class="reference internal" href="#matter-weather-station-app-build-types"><span class="std std-ref">Matter weather station build types</span></a>, depending on your building method.</p>
<section id="selecting-a-build-type-in-vsc">
<h4>Selecting a build type in Visual Studio Code<a class="headerlink" href="#selecting-a-build-type-in-vsc" title="Permalink to this heading"></a></h4>
<blockquote>
<div><p>To select the build type in the nRF Connect for VS Code extension:</p>
<ol class="arabic simple">
<li><p>When <a class="reference external" href="https://nrfconnect.github.io/vscode-nrf-connect/get_started/build_app_ncs.html">building an application</a> as described in the nRF Connect for VS Code extension documentation, follow the steps for setting up the build configuration.</p></li>
<li><p>In the <strong>Add Build Configuration</strong> screen, select the desired <code class="file docutils literal notranslate"><span class="pre">.conf</span></code> file from the <span class="guilabel">Configuration</span> drop-down menu.</p></li>
<li><p>Fill in other configuration options, if applicable, and click <span class="guilabel">Build Configuration</span>.</p></li>
</ol>
</div></blockquote>
</section>
<section id="selecting-a-build-type-from-command-line">
<h4>Selecting a build type from command line<a class="headerlink" href="#selecting-a-build-type-from-command-line" title="Permalink to this heading"></a></h4>
<blockquote>
<div><p>To select the build type when building the application from command line, specify the build type by adding the following parameter to the <code class="docutils literal notranslate"><span class="pre">west</span> <span class="pre">build</span></code> command:</p>
<pre class="highlight literal-block">-- -DCONF_FILE=prj_<em>selected_build_type</em>.conf</pre>
</div></blockquote>
<p>For example, you can replace the <em>selected_build_type</em> variable to build the <code class="docutils literal notranslate"><span class="pre">release</span></code> firmware for <code class="docutils literal notranslate"><span class="pre">thingy53_nrf5340_cpuapp</span></code> by running the following command in the project directory:</p>
<div class="highlight highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">west</span> <span class="n">build</span> <span class="o">-</span><span class="n">b</span> <span class="n">thingy53_nrf5340_cpuapp</span> <span class="o">-</span><span class="n">d</span> <span class="n">build_thingy53_nrf5340_cpuapp</span> <span class="o">--</span> <span class="o">-</span><span class="n">DCONF_FILE</span><span class="o">=</span><span class="n">prj_release</span><span class="o">.</span><span class="n">conf</span>
</pre></div>
</div>
<p>The <code class="docutils literal notranslate"><span class="pre">build_thingy53_nrf5340_cpuapp</span></code> parameter specifies the output directory for the build files.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>If the selected board does not support the selected build type, the build is interrupted.
For example, if the <code class="docutils literal notranslate"><span class="pre">shell</span></code> build type is not supported by the selected board, the following notification appears:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">File not found: ./ncs/nrf/applications/matter_weather_station/configuration/thingy53_nrf5340_cpuapp/prj_shell.conf</span>
</pre></div>
</div>
</div>
</section>
</section>
<section id="generating-factory-data">
<h3><a class="toc-backref" href="#id16">Generating factory data</a><a class="headerlink" href="#generating-factory-data" title="Permalink to this heading"></a></h3>
<p>To enable factory data support, you need to select the <code class="docutils literal notranslate"><span class="pre">factory_data</span></code> build type from the available application <a class="reference internal" href="#matter-weather-station-app-build-types"><span class="std std-ref">build types</span></a>.
You can generate new factory data set when building for the target board by invoking the following command:</p>
<div class="highlight highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">west</span> <span class="n">build</span> <span class="o">-</span><span class="n">b</span> <span class="n">thingy53_nrf5340_cpuapp</span> <span class="o">--</span> <span class="o">-</span><span class="n">DCONF_FILE</span><span class="o">=</span><span class="n">prj_factory_data</span><span class="o">.</span><span class="n">conf</span> <span class="o">-</span><span class="n">DOVERLAY_CONFIG</span><span class="o">=</span><span class="s2">&quot;../../overlay-factory_data_build.conf&quot;</span>
</pre></div>
</div>
<p>After building the target, the generated <code class="file docutils literal notranslate"><span class="pre">factory_data.hex</span></code> file will be merged with the application target HEX file, so you can use the regular command to flash it to the device:</p>
<div class="highlight highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">west</span> <span class="n">flash</span> <span class="o">--</span><span class="n">erase</span>
</pre></div>
</div>
</section>
<section id="testing">
<h3><a class="toc-backref" href="#id17">Testing</a><a class="headerlink" href="#testing" title="Permalink to this heading"></a></h3>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The testing procedure assumes you are using the CHIP Tool for Android Matter controller application.
You can also obtain the measurement values using the PC-based CHIP Tool for Linux and iOS Matter controller and invoking the read commands manually.
Compared with the PC Matter controller, the mobile Matter controller only gives access to a subset of clusters supported by the Matter weather station application.
If you want to access all the supported clusters, including Descriptor, Identify, and Power Source clusters, use the PC Matter controller.
To see how to send commands from the PC Matter controller, read the <span class="xref std std-doc">matter:chip_tool_guide</span> page in the Matter documentation.</p>
</div>
<p>After programming the application, perform the following steps to test the Matter weather station application on the Thingy:53 with the mobile Matter controller application:</p>
<ol class="arabic">
<li><p>Turn on the Thingy:53.
The application starts in an unprovisioned state.
The advertising over Bluetooth LE and DFU start automatically, and <strong>LED (LD1)</strong> starts blinking blue (short flash on).</p></li>
<li><p>Commission the device into a Thread network by following the steps in <a class="reference internal" href="../../protocols/matter/getting_started/testing/thread_separate_otbr_linux_macos.html#ug-matter-gs-testing-thread-separate-otbr-linux-macos"><span class="std std-ref">Matter over Thread: Configuring Border Router and Linux/macOS controller on separate devices</span></a>.
During the commissioning procedure, <strong>LED (LD1)</strong> of the Matter device starts blinking blue (rapid even flashing).
This indicates that the device is connected over Bluetooth LE, but does not yet have full Thread network connectivity.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>To start commissioning, the controller must get the <a class="reference internal" href="#onboarding-information">Onboarding information</a> from the Matter accessory device.</p>
</div>
<p>Once the commissioning is complete and the device has full Thread connectivity, <strong>LED (LD1)</strong> starts blinking purple (short flash on).</p>
</li>
<li><p>Request to read sensor measurements in CHIP Tool for Linux or macOS:</p>
<ol class="loweralpha">
<li><p>Choose one of the following measurement type and invoke the command using CHIP Tool for Linux or macOS (Fill the <strong>Device ID</strong> argument with the same as was used to commissioning):</p>
<ul>
<li><p>To read temperature:</p>
<blockquote>
<div><div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">chip-tool temperaturemeasurement read measured-value &lt;Device ID&gt; 1</span>
</pre></div>
</div>
</div></blockquote>
</li>
<li><p>To read relative humidity:</p>
<blockquote>
<div><div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">chip-tool relativehumiditymeasurement read measured-value &lt;Device ID&gt; 2</span>
</pre></div>
</div>
</div></blockquote>
</li>
<li><p>To read air pressure:</p>
<blockquote>
<div><div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">chip-tool pressuremeasurement read measured-value &lt;Device ID&gt; 3</span>
</pre></div>
</div>
</div></blockquote>
</li>
</ul>
</li>
<li><p>After invoking the chosen command, search the CHIP Tool for Linux or macOS console logs and look for the measurement value:</p>
<ul>
<li><p>Example of the temperature measurement value log:</p>
<blockquote>
<div><div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">[1675846190.922905][72877:72879] CHIP:TOO: Endpoint: 1 Cluster: 0x0000_0402 Attribute 0x0000_0000 DataVersion: 1236968801</span>
<span class="go">[1675846190.922946][72877:72879] CHIP:TOO:   MeasuredValue: 2348</span>
</pre></div>
</div>
<p>This means that the current temperature value is equal to 23.48°C.</p>
</div></blockquote>
</li>
<li><p>Example of the relative humidity measurement value log:</p>
<blockquote>
<div><div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">[1675849697.750923][164859:164861] CHIP:TOO: Endpoint: 2 Cluster: 0x0000_0405 Attribute 0x0000_0000 DataVersion: 385127250</span>
<span class="go">[1675849697.750953][164859:164861] CHIP:TOO:   measured value: 2526</span>
</pre></div>
</div>
<p>This means that the current relative humidity value is equal to 25.26%.</p>
</div></blockquote>
</li>
<li><p>Example of the air pressure measurement value log:</p>
<blockquote>
<div><div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">[1675849714.536985][164896:164898] CHIP:TOO: Endpoint: 3 Cluster: 0x0000_0403 Attribute 0x0000_0000 DataVersion: 3096547</span>
<span class="go">[1675849714.537008][164896:164898] CHIP:TOO:   MeasuredValue: 1015</span>
</pre></div>
</div>
<p>This means that the current current air pressure value is equal to 1015 hPa.</p>
</div></blockquote>
</li>
</ul>
</li>
</ol>
</li>
</ol>
<section id="onboarding-information">
<h4>Onboarding information<a class="headerlink" href="#onboarding-information" title="Permalink to this heading"></a></h4>
<p>When you start the commissioning procedure, the controller must get the onboarding information from the Matter accessory device.
The onboarding information representation depends on your commissioner setup.</p>
<p>For this application, the data payload, which includes the device discriminator and setup PIN code, is encoded and shared using an NFC tag.
When using the debug configuration, you can also get this type of information from the USB interface logs.</p>
<p>Alternatively, depending on your build type, you can also use one of the following <a class="reference internal" href="../../protocols/matter/overview/commissioning.html#ug-matter-network-topologies-commissioning-onboarding-formats"><span class="std std-ref">onboarding information formats</span></a> to provide the commissioner with the data required:</p>
<ul>
<li><p>For the debug and release build types:</p>
<table class="docutils align-default" id="id6">
<caption><span class="caption-text">Weather station application onboarding information for the debug build type</span><a class="headerlink" href="#id6" title="Permalink to this table"></a></caption>
<colgroup>
<col style="width: 33%" />
<col style="width: 33%" />
<col style="width: 33%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>QR Code</p></th>
<th class="head"><p>QR Code Payload</p></th>
<th class="head"><p>Manual pairing code</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>Scan the following QR code with the app for your ecosystem:</p>
<figure class="align-default">
<a class="reference internal image-reference" href="../../_images/matter_qr_code_weather_station_default.png"><img alt="QR code for commissioning the weather station device (debug build type)" src="../../_images/matter_qr_code_weather_station_default.png" style="width: 200px;" /></a>
</figure>
</td>
<td><p>MT:M1TJ342C00KA0648G00</p></td>
<td><p>34970112332</p></td>
</tr>
</tbody>
</table>
</li>
<li><p>For the factory data build type:</p>
<table class="docutils align-default" id="id7">
<caption><span class="caption-text">Weather station application onboarding information for the factory data build type</span><a class="headerlink" href="#id7" title="Permalink to this table"></a></caption>
<colgroup>
<col style="width: 33%" />
<col style="width: 33%" />
<col style="width: 33%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>QR Code</p></th>
<th class="head"><p>QR Code Payload</p></th>
<th class="head"><p>Manual pairing code</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>Scan the following QR code with the app for your ecosystem:</p>
<figure class="align-default">
<a class="reference internal image-reference" href="../../_images/matter_qr_code_weather_station_factory_data.png"><img alt="QR code for commissioning the weather station device (factory data build type)" src="../../_images/matter_qr_code_weather_station_factory_data.png" style="width: 200px;" /></a>
</figure>
</td>
<td><p>MT:KAYA36PF1509673GE10</p></td>
<td><p>14575339844</p></td>
</tr>
</tbody>
</table>
</li>
</ul>
</section>
</section>
<section id="updating-the-device-firmware">
<span id="matter-weather-station-app-dfu"></span><h3><a class="toc-backref" href="#id18">Updating the device firmware</a><a class="headerlink" href="#updating-the-device-firmware" title="Permalink to this heading"></a></h3>
<p>To update the device firmware, complete the steps listed for the selected method in the <span class="xref std std-doc">matter:nrfconnect_examples_software_update</span> tutorial in the Matter documentation.</p>
</section>
</section>
<section id="dependencies">
<h2><a class="toc-backref" href="#id19">Dependencies</a><a class="headerlink" href="#dependencies" title="Permalink to this heading"></a></h2>
<p>This application uses the Matter library, which includes the nRF Connect SDK platform integration layer:</p>
<ul class="simple">
<li><p><a class="reference external" href="https://buildwithmatter.com/">Matter</a></p></li>
</ul>
<p>In addition, the application uses the following nRF Connect SDK components:</p>
<ul class="simple">
<li><p><a class="reference internal" href="../../libraries/others/dk_buttons_and_leds.html#dk-buttons-and-leds-readme"><span class="std std-ref">DK Buttons and LEDs</span></a></p></li>
<li><p><a class="reference internal" href="../../libraries/nfc/ndef/uri_msg.html#nfc-uri"><span class="std std-ref">URI messages and records</span></a></p></li>
<li><p><a class="reference internal" href="../../libraries/nfc/t2t/index.html#lib-nfc-t2t"><span class="std std-ref">Type 2 Tag</span></a></p></li>
</ul>
<p>The application depends on the following Zephyr libraries:</p>
<ul class="simple">
<li><p><span class="xref std std-ref">zephyr:logging_api</span></p></li>
<li><p><span class="xref std std-ref">zephyr:kernel_api</span></p></li>
</ul>
</section>
</section>


           </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="../zigbee_weather_station/README.html" class="btn btn-neutral float-right" title="Thingy:53: Zigbee weather station" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="../machine_learning/README.html" class="btn btn-neutral" title="nRF Machine Learning" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">

<table>
<tr>
<td>
    <p>
        &copy; Copyright 2019-2023, Nordic Semiconductor.
      Last updated on Mar 20, 2023.

    </p>
</td>
<td id="nordiclogo">
  <a href="https://www.nordicsemi.com/"><img src="../../_static/images/nordic-logo.png" border="0"/></a>
</td>
</tr>
</table>
  </div> 


</footer>

<div id="scroll-container">
  <button type="button" id="scroll-btn" class="btn">
    <svg xmlns="http://www.w3.org/2000/svg" height="24" viewBox="0 0 24 24" width="24"><path d="M0 0h24v24H0z" fill="none"/><path d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z" fill="#fff"/></svg>
  </button>
</div>

<script>
  const scrollBtn = document.querySelector("#scroll-btn");

  document.addEventListener("scroll", () => {
    if (window.scrollY > 400) {
          scrollBtn.style.visibility = "visible";
      } else {
          scrollBtn.style.visibility = "hidden";
      }
  });

  scrollBtn.addEventListener("click", () => {
      window.scrollTo({ top: 0, behavior: "smooth" });
  });
</script>
        </div>
      </div>
    </section>
  </div>
  
  <div class="rst-versions" data-toggle="rst-versions" role="note" aria-label="versions">
    <span class="rst-current-version" data-toggle="rst-current-version">
      <span class="fa fa-book"> nRF Connect SDK</span>
       <span class="fa fa-caret-down"></span>
    </span>
    <div class="rst-other-versions">
      
      <div class="rst-other-version ncs">
        <a href="../../../nrf/index.html">nRF Connect SDK</a>
      </div>
      
      <div class="rst-other-version nrfx">
        <a href="../../../nrfx/index.html">nrfx</a>
      </div>
      
      <div class="rst-other-version nrfxlib">
        <a href="../../../nrfxlib/README.html">nrfxlib</a>
      </div>
      
      <div class="rst-other-version zephyr">
        <a href="../../../zephyr/index.html">Zephyr Project</a>
      </div>
      
      <div class="rst-other-version mcuboot">
        <a href="../../../mcuboot/wrapper.html">MCUboot</a>
      </div>
      
      <div class="rst-other-version tfm">
        <a href="../../../tfm/index.html">Trusted Firmware-M</a>
      </div>
      
      <div class="rst-other-version matter">
        <a href="../../../matter/index.html">Matter</a>
      </div>
      
      <div class="rst-other-version kconfig">
        <a href="../../../kconfig/index.html">Kconfig Reference</a>
      </div>
    </div>
  </div><script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>