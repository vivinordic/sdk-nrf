<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Thingy:53: Zigbee weather station &mdash; nRF Connect SDK 2.3.99 documentation</title>
      <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="../../_static/css/nordic.css" type="text/css" />
      <link rel="stylesheet" href="../../_static/togglebutton.css" type="text/css" />
      <link rel="stylesheet" href="../../_static/css/nrf.css" type="text/css" />
      <link rel="stylesheet" href="../../_static/tabs.css" type="text/css" /> 
  <!--[if lt IE 9]>
    <script src="../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="../../" id="documentation_options" src="../../_static/documentation_options.js"></script>
        <script src="../../_static/jquery.js"></script>
        <script src="../../_static/underscore.js"></script>
        <script src="../../_static/_sphinx_javascript_frameworks_compat.js"></script>
        <script src="../../_static/doctools.js"></script>
        <script src="../../_static/sphinx_highlight.js"></script>
        <script src="https://www.googletagmanager.com/gtag/js?id=G-ZPVZRKFQJR"></script>
        <script src="../../_static/js/ga-tracker.js"></script>
        <script data-culture="EN" id="CookieConsent" type="text/javascript" src="https://policy.app.cookieinformation.com/uc.js"></script>
        <script>let toggleHintShow = 'Click to show';</script>
        <script>let toggleHintHide = 'Click to hide';</script>
        <script>let toggleOpenOnPrint = 'true';</script>
        <script src="../../_static/togglebutton.js"></script>
        <script>var togglebuttonSelector = '.toggle, .admonition.dropdown';</script>
    <script src="../../_static/js/theme.js"></script>
<script
  type="text/javascript"
  src="../../_static/js/ncs.js"
></script>
<script src="../../_static/js/bootstrap.bundle.min.js"></script>

    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="Samples" href="../../samples.html" />
    <link rel="prev" title="Thingy:53: Matter weather station" href="../matter_weather_station/README.html" />
<link
  href="../../_static/css/bootstrap.min.css"
  rel="stylesheet"
/>
<link
  rel="shortcut icon"
  href="../../_static/images/favicon.ico"
/>

</head>

<body class="wy-body-for-nav">
<div class="announcement"></div>
<div class="d-print-none ncs-header">
  <div class="container-xl ncs-header-top">
    <div class="row h-100">
      <div class="d-none d-md-block col-2">
        <div class="bg-white py-4 px-3 ml-2 ncs-header-logo">
          <img
            class="ncs-header-logo"
            src="../../_static/images/nordic-logo.png"
            alt=""
          />
        </div>
      </div>
      <div
        class="col-8 col-md-7 pl-md-4 d-flex align-self-center justify-content-center"
      >
        <form class="w-75" action="../../search.html" method="get">
          <div class="form-group">
            <input
              type="text"
              name="q"
              class="ncs-search-input form-control"
              placeholder="Search all docs..."
            />
          </div>
        </form>
      </div>
      <div class="col-4 col-md-3 d-md-block p-3 text-end">
        <div class="dropdown">
          <button
            class="btn dropdown-toggle ncs-btn-versions"
            type="button"
            id="dropdownMenuButton1"
            data-bs-toggle="dropdown"
            aria-expanded="false"
          >
            <span class="d-none d-md-inline">nRF Connect SDK</span>
            <span id="ncsversion" class="d-inline"></span>
          </button>
          <div class="dropdown-menu" aria-labelledby="dropdownMenuButton"></div>
        </div>
      </div>
    </div>
  </div>
  <div class="ncs-header-nav">
    <div class="container-xl">
      <div class="row">
        <div class="col col-12 d-flex justify-content-center">
          <nav class="navbar navbar-dark navbar-expand-lg p-0">
            <span class="navbar-brand d-block d-lg-none py-2 pl-1"
              >Documentation sets</span
            >
            <button
              class="navbar-toggler"
              type="button"
              data-bs-toggle="collapse"
              data-bs-target="#navbarNavAltMarkup"
              aria-controls="navbarNavAltMarkup"
              aria-expanded="false"
              aria-label="Toggle navigation"
            >
              <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="navbarNavAltMarkup">
              <ul class="navbar-nav">
                <li class="nav-item active py-1 px-3">
                  <a
                    class="nav-link"
                    href="../../../nrf/index.html"
                    >nRF Connect SDK</a
                  >
                </li>
                <li><hr class="dropdown-divider" /></li>
                <li class="nav-item  py-1 px-3">
                  <a
                    class="nav-link"
                    href="../../../nrfx/index.html"
                    >nrfx</a
                  >
                </li>
                <li><hr class="dropdown-divider" /></li>
                <li class="nav-item  py-1 px-3">
                  <a
                    class="nav-link"
                    href="../../../nrfxlib/README.html"
                    >nrfxlib</a
                  >
                </li>
                <li><hr class="dropdown-divider" /></li>
                <li class="nav-item  py-1 px-3">
                  <a
                    class="nav-link"
                    href="../../../zephyr/index.html"
                    >Zephyr Project</a
                  >
                </li>
                <li><hr class="dropdown-divider" /></li>
                <li class="nav-item  py-1 px-3">
                  <a
                    class="nav-link"
                    href="../../../mcuboot/wrapper.html"
                    >MCUboot</a
                  >
                </li>
                <li><hr class="dropdown-divider" /></li>
                <li class="nav-item  py-1 px-3">
                  <a
                    class="nav-link"
                    href="../../../tfm/index.html"
                    >Trusted Firmware-M</a
                  >
                </li>
                <li><hr class="dropdown-divider" /></li>
                <li class="nav-item  py-1 px-3">
                  <a
                    class="nav-link"
                    href="../../../matter/index.html"
                    >Matter</a
                  >
                </li>
                <li><hr class="dropdown-divider" /></li>
                <li class="nav-item  py-1 px-3">
                  <a
                    class="nav-link"
                    href="../../../kconfig/index.html"
                    >Kconfig Reference</a
                  >
                </li>
                <li><hr class="dropdown-divider" /></li>
              </ul>
            </div>
          </nav>
        </div>
      </div>
    </div>
  </div>
</div>

  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
            <a href="../../index.html" class="icon icon-home"> nRF Connect SDK
          </a>
              <div class="version">
                2.3.99
              </div>
<div id="searchbox" role="search">
  <div class="searchformwrapper">
    <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
      <input type="text" name="q" placeholder="Search docs" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
  </div>
</div>
<script>$('#searchbox').show(0);</script>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Contents</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../introduction.html">Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../getting_started.html">Getting started</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../dev_model.html">Development model</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../app_dev.html">Application development</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../security.html">Security</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../ecosystem_integration.html">Ecosystems integration</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../nrf91.html">Working with nRF91 Series</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../nrf70.html">Working with nRF70 Series</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../nrf53.html">Working with nRF53 Series</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../nrf52.html">Working with nRF52 Series</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../protocols.html">Protocols</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../../applications.html">Applications</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../connectivity_bridge/README.html">Connectivity bridge</a></li>
<li class="toctree-l2"><a class="reference internal" href="../asset_tracker_v2/README.html">nRF9160: Asset Tracker v2</a></li>
<li class="toctree-l2"><a class="reference internal" href="../serial_lte_modem/README.html">nRF9160: Serial LTE modem</a></li>
<li class="toctree-l2"><a class="reference internal" href="../nrf_desktop/README.html">nRF Desktop</a></li>
<li class="toctree-l2"><a class="reference internal" href="../nrf5340_audio/README.html">nRF5340 Audio</a></li>
<li class="toctree-l2"><a class="reference internal" href="../machine_learning/README.html">nRF Machine Learning</a></li>
<li class="toctree-l2"><a class="reference internal" href="../matter_weather_station/README.html">Thingy:53: Matter weather station</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">Thingy:53: Zigbee weather station</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#requirements">Requirements</a></li>
<li class="toctree-l3"><a class="reference internal" href="#overview">Overview</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#zigbee-weather-station-build-types">Zigbee weather station build types</a></li>
<li class="toctree-l4"><a class="reference internal" href="#logging-in-the-debug-build-type">Logging in the <code class="docutils literal notranslate"><span class="pre">debug</span></code> build type</a></li>
<li class="toctree-l4"><a class="reference internal" href="#ota-and-dfu">OTA and DFU</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#user-interface">User interface</a></li>
<li class="toctree-l3"><a class="reference internal" href="#configuration">Configuration</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#readout-configuration-options">Readout configuration options</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#building-and-running">Building and running</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#selecting-a-build-type">Selecting a build type</a></li>
<li class="toctree-l4"><a class="reference internal" href="#testing">Testing</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#dependencies">Dependencies</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../samples.html">Samples</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../drivers.html">Drivers</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../libraries/index.html">Libraries</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../scripts.html">Scripts</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../release_notes.html">Release notes</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../known_issues.html">Known issues</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../software_maturity.html">Software maturity levels</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../documentation.html">About this documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../glossary.html">Glossary</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">nRF Connect SDK</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../../index.html" class="icon icon-home"></a></li>
          <li class="breadcrumb-item"><a href="../../applications.html">Applications</a></li>
      <li class="breadcrumb-item active">Thingy:53: Zigbee weather station</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../../_sources/applications/zigbee_weather_station/README.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="thingy-53-zigbee-weather-station">
<span id="zigbee-weather-station-app"></span><h1>Thingy:53: Zigbee weather station<a class="headerlink" href="#thingy-53-zigbee-weather-station" title="Permalink to this heading"></a></h1>
<div class="contents local topic" id="contents">
<ul class="simple">
<li><p><a class="reference internal" href="#requirements" id="id6">Requirements</a></p></li>
<li><p><a class="reference internal" href="#overview" id="id7">Overview</a></p>
<ul>
<li><p><a class="reference internal" href="#zigbee-weather-station-build-types" id="id8">Zigbee weather station build types</a></p></li>
<li><p><a class="reference internal" href="#logging-in-the-debug-build-type" id="id9">Logging in the <code class="docutils literal notranslate"><span class="pre">debug</span></code> build type</a></p></li>
<li><p><a class="reference internal" href="#ota-and-dfu" id="id10">OTA and DFU</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#user-interface" id="id11">User interface</a></p></li>
<li><p><a class="reference internal" href="#configuration" id="id12">Configuration</a></p>
<ul>
<li><p><a class="reference internal" href="#readout-configuration-options" id="id13">Readout configuration options</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#building-and-running" id="id14">Building and running</a></p>
<ul>
<li><p><a class="reference internal" href="#selecting-a-build-type" id="id15">Selecting a build type</a></p></li>
<li><p><a class="reference internal" href="#testing" id="id16">Testing</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#dependencies" id="id17">Dependencies</a></p></li>
</ul>
</div>
<p>The Zigbee weather station is an out of the box application for the Nordic Thingy:53 based on the Zigbee protocol.
It allows you to build a weather station that remotely gathers different kinds of data using Thingy:53 sensors, such as temperature, air pressure, and relative humidity.
The device works as a Zigbee device, meaning it can be paired and controlled remotely over a Zigbee network.
You can use this application as a reference for creating your own application.</p>
<section id="requirements">
<h2><a class="toc-backref" href="#id6">Requirements</a><a class="headerlink" href="#requirements" title="Permalink to this heading"></a></h2>
<p>The application supports the following development kits:</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 28%" />
<col style="width: 7%" />
<col style="width: 39%" />
<col style="width: 25%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Hardware platforms</p></th>
<th class="head"><p>PCA</p></th>
<th class="head"><p>Board name</p></th>
<th class="head"><p>Build target</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><a class="reference internal" href="../../working_with_nrf/nrf53/thingy53.html#ug-thingy53"><span class="std std-ref">Thingy:53</span></a></p></td>
<td><p>PCA20053</p></td>
<td><p><span class="xref std std-ref">thingy53_nrf5340</span></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">thingy53_nrf5340_cpuapp</span></code></p></td>
</tr>
</tbody>
</table>
<p>To commission the Zigbee weather station device and control it remotely through a Zigbee network, you also need to program a Zigbee network coordinator on a separate compatible development kit.
The Zigbee network coordinator forms the network that the weather station node will join and share its measurement data with.
You can use one of the following options to set up the Zigbee network coordinator:</p>
<ul class="simple">
<li><p>For <a class="reference internal" href="#testing">Testing</a> purposes, program the <a class="reference internal" href="../../samples/zigbee/shell/README.html#zigbee-shell-sample"><span class="std std-ref">Zigbee shell</span></a> as the network coordinator to be able to use the interactive shell for readings and bindings.
Read the sample documentation for more information.</p></li>
<li><p>For generic usage of the application, you can use the standard <a class="reference internal" href="../../samples/zigbee/network_coordinator/README.html#zigbee-network-coordinator-sample"><span class="std std-ref">Zigbee network coordinator</span></a>.</p></li>
</ul>
<p>To program a Thingy:53 device from which the preprogrammed MCUboot bootloader has been erased, you need an external J-Link programmer.
If you have an nRF5340 DK that has an onboard J-Link programmer, you can also use it for this purpose.</p>
<p>If the Thingy:53 device is programmed with a Thingy:53-compatible sample or application, you can also update the firmware using MCUboot’s serial recovery or DFU over Bluetooth LE.
See <a class="reference internal" href="../../working_with_nrf/nrf53/thingy53.html#thingy53-app-guide"><span class="std std-ref">Thingy:53 application guide</span></a> for details.</p>
<p>For capturing packets while testing, you can use <a class="reference external" href="https://infocenter.nordicsemi.com/topic/ug_sniffer_802154/UG/sniffer_802154/intro_802154.html">nRF Sniffer for 802.15.4</a> with <a class="reference external" href="https://infocenter.nordicsemi.com/topic/ug_sniffer_802154/UG/sniffer_802154/configuring_sniffer_802154_zigbee.html">Wireshark configured for Zigbee</a>.</p>
</section>
<section id="overview">
<h2><a class="toc-backref" href="#id7">Overview</a><a class="headerlink" href="#overview" title="Permalink to this heading"></a></h2>
<p>The Zigbee weather station application <a class="reference internal" href="../../protocols/zigbee/configuring.html#zigbee-ug-sed"><span class="std std-ref">acts as a Zigbee Sleepy End Device</span></a>.
During startup, it initializes Thingy:53’s built-in sensor and starts periodic data readouts of temperature, pressure, and relative humidity.
Each readout is followed by an update of Zigbee Cluster Library (ZCL) attributes associated with measurements.
Attributes can be accessed over the Zigbee network according to the ZCL specification, that is a given attribute can be read out at any given time on demand or a binding can be created for periodic notifications.</p>
<section id="zigbee-weather-station-build-types">
<span id="zigbee-weather-station-app-build-types"></span><h3><a class="toc-backref" href="#id8">Zigbee weather station build types</a><a class="headerlink" href="#zigbee-weather-station-build-types" title="Permalink to this heading"></a></h3>
<p>The Zigbee weather station application does not use a single <code class="file docutils literal notranslate"><span class="pre">prj.conf</span></code> file.
Configuration files are provided for different build types and they are located in the <code class="file docutils literal notranslate"><span class="pre">configuration/thingy53_nrf5340_cpuapp</span></code> directory.</p>
<p>The <code class="file docutils literal notranslate"><span class="pre">prj.conf</span></code> file represents a <code class="docutils literal notranslate"><span class="pre">debug</span></code> build type.
Other build types are covered by dedicated files with the build type added as a suffix to the <code class="docutils literal notranslate"><span class="pre">prj</span></code> part, as per the following list.
For example, the <code class="docutils literal notranslate"><span class="pre">release</span></code> build type file name is <code class="file docutils literal notranslate"><span class="pre">prj_release.conf</span></code>.
If a board has other configuration files, for example associated with partition layout or child image configuration, these follow the same pattern.</p>
<p>When the <code class="docutils literal notranslate"><span class="pre">CONF_FILE</span></code> variable contains a single file and this file follows the naming pattern <code class="file docutils literal notranslate"><span class="pre">prj_&lt;buildtype&gt;.conf</span></code>, then the build type will be inferred to be <em>&lt;buildtype&gt;</em>.
The build type cannot be set explicitly.
The <em>&lt;buildtype&gt;</em> can be any string, but it is common to use <code class="docutils literal notranslate"><span class="pre">release</span></code> and <code class="docutils literal notranslate"><span class="pre">debug</span></code>.</p>
<p>For information about how to set variables, see <span class="xref std std-ref">zephyr:important-build-vars</span> in the Zephyr documentation.</p>
<p>The Partition Manager’s <a class="reference internal" href="../../scripts/partition_manager/partition_manager.html#ug-pm-static"><span class="std std-ref">static configuration</span></a> can also be made dependent on the build type.
When the build type has been inferred, the file <code class="file docutils literal notranslate"><span class="pre">pm_static_&lt;buildtype&gt;.yml</span></code> will have precedence over <code class="file docutils literal notranslate"><span class="pre">pm_static.yml</span></code>.</p>
<p>The child image Kconfig configuration can also be made dependent on the build type.
The child image Kconfig overlay file is named <code class="file docutils literal notranslate"><span class="pre">child_image/&lt;child_image_name&gt;.conf</span></code> instead of <code class="file docutils literal notranslate"><span class="pre">prj.conf</span></code>, but otherwise follows the same pattern as the parent Kconfig.</p>
<p>Alternatively, the child image Kconfig configuration file can be introduced as <code class="file docutils literal notranslate"><span class="pre">child_image/&lt;child_image_name&gt;/prj.conf</span></code> and follow the same pattern as the parent Kconfig.
For example, <code class="file docutils literal notranslate"><span class="pre">child_image/mcuboot/prj_release.conf</span></code> can be used to define <code class="docutils literal notranslate"><span class="pre">release</span></code> build type for <code class="docutils literal notranslate"><span class="pre">mcuboot</span></code> child image.</p>
<p>Before you start testing the application, you can select one of the build types supported by the Zigbee weather station application, depending on the building method.
This application supports the following build types:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">debug</span></code> - Debug version of the application. You can use this version to enable additional features for verifying the application behavior, such as logs.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">release</span></code> - Release version of the application. You can use this version to enable only the necessary application functionalities to optimize its performance.</p></li>
</ul>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p><a class="reference internal" href="#selecting-a-build-type">Selecting a build type</a> is optional.
The <code class="docutils literal notranslate"><span class="pre">debug</span></code> build type is used by default if no build type is explicitly selected.</p>
</div>
</section>
<section id="logging-in-the-debug-build-type">
<h3><a class="toc-backref" href="#id9">Logging in the <code class="docutils literal notranslate"><span class="pre">debug</span></code> build type</a><a class="headerlink" href="#logging-in-the-debug-build-type" title="Permalink to this heading"></a></h3>
<p>In the <code class="docutils literal notranslate"><span class="pre">debug</span></code> build type, the application also uses serial console over USB for logging.
Besides initialization logs, the following sets of measurement-related data are logged after measurements update:</p>
<ul>
<li><p>Values measured by sensor.
For example:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">[00:20:06.458,770] &lt;inf&gt; app: Sensor     T: 26.760000 [*C] P: 96.723000 [kPa] H: 23.178000 [%</span><span class="o">]</span>
</pre></div>
</div>
</li>
<li><p>Values set as corresponding ZCL attributes (transformed according to specification).
For example:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">[00:20:06.458,801] &lt;inf&gt; app: Attributes T:      2676      P:       967       H:      2317</span>
</pre></div>
</div>
</li>
</ul>
</section>
<section id="ota-and-dfu">
<h3><a class="toc-backref" href="#id10">OTA and DFU</a><a class="headerlink" href="#ota-and-dfu" title="Permalink to this heading"></a></h3>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p><a class="reference internal" href="../../libraries/zigbee/zigbee_fota.html#lib-zigbee-fota"><span class="std std-ref">Zigbee FOTA</span></a> is not yet supported for this application.
See the <a class="reference internal" href="../../libraries/zigbee/zigbee_fota.html#lib-zigbee-fota-limitations"><span class="std std-ref">Limitations</span></a> section on the Zigbee FOTA library page.</p>
</div>
</section>
</section>
<section id="user-interface">
<h2><a class="toc-backref" href="#id11">User interface</a><a class="headerlink" href="#user-interface" title="Permalink to this heading"></a></h2>
<dl>
<dt>LED (LD1):</dt><dd><p>Shows the overall state of the device and its connectivity.
The following states are possible:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">release</span></code> build type</p>
<ul>
<li><p>Even flashing (red color, 500ms on/500ms off) - The device is in the Identify mode (after network commissioning).</p></li>
</ul>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">debug</span></code> build type</p>
<ul>
<li><p>Constant light (blue) - The device is connected to a Zigbee network.</p></li>
<li><p>Even flashing (red color, 500ms on/500ms off) - The device is in the Identify mode (after network commissioning).</p></li>
</ul>
</li>
</ul>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Thingy:53 allows you to control RGB components of its single LED independently.
This means that the listed color components can overlap, creating additional color effects.
For example, <strong>LED (LD1)</strong> can indicate that the device is connected to a Zigbee network in blue, but if the device goes into the Identify mode at the same time, the flashing to indicate this will be purple, not red.</p>
</div>
</dd>
<dt>Power switch (SW1):</dt><dd><p>Used for switching Thingy:53 on and off.</p>
</dd>
<dt>Button (SW3):</dt><dd><p>Depending on how long the button is pressed:</p>
<ul class="simple">
<li><p>If pressed for less than five seconds, it starts or cancels the Identify mode.</p></li>
<li><p>If pressed for five seconds, it initiates the factory reset of the device.
The length of the button press can be edited using the <code class="xref kconfig kconfig-option docutils literal notranslate"><span class="pre">CONFIG_FACTORY_RESET_PRESS_TIME_SECONDS</span></code> Kconfig option from <a class="reference internal" href="../../libraries/zigbee/zigbee_app_utils.html#lib-zigbee-application-utilities"><span class="std std-ref">Zigbee application utilities</span></a>.
Releasing the button within this time does not trigger the factory reset procedure.</p></li>
</ul>
<p>Additionally, pressing the button shortly or releasing it before five second has elapsed indicates user input, which allows a Sleepy End Device to start the network rejoin procedure if it was previously stopped (for example, after timeout).</p>
</dd>
<dt>USB port:</dt><dd><p>Used for getting logs from the device.
It is enabled only for the debug configuration of the application.
See the <a class="reference internal" href="#selecting-a-build-type">Selecting a build type</a> section to learn how to select the debug configuration.</p>
</dd>
</dl>
</section>
<section id="configuration">
<h2><a class="toc-backref" href="#id12">Configuration</a><a class="headerlink" href="#configuration" title="Permalink to this heading"></a></h2>
<p>See <a class="reference internal" href="../../getting_started/modifying.html#configure-application"><span class="std std-ref">Configuring your application</span></a> for information about how to permanently or temporarily change the configuration.</p>
<section id="readout-configuration-options">
<span id="zigbee-weather-station-app-configuration-readout"></span><h3><a class="toc-backref" href="#id13">Readout configuration options</a><a class="headerlink" href="#readout-configuration-options" title="Permalink to this heading"></a></h3>
<p>The following application-specific Kconfig option values can be set to custom values:</p>
<dl class="simple" id="config-first-weather-check-delay-seconds">
<dt>CONFIG_FIRST_WEATHER_CHECK_DELAY_SECONDS - Delay after application initialization</dt><dd><p>This configuration option defines the delay from the moment of the application initialization to the first sensor data readout.
The value is provided in seconds, with the default value set to <code class="docutils literal notranslate"><span class="pre">5</span></code>.</p>
</dd>
</dl>
<dl class="simple" id="config-weather-check-period-seconds">
<dt>CONFIG_WEATHER_CHECK_PERIOD_SECONDS - How often sensor data is read</dt><dd><p>This configuration option defines the period of cyclic sensor readouts after the first readout.
The value is provided in seconds, with the default value set to <code class="docutils literal notranslate"><span class="pre">60</span></code>.</p>
</dd>
</dl>
</section>
</section>
<section id="building-and-running">
<h2><a class="toc-backref" href="#id14">Building and running</a><a class="headerlink" href="#building-and-running" title="Permalink to this heading"></a></h2>
<p>This sample can be found under <code class="file docutils literal notranslate"><span class="pre">applications/zigbee_weather_station</span></code> in the nRF Connect SDK folder structure.</p>
<p>To build the sample with Visual Studio Code, follow the steps listed on the <a class="reference external" href="https://nrfconnect.github.io/vscode-nrf-connect/get_started/build_app_ncs.html">How to build an application</a> page in the nRF Connect for VS Code extension documentation.
See <a class="reference internal" href="../../getting_started/programming.html#gs-programming"><span class="std std-ref">Building and programming an application</span></a> for other building and programming scenarios and <a class="reference internal" href="../../getting_started/testing.html#gs-testing"><span class="std std-ref">Testing and debugging an application</span></a> for general information about testing and debugging in the nRF Connect SDK.</p>
<section id="selecting-a-build-type">
<h3><a class="toc-backref" href="#id15">Selecting a build type</a><a class="headerlink" href="#selecting-a-build-type" title="Permalink to this heading"></a></h3>
<p>Before you start testing the application, you can select one of the <a class="reference internal" href="#zigbee-weather-station-app-build-types"><span class="std std-ref">Zigbee weather station build types</span></a>, depending on your building method.</p>
<section id="selecting-a-build-type-in-vsc">
<h4>Selecting a build type in Visual Studio Code<a class="headerlink" href="#selecting-a-build-type-in-vsc" title="Permalink to this heading"></a></h4>
<blockquote>
<div><p>To select the build type in the nRF Connect for VS Code extension:</p>
<ol class="arabic simple">
<li><p>When <a class="reference external" href="https://nrfconnect.github.io/vscode-nrf-connect/get_started/build_app_ncs.html">building an application</a> as described in the nRF Connect for VS Code extension documentation, follow the steps for setting up the build configuration.</p></li>
<li><p>In the <strong>Add Build Configuration</strong> screen, select the desired <code class="file docutils literal notranslate"><span class="pre">.conf</span></code> file from the <span class="guilabel">Configuration</span> drop-down menu.</p></li>
<li><p>Fill in other configuration options, if applicable, and click <span class="guilabel">Build Configuration</span>.</p></li>
</ol>
</div></blockquote>
</section>
<section id="selecting-a-build-type-from-command-line">
<h4>Selecting a build type from command line<a class="headerlink" href="#selecting-a-build-type-from-command-line" title="Permalink to this heading"></a></h4>
<blockquote>
<div><p>To select the build type when building the application from command line, specify the build type by adding the following parameter to the <code class="docutils literal notranslate"><span class="pre">west</span> <span class="pre">build</span></code> command:</p>
<pre class="highlight literal-block">-- -DCONF_FILE=prj_<em>selected_build_type</em>.conf</pre>
</div></blockquote>
<p>For example, you can replace the <em>selected_build_type</em> variable to build the <code class="docutils literal notranslate"><span class="pre">release</span></code> firmware for <code class="docutils literal notranslate"><span class="pre">thingy53_nrf5340_cpuapp</span></code> by running the following command in the project directory:</p>
<div class="highlight highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">west</span> <span class="n">build</span> <span class="o">-</span><span class="n">b</span> <span class="n">thingy53_nrf5340_cpuapp</span> <span class="o">-</span><span class="n">d</span> <span class="n">build_thingy53_nrf5340_cpuapp</span> <span class="o">--</span> <span class="o">-</span><span class="n">DCONF_FILE</span><span class="o">=</span><span class="n">prj_release</span><span class="o">.</span><span class="n">conf</span>
</pre></div>
</div>
<p>The <code class="docutils literal notranslate"><span class="pre">build_thingy53_nrf5340_cpuapp</span></code> parameter specifies the output directory for the build files.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>If the selected board does not support the selected build type, the build is interrupted.
For example, if the <code class="docutils literal notranslate"><span class="pre">shell</span></code> build type is not supported by the selected board, the following notification appears:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">File not found: ./ncs/nrf/applications/zigbee_weather_station/configuration/thingy53_nrf5340_cpuapp/prj_shell.conf</span>
</pre></div>
</div>
</div>
</section>
</section>
<section id="testing">
<h3><a class="toc-backref" href="#id16">Testing</a><a class="headerlink" href="#testing" title="Permalink to this heading"></a></h3>
<dl class="simple">
<dt>Preliminary testing information</dt><dd><ul class="simple">
<li><p>The testing procedure assumes you are using the <code class="docutils literal notranslate"><span class="pre">debug</span></code> <a class="reference internal" href="#zigbee-weather-station-app-build-types"><span class="std std-ref">build type</span></a>, as it provides more feedback with <strong>LED (LD1)</strong> and logs through the USB console.
The steps related to the <code class="docutils literal notranslate"><span class="pre">debug</span></code> build type are marked as “Optional <code class="docutils literal notranslate"><span class="pre">debug</span></code> build type step”.
These steps are not required when using the <code class="docutils literal notranslate"><span class="pre">release</span></code> build type.</p></li>
<li><p>The provided measurement data values depend on the Thingy:53 device’s surrounding conditions.</p></li>
</ul>
</dd>
</dl>
<p>After programming the application, perform the following steps to test the Zigbee weather station application on the Thingy:53 device:</p>
<ol class="arabic">
<li><p>If you want to capture packets with Wireshark, install <a class="reference external" href="https://infocenter.nordicsemi.com/topic/ug_sniffer_802154/UG/sniffer_802154/intro_802154.html">nRF Sniffer for 802.15.4</a> and <a class="reference external" href="ConfiguringWiresharkforZigbee">configure Wireshark for use with Zigbee</a>.
This is an optional step.
However, Wireshark response frame examples are provided below for reference.</p></li>
<li><p>Connect the device to the computer using a USB cable.
The device is assigned a COM port (Windows) or ttyACM device (Linux), which is visible in the Device Manager.
The connection is needed for gathering logs from the Zigbee weather station application.
This is an optional <code class="docutils literal notranslate"><span class="pre">debug</span></code> build type step.</p></li>
<li><p>Turn on the <a class="reference internal" href="../../samples/zigbee/shell/README.html#zigbee-shell-sample"><span class="std std-ref">Zigbee shell</span></a> sample programmed as the network coordinator to one of the compatible development kits.
See the Testing section of the sample to learn how to set it up to work as a coordinator.
Once turned on, the network coordinator forms the network and opens it for other devices to join for 180 seconds.</p></li>
<li><p>Turn on the Thingy:53 device.
The application tries to join the Zigbee network automatically.</p></li>
<li><p>Connect to the device with a terminal emulator (for example, PuTTY).
See <a class="reference internal" href="../../getting_started/testing.html#putty"><span class="std std-ref">How to connect with PuTTY</span></a> for the required settings.
When the connection is established, initialization logs start to appear in the console.
They can look like the following:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">[00:00:02.027,435] &lt;inf&gt; app: Starting...</span>
<span class="go">[00:00:02.027,526] &lt;inf&gt; app: Initializing sensor...</span>
<span class="go">[00:00:02.027,526] &lt;inf&gt; app: Initializing sensor...OK</span>
<span class="go">[00:00:02.027,862] &lt;inf&gt; app: Starting...OK</span>
</pre></div>
</div>
<p>After around 5 seconds after the initialization, periodic sensor readouts and attribute setting logs start to appear in the console.
They will look similar to the following one:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">[00:00:07.013,793] &lt;inf&gt; app: Sensor     T: 23.470000 [*C] P: 98.347000 [kPa] H: 33.344000 [%</span><span class="o">]</span>
<span class="go">[00:00:07.013,824] &lt;inf&gt; app: Attributes T:      2347      P:       983       H:      3334</span>
<span class="gp">[00:01:07.002,777] &lt;inf&gt; app: Sensor     T: 23.520000 [*C] P: 98.344000 [kPa] H: 33.485000 [%</span><span class="o">]</span>
<span class="go">[00:01:07.002,807] &lt;inf&gt; app: Attributes T:      2352      P:       983       H:      3348</span>
<span class="gp">[00:02:06.966,003] &lt;inf&gt; app: Sensor     T: 24.360000 [*C] P: 98.344000 [kPa] H: 32.410000 [%</span><span class="o">]</span>
<span class="go">[00:02:06.966,033] &lt;inf&gt; app: Attributes T:      2436      P:       983       H:      3241</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>These logs appear regardless of whether the device has joined the network.</p>
</div>
</li>
<li><p>When the device joins the network, <strong>LED (LD1)</strong> lights up with a constant blue color.
Additionally, with the <code class="docutils literal notranslate"><span class="pre">debug</span></code> build type and console used for logging, output similar to the following appears:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">[00:00:02.029,174] &lt;inf&gt; zigbee_app_utils: Zigbee stack initialized</span>
<span class="go">[00:00:02.035,003] &lt;inf&gt; zigbee_app_utils: Device started for the first time</span>
<span class="go">[00:00:02.035,003] &lt;inf&gt; zigbee_app_utils: Start network steering</span>
<span class="go">[00:00:02.035,064] &lt;inf&gt; zigbee_app_utils: Started network rejoin procedure.</span>
<span class="go">[00:00:05.637,512] &lt;inf&gt; zigbee_app_utils: Joined network successfully (Extended PAN ID: f4ce3655fc08bf6b, PAN ID: 0xbf9e)</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>As timestamps in this snippet indicate, these logs are likely to appear before the periodic sensor or attribute logs.</p>
</div>
</li>
<li><p>Read the weather attributes from the development kit programmed with the Zigbee shell sample (the network coordinator):</p>
<ol class="loweralpha">
<li><p>Run the following command to read the temperature attribute:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">uart:~$ </span>zcl<span class="w"> </span>attr<span class="w"> </span><span class="nb">read</span><span class="w"> </span>0x1ca9<span class="w"> </span><span class="m">42</span><span class="w"> </span>0x0402<span class="w"> </span>0x0104<span class="w"> </span>0x0000
</pre></div>
</div>
<p>In this command:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">0x1ca9</span></code> is the short network address of Thingy:53.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">42</span></code> is the endpoint number for aggregating the clusters.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">0x0402</span></code> is the temperature cluster ID.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">0x0104</span></code> is the Zigbee Home Automation profile ID.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">0x0000</span></code> is the short network address of the coordinator device.</p></li>
</ul>
<p>The output will be similar to the following one:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">ID: 0 Type: 29 Value: 2394</span>
</pre></div>
</div>
<p>Here, the value <code class="docutils literal notranslate"><span class="pre">2394</span></code> means 23.94 degrees Celsius.
In Wireshark, the corresponding response frame for this output looks like as follows:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>ZigBee HA      2298    4756.825525     0x1ca9  0x0000  0x1ca9  0x0000  f4:ce:36:23:d7:4e:77:1d f4:ce:36:55:fc:08:bf:6b         0xbf9e  ZCL: Read Attributes Response, Seq: 0

Frame 2298: 68 bytes on wire (544 bits), 68 bytes captured (544 bits)
IEEE 802.15.4 Data, Dst: 0x0000, Src: 0x1ca9
ZigBee Network Layer Data, Dst: 0x0000, Src: 0x1ca9
ZigBee Application Support Layer Data, Dst Endpt: 64, Src Endpt: 42
ZigBee Cluster Library Frame, Command: Read Attributes Response, Seq: 0
   Frame Control Field: Profile-wide (0x18)
   Sequence Number: 0
   Command: Read Attributes Response (0x01)
   Status Record
      Attribute: Measured Value (0x0000)
      Status: Success (0x00)
      Data Type: 16-Bit Signed Integer (0x29)
      Measured Value: 23.94 [°C]
</pre></div>
</div>
</li>
<li><p>Run the following command to read the pressure attribute:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">uart:~$ </span>zcl<span class="w"> </span>attr<span class="w"> </span><span class="nb">read</span><span class="w"> </span>0x1ca9<span class="w"> </span><span class="m">42</span><span class="w"> </span>0x0403<span class="w"> </span>0x0104<span class="w"> </span>0x0000
</pre></div>
</div>
<p>Compared with the previous command, <code class="docutils literal notranslate"><span class="pre">0x0403</span></code> in this command represents for the pressure cluster ID.
The output will be similar to the following one:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">ID: 0 Type: 29 Value: 984</span>
</pre></div>
</div>
<p>Here, the value <code class="docutils literal notranslate"><span class="pre">984</span></code> means 98.4 kPa.
In Wireshark, the corresponding response frame for this output looks like as follows:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">ZigBee</span> <span class="n">HA</span>      <span class="mi">2608</span>    <span class="mf">5396.494835</span>     <span class="mh">0x1ca9</span>  <span class="mh">0x0000</span>  <span class="mh">0x1ca9</span>  <span class="mh">0x0000</span>  <span class="n">f4</span><span class="p">:</span><span class="n">ce</span><span class="p">:</span><span class="mi">36</span><span class="p">:</span><span class="mi">23</span><span class="p">:</span><span class="n">d7</span><span class="p">:</span><span class="mi">4</span><span class="n">e</span><span class="p">:</span><span class="mi">77</span><span class="p">:</span><span class="mi">1</span><span class="n">d</span> <span class="n">f4</span><span class="p">:</span><span class="n">ce</span><span class="p">:</span><span class="mi">36</span><span class="p">:</span><span class="mi">55</span><span class="p">:</span><span class="n">fc</span><span class="p">:</span><span class="mi">08</span><span class="p">:</span><span class="n">bf</span><span class="p">:</span><span class="mi">6</span><span class="n">b</span>         <span class="mh">0xbf9e</span>  <span class="n">ZCL</span><span class="p">:</span> <span class="n">Read</span> <span class="n">Attributes</span> <span class="n">Response</span><span class="p">,</span> <span class="n">Seq</span><span class="p">:</span> <span class="mi">1</span>

<span class="n">Frame</span> <span class="mi">2608</span><span class="p">:</span> <span class="mi">68</span> <span class="nb">bytes</span> <span class="n">on</span> <span class="n">wire</span> <span class="p">(</span><span class="mi">544</span> <span class="n">bits</span><span class="p">),</span> <span class="mi">68</span> <span class="nb">bytes</span> <span class="n">captured</span> <span class="p">(</span><span class="mi">544</span> <span class="n">bits</span><span class="p">)</span>
<span class="n">IEEE</span> <span class="mf">802.15.4</span> <span class="n">Data</span><span class="p">,</span> <span class="n">Dst</span><span class="p">:</span> <span class="mh">0x0000</span><span class="p">,</span> <span class="n">Src</span><span class="p">:</span> <span class="mh">0x1ca9</span>
<span class="n">ZigBee</span> <span class="n">Network</span> <span class="n">Layer</span> <span class="n">Data</span><span class="p">,</span> <span class="n">Dst</span><span class="p">:</span> <span class="mh">0x0000</span><span class="p">,</span> <span class="n">Src</span><span class="p">:</span> <span class="mh">0x1ca9</span>
<span class="n">ZigBee</span> <span class="n">Application</span> <span class="n">Support</span> <span class="n">Layer</span> <span class="n">Data</span><span class="p">,</span> <span class="n">Dst</span> <span class="n">Endpt</span><span class="p">:</span> <span class="mi">64</span><span class="p">,</span> <span class="n">Src</span> <span class="n">Endpt</span><span class="p">:</span> <span class="mi">42</span>
<span class="n">ZigBee</span> <span class="n">Cluster</span> <span class="n">Library</span> <span class="n">Frame</span><span class="p">,</span> <span class="n">Command</span><span class="p">:</span> <span class="n">Read</span> <span class="n">Attributes</span> <span class="n">Response</span><span class="p">,</span> <span class="n">Seq</span><span class="p">:</span> <span class="mi">1</span>
   <span class="n">Frame</span> <span class="n">Control</span> <span class="n">Field</span><span class="p">:</span> <span class="n">Profile</span><span class="o">-</span><span class="n">wide</span> <span class="p">(</span><span class="mh">0x18</span><span class="p">)</span>
   <span class="n">Sequence</span> <span class="n">Number</span><span class="p">:</span> <span class="mi">1</span>
   <span class="n">Command</span><span class="p">:</span> <span class="n">Read</span> <span class="n">Attributes</span> <span class="n">Response</span> <span class="p">(</span><span class="mh">0x01</span><span class="p">)</span>
   <span class="n">Status</span> <span class="n">Record</span>
      <span class="n">Attribute</span><span class="p">:</span> <span class="n">Measured</span> <span class="n">Value</span> <span class="p">(</span><span class="mh">0x0000</span><span class="p">)</span>
      <span class="n">Status</span><span class="p">:</span> <span class="n">Success</span> <span class="p">(</span><span class="mh">0x00</span><span class="p">)</span>
      <span class="n">Data</span> <span class="n">Type</span><span class="p">:</span> <span class="mi">16</span><span class="o">-</span><span class="n">Bit</span> <span class="n">Signed</span> <span class="n">Integer</span> <span class="p">(</span><span class="mh">0x29</span><span class="p">)</span>
      <span class="n">Measured</span> <span class="n">Value</span><span class="p">:</span> <span class="mf">98.4</span> <span class="p">[</span><span class="n">kPa</span><span class="p">]</span>
</pre></div>
</div>
</li>
<li><p>Run the following command to read the relative humidity attribute:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">uart:~$ </span>zcl<span class="w"> </span>attr<span class="w"> </span><span class="nb">read</span><span class="w"> </span>0x1ca9<span class="w"> </span><span class="m">42</span><span class="w"> </span>0x0405<span class="w"> </span>0x0104<span class="w"> </span>0x0000
</pre></div>
</div>
<p>Compared with the previous command, <code class="docutils literal notranslate"><span class="pre">0x0405</span></code> in this command stands for the relative humidity cluster ID.
The output will be similar to the following one:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">ID: 0 Type: 21 Value: 3293</span>
</pre></div>
</div>
<p>Here, the value <code class="docutils literal notranslate"><span class="pre">3293</span></code> means a humidity reading of 32.93%.
In Wireshark, the corresponding response frame for this output looks like as follows:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">ZigBee</span> <span class="n">HA</span>      <span class="mi">3014</span>    <span class="mf">6241.372769</span>     <span class="mh">0x1ca9</span>  <span class="mh">0x0000</span>  <span class="mh">0x1ca9</span>  <span class="mh">0x0000</span>  <span class="n">f4</span><span class="p">:</span><span class="n">ce</span><span class="p">:</span><span class="mi">36</span><span class="p">:</span><span class="mi">23</span><span class="p">:</span><span class="n">d7</span><span class="p">:</span><span class="mi">4</span><span class="n">e</span><span class="p">:</span><span class="mi">77</span><span class="p">:</span><span class="mi">1</span><span class="n">d</span> <span class="n">f4</span><span class="p">:</span><span class="n">ce</span><span class="p">:</span><span class="mi">36</span><span class="p">:</span><span class="mi">55</span><span class="p">:</span><span class="n">fc</span><span class="p">:</span><span class="mi">08</span><span class="p">:</span><span class="n">bf</span><span class="p">:</span><span class="mi">6</span><span class="n">b</span>         <span class="mh">0xbf9e</span>  <span class="n">ZCL</span><span class="p">:</span> <span class="n">Read</span> <span class="n">Attributes</span> <span class="n">Response</span><span class="p">,</span> <span class="n">Seq</span><span class="p">:</span> <span class="mi">2</span>

<span class="n">Frame</span> <span class="mi">3014</span><span class="p">:</span> <span class="mi">68</span> <span class="nb">bytes</span> <span class="n">on</span> <span class="n">wire</span> <span class="p">(</span><span class="mi">544</span> <span class="n">bits</span><span class="p">),</span> <span class="mi">68</span> <span class="nb">bytes</span> <span class="n">captured</span> <span class="p">(</span><span class="mi">544</span> <span class="n">bits</span><span class="p">)</span>
<span class="n">IEEE</span> <span class="mf">802.15.4</span> <span class="n">Data</span><span class="p">,</span> <span class="n">Dst</span><span class="p">:</span> <span class="mh">0x0000</span><span class="p">,</span> <span class="n">Src</span><span class="p">:</span> <span class="mh">0x1ca9</span>
<span class="n">ZigBee</span> <span class="n">Network</span> <span class="n">Layer</span> <span class="n">Data</span><span class="p">,</span> <span class="n">Dst</span><span class="p">:</span> <span class="mh">0x0000</span><span class="p">,</span> <span class="n">Src</span><span class="p">:</span> <span class="mh">0x1ca9</span>
<span class="n">ZigBee</span> <span class="n">Application</span> <span class="n">Support</span> <span class="n">Layer</span> <span class="n">Data</span><span class="p">,</span> <span class="n">Dst</span> <span class="n">Endpt</span><span class="p">:</span> <span class="mi">64</span><span class="p">,</span> <span class="n">Src</span> <span class="n">Endpt</span><span class="p">:</span> <span class="mi">42</span>
<span class="n">ZigBee</span> <span class="n">Cluster</span> <span class="n">Library</span> <span class="n">Frame</span><span class="p">,</span> <span class="n">Command</span><span class="p">:</span> <span class="n">Read</span> <span class="n">Attributes</span> <span class="n">Response</span><span class="p">,</span> <span class="n">Seq</span><span class="p">:</span> <span class="mi">2</span>
   <span class="n">Frame</span> <span class="n">Control</span> <span class="n">Field</span><span class="p">:</span> <span class="n">Profile</span><span class="o">-</span><span class="n">wide</span> <span class="p">(</span><span class="mh">0x18</span><span class="p">)</span>
   <span class="n">Sequence</span> <span class="n">Number</span><span class="p">:</span> <span class="mi">2</span>
   <span class="n">Command</span><span class="p">:</span> <span class="n">Read</span> <span class="n">Attributes</span> <span class="n">Response</span> <span class="p">(</span><span class="mh">0x01</span><span class="p">)</span>
   <span class="n">Status</span> <span class="n">Record</span>
      <span class="n">Attribute</span><span class="p">:</span> <span class="n">Measured</span> <span class="n">Value</span> <span class="p">(</span><span class="mh">0x0000</span><span class="p">)</span>
      <span class="n">Status</span><span class="p">:</span> <span class="n">Success</span> <span class="p">(</span><span class="mh">0x00</span><span class="p">)</span>
      <span class="n">Data</span> <span class="n">Type</span><span class="p">:</span> <span class="mi">16</span><span class="o">-</span><span class="n">Bit</span> <span class="n">Unsigned</span> <span class="n">Integer</span> <span class="p">(</span><span class="mh">0x21</span><span class="p">)</span>
      <span class="n">Measured</span> <span class="n">Value</span><span class="p">:</span> <span class="mf">32.93</span> <span class="p">[</span><span class="o">%</span><span class="p">]</span>
</pre></div>
</div>
</li>
</ol>
</li>
<li><p>Create bindings for periodic notifications using the development kit programmed with the Zigbee shell sample (the network coordinator):</p>
<ol class="loweralpha">
<li><p>Run the following commands to create the bindings for each weather attribute:</p>
<ul>
<li><p>Temperature cluster binding:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">uart:~$ </span>zdo<span class="w"> </span><span class="nb">bind</span><span class="w"> </span>on<span class="w"> </span>f4ce3623d74e771d<span class="w"> </span><span class="m">42</span><span class="w"> </span>f4ce3655fc08bf6b<span class="w"> </span><span class="m">64</span><span class="w"> </span>0x0402<span class="w"> </span>0x1ca9
</pre></div>
</div>
<p>In this command:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">f4ce3623d74e771d</span></code> is the long network address of Thingy:53.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">42</span></code> is the endpoint number for aggregating the clusters.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">f4ce3655fc08bf6b</span></code> is the long network address of the network coordinator device.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">64</span></code> is the endpoint number of the network coordinator device.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">0x0402</span></code> is the temperature cluster ID.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">0x1ca9</span></code>  is the short network address of Thingy:53.</p></li>
</ul>
</li>
<li><p>Pressure cluster binding:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">uart:~$ </span>zdo<span class="w"> </span><span class="nb">bind</span><span class="w"> </span>on<span class="w"> </span>f4ce3623d74e771d<span class="w"> </span><span class="m">42</span><span class="w"> </span>f4ce3655fc08bf6b<span class="w"> </span><span class="m">64</span><span class="w"> </span>0x0403<span class="w"> </span>0x1ca9
</pre></div>
</div>
<p>Compared with the previous command, <code class="docutils literal notranslate"><span class="pre">0x0403</span></code> in this command stands for the pressure cluster ID.</p>
</li>
<li><p>Relative humidity cluster binding:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">uart:~$ </span>zdo<span class="w"> </span><span class="nb">bind</span><span class="w"> </span>on<span class="w"> </span>f4ce3623d74e771d<span class="w"> </span><span class="m">42</span><span class="w"> </span>f4ce3655fc08bf6b<span class="w"> </span><span class="m">64</span><span class="w"> </span>0x0405<span class="w"> </span>0x1ca9
</pre></div>
</div>
<p>Compared with the previous command, <code class="docutils literal notranslate"><span class="pre">0x0405</span></code> in this command stands for the relative humidity cluster ID.</p>
</li>
</ul>
</li>
<li><p>Observe periodic reports in Wireshark for the respective clusters:</p>
<ul>
<li><p>Temperature cluster periodic report will look like as follows:</p>
<blockquote>
<div><div class="highlight-default notranslate"><div class="highlight"><pre><span></span>ZigBee HA   3882    7705.599377     0x1ca9  0x0000  0x1ca9  0x0000  f4:ce:36:23:d7:4e:77:1d f4:ce:36:55:fc:08:bf:6b         0xbf9e  ZCL: Report Attributes, Seq: 128

Frame 3882: 67 bytes on wire (536 bits), 67 bytes captured (536 bits)
IEEE 802.15.4 Data, Dst: 0x0000, Src: 0x1ca9
ZigBee Network Layer Data, Dst: 0x0000, Src: 0x1ca9
ZigBee Application Support Layer Data, Dst Endpt: 64, Src Endpt: 42
ZigBee Cluster Library Frame, Command: Report Attributes, Seq: 128
   Frame Control Field: Profile-wide (0x08)
   Sequence Number: 128
   Command: Report Attributes (0x0a)
   Attribute Field
      Attribute: Measured Value (0x0000)
      Data Type: 16-Bit Signed Integer (0x29)
      Measured Value: 24.26 [°C]
</pre></div>
</div>
</div></blockquote>
</li>
<li><p>Pressure cluster periodic report will look like as follows:</p>
<blockquote>
<div><div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">ZigBee</span> <span class="n">HA</span>   <span class="mi">3888</span>    <span class="mf">7705.727682</span>     <span class="mh">0x1ca9</span>  <span class="mh">0x0000</span>  <span class="mh">0x1ca9</span>  <span class="mh">0x0000</span>  <span class="n">f4</span><span class="p">:</span><span class="n">ce</span><span class="p">:</span><span class="mi">36</span><span class="p">:</span><span class="mi">23</span><span class="p">:</span><span class="n">d7</span><span class="p">:</span><span class="mi">4</span><span class="n">e</span><span class="p">:</span><span class="mi">77</span><span class="p">:</span><span class="mi">1</span><span class="n">d</span> <span class="n">f4</span><span class="p">:</span><span class="n">ce</span><span class="p">:</span><span class="mi">36</span><span class="p">:</span><span class="mi">55</span><span class="p">:</span><span class="n">fc</span><span class="p">:</span><span class="mi">08</span><span class="p">:</span><span class="n">bf</span><span class="p">:</span><span class="mi">6</span><span class="n">b</span>         <span class="mh">0xbf9e</span>  <span class="n">ZCL</span><span class="p">:</span> <span class="n">Report</span> <span class="n">Attributes</span><span class="p">,</span> <span class="n">Seq</span><span class="p">:</span> <span class="mi">129</span>

<span class="n">Frame</span> <span class="mi">3888</span><span class="p">:</span> <span class="mi">67</span> <span class="nb">bytes</span> <span class="n">on</span> <span class="n">wire</span> <span class="p">(</span><span class="mi">536</span> <span class="n">bits</span><span class="p">),</span> <span class="mi">67</span> <span class="nb">bytes</span> <span class="n">captured</span> <span class="p">(</span><span class="mi">536</span> <span class="n">bits</span><span class="p">)</span>
<span class="n">IEEE</span> <span class="mf">802.15.4</span> <span class="n">Data</span><span class="p">,</span> <span class="n">Dst</span><span class="p">:</span> <span class="mh">0x0000</span><span class="p">,</span> <span class="n">Src</span><span class="p">:</span> <span class="mh">0x1ca9</span>
<span class="n">ZigBee</span> <span class="n">Network</span> <span class="n">Layer</span> <span class="n">Data</span><span class="p">,</span> <span class="n">Dst</span><span class="p">:</span> <span class="mh">0x0000</span><span class="p">,</span> <span class="n">Src</span><span class="p">:</span> <span class="mh">0x1ca9</span>
<span class="n">ZigBee</span> <span class="n">Application</span> <span class="n">Support</span> <span class="n">Layer</span> <span class="n">Data</span><span class="p">,</span> <span class="n">Dst</span> <span class="n">Endpt</span><span class="p">:</span> <span class="mi">64</span><span class="p">,</span> <span class="n">Src</span> <span class="n">Endpt</span><span class="p">:</span> <span class="mi">42</span>
<span class="n">ZigBee</span> <span class="n">Cluster</span> <span class="n">Library</span> <span class="n">Frame</span><span class="p">,</span> <span class="n">Command</span><span class="p">:</span> <span class="n">Report</span> <span class="n">Attributes</span><span class="p">,</span> <span class="n">Seq</span><span class="p">:</span> <span class="mi">129</span>
   <span class="n">Frame</span> <span class="n">Control</span> <span class="n">Field</span><span class="p">:</span> <span class="n">Profile</span><span class="o">-</span><span class="n">wide</span> <span class="p">(</span><span class="mh">0x08</span><span class="p">)</span>
   <span class="n">Sequence</span> <span class="n">Number</span><span class="p">:</span> <span class="mi">129</span>
   <span class="n">Command</span><span class="p">:</span> <span class="n">Report</span> <span class="n">Attributes</span> <span class="p">(</span><span class="mh">0x0a</span><span class="p">)</span>
   <span class="n">Attribute</span> <span class="n">Field</span>
      <span class="n">Attribute</span><span class="p">:</span> <span class="n">Measured</span> <span class="n">Value</span> <span class="p">(</span><span class="mh">0x0000</span><span class="p">)</span>
      <span class="n">Data</span> <span class="n">Type</span><span class="p">:</span> <span class="mi">16</span><span class="o">-</span><span class="n">Bit</span> <span class="n">Signed</span> <span class="n">Integer</span> <span class="p">(</span><span class="mh">0x29</span><span class="p">)</span>
      <span class="n">Measured</span> <span class="n">Value</span><span class="p">:</span> <span class="mf">98.4</span> <span class="p">[</span><span class="n">kPa</span><span class="p">]</span>
</pre></div>
</div>
</div></blockquote>
</li>
<li><p>Relative humidity cluster periodic report will look like as follows:</p>
<blockquote>
<div><div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">ZigBee</span> <span class="n">HA</span>   <span class="mi">3894</span>    <span class="mf">7705.856763</span>     <span class="mh">0x1ca9</span>  <span class="mh">0x0000</span>  <span class="mh">0x1ca9</span>  <span class="mh">0x0000</span>  <span class="n">f4</span><span class="p">:</span><span class="n">ce</span><span class="p">:</span><span class="mi">36</span><span class="p">:</span><span class="mi">23</span><span class="p">:</span><span class="n">d7</span><span class="p">:</span><span class="mi">4</span><span class="n">e</span><span class="p">:</span><span class="mi">77</span><span class="p">:</span><span class="mi">1</span><span class="n">d</span> <span class="n">f4</span><span class="p">:</span><span class="n">ce</span><span class="p">:</span><span class="mi">36</span><span class="p">:</span><span class="mi">55</span><span class="p">:</span><span class="n">fc</span><span class="p">:</span><span class="mi">08</span><span class="p">:</span><span class="n">bf</span><span class="p">:</span><span class="mi">6</span><span class="n">b</span>         <span class="mh">0xbf9e</span>  <span class="n">ZCL</span><span class="p">:</span> <span class="n">Report</span> <span class="n">Attributes</span><span class="p">,</span> <span class="n">Seq</span><span class="p">:</span> <span class="mi">130</span>

<span class="n">Frame</span> <span class="mi">3894</span><span class="p">:</span> <span class="mi">67</span> <span class="nb">bytes</span> <span class="n">on</span> <span class="n">wire</span> <span class="p">(</span><span class="mi">536</span> <span class="n">bits</span><span class="p">),</span> <span class="mi">67</span> <span class="nb">bytes</span> <span class="n">captured</span> <span class="p">(</span><span class="mi">536</span> <span class="n">bits</span><span class="p">)</span>
<span class="n">IEEE</span> <span class="mf">802.15.4</span> <span class="n">Data</span><span class="p">,</span> <span class="n">Dst</span><span class="p">:</span> <span class="mh">0x0000</span><span class="p">,</span> <span class="n">Src</span><span class="p">:</span> <span class="mh">0x1ca9</span>
<span class="n">ZigBee</span> <span class="n">Network</span> <span class="n">Layer</span> <span class="n">Data</span><span class="p">,</span> <span class="n">Dst</span><span class="p">:</span> <span class="mh">0x0000</span><span class="p">,</span> <span class="n">Src</span><span class="p">:</span> <span class="mh">0x1ca9</span>
<span class="n">ZigBee</span> <span class="n">Application</span> <span class="n">Support</span> <span class="n">Layer</span> <span class="n">Data</span><span class="p">,</span> <span class="n">Dst</span> <span class="n">Endpt</span><span class="p">:</span> <span class="mi">64</span><span class="p">,</span> <span class="n">Src</span> <span class="n">Endpt</span><span class="p">:</span> <span class="mi">42</span>
<span class="n">ZigBee</span> <span class="n">Cluster</span> <span class="n">Library</span> <span class="n">Frame</span><span class="p">,</span> <span class="n">Command</span><span class="p">:</span> <span class="n">Report</span> <span class="n">Attributes</span><span class="p">,</span> <span class="n">Seq</span><span class="p">:</span> <span class="mi">130</span>
   <span class="n">Frame</span> <span class="n">Control</span> <span class="n">Field</span><span class="p">:</span> <span class="n">Profile</span><span class="o">-</span><span class="n">wide</span> <span class="p">(</span><span class="mh">0x08</span><span class="p">)</span>
   <span class="n">Sequence</span> <span class="n">Number</span><span class="p">:</span> <span class="mi">130</span>
   <span class="n">Command</span><span class="p">:</span> <span class="n">Report</span> <span class="n">Attributes</span> <span class="p">(</span><span class="mh">0x0a</span><span class="p">)</span>
   <span class="n">Attribute</span> <span class="n">Field</span>
      <span class="n">Attribute</span><span class="p">:</span> <span class="n">Measured</span> <span class="n">Value</span> <span class="p">(</span><span class="mh">0x0000</span><span class="p">)</span>
      <span class="n">Data</span> <span class="n">Type</span><span class="p">:</span> <span class="mi">16</span><span class="o">-</span><span class="n">Bit</span> <span class="n">Unsigned</span> <span class="n">Integer</span> <span class="p">(</span><span class="mh">0x21</span><span class="p">)</span>
      <span class="n">Measured</span> <span class="n">Value</span><span class="p">:</span> <span class="mf">32.99</span> <span class="p">[</span><span class="o">%</span><span class="p">]</span>
</pre></div>
</div>
</div></blockquote>
</li>
</ul>
</li>
</ol>
</li>
</ol>
</section>
</section>
<section id="dependencies">
<h2><a class="toc-backref" href="#id17">Dependencies</a><a class="headerlink" href="#dependencies" title="Permalink to this heading"></a></h2>
<p>This sample uses the following nRF Connect SDK libraries:</p>
<ul class="simple">
<li><p><a class="reference internal" href="../../libraries/zigbee/zigbee_app_utils.html#lib-zigbee-application-utilities"><span class="std std-ref">Zigbee application utilities</span></a></p></li>
<li><p><a class="reference internal" href="../../libraries/zigbee/zigbee_error_handler.html#lib-zigbee-error-handler"><span class="std std-ref">Zigbee error handler</span></a></p></li>
<li><p><a class="reference internal" href="../../libraries/others/ram_pwrdn.html#lib-ram-pwrdn"><span class="std std-ref">RAM power-down</span></a></p></li>
<li><p>Zigbee subsystems:</p>
<ul>
<li><p><code class="file docutils literal notranslate"><span class="pre">zb_nrf_platform.h</span></code></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="../../libraries/others/dk_buttons_and_leds.html#dk-buttons-and-leds-readme"><span class="std std-ref">DK Buttons and LEDs</span></a></p></li>
</ul>
<p>This sample uses the following <a class="reference external" href="https://github.com/nrfconnect/sdk-nrfxlib">sdk-nrfxlib</a> libraries:</p>
<ul class="simple">
<li><p><span class="xref std std-ref">nrfxlib:zboss</span> 3.11.2.1 (<a class="reference external" href="https://developer.nordicsemi.com/nRF_Connect_SDK/doc/zboss/3.11.2.1/zigbee_devguide.html">API documentation</a>)</p></li>
<li><p><code class="file docutils literal notranslate"><span class="pre">addons/zcl/zb_zcl_temp_measurement_addons.h</span></code></p></li>
</ul>
<p>In addition, it uses the following Zephyr libraries:</p>
<ul class="simple">
<li><p><code class="file docutils literal notranslate"><span class="pre">include/device.h</span></code></p></li>
<li><p><code class="file docutils literal notranslate"><span class="pre">include/drivers/sensor.h</span></code></p></li>
<li><p><code class="file docutils literal notranslate"><span class="pre">include/drivers/uart.h</span></code></p></li>
<li><p><code class="file docutils literal notranslate"><span class="pre">include/usb/usb_device.h</span></code></p></li>
<li><p><code class="file docutils literal notranslate"><span class="pre">include/zephyr.h</span></code></p></li>
<li><p><span class="xref std std-ref">zephyr:logging_api</span></p></li>
</ul>
</section>
</section>


           </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="../../samples.html" class="btn btn-neutral float-right" title="Samples" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="../matter_weather_station/README.html" class="btn btn-neutral" title="Thingy:53: Matter weather station" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">

<table>
<tr>
<td>
    <p>
        &copy; Copyright 2019-2023, Nordic Semiconductor.
      Last updated on Mar 20, 2023.

    </p>
</td>
<td id="nordiclogo">
  <a href="https://www.nordicsemi.com/"><img src="../../_static/images/nordic-logo.png" border="0"/></a>
</td>
</tr>
</table>
  </div> 


</footer>

<div id="scroll-container">
  <button type="button" id="scroll-btn" class="btn">
    <svg xmlns="http://www.w3.org/2000/svg" height="24" viewBox="0 0 24 24" width="24"><path d="M0 0h24v24H0z" fill="none"/><path d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z" fill="#fff"/></svg>
  </button>
</div>

<script>
  const scrollBtn = document.querySelector("#scroll-btn");

  document.addEventListener("scroll", () => {
    if (window.scrollY > 400) {
          scrollBtn.style.visibility = "visible";
      } else {
          scrollBtn.style.visibility = "hidden";
      }
  });

  scrollBtn.addEventListener("click", () => {
      window.scrollTo({ top: 0, behavior: "smooth" });
  });
</script>
        </div>
      </div>
    </section>
  </div>
  
  <div class="rst-versions" data-toggle="rst-versions" role="note" aria-label="versions">
    <span class="rst-current-version" data-toggle="rst-current-version">
      <span class="fa fa-book"> nRF Connect SDK</span>
       <span class="fa fa-caret-down"></span>
    </span>
    <div class="rst-other-versions">
      
      <div class="rst-other-version ncs">
        <a href="../../../nrf/index.html">nRF Connect SDK</a>
      </div>
      
      <div class="rst-other-version nrfx">
        <a href="../../../nrfx/index.html">nrfx</a>
      </div>
      
      <div class="rst-other-version nrfxlib">
        <a href="../../../nrfxlib/README.html">nrfxlib</a>
      </div>
      
      <div class="rst-other-version zephyr">
        <a href="../../../zephyr/index.html">Zephyr Project</a>
      </div>
      
      <div class="rst-other-version mcuboot">
        <a href="../../../mcuboot/wrapper.html">MCUboot</a>
      </div>
      
      <div class="rst-other-version tfm">
        <a href="../../../tfm/index.html">Trusted Firmware-M</a>
      </div>
      
      <div class="rst-other-version matter">
        <a href="../../../matter/index.html">Matter</a>
      </div>
      
      <div class="rst-other-version kconfig">
        <a href="../../../kconfig/index.html">Kconfig Reference</a>
      </div>
    </div>
  </div><script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>