<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Application description &mdash; nRF Connect SDK 2.3.99 documentation</title>
      <link rel="stylesheet" href="../../../_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="../../../_static/css/nordic.css" type="text/css" />
      <link rel="stylesheet" href="../../../_static/togglebutton.css" type="text/css" />
      <link rel="stylesheet" href="../../../_static/css/nrf.css" type="text/css" />
      <link rel="stylesheet" href="../../../_static/tabs.css" type="text/css" /> 
  <!--[if lt IE 9]>
    <script src="../../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="../../../" id="documentation_options" src="../../../_static/documentation_options.js"></script>
        <script src="../../../_static/jquery.js"></script>
        <script src="../../../_static/underscore.js"></script>
        <script src="../../../_static/_sphinx_javascript_frameworks_compat.js"></script>
        <script src="../../../_static/doctools.js"></script>
        <script src="../../../_static/sphinx_highlight.js"></script>
        <script src="https://www.googletagmanager.com/gtag/js?id=G-ZPVZRKFQJR"></script>
        <script src="../../../_static/js/ga-tracker.js"></script>
        <script data-culture="EN" id="CookieConsent" type="text/javascript" src="https://policy.app.cookieinformation.com/uc.js"></script>
        <script>let toggleHintShow = 'Click to show';</script>
        <script>let toggleHintHide = 'Click to hide';</script>
        <script>let toggleOpenOnPrint = 'true';</script>
        <script src="../../../_static/togglebutton.js"></script>
        <script>var togglebuttonSelector = '.toggle, .admonition.dropdown';</script>
    <script src="../../../_static/js/theme.js"></script>
<script
  type="text/javascript"
  src="../../../_static/js/ncs.js"
></script>
<script src="../../../_static/js/bootstrap.bundle.min.js"></script>

    <link rel="index" title="Index" href="../../../genindex.html" />
    <link rel="search" title="Search" href="../../../search.html" />
    <link rel="next" title="Application behavior and functionality" href="app_behavior.html" />
    <link rel="prev" title="nRF9160: Asset Tracker v2" href="../README.html" />
<link
  href="../../../_static/css/bootstrap.min.css"
  rel="stylesheet"
/>
<link
  rel="shortcut icon"
  href="../../../_static/images/favicon.ico"
/>

</head>

<body class="wy-body-for-nav">
<div class="announcement"></div>
<div class="d-print-none ncs-header">
  <div class="container-xl ncs-header-top">
    <div class="row h-100">
      <div class="d-none d-md-block col-2">
        <div class="bg-white py-4 px-3 ml-2 ncs-header-logo">
          <img
            class="ncs-header-logo"
            src="../../../_static/images/nordic-logo.png"
            alt=""
          />
        </div>
      </div>
      <div
        class="col-8 col-md-7 pl-md-4 d-flex align-self-center justify-content-center"
      >
        <form class="w-75" action="../../../search.html" method="get">
          <div class="form-group">
            <input
              type="text"
              name="q"
              class="ncs-search-input form-control"
              placeholder="Search all docs..."
            />
          </div>
        </form>
      </div>
      <div class="col-4 col-md-3 d-md-block p-3 text-end">
        <div class="dropdown">
          <button
            class="btn dropdown-toggle ncs-btn-versions"
            type="button"
            id="dropdownMenuButton1"
            data-bs-toggle="dropdown"
            aria-expanded="false"
          >
            <span class="d-none d-md-inline">nRF Connect SDK</span>
            <span id="ncsversion" class="d-inline"></span>
          </button>
          <div class="dropdown-menu" aria-labelledby="dropdownMenuButton"></div>
        </div>
      </div>
    </div>
  </div>
  <div class="ncs-header-nav">
    <div class="container-xl">
      <div class="row">
        <div class="col col-12 d-flex justify-content-center">
          <nav class="navbar navbar-dark navbar-expand-lg p-0">
            <span class="navbar-brand d-block d-lg-none py-2 pl-1"
              >Documentation sets</span
            >
            <button
              class="navbar-toggler"
              type="button"
              data-bs-toggle="collapse"
              data-bs-target="#navbarNavAltMarkup"
              aria-controls="navbarNavAltMarkup"
              aria-expanded="false"
              aria-label="Toggle navigation"
            >
              <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="navbarNavAltMarkup">
              <ul class="navbar-nav">
                <li class="nav-item active py-1 px-3">
                  <a
                    class="nav-link"
                    href="../../../../nrf/index.html"
                    >nRF Connect SDK</a
                  >
                </li>
                <li><hr class="dropdown-divider" /></li>
                <li class="nav-item  py-1 px-3">
                  <a
                    class="nav-link"
                    href="../../../../nrfx/index.html"
                    >nrfx</a
                  >
                </li>
                <li><hr class="dropdown-divider" /></li>
                <li class="nav-item  py-1 px-3">
                  <a
                    class="nav-link"
                    href="../../../../nrfxlib/README.html"
                    >nrfxlib</a
                  >
                </li>
                <li><hr class="dropdown-divider" /></li>
                <li class="nav-item  py-1 px-3">
                  <a
                    class="nav-link"
                    href="../../../../zephyr/index.html"
                    >Zephyr Project</a
                  >
                </li>
                <li><hr class="dropdown-divider" /></li>
                <li class="nav-item  py-1 px-3">
                  <a
                    class="nav-link"
                    href="../../../../mcuboot/wrapper.html"
                    >MCUboot</a
                  >
                </li>
                <li><hr class="dropdown-divider" /></li>
                <li class="nav-item  py-1 px-3">
                  <a
                    class="nav-link"
                    href="../../../../tfm/index.html"
                    >Trusted Firmware-M</a
                  >
                </li>
                <li><hr class="dropdown-divider" /></li>
                <li class="nav-item  py-1 px-3">
                  <a
                    class="nav-link"
                    href="../../../../matter/index.html"
                    >Matter</a
                  >
                </li>
                <li><hr class="dropdown-divider" /></li>
                <li class="nav-item  py-1 px-3">
                  <a
                    class="nav-link"
                    href="../../../../kconfig/index.html"
                    >Kconfig Reference</a
                  >
                </li>
                <li><hr class="dropdown-divider" /></li>
              </ul>
            </div>
          </nav>
        </div>
      </div>
    </div>
  </div>
</div>

  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
            <a href="../../../index.html" class="icon icon-home"> nRF Connect SDK
          </a>
              <div class="version">
                2.3.99
              </div>
<div id="searchbox" role="search">
  <div class="searchformwrapper">
    <form id="rtd-search-form" class="wy-form" action="../../../search.html" method="get">
      <input type="text" name="q" placeholder="Search docs" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
  </div>
</div>
<script>$('#searchbox').show(0);</script>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Contents</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../../introduction.html">Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../getting_started.html">Getting started</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../dev_model.html">Development model</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../app_dev.html">Application development</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../security.html">Security</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../ecosystem_integration.html">Ecosystems integration</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../nrf91.html">Working with nRF91 Series</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../nrf70.html">Working with nRF70 Series</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../nrf53.html">Working with nRF53 Series</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../nrf52.html">Working with nRF52 Series</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../protocols.html">Protocols</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../../../applications.html">Applications</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../../connectivity_bridge/README.html">Connectivity bridge</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="../README.html">nRF9160: Asset Tracker v2</a><ul class="current">
<li class="toctree-l3 current"><a class="current reference internal" href="#">Application description</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#requirements">Requirements</a></li>
<li class="toctree-l4"><a class="reference internal" href="#overview">Overview</a></li>
<li class="toctree-l4"><a class="reference internal" href="#cloud-setup">Cloud setup</a></li>
<li class="toctree-l4"><a class="reference internal" href="#carrier-library-support">Carrier library support</a></li>
<li class="toctree-l4"><a class="reference internal" href="#configuration">Configuration</a></li>
<li class="toctree-l4"><a class="reference internal" href="#building-and-running">Building and running</a></li>
<li class="toctree-l4"><a class="reference internal" href="#dependencies">Dependencies</a></li>
<li class="toctree-l4"><a class="reference internal" href="#nrf-asset-tracker-project">nRF Asset Tracker project</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="app_behavior.html">Application behavior and functionality</a></li>
<li class="toctree-l3"><a class="reference internal" href="firmware_architecture.html">Firmware architecture</a></li>
<li class="toctree-l3"><a class="reference internal" href="lwm2m_carrier_library.html">Using the carrier library</a></li>
<li class="toctree-l3"><a class="reference internal" href="app_module.html">Application module</a></li>
<li class="toctree-l3"><a class="reference internal" href="data_module.html">Data module</a></li>
<li class="toctree-l3"><a class="reference internal" href="cloud_module.html">Cloud module</a></li>
<li class="toctree-l3"><a class="reference internal" href="cloud_wrapper.html">Cloud wrapper API</a></li>
<li class="toctree-l3"><a class="reference internal" href="debug_module.html">Debug module</a></li>
<li class="toctree-l3"><a class="reference internal" href="location_module.html">Location module</a></li>
<li class="toctree-l3"><a class="reference internal" href="modem_module.html">Modem module</a></li>
<li class="toctree-l3"><a class="reference internal" href="sensor_module.html">Sensor module</a></li>
<li class="toctree-l3"><a class="reference internal" href="ui_module.html">User Interface module</a></li>
<li class="toctree-l3"><a class="reference internal" href="util_module.html">Utility module</a></li>
<li class="toctree-l3"><a class="reference internal" href="modules_common.html">Modules common API</a></li>
<li class="toctree-l3"><a class="reference internal" href="unit_test.html">Unit tests</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../serial_lte_modem/README.html">nRF9160: Serial LTE modem</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../nrf_desktop/README.html">nRF Desktop</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../nrf5340_audio/README.html">nRF5340 Audio</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../machine_learning/README.html">nRF Machine Learning</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../matter_weather_station/README.html">Thingy:53: Matter weather station</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../zigbee_weather_station/README.html">Thingy:53: Zigbee weather station</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../samples.html">Samples</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../drivers.html">Drivers</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../libraries/index.html">Libraries</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../scripts.html">Scripts</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../release_notes.html">Release notes</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../known_issues.html">Known issues</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../software_maturity.html">Software maturity levels</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../documentation.html">About this documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../glossary.html">Glossary</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../../index.html">nRF Connect SDK</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../../../index.html" class="icon icon-home"></a></li>
          <li class="breadcrumb-item"><a href="../../../applications.html">Applications</a></li>
          <li class="breadcrumb-item"><a href="../README.html">nRF9160: Asset Tracker v2</a></li>
      <li class="breadcrumb-item active">Application description</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../../../_sources/applications/asset_tracker_v2/doc/asset_tracker_v2_description.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="application-description">
<span id="asset-tracker-v2-description"></span><h1>Application description<a class="headerlink" href="#application-description" title="Permalink to this heading"></a></h1>
<div class="contents local topic" id="contents">
<ul class="simple">
<li><p><a class="reference internal" href="#requirements" id="id9">Requirements</a></p></li>
<li><p><a class="reference internal" href="#overview" id="id10">Overview</a></p></li>
<li><p><a class="reference internal" href="#cloud-setup" id="id11">Cloud setup</a></p></li>
<li><p><a class="reference internal" href="#carrier-library-support" id="id12">Carrier library support</a></p></li>
<li><p><a class="reference internal" href="#configuration" id="id13">Configuration</a></p>
<ul>
<li><p><a class="reference internal" href="#configuration-files" id="id14">Configuration files</a></p></li>
<li><p><a class="reference internal" href="#optional-library-configurations" id="id15">Optional library configurations</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#building-and-running" id="id16">Building and running</a></p>
<ul>
<li><p><a class="reference internal" href="#testing" id="id17">Testing</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#dependencies" id="id18">Dependencies</a></p></li>
<li><p><a class="reference internal" href="#nrf-asset-tracker-project" id="id19">nRF Asset Tracker project</a></p></li>
</ul>
</div>
<p>The Asset Tracker v2 application is built on the following principles:</p>
<ul class="simple">
<li><p>Ultra-low power by design - The application highlights the power saving features of the nRF9160 SiP, which is critical for successfully developing small form-factor devices and products which need very long battery lifetime.</p></li>
<li><p>Offline first - Highly-mobile cellular IoT products need to handle unreliable connections gracefully by implementing mechanisms to retry the failed sending of data.</p></li>
<li><p>Timestamping on the device - Sensor data is timestamped on the device using multiple time sources. When the device is offline (planned or unplanned), the timestamping does not rely on the cloud side.</p></li>
<li><p>Batching of data - Data is batched to reduce the number of messages transmitted, and to be able to retain collected data while the device is offline.</p></li>
<li><p>Configurable at run time - The application behavior (for example, accelerometer sensitivity or GNSS timeout) can be configured at run time. This improves the development experience with individual devices or when debugging the device behavior in specific areas and situations. It also reduces the cost for transmitting data to the devices by reducing the frequency of sending firmware updates to the devices.</p></li>
</ul>
<section id="requirements">
<h2><a class="toc-backref" href="#id9">Requirements</a><a class="headerlink" href="#requirements" title="Permalink to this heading"></a></h2>
<table class="docutils align-default">
<colgroup>
<col style="width: 28%" />
<col style="width: 8%" />
<col style="width: 42%" />
<col style="width: 23%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Hardware platforms</p></th>
<th class="head"><p>PCA</p></th>
<th class="head"><p>Board name</p></th>
<th class="head"><p>Build target</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><a class="reference internal" href="../../../working_with_nrf/nrf91/thingy91.html#ug-thingy91"><span class="std std-ref">Thingy:91</span></a></p></td>
<td><p>PCA20035</p></td>
<td><p>thingy91_nrf9160</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">thingy91_nrf9160_ns</span></code></p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="../../../working_with_nrf/nrf91/nrf9160.html#ug-nrf9160"><span class="std std-ref">nRF9160 DK</span></a></p></td>
<td><p>PCA10090</p></td>
<td><p><span class="xref std std-ref">nrf9160dk_nrf9160</span></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">nrf9160dk_nrf9160_ns</span></code></p></td>
</tr>
<tr class="row-even"><td><p>Native Posix</p></td>
<td></td>
<td><p>native_posix</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">native_posix</span></code></p></td>
</tr>
</tbody>
</table>
<p>When built for an <code class="docutils literal notranslate"><span class="pre">_ns</span></code> build target, the sample is configured to compile and run as a non-secure application with <a class="reference internal" href="../../../app_dev/board_support/index.html#app-boards-spe-nspe-cpuapp-ns"><span class="std std-ref">Cortex-M Security Extensions enabled</span></a>.
Therefore, it automatically includes <a class="reference internal" href="../../../app_dev/tfm/index.html#ug-tfm"><span class="std std-ref">Trusted Firmware-M</span></a> that prepares the required peripherals and secure services to be available for the application.</p>
</section>
<section id="overview">
<h2><a class="toc-backref" href="#id10">Overview</a><a class="headerlink" href="#overview" title="Permalink to this heading"></a></h2>
<p>The application samples and sends sensor data to a connected cloud service over <a class="reference external" href="https://en.wikipedia.org/wiki/Internet_protocol_suite">IP</a> using <a class="reference external" href="https://en.wikipedia.org/wiki/LTE_(telecommunication)">LTE</a>.
Following are the cloud services that are supported by the application:</p>
<ul class="simple">
<li><p><a class="reference external" href="https://aws.amazon.com/iot-core/">AWS IoT Core</a></p></li>
<li><p><a class="reference external" href="https://docs.microsoft.com/en-us/azure/iot-hub/">Azure IoT Hub</a></p></li>
<li><p><a class="reference external" href="https://nrfcloud.com/">nRF Cloud</a></p></li>
<li><p><a class="reference external" href="https://omaspecworks.org/what-is-oma-specworks/iot/lightweight-m2m-lwm2m/">LwM2M</a> v1.1 compliant service (for example, AVSystem’s <a class="reference external" href="https://www.avsystem.com/products/coiote-iot-device-management-platform/">Coiote Device Management</a>, <a class="reference external" href="https://www.eclipse.org/leshan/">Leshan LwM2M server</a>).
To know more about the AVSystem integration with nRF Connect SDK, see <a class="reference internal" href="../../../external_comp/avsystem.html#ug-avsystem"><span class="std std-ref">AVSystem integration</span></a>.</p></li>
</ul>
<p>To run the application on a development kit and connect to a cloud service, you must complete the following steps:</p>
<ol class="arabic simple">
<li><p><a class="reference internal" href="#cloud-setup"><span class="std std-ref">Setting up the cloud service</span></a></p></li>
<li><p><a class="reference internal" href="#atv2-application-configuration"><span class="std std-ref">Configuring the application</span></a></p></li>
<li><p><a class="reference internal" href="#building-and-running"><span class="std std-ref">Building and running</span></a></p></li>
</ol>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>For more information on the protocols and technologies that are used in the connection towards a specific cloud service, see <a class="reference internal" href="cloud_module.html#supported-cloud-services"><span class="std std-ref">Supported cloud services</span></a>.</p>
</div>
</section>
<section id="cloud-setup">
<span id="id1"></span><h2><a class="toc-backref" href="#id11">Cloud setup</a><a class="headerlink" href="#cloud-setup" title="Permalink to this heading"></a></h2>
<p>To set up a cloud service to work with the application firmware, complete the steps:</p>
<div class="admonition important">
<p class="admonition-title">Important</p>
<p>The application defaults to the <em>client ID</em> used in the connection to the <em>IMEI</em> of the device.
This value is printed on the development kit.</p>
</div>
<ul class="simple">
<li><p>nRF Cloud - <a class="reference internal" href="../../../working_with_nrf/nrf91/nrf9160_gs.html#nrf9160-gs-connecting-dk-to-cloud"><span class="std std-ref">Connecting your device to nRF Cloud</span></a>.
The default configuration of the firmware is to communicate with <a class="reference external" href="https://nrfcloud.com/">nRF Cloud</a> using the factory-provisioned certificates on the Thingy:91 and nRF9160 DK.
This means that no additional configuration of the firmware is needed to connect to nRF Cloud.
It is recommended to build and run the firmware on the device before completing the steps listed in <a class="reference internal" href="../../../working_with_nrf/nrf91/nrf9160_gs.html#nrf9160-gs-connecting-dk-to-cloud"><span class="std std-ref">Connecting your device to nRF Cloud</span></a>.
See <a class="reference internal" href="#building-and-running"><span class="std std-ref">Building and running</span></a>.</p></li>
<li><p>AWS IoT Core - <a class="reference internal" href="../../../libraries/networking/aws_iot.html#lib-aws-iot"><span class="std std-ref">AWS IoT</span></a>.
This step retrieves a <em>security tag</em> and a <em>hostname</em> that will be needed during the configuration of the firmware.</p></li>
<li><p>Azure IoT Hub - <a class="reference internal" href="../../../libraries/networking/azure_iot_hub.html#lib-azure-iot-hub"><span class="std std-ref">Azure IoT Hub</span></a>.
This step retrieves a <em>security tag</em> and <em>ID scope</em> that will be needed during the configuration of the firmware.
Make sure to follow the steps documented in the <a class="reference internal" href="../../../libraries/networking/azure_iot_hub.html#dps-config"><span class="std std-ref">Configuration using DPS</span></a> section to enable Device Provisioning Service (DPS).</p></li>
<li><p>AVSystem’s LwM2M Coiote Device Management - <a class="reference internal" href="../../../samples/nrf9160/lwm2m_client/sample_description.html#server-setup-lwm2m-client"><span class="std std-ref">Server setup</span></a>.
No additional configuration is needed if the server is set up according to the linked documentation.</p></li>
</ul>
<p>You can also use the nRF Asset Tracker project that provides an example cloud implementation for multiple cloud providers.
See the <a class="reference internal" href="#nrf-asset-tracker"><span class="std std-ref">nRF Asset Tracker project</span></a> section for more details.</p>
</section>
<section id="carrier-library-support">
<span id="atv2-lwm2m-carrier-support"></span><h2><a class="toc-backref" href="#id12">Carrier library support</a><a class="headerlink" href="#carrier-library-support" title="Permalink to this heading"></a></h2>
<p>See the section <a class="reference internal" href="lwm2m_carrier_library.html#using-the-lwm2m-carrier-library"><span class="std std-ref">Using the carrier library</span></a> for steps on how to connect to a operator’s device management platform, necessary in some LTE networks.</p>
</section>
<section id="configuration">
<span id="atv2-application-configuration"></span><h2><a class="toc-backref" href="#id13">Configuration</a><a class="headerlink" href="#configuration" title="Permalink to this heading"></a></h2>
<p>To configure the firmware to connect to a specific cloud service, complete the following steps:</p>
<ol class="arabic simple">
<li><p>Update the overlay configuration file that corresponds to the selected cloud service with the Kconfig option values that were extracted during the <a class="reference internal" href="#cloud-setup"><span class="std std-ref">Setting up the cloud service</span></a> step.
The name of the overlay file must reflect the cloud service that has been chosen.
For example, the file name is <code class="file docutils literal notranslate"><span class="pre">overlay-aws.conf</span></code> for AWS IoT.
<a class="reference internal" href="cloud_module.html#mandatory-config"><span class="std std-ref">Cloud-specific mandatory Kconfig options</span></a> lists the mandatory options that are specific to each cloud service.
The overlay files are located in the root folder of the application, under <code class="file docutils literal notranslate"><span class="pre">applications/asset_tracker_v2/</span></code>.</p></li>
<li><p>Include the overlay file when building the firmware, as documented in <a class="reference internal" href="#building-and-running"><span class="std std-ref">Building and running</span></a>.</p></li>
</ol>
<section id="configuration-files">
<h3><a class="toc-backref" href="#id14">Configuration files</a><a class="headerlink" href="#configuration-files" title="Permalink to this heading"></a></h3>
<p>The application provides predefined configuration files for typical use cases.</p>
<p>Following are the available configuration files:</p>
<ul class="simple">
<li><p><code class="file docutils literal notranslate"><span class="pre">prj.conf</span></code> - Configuration file common for <code class="docutils literal notranslate"><span class="pre">thingy91_nrf9160_ns</span></code> and <code class="docutils literal notranslate"><span class="pre">nrf9160dk_nrf9160_ns</span></code> build targets.</p></li>
<li><p><code class="file docutils literal notranslate"><span class="pre">prj_qemu_x86.conf</span></code> - Configuration file common for <code class="docutils literal notranslate"><span class="pre">qemu_x86</span></code> build target.</p></li>
<li><p><code class="file docutils literal notranslate"><span class="pre">prj_native_posix.conf</span></code> - Configuration file common for <code class="docutils literal notranslate"><span class="pre">native_posix</span></code> build target.</p></li>
<li><p><code class="file docutils literal notranslate"><span class="pre">boards/thingy91_nrf9160_ns.conf</span></code> - Configuration file specific for Thingy:91. This file is automatically merged with the <code class="file docutils literal notranslate"><span class="pre">prj.conf</span></code> file when you build for the <code class="docutils literal notranslate"><span class="pre">thingy91_nrf9160_ns</span></code> build target.</p></li>
<li><p><code class="file docutils literal notranslate"><span class="pre">boards/nrf9160dk_nrf9160_ns.conf</span></code> - Configuration file specific for nRF9160 DK. This file is automatically merged with the <code class="file docutils literal notranslate"><span class="pre">prj.conf</span></code> file when you build for the <code class="docutils literal notranslate"><span class="pre">nrf9160dk_nrf9160_ns</span></code> build target.</p></li>
<li><p><code class="file docutils literal notranslate"><span class="pre">boards/&lt;BOARD&gt;/led_state_def.h</span></code> - Header file that describes the LED behavior of the CAF LEDs module.</p></li>
</ul>
<p>Overlay configurations files that enable specific features:</p>
<ul class="simple">
<li><p><code class="file docutils literal notranslate"><span class="pre">overlay-aws.conf</span></code> - Configuration file that enables communication with AWS IoT Core.</p></li>
<li><p><code class="file docutils literal notranslate"><span class="pre">overlay-azure.conf</span></code> - Configuration file that enables communication with Azure IoT Hub.</p></li>
<li><p><code class="file docutils literal notranslate"><span class="pre">overlay-lwm2m.conf</span></code> - Configuration file that enables communication with AVSystem’s Coiote IoT Device Management.</p></li>
<li><p><code class="file docutils literal notranslate"><span class="pre">overlay-pgps.conf</span></code> - Configuration file that enables P-GPS.</p></li>
<li><p><code class="file docutils literal notranslate"><span class="pre">overlay-nrf7002ek-wifi-scan-only.conf</span></code> - Configuration file that enables Wi-Fi scanning with nRF7002 EK.</p></li>
<li><p><code class="file docutils literal notranslate"><span class="pre">overlay-low-power.conf</span></code> - Configuration file that achieves the lowest power consumption by disabling features that consume extra power, such as LED control and logging.</p></li>
<li><p><code class="file docutils literal notranslate"><span class="pre">overlay-debug.conf</span></code> - Configuration file that adds additional verbose logging capabilities and enables the debug module.</p></li>
<li><p><code class="file docutils literal notranslate"><span class="pre">overlay-memfault.conf</span></code> - Configuration file that enables <a class="reference external" href="https://memfault.com/">Memfault</a>.</p></li>
<li><p><code class="file docutils literal notranslate"><span class="pre">overlay-carrier.conf</span></code> - Configuration file that adds nRF Connect SDK <a class="reference internal" href="../../../libraries/bin/lwm2m_carrier/index.html#liblwm2m-carrier-readme"><span class="std std-ref">LwM2M carrier</span></a> support. See <a class="reference internal" href="#atv2-lwm2m-carrier-support"><span class="std std-ref">Carrier library support</span></a> for more information.</p></li>
<li><p><code class="file docutils literal notranslate"><span class="pre">overlay-full_modem_fota.conf</span></code> - Configuration file that enables full modem FOTA.</p></li>
</ul>
<p>Custom DTC overlay file for enabling a specific feature:</p>
<ul class="simple">
<li><p><code class="file docutils literal notranslate"><span class="pre">nrf9160dk_with_nrf7002ek.overlay</span></code> - Configuration file that enables Wi-Fi scanning with nRF7002 EK.</p></li>
</ul>
<p>Multiple overlay files can be included to enable multiple features at the same time.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Generally, Kconfig overlays have an <code class="docutils literal notranslate"><span class="pre">overlay-</span></code> prefix and a <code class="file docutils literal notranslate"><span class="pre">.conf</span></code> extension.
Board-specific configuration files are placed in the <code class="file docutils literal notranslate"><span class="pre">boards</span></code> folder and are named as <code class="file docutils literal notranslate"><span class="pre">&lt;BOARD&gt;.conf</span></code>.
DTS overlay files are named the same as the build target and use the file extension <code class="file docutils literal notranslate"><span class="pre">.overlay</span></code>.
When they are placed in the <code class="file docutils literal notranslate"><span class="pre">boards</span></code> folder and the DTS overlay filename matches the build target,
the build system automatically selects and applies the overlay.
You can give the custom DTS overlay files as a compiler option <code class="docutils literal notranslate"><span class="pre">-DDTC_OVERLAY_FILE=&lt;dtc_filename&gt;.overlay</span></code>.</p>
</div>
</section>
<section id="optional-library-configurations">
<h3><a class="toc-backref" href="#id15">Optional library configurations</a><a class="headerlink" href="#optional-library-configurations" title="Permalink to this heading"></a></h3>
<p>You can add the following optional configurations to configure the heap or to provide additional information such as Access Point Name (APN) to the modem for registering with an LTE network:</p>
<ul class="simple">
<li><p><code class="xref kconfig kconfig-option docutils literal notranslate"><span class="pre">CONFIG_HEAP_MEM_POOL_SIZE</span></code> - Configures the size of the heap that is used by the application when encoding and sending data to the cloud. More information can be found in <a class="reference internal" href="firmware_architecture.html#memory-allocation"><span class="std std-ref">Memory allocation</span></a>.</p></li>
<li><p><code class="xref kconfig kconfig-option docutils literal notranslate"><span class="pre">CONFIG_PDN_DEFAULTS_OVERRIDE</span></code> - Used for manual configuration of the APN. Set the option to <code class="docutils literal notranslate"><span class="pre">y</span></code> to override the default PDP context configuration.</p></li>
<li><p><code class="xref kconfig kconfig-option docutils literal notranslate"><span class="pre">CONFIG_PDN_DEFAULT_APN</span></code> - Used for manual configuration of the APN. An example is <code class="docutils literal notranslate"><span class="pre">apn.example.com</span></code>.</p></li>
<li><p><code class="xref kconfig kconfig-option docutils literal notranslate"><span class="pre">CONFIG_MODEM_ANTENNA_GNSS_EXTERNAL</span></code> - Selects an external GNSS antenna. For nRF9160 DK v0.15.0 and later, it is recommended to set this option to achieve the best external antenna performance.</p></li>
</ul>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This application supports the <a class="reference internal" href="../../../app_dev/bootloaders_and_dfu/bootloader.html#ug-bootloader"><span class="std std-ref">Secure bootloader chain</span></a> (also called immutable bootloader), which has been enabled by default since the nRF Connect SDK v2.0.0 release.
Devices that do not have the immutable bootloader cannot be upgraded over the air to use the immutable bootloader.
To disable the <a class="reference internal" href="../../../app_dev/bootloaders_and_dfu/bootloader.html#ug-bootloader"><span class="std std-ref">Secure bootloader chain</span></a>, set both <code class="xref kconfig kconfig-option docutils literal notranslate"><span class="pre">CONFIG_SECURE_BOOT</span></code> and <code class="xref kconfig kconfig-option docutils literal notranslate"><span class="pre">CONFIG_BUILD_S1_VARIANT</span></code> Kconfig options to <code class="docutils literal notranslate"><span class="pre">n</span></code>.</p>
</div>
</section>
</section>
<section id="building-and-running">
<span id="id2"></span><h2><a class="toc-backref" href="#id16">Building and running</a><a class="headerlink" href="#building-and-running" title="Permalink to this heading"></a></h2>
<p>This application can be found under <code class="file docutils literal notranslate"><span class="pre">applications/asset_tracker_v2</span></code> in the nRF Connect SDK folder structure.
See <a class="reference internal" href="../../../getting_started/programming.html#gs-programming"><span class="std std-ref">Building and programming an application</span></a> for information about how to build and program the application.</p>
<section id="testing">
<h3><a class="toc-backref" href="#id17">Testing</a><a class="headerlink" href="#testing" title="Permalink to this heading"></a></h3>
<p>After programming the application and all the prerequisites to your development kit, test the application by performing the following steps:</p>
<ol class="arabic">
<li><p>Connect the kit to the computer using a USB cable.
The kit is assigned a COM port (Windows) or ttyACM device (Linux), which is visible in the Device Manager.</p></li>
<li><p>Connect to the kit with a terminal emulator (for example, LTE Link Monitor). See <a class="reference internal" href="../../../getting_started/testing.html#lte-connect"><span class="std std-ref">How to connect with LTE Link Monitor</span></a> for more information.</p></li>
<li><p>Reset the development kit.</p></li>
<li><p>Observe in the terminal window that application boots as shown in the following output:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">***</span> <span class="n">Booting</span> <span class="n">Zephyr</span> <span class="n">OS</span> <span class="n">build</span> <span class="n">v2</span><span class="mf">.4.0</span><span class="o">-</span><span class="n">ncs1</span><span class="o">-</span><span class="mi">2616</span><span class="o">-</span><span class="n">g3420cde0e37b</span>  <span class="o">***</span>
<span class="o">&lt;</span><span class="n">inf</span><span class="o">&gt;</span> <span class="n">app_event_manager</span><span class="p">:</span> <span class="n">APP_EVT_START</span>
</pre></div>
</div>
</li>
<li><p>Observe in the terminal window that LTE connection is established, indicated by the following output:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">&lt;</span><span class="n">inf</span><span class="o">&gt;</span> <span class="n">app_event_manager</span><span class="p">:</span> <span class="n">MODEM_EVT_LTE_CONNECTING</span>
<span class="o">...</span>
<span class="o">&lt;</span><span class="n">inf</span><span class="o">&gt;</span> <span class="n">app_event_manager</span><span class="p">:</span> <span class="n">MODEM_EVT_LTE_CONNECTED</span>
</pre></div>
</div>
</li>
<li><p>Observe that the device establishes connection to the cloud:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">&lt;</span><span class="n">inf</span><span class="o">&gt;</span> <span class="n">app_event_manager</span><span class="p">:</span> <span class="n">CLOUD_EVT_CONNECTING</span>
<span class="o">...</span>
<span class="o">&lt;</span><span class="n">inf</span><span class="o">&gt;</span> <span class="n">app_event_manager</span><span class="p">:</span> <span class="n">CLOUD_EVT_CONNECTED</span>
</pre></div>
</div>
</li>
<li><p>Observe that data is sampled periodically and sent to the cloud:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">&lt;</span><span class="n">inf</span><span class="o">&gt;</span> <span class="n">app_event_manager</span><span class="p">:</span> <span class="n">APP_EVT_DATA_GET_ALL</span>
<span class="o">&lt;</span><span class="n">inf</span><span class="o">&gt;</span> <span class="n">app_event_manager</span><span class="p">:</span> <span class="n">APP_EVT_DATA_GET</span> <span class="o">-</span> <span class="n">Requested</span> <span class="n">data</span> <span class="n">types</span> <span class="p">(</span><span class="n">MOD_DYN</span><span class="p">,</span> <span class="n">BAT</span><span class="p">,</span> <span class="n">ENV</span><span class="p">,</span> <span class="n">LOCATION</span><span class="p">)</span>
<span class="o">&lt;</span><span class="n">inf</span><span class="o">&gt;</span> <span class="n">app_event_manager</span><span class="p">:</span> <span class="n">LOCATION_MODULE_EVT_ACTIVE</span>
<span class="o">&lt;</span><span class="n">inf</span><span class="o">&gt;</span> <span class="n">app_event_manager</span><span class="p">:</span> <span class="n">SENSOR_EVT_ENVIRONMENTAL_NOT_SUPPORTED</span>
<span class="o">&lt;</span><span class="n">inf</span><span class="o">&gt;</span> <span class="n">app_event_manager</span><span class="p">:</span> <span class="n">MODEM_EVT_MODEM_DYNAMIC_DATA_NOT_READY</span>
<span class="o">&lt;</span><span class="n">inf</span><span class="o">&gt;</span> <span class="n">app_event_manager</span><span class="p">:</span> <span class="n">MODEM_EVT_BATTERY_DATA_READY</span>
<span class="o">&lt;</span><span class="n">inf</span><span class="o">&gt;</span> <span class="n">app_event_manager</span><span class="p">:</span> <span class="n">LOCATION_MODULE_EVT_INACTIVE</span>
<span class="o">&lt;</span><span class="n">inf</span><span class="o">&gt;</span> <span class="n">app_event_manager</span><span class="p">:</span> <span class="n">LOCATION_MODULE_EVT_GNSS_DATA_READY</span>
<span class="o">&lt;</span><span class="n">inf</span><span class="o">&gt;</span> <span class="n">app_event_manager</span><span class="p">:</span> <span class="n">DATA_EVT_DATA_READY</span>
<span class="o">&lt;</span><span class="n">inf</span><span class="o">&gt;</span> <span class="n">app_event_manager</span><span class="p">:</span> <span class="n">DATA_EVT_DATA_SEND_BATCH</span>
<span class="o">&lt;</span><span class="n">inf</span><span class="o">&gt;</span> <span class="n">app_event_manager</span><span class="p">:</span> <span class="n">CLOUD_EVT_DATA_SEND_QOS</span>
</pre></div>
</div>
</li>
</ol>
</section>
</section>
<section id="dependencies">
<h2><a class="toc-backref" href="#id18">Dependencies</a><a class="headerlink" href="#dependencies" title="Permalink to this heading"></a></h2>
<p>This application uses the following nRF Connect SDK libraries and drivers:</p>
<ul class="simple">
<li><p><a class="reference internal" href="../../../libraries/others/app_event_manager.html#app-event-manager"><span class="std std-ref">Application Event Manager</span></a></p></li>
<li><p><a class="reference internal" href="../../../libraries/networking/aws_iot.html#lib-aws-iot"><span class="std std-ref">AWS IoT</span></a></p></li>
<li><p><a class="reference internal" href="../../../libraries/networking/aws_fota.html#lib-aws-fota"><span class="std std-ref">AWS FOTA</span></a></p></li>
<li><p><a class="reference internal" href="../../../libraries/networking/azure_iot_hub.html#lib-azure-iot-hub"><span class="std std-ref">Azure IoT Hub</span></a></p></li>
<li><p><a class="reference internal" href="../../../libraries/networking/azure_fota.html#lib-azure-fota"><span class="std std-ref">Azure FOTA</span></a></p></li>
<li><p><a class="reference internal" href="../../../libraries/networking/lwm2m_client_utils.html#lib-lwm2m-client-utils"><span class="std std-ref">LwM2M client utils</span></a></p></li>
<li><p><a class="reference internal" href="../../../libraries/networking/lwm2m_location_assistance.html#lib-lwm2m-location-assistance"><span class="std std-ref">LwM2M location assistance</span></a></p></li>
<li><p><a class="reference internal" href="../../../libraries/networking/nrf_cloud.html#lib-nrf-cloud"><span class="std std-ref">nRF Cloud</span></a></p></li>
<li><p><a class="reference internal" href="../../../libraries/networking/nrf_cloud.html#lib-nrf-cloud-fota"><span class="std std-ref">Firmware over-the-air (FOTA) updates</span></a></p></li>
<li><p><a class="reference internal" href="../../../libraries/networking/nrf_cloud_agps.html#lib-nrf-cloud-agps"><span class="std std-ref">nRF Cloud A-GPS</span></a></p></li>
<li><p><a class="reference internal" href="../../../libraries/networking/nrf_cloud_pgps.html#lib-nrf-cloud-pgps"><span class="std std-ref">nRF Cloud P-GPS</span></a></p></li>
<li><p><a class="reference internal" href="../../../libraries/others/date_time.html#lib-date-time"><span class="std std-ref">Date-Time</span></a></p></li>
<li><p><a class="reference internal" href="../../../libraries/modem/lte_lc.html#lte-lc-readme"><span class="std std-ref">LTE link controller</span></a></p></li>
<li><p><a class="reference internal" href="../../../libraries/modem/modem_info.html#modem-info-readme"><span class="std std-ref">Modem information</span></a></p></li>
<li><p><a class="reference internal" href="../../../libraries/networking/download_client.html#lib-download-client"><span class="std std-ref">Download client</span></a></p></li>
<li><p><a class="reference internal" href="../../../libraries/networking/fota_download.html#lib-fota-download"><span class="std std-ref">FOTA download</span></a></p></li>
<li><p><a class="reference internal" href="../../../libraries/caf/leds.html#caf-leds"><span class="std std-ref">CAF: LEDs module</span></a></p></li>
</ul>
<p>It uses the following <a class="reference external" href="https://github.com/nrfconnect/sdk-nrfxlib">sdk-nrfxlib</a> library:</p>
<ul class="simple">
<li><p><span class="xref std std-ref">nrfxlib:nrf_modem</span></p></li>
</ul>
<p>It uses the following Zephyr library:</p>
<ul class="simple">
<li><p><span class="xref std std-ref">lwm2m_interface</span></p></li>
</ul>
<p>In addition, it uses the following secure firmware component:</p>
<ul class="simple">
<li><p><a class="reference internal" href="../../../app_dev/tfm/index.html#ug-tfm"><span class="std std-ref">Trusted Firmware-M</span></a></p></li>
</ul>
</section>
<section id="nrf-asset-tracker-project">
<span id="nrf-asset-tracker"></span><h2><a class="toc-backref" href="#id19">nRF Asset Tracker project</a><a class="headerlink" href="#nrf-asset-tracker-project" title="Permalink to this heading"></a></h2>
<p>The application firmware is a part of the <a class="reference external" href="https://nordicsemiconductor.github.io/asset-tracker-cloud-docs/v2.1.x/docs/project/Index.html">nRF Asset Tracker project</a>, which is an open source end-to-end example that includes cloud backend and frontend code for the following cloud providers:</p>
<ul class="simple">
<li><p>AWS IoT Core - <a class="reference external" href="https://nordicsemiconductor.github.io/asset-tracker-cloud-docs/v2.1.x/docs/aws/GettingStarted/Index.html">Getting started guide for nRF Asset Tracker for AWS</a>.</p></li>
<li><p>Azure IoT Hub - <a class="reference external" href="https://nordicsemiconductor.github.io/asset-tracker-cloud-docs/v2.1.x/docs/azure/GettingStarted/Index.html">Getting started guide for nRF Asset Tracker for Azure</a>.</p></li>
</ul>
<p>The <a class="reference external" href="https://nordicsemiconductor.github.io/asset-tracker-cloud-docs/v2.1.x/docs/project/Index.html">nRF Asset Tracker project</a> contains separate documentation that goes through setup of the firmware and cloud-side setup.
If you want to use the nRF Asset Tracker, follow the <a class="reference external" href="https://nordicsemiconductor.github.io/asset-tracker-cloud-docs/v2.1.x/docs/project/Index.html">nRF Asset Tracker project</a> documentation instead of the Asset Tracker v2 documentation.</p>
</section>
</section>


           </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="app_behavior.html" class="btn btn-neutral float-right" title="Application behavior and functionality" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="../README.html" class="btn btn-neutral" title="nRF9160: Asset Tracker v2" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">

<table>
<tr>
<td>
    <p>
        &copy; Copyright 2019-2023, Nordic Semiconductor.
      Last updated on Mar 20, 2023.

    </p>
</td>
<td id="nordiclogo">
  <a href="https://www.nordicsemi.com/"><img src="../../../_static/images/nordic-logo.png" border="0"/></a>
</td>
</tr>
</table>
  </div> 


</footer>

<div id="scroll-container">
  <button type="button" id="scroll-btn" class="btn">
    <svg xmlns="http://www.w3.org/2000/svg" height="24" viewBox="0 0 24 24" width="24"><path d="M0 0h24v24H0z" fill="none"/><path d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z" fill="#fff"/></svg>
  </button>
</div>

<script>
  const scrollBtn = document.querySelector("#scroll-btn");

  document.addEventListener("scroll", () => {
    if (window.scrollY > 400) {
          scrollBtn.style.visibility = "visible";
      } else {
          scrollBtn.style.visibility = "hidden";
      }
  });

  scrollBtn.addEventListener("click", () => {
      window.scrollTo({ top: 0, behavior: "smooth" });
  });
</script>
        </div>
      </div>
    </section>
  </div>
  
  <div class="rst-versions" data-toggle="rst-versions" role="note" aria-label="versions">
    <span class="rst-current-version" data-toggle="rst-current-version">
      <span class="fa fa-book"> nRF Connect SDK</span>
       <span class="fa fa-caret-down"></span>
    </span>
    <div class="rst-other-versions">
      
      <div class="rst-other-version ncs">
        <a href="../../../../nrf/index.html">nRF Connect SDK</a>
      </div>
      
      <div class="rst-other-version nrfx">
        <a href="../../../../nrfx/index.html">nrfx</a>
      </div>
      
      <div class="rst-other-version nrfxlib">
        <a href="../../../../nrfxlib/README.html">nrfxlib</a>
      </div>
      
      <div class="rst-other-version zephyr">
        <a href="../../../../zephyr/index.html">Zephyr Project</a>
      </div>
      
      <div class="rst-other-version mcuboot">
        <a href="../../../../mcuboot/wrapper.html">MCUboot</a>
      </div>
      
      <div class="rst-other-version tfm">
        <a href="../../../../tfm/index.html">Trusted Firmware-M</a>
      </div>
      
      <div class="rst-other-version matter">
        <a href="../../../../matter/index.html">Matter</a>
      </div>
      
      <div class="rst-other-version kconfig">
        <a href="../../../../kconfig/index.html">Kconfig Reference</a>
      </div>
    </div>
  </div><script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>