<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>DFU AT commands &mdash; nRF Connect SDK 2.3.99 documentation</title>
      <link rel="stylesheet" href="../../../_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="../../../_static/css/nordic.css" type="text/css" />
      <link rel="stylesheet" href="../../../_static/togglebutton.css" type="text/css" />
      <link rel="stylesheet" href="../../../_static/css/nrf.css" type="text/css" />
      <link rel="stylesheet" href="../../../_static/tabs.css" type="text/css" /> 
  <!--[if lt IE 9]>
    <script src="../../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="../../../" id="documentation_options" src="../../../_static/documentation_options.js"></script>
        <script src="../../../_static/jquery.js"></script>
        <script src="../../../_static/underscore.js"></script>
        <script src="../../../_static/_sphinx_javascript_frameworks_compat.js"></script>
        <script src="../../../_static/doctools.js"></script>
        <script src="../../../_static/sphinx_highlight.js"></script>
        <script src="https://www.googletagmanager.com/gtag/js?id=G-ZPVZRKFQJR"></script>
        <script src="../../../_static/js/ga-tracker.js"></script>
        <script data-culture="EN" id="CookieConsent" type="text/javascript" src="https://policy.app.cookieinformation.com/uc.js"></script>
        <script>let toggleHintShow = 'Click to show';</script>
        <script>let toggleHintHide = 'Click to hide';</script>
        <script>let toggleOpenOnPrint = 'true';</script>
        <script src="../../../_static/togglebutton.js"></script>
        <script>var togglebuttonSelector = '.toggle, .admonition.dropdown';</script>
    <script src="../../../_static/js/theme.js"></script>
<script
  type="text/javascript"
  src="../../../_static/js/ncs.js"
></script>
<script src="../../../_static/js/bootstrap.bundle.min.js"></script>

    <link rel="index" title="Index" href="../../../genindex.html" />
    <link rel="search" title="Search" href="../../../search.html" />
    <link rel="next" title="SMS AT commands" href="SMS_AT_commands.html" />
    <link rel="prev" title="FOTA AT commands" href="FOTA_AT_commands.html" />
<link
  href="../../../_static/css/bootstrap.min.css"
  rel="stylesheet"
/>
<link
  rel="shortcut icon"
  href="../../../_static/images/favicon.ico"
/>

</head>

<body class="wy-body-for-nav">
<div class="announcement"></div>
<div class="d-print-none ncs-header">
  <div class="container-xl ncs-header-top">
    <div class="row h-100">
      <div class="d-none d-md-block col-2">
        <div class="bg-white py-4 px-3 ml-2 ncs-header-logo">
          <img
            class="ncs-header-logo"
            src="../../../_static/images/nordic-logo.png"
            alt=""
          />
        </div>
      </div>
      <div
        class="col-8 col-md-7 pl-md-4 d-flex align-self-center justify-content-center"
      >
        <form class="w-75" action="../../../search.html" method="get">
          <div class="form-group">
            <input
              type="text"
              name="q"
              class="ncs-search-input form-control"
              placeholder="Search all docs..."
            />
          </div>
        </form>
      </div>
      <div class="col-4 col-md-3 d-md-block p-3 text-end">
        <div class="dropdown">
          <button
            class="btn dropdown-toggle ncs-btn-versions"
            type="button"
            id="dropdownMenuButton1"
            data-bs-toggle="dropdown"
            aria-expanded="false"
          >
            <span class="d-none d-md-inline">nRF Connect SDK</span>
            <span id="ncsversion" class="d-inline"></span>
          </button>
          <div class="dropdown-menu" aria-labelledby="dropdownMenuButton"></div>
        </div>
      </div>
    </div>
  </div>
  <div class="ncs-header-nav">
    <div class="container-xl">
      <div class="row">
        <div class="col col-12 d-flex justify-content-center">
          <nav class="navbar navbar-dark navbar-expand-lg p-0">
            <span class="navbar-brand d-block d-lg-none py-2 pl-1"
              >Documentation sets</span
            >
            <button
              class="navbar-toggler"
              type="button"
              data-bs-toggle="collapse"
              data-bs-target="#navbarNavAltMarkup"
              aria-controls="navbarNavAltMarkup"
              aria-expanded="false"
              aria-label="Toggle navigation"
            >
              <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="navbarNavAltMarkup">
              <ul class="navbar-nav">
                <li class="nav-item active py-1 px-3">
                  <a
                    class="nav-link"
                    href="../../../../nrf/index.html"
                    >nRF Connect SDK</a
                  >
                </li>
                <li><hr class="dropdown-divider" /></li>
                <li class="nav-item  py-1 px-3">
                  <a
                    class="nav-link"
                    href="../../../../nrfx/index.html"
                    >nrfx</a
                  >
                </li>
                <li><hr class="dropdown-divider" /></li>
                <li class="nav-item  py-1 px-3">
                  <a
                    class="nav-link"
                    href="../../../../nrfxlib/README.html"
                    >nrfxlib</a
                  >
                </li>
                <li><hr class="dropdown-divider" /></li>
                <li class="nav-item  py-1 px-3">
                  <a
                    class="nav-link"
                    href="../../../../zephyr/index.html"
                    >Zephyr Project</a
                  >
                </li>
                <li><hr class="dropdown-divider" /></li>
                <li class="nav-item  py-1 px-3">
                  <a
                    class="nav-link"
                    href="../../../../mcuboot/wrapper.html"
                    >MCUboot</a
                  >
                </li>
                <li><hr class="dropdown-divider" /></li>
                <li class="nav-item  py-1 px-3">
                  <a
                    class="nav-link"
                    href="../../../../tfm/index.html"
                    >Trusted Firmware-M</a
                  >
                </li>
                <li><hr class="dropdown-divider" /></li>
                <li class="nav-item  py-1 px-3">
                  <a
                    class="nav-link"
                    href="../../../../matter/index.html"
                    >Matter</a
                  >
                </li>
                <li><hr class="dropdown-divider" /></li>
                <li class="nav-item  py-1 px-3">
                  <a
                    class="nav-link"
                    href="../../../../kconfig/index.html"
                    >Kconfig Reference</a
                  >
                </li>
                <li><hr class="dropdown-divider" /></li>
              </ul>
            </div>
          </nav>
        </div>
      </div>
    </div>
  </div>
</div>

  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
            <a href="../../../index.html" class="icon icon-home"> nRF Connect SDK
          </a>
              <div class="version">
                2.3.99
              </div>
<div id="searchbox" role="search">
  <div class="searchformwrapper">
    <form id="rtd-search-form" class="wy-form" action="../../../search.html" method="get">
      <input type="text" name="q" placeholder="Search docs" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
  </div>
</div>
<script>$('#searchbox').show(0);</script>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Contents</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../../introduction.html">Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../getting_started.html">Getting started</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../dev_model.html">Development model</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../app_dev.html">Application development</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../security.html">Security</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../ecosystem_integration.html">Ecosystems integration</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../nrf91.html">Working with nRF91 Series</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../nrf70.html">Working with nRF70 Series</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../nrf53.html">Working with nRF53 Series</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../nrf52.html">Working with nRF52 Series</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../protocols.html">Protocols</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../../../applications.html">Applications</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../../connectivity_bridge/README.html">Connectivity bridge</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../asset_tracker_v2/README.html">nRF9160: Asset Tracker v2</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="../README.html">nRF9160: Serial LTE modem</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="slm_description.html">Application description</a></li>
<li class="toctree-l3"><a class="reference internal" href="slm_testing.html">Testing scenarios</a></li>
<li class="toctree-l3"><a class="reference internal" href="slm_extending.html">Extending the application</a></li>
<li class="toctree-l3"><a class="reference internal" href="slm_data_mode.html">Running in data mode</a></li>
<li class="toctree-l3 current"><a class="reference internal" href="AT_commands_intro.html">SLM-specific AT commands</a><ul class="current">
<li class="toctree-l4"><a class="reference internal" href="Generic_AT_commands.html">Generic AT commands</a></li>
<li class="toctree-l4"><a class="reference internal" href="SOCKET_AT_commands.html">Socket AT commands</a></li>
<li class="toctree-l4"><a class="reference internal" href="TCPIP_AT_commands.html">TCP and UDP AT commands</a></li>
<li class="toctree-l4"><a class="reference internal" href="ICMP_AT_commands.html">ICMP AT commands</a></li>
<li class="toctree-l4"><a class="reference internal" href="FOTA_AT_commands.html">FOTA AT commands</a></li>
<li class="toctree-l4 current"><a class="current reference internal" href="#">DFU AT commands</a></li>
<li class="toctree-l4"><a class="reference internal" href="SMS_AT_commands.html">SMS AT commands</a></li>
<li class="toctree-l4"><a class="reference internal" href="FTP_AT_commands.html">FTP AT commands</a></li>
<li class="toctree-l4"><a class="reference internal" href="GNSS_AT_commands.html">GNSS AT commands</a></li>
<li class="toctree-l4"><a class="reference internal" href="MQTT_AT_commands.html">MQTT client AT commands</a></li>
<li class="toctree-l4"><a class="reference internal" href="HTTPC_AT_commands.html">HTTP client AT commands</a></li>
<li class="toctree-l4"><a class="reference internal" href="TWI_AT_commands.html">TWI AT commands</a></li>
<li class="toctree-l4"><a class="reference internal" href="GPIO_AT_commands.html">GPIO AT commands</a></li>
<li class="toctree-l4"><a class="reference internal" href="CARRIER_AT_commands.html">LwM2M carrier library AT commands</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../nrf_desktop/README.html">nRF Desktop</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../nrf5340_audio/README.html">nRF5340 Audio</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../machine_learning/README.html">nRF Machine Learning</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../matter_weather_station/README.html">Thingy:53: Matter weather station</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../zigbee_weather_station/README.html">Thingy:53: Zigbee weather station</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../samples.html">Samples</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../drivers.html">Drivers</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../libraries/index.html">Libraries</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../scripts.html">Scripts</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../release_notes.html">Release notes</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../known_issues.html">Known issues</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../software_maturity.html">Software maturity levels</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../documentation.html">About this documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../glossary.html">Glossary</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../../index.html">nRF Connect SDK</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../../../index.html" class="icon icon-home"></a></li>
          <li class="breadcrumb-item"><a href="../../../applications.html">Applications</a></li>
          <li class="breadcrumb-item"><a href="../README.html">nRF9160: Serial LTE modem</a></li>
          <li class="breadcrumb-item"><a href="AT_commands_intro.html">SLM-specific AT commands</a></li>
      <li class="breadcrumb-item active">DFU AT commands</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../../../_sources/applications/serial_lte_modem/doc/DFU_AT_commands.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="dfu-at-commands">
<span id="slm-at-dfu"></span><h1>DFU AT commands<a class="headerlink" href="#dfu-at-commands" title="Permalink to this heading"></a></h1>
<div class="contents local topic" id="contents">
<ul class="simple">
<li><p><a class="reference internal" href="#get-request-xdfuget" id="id23">Get request #XDFUGET</a></p>
<ul>
<li><p><a class="reference internal" href="#set-command" id="id24">Set command</a></p></li>
<li><p><a class="reference internal" href="#read-command" id="id25">Read command</a></p></li>
<li><p><a class="reference internal" href="#test-command" id="id26">Test command</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#get-file-size-xdfusize" id="id27">Get file size #XDFUSIZE</a></p>
<ul>
<li><p><a class="reference internal" href="#id3" id="id28">Set command</a></p></li>
<li><p><a class="reference internal" href="#id7" id="id29">Read command</a></p></li>
<li><p><a class="reference internal" href="#id8" id="id30">Test command</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#run-request-xdfurun" id="id31">Run request #XDFURUN</a></p>
<ul>
<li><p><a class="reference internal" href="#id9" id="id32">Set command</a></p></li>
<li><p><a class="reference internal" href="#id13" id="id33">Read command</a></p></li>
<li><p><a class="reference internal" href="#id14" id="id34">Test command</a></p></li>
</ul>
</li>
</ul>
</div>
<p>The following commands list contains AT commands related to DFU requests.</p>
<p>The SLM application supports the following types of cloud-to-device Device Firmware Update (DFU) for the nRF52 Series of MCUs:</p>
<ul class="simple">
<li><p>The application DFU based on MCUboot.
This is supported by nRF Connect SDK.
To use this, define <a class="reference internal" href="slm_description.html#config-slm-nrf52-dfu"><span class="std std-ref">CONFIG_SLM_NRF52_DFU</span></a> but leave <a class="reference internal" href="slm_description.html#config-slm-nrf52-dfu-legacy"><span class="std std-ref">CONFIG_SLM_NRF52_DFU_LEGACY</span></a> undefined.</p></li>
<li><p>The legacy serial DFU.
This is supported by the legacy nRF5 SDK.
To use this, define both <a class="reference internal" href="slm_description.html#config-slm-nrf52-dfu"><span class="std std-ref">CONFIG_SLM_NRF52_DFU</span></a> and <a class="reference internal" href="slm_description.html#config-slm-nrf52-dfu-legacy"><span class="std std-ref">CONFIG_SLM_NRF52_DFU_LEGACY</span></a>.</p></li>
</ul>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>You must configure SLM to use <code class="docutils literal notranslate"><span class="pre">UART_2</span></code> for the DFU service.</p>
</div>
<section id="get-request-xdfuget">
<h2><a class="toc-backref" href="#id23">Get request #XDFUGET</a><a class="headerlink" href="#get-request-xdfuget" title="Permalink to this heading"></a></h2>
<p>The <code class="docutils literal notranslate"><span class="pre">#XDFUGET</span></code> command sends various types of requests based on specific operation codes.</p>
<section id="set-command">
<h3><a class="toc-backref" href="#id24">Set command</a><a class="headerlink" href="#set-command" title="Permalink to this heading"></a></h3>
<p>The set command allows you to send a DFU download request.</p>
<section id="syntax">
<h4>Syntax<a class="headerlink" href="#syntax" title="Permalink to this heading"></a></h4>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">AT</span><span class="c1">#XDFUGET=&lt;op&gt;[,&lt;host&gt;,&lt;image_1&gt;[,&lt;image_2&gt;[,&lt;sec_tag&gt;]]]</span>
</pre></div>
</div>
<ul class="simple">
<li><p>The <code class="docutils literal notranslate"><span class="pre">&lt;op&gt;</span></code> parameter can accept one of the following values:</p>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">0</span></code> - Cancel DFU (during download only).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">1</span></code> - Start downloading <code class="docutils literal notranslate"><span class="pre">&lt;image_1&gt;</span></code> and <code class="docutils literal notranslate"><span class="pre">&lt;image_2&gt;</span></code>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">8</span></code> - Erase MCUboot secondary slot.</p></li>
</ul>
</li>
<li><p>The <code class="docutils literal notranslate"><span class="pre">&lt;host&gt;</span></code> parameter is a string.
It indicates the HTTP or HTTPS server name and optionally a port number.</p></li>
<li><p>The <code class="docutils literal notranslate"><span class="pre">&lt;image_1&gt;</span></code> parameter is a string.
It indicates the first file image to download.
If <a class="reference internal" href="slm_description.html#config-slm-nrf52-dfu-legacy"><span class="std std-ref">CONFIG_SLM_NRF52_DFU_LEGACY</span></a> is defined, you must set <code class="docutils literal notranslate"><span class="pre">&lt;image_1&gt;</span></code> as the path to the init packet file (<code class="file docutils literal notranslate"><span class="pre">.dat</span></code>).
Otherwise, you must set <code class="docutils literal notranslate"><span class="pre">&lt;image_1&gt;</span></code> as the path to the MCUboot application update file (<code class="file docutils literal notranslate"><span class="pre">.bin</span></code>).</p></li>
<li><p>The <code class="docutils literal notranslate"><span class="pre">&lt;image_2&gt;</span></code> parameter is a string.
It indicates the second file image to download.
If <a class="reference internal" href="slm_description.html#config-slm-nrf52-dfu-legacy"><span class="std std-ref">CONFIG_SLM_NRF52_DFU_LEGACY</span></a> is defined, you must set <code class="docutils literal notranslate"><span class="pre">&lt;image_2&gt;</span></code> as the path to the file image (<code class="file docutils literal notranslate"><span class="pre">.bin</span></code>).
Otherwise, this parameter should not be set.</p></li>
<li><p>The <code class="docutils literal notranslate"><span class="pre">&lt;sec_tag&gt;</span></code> parameter is an integer.
It indicates to the modem the credential of the security tag used for establishing a secure connection for downloading the image.
It is associated with the certificate or PSK.
Specifying the <code class="docutils literal notranslate"><span class="pre">&lt;sec_tag&gt;</span></code> is mandatory when using HTTPS.</p></li>
</ul>
</section>
<section id="unsolicited-notification">
<h4>Unsolicited notification<a class="headerlink" href="#unsolicited-notification" title="Permalink to this heading"></a></h4>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1">#XDFUGET: &lt;dfu_step&gt;,&lt;info&gt;</span>
</pre></div>
</div>
<ul class="simple">
<li><p>The <code class="docutils literal notranslate"><span class="pre">&lt;dfu_step&gt;</span></code> value is an integer.
It indicates which image is being downloaded.</p></li>
<li><p>The <code class="docutils literal notranslate"><span class="pre">&lt;info&gt;</span></code> value is an integer.
It can return the following values:</p>
<ul>
<li><p>A value between <code class="docutils literal notranslate"><span class="pre">1</span></code> and <code class="docutils literal notranslate"><span class="pre">100</span></code> - The percentage of the download.</p></li>
<li><p>Any other value - Error code.</p></li>
</ul>
</li>
</ul>
</section>
<section id="examples">
<h4>Examples<a class="headerlink" href="#examples" title="Permalink to this heading"></a></h4>
<p>Get the image files for the legacy DFU from <code class="docutils literal notranslate"><span class="pre">http://myserver.com/path/*.*</span></code>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">AT</span><span class="c1">#XDFUGET=1,&quot;http://myserver.com&quot;,&quot;path/nrf52840_xxaa.dat&quot;,&quot;path/nrf52840_xxaa.bin&quot;</span>
<span class="n">OK</span>
<span class="c1">#XDFUGET: 1,14</span>
<span class="o">...</span>
<span class="c1">#XDFUGET: 1,100</span>
</pre></div>
</div>
<p>Erase the previous image after DFU:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">AT</span><span class="c1">#XDFUGET=8</span>
<span class="n">OK</span>
</pre></div>
</div>
<p>Get the image files for the nRF Connect SDK DFU from <code class="docutils literal notranslate"><span class="pre">http://myserver.com/path/*.*</span></code>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">AT</span><span class="c1">#XDFUGET=1,&quot;https://myserver.com&quot;,&quot;path/nrf52_app_update.bin&quot;,&quot;&quot;,1234</span>
<span class="n">OK</span>
<span class="c1">#XDFUGET: 0,14</span>
<span class="o">...</span>
<span class="c1">#XDFUGET: 0,100</span>
</pre></div>
</div>
</section>
</section>
<section id="read-command">
<h3><a class="toc-backref" href="#id25">Read command</a><a class="headerlink" href="#read-command" title="Permalink to this heading"></a></h3>
<p>The read command is not supported.</p>
</section>
<section id="test-command">
<h3><a class="toc-backref" href="#id26">Test command</a><a class="headerlink" href="#test-command" title="Permalink to this heading"></a></h3>
<p>The test command tests the existence of the command and provides information about the type of its subparameters.</p>
<section id="id1">
<h4>Syntax<a class="headerlink" href="#id1" title="Permalink to this heading"></a></h4>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1">#XDFUGET=?</span>
</pre></div>
</div>
</section>
<section id="response-syntax">
<h4>Response syntax<a class="headerlink" href="#response-syntax" title="Permalink to this heading"></a></h4>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1">#XDFUGET: &lt;list of op value&gt;,&lt;host&gt;,&lt;image_1&gt;,&lt;image_2&gt;,&lt;sec_tag&gt;</span>
</pre></div>
</div>
</section>
<section id="id2">
<h4>Examples<a class="headerlink" href="#id2" title="Permalink to this heading"></a></h4>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">AT</span><span class="c1">#XDFUGET=?</span>
<span class="c1">#XDFUGET: (0,1,8),&lt;host&gt;,&lt;image_1&gt;,&lt;image_2&gt;,&lt;sec_tag&gt;</span>
<span class="n">OK</span>
</pre></div>
</div>
</section>
</section>
</section>
<section id="get-file-size-xdfusize">
<h2><a class="toc-backref" href="#id27">Get file size #XDFUSIZE</a><a class="headerlink" href="#get-file-size-xdfusize" title="Permalink to this heading"></a></h2>
<p>The <code class="docutils literal notranslate"><span class="pre">#XDFUSIZE</span></code> command returns the size of the downloaded (<code class="file docutils literal notranslate"><span class="pre">.bin</span></code>) image file.</p>
<section id="id3">
<h3><a class="toc-backref" href="#id28">Set command</a><a class="headerlink" href="#id3" title="Permalink to this heading"></a></h3>
<p>The set command allows you to get the size of the downloaded image file.</p>
<section id="id4">
<h4>Syntax<a class="headerlink" href="#id4" title="Permalink to this heading"></a></h4>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">AT</span><span class="c1">#XDFUSIZE</span>
</pre></div>
</div>
</section>
<section id="id5">
<h4>Response syntax<a class="headerlink" href="#id5" title="Permalink to this heading"></a></h4>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">XDFUSIZE</span><span class="p">:</span> <span class="o">&lt;</span><span class="n">file_size</span><span class="o">&gt;</span><span class="p">,</span><span class="o">&lt;</span><span class="n">download_size</span><span class="o">&gt;</span><span class="p">,</span><span class="o">&lt;</span><span class="n">crc32_checksum</span><span class="o">&gt;</span>
</pre></div>
</div>
<ul>
<li><p>The <code class="docutils literal notranslate"><span class="pre">&lt;file_size&gt;</span></code> is an integer.
It indicates the size of the DFU image file.</p></li>
<li><p>The <code class="docutils literal notranslate"><span class="pre">&lt;download_size&gt;</span></code> is an integer.
It indicates the size that has been downloaded so far.</p></li>
<li><p>The <code class="docutils literal notranslate"><span class="pre">&lt;crc32_checksum&gt;</span></code> is a 32-bit unsigned integer.
It indicates the IEEE CRC32 of the image content that has been downloaded.
You can use this CRC32 to check data integrity when you use MCUboot to perform a DFU.</p>
<p>You should check the CRC checksum after <code class="docutils literal notranslate"><span class="pre">#XDFURUN</span></code> has transferred the downloaded data image from nRF91 to nRF5x, before configuring MCUboot to use the new image.</p>
</li>
</ul>
</section>
<section id="id6">
<h4>Examples<a class="headerlink" href="#id6" title="Permalink to this heading"></a></h4>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1">#XDFUGET: 1,100</span>
<span class="n">OK</span>

<span class="n">AT</span><span class="c1">#XDFUSIZE</span>
<span class="c1">#XDFUSIZE: 17048,17048,2316010324</span>
<span class="n">OK</span>
</pre></div>
</div>
</section>
</section>
<section id="id7">
<h3><a class="toc-backref" href="#id29">Read command</a><a class="headerlink" href="#id7" title="Permalink to this heading"></a></h3>
<p>The read command is not supported.</p>
</section>
<section id="id8">
<h3><a class="toc-backref" href="#id30">Test command</a><a class="headerlink" href="#id8" title="Permalink to this heading"></a></h3>
<p>The test command is not supported.</p>
</section>
</section>
<section id="run-request-xdfurun">
<h2><a class="toc-backref" href="#id31">Run request #XDFURUN</a><a class="headerlink" href="#run-request-xdfurun" title="Permalink to this heading"></a></h2>
<p>The <code class="docutils literal notranslate"><span class="pre">#XDFURUN</span></code> command starts to run the DFU protocol over the UART connection.</p>
<section id="id9">
<h3><a class="toc-backref" href="#id32">Set command</a><a class="headerlink" href="#id9" title="Permalink to this heading"></a></h3>
<p>The set command allows you to send a DFU run request.</p>
<section id="id10">
<h4>Syntax<a class="headerlink" href="#id10" title="Permalink to this heading"></a></h4>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">AT</span><span class="c1">#XDFURUN=&lt;start_delay&gt;[,&lt;mtu&gt;,&lt;pause&gt;]</span>
</pre></div>
</div>
<ul class="simple">
<li><p>The <code class="docutils literal notranslate"><span class="pre">&lt;start_delay&gt;</span></code> parameter is an integer.
It indicates the duration of the delay, in seconds, before the application starts to run the DFU protocol.
This allows the nRF52 SoC to make the necessary preparations, like swapping to bootloader mode.</p></li>
<li><p>The <code class="docutils literal notranslate"><span class="pre">&lt;mtu&gt;</span></code> parameter is an integer.
It indicates the size of the data chunk that is sent from the SLM to the nRF52.
This parameter should be a multiple of 256 bytes and should not be greater than 4096 bytes.
This parameter is ignored if <a class="reference internal" href="slm_description.html#config-slm-nrf52-dfu-legacy"><span class="std std-ref">CONFIG_SLM_NRF52_DFU_LEGACY</span></a> is defined.</p></li>
<li><p>The <code class="docutils literal notranslate"><span class="pre">&lt;pause&gt;</span></code> parameter is an integer.
It indicates the time, in milliseconds, that the SLM pauses after sending the data chunk of <code class="docutils literal notranslate"><span class="pre">&lt;mtu&gt;</span></code> size.
This parameter must not be zero.
This parameter is ignored if <a class="reference internal" href="slm_description.html#config-slm-nrf52-dfu-legacy"><span class="std std-ref">CONFIG_SLM_NRF52_DFU_LEGACY</span></a> is defined.</p></li>
</ul>
</section>
<section id="id11">
<h4>Response syntax<a class="headerlink" href="#id11" title="Permalink to this heading"></a></h4>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1">#XDFURUN: &lt;dfu_step&gt;,&lt;info&gt;</span>
</pre></div>
</div>
<ul class="simple">
<li><p>The <code class="docutils literal notranslate"><span class="pre">&lt;dfu_step&gt;</span></code> is an integer.
It indicates which step of the DFU protocol is being executed.</p></li>
<li><p>The <code class="docutils literal notranslate"><span class="pre">&lt;info&gt;</span></code> is an integer.
It returns an error code when an error happens.</p></li>
</ul>
</section>
<section id="id12">
<h4>Examples<a class="headerlink" href="#id12" title="Permalink to this heading"></a></h4>
<p>Run the legacy serial DFU protocol:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">AT</span><span class="c1">#XDFURUN=2</span>
<span class="n">OK</span>
</pre></div>
</div>
<p>Run the MCUboot-based DFU protocol:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">AT</span><span class="c1">#XDFURUN=1,1024,200</span>
<span class="n">OK</span>
</pre></div>
</div>
</section>
</section>
<section id="id13">
<h3><a class="toc-backref" href="#id33">Read command</a><a class="headerlink" href="#id13" title="Permalink to this heading"></a></h3>
<p>The read command is not supported.</p>
</section>
<section id="id14">
<h3><a class="toc-backref" href="#id34">Test command</a><a class="headerlink" href="#id14" title="Permalink to this heading"></a></h3>
<p>The test command tests the existence of the command and provides information about the type of its subparameters.</p>
<section id="id15">
<h4>Syntax<a class="headerlink" href="#id15" title="Permalink to this heading"></a></h4>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1">#XDFURUN=?</span>
</pre></div>
</div>
</section>
<section id="id16">
<h4>Response syntax<a class="headerlink" href="#id16" title="Permalink to this heading"></a></h4>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1">#XDFURUN: &lt;start_delay&gt;,&lt;mtu&gt;,&lt;pause&gt;</span>
</pre></div>
</div>
</section>
<section id="id17">
<h4>Examples<a class="headerlink" href="#id17" title="Permalink to this heading"></a></h4>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">AT</span><span class="c1">#XDFURUN=?</span>

<span class="c1">#XDFURUN: &lt;start_delay&gt;,&lt;mtu&gt;,&lt;pause&gt;</span>

<span class="n">OK</span>
</pre></div>
</div>
</section>
</section>
</section>
</section>


           </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="SMS_AT_commands.html" class="btn btn-neutral float-right" title="SMS AT commands" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="FOTA_AT_commands.html" class="btn btn-neutral" title="FOTA AT commands" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">

<table>
<tr>
<td>
    <p>
        &copy; Copyright 2019-2023, Nordic Semiconductor.
      Last updated on Mar 20, 2023.

    </p>
</td>
<td id="nordiclogo">
  <a href="https://www.nordicsemi.com/"><img src="../../../_static/images/nordic-logo.png" border="0"/></a>
</td>
</tr>
</table>
  </div> 


</footer>

<div id="scroll-container">
  <button type="button" id="scroll-btn" class="btn">
    <svg xmlns="http://www.w3.org/2000/svg" height="24" viewBox="0 0 24 24" width="24"><path d="M0 0h24v24H0z" fill="none"/><path d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z" fill="#fff"/></svg>
  </button>
</div>

<script>
  const scrollBtn = document.querySelector("#scroll-btn");

  document.addEventListener("scroll", () => {
    if (window.scrollY > 400) {
          scrollBtn.style.visibility = "visible";
      } else {
          scrollBtn.style.visibility = "hidden";
      }
  });

  scrollBtn.addEventListener("click", () => {
      window.scrollTo({ top: 0, behavior: "smooth" });
  });
</script>
        </div>
      </div>
    </section>
  </div>
  
  <div class="rst-versions" data-toggle="rst-versions" role="note" aria-label="versions">
    <span class="rst-current-version" data-toggle="rst-current-version">
      <span class="fa fa-book"> nRF Connect SDK</span>
       <span class="fa fa-caret-down"></span>
    </span>
    <div class="rst-other-versions">
      
      <div class="rst-other-version ncs">
        <a href="../../../../nrf/index.html">nRF Connect SDK</a>
      </div>
      
      <div class="rst-other-version nrfx">
        <a href="../../../../nrfx/index.html">nrfx</a>
      </div>
      
      <div class="rst-other-version nrfxlib">
        <a href="../../../../nrfxlib/README.html">nrfxlib</a>
      </div>
      
      <div class="rst-other-version zephyr">
        <a href="../../../../zephyr/index.html">Zephyr Project</a>
      </div>
      
      <div class="rst-other-version mcuboot">
        <a href="../../../../mcuboot/wrapper.html">MCUboot</a>
      </div>
      
      <div class="rst-other-version tfm">
        <a href="../../../../tfm/index.html">Trusted Firmware-M</a>
      </div>
      
      <div class="rst-other-version matter">
        <a href="../../../../matter/index.html">Matter</a>
      </div>
      
      <div class="rst-other-version kconfig">
        <a href="../../../../kconfig/index.html">Kconfig Reference</a>
      </div>
    </div>
  </div><script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>