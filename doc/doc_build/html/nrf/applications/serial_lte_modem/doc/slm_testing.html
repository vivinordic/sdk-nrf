<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Testing scenarios &mdash; nRF Connect SDK 2.3.99 documentation</title>
      <link rel="stylesheet" href="../../../_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="../../../_static/css/nordic.css" type="text/css" />
      <link rel="stylesheet" href="../../../_static/togglebutton.css" type="text/css" />
      <link rel="stylesheet" href="../../../_static/css/nrf.css" type="text/css" />
      <link rel="stylesheet" href="../../../_static/tabs.css" type="text/css" /> 
  <!--[if lt IE 9]>
    <script src="../../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="../../../" id="documentation_options" src="../../../_static/documentation_options.js"></script>
        <script src="../../../_static/jquery.js"></script>
        <script src="../../../_static/underscore.js"></script>
        <script src="../../../_static/_sphinx_javascript_frameworks_compat.js"></script>
        <script src="../../../_static/doctools.js"></script>
        <script src="../../../_static/sphinx_highlight.js"></script>
        <script src="https://www.googletagmanager.com/gtag/js?id=G-ZPVZRKFQJR"></script>
        <script src="../../../_static/js/ga-tracker.js"></script>
        <script data-culture="EN" id="CookieConsent" type="text/javascript" src="https://policy.app.cookieinformation.com/uc.js"></script>
        <script>let toggleHintShow = 'Click to show';</script>
        <script>let toggleHintHide = 'Click to hide';</script>
        <script>let toggleOpenOnPrint = 'true';</script>
        <script src="../../../_static/togglebutton.js"></script>
        <script>var togglebuttonSelector = '.toggle, .admonition.dropdown';</script>
    <script src="../../../_static/js/theme.js"></script>
<script
  type="text/javascript"
  src="../../../_static/js/ncs.js"
></script>
<script src="../../../_static/js/bootstrap.bundle.min.js"></script>

    <link rel="index" title="Index" href="../../../genindex.html" />
    <link rel="search" title="Search" href="../../../search.html" />
    <link rel="next" title="Extending the application" href="slm_extending.html" />
    <link rel="prev" title="Application description" href="slm_description.html" />
<link
  href="../../../_static/css/bootstrap.min.css"
  rel="stylesheet"
/>
<link
  rel="shortcut icon"
  href="../../../_static/images/favicon.ico"
/>

</head>

<body class="wy-body-for-nav">
<div class="announcement"></div>
<div class="d-print-none ncs-header">
  <div class="container-xl ncs-header-top">
    <div class="row h-100">
      <div class="d-none d-md-block col-2">
        <div class="bg-white py-4 px-3 ml-2 ncs-header-logo">
          <img
            class="ncs-header-logo"
            src="../../../_static/images/nordic-logo.png"
            alt=""
          />
        </div>
      </div>
      <div
        class="col-8 col-md-7 pl-md-4 d-flex align-self-center justify-content-center"
      >
        <form class="w-75" action="../../../search.html" method="get">
          <div class="form-group">
            <input
              type="text"
              name="q"
              class="ncs-search-input form-control"
              placeholder="Search all docs..."
            />
          </div>
        </form>
      </div>
      <div class="col-4 col-md-3 d-md-block p-3 text-end">
        <div class="dropdown">
          <button
            class="btn dropdown-toggle ncs-btn-versions"
            type="button"
            id="dropdownMenuButton1"
            data-bs-toggle="dropdown"
            aria-expanded="false"
          >
            <span class="d-none d-md-inline">nRF Connect SDK</span>
            <span id="ncsversion" class="d-inline"></span>
          </button>
          <div class="dropdown-menu" aria-labelledby="dropdownMenuButton"></div>
        </div>
      </div>
    </div>
  </div>
  <div class="ncs-header-nav">
    <div class="container-xl">
      <div class="row">
        <div class="col col-12 d-flex justify-content-center">
          <nav class="navbar navbar-dark navbar-expand-lg p-0">
            <span class="navbar-brand d-block d-lg-none py-2 pl-1"
              >Documentation sets</span
            >
            <button
              class="navbar-toggler"
              type="button"
              data-bs-toggle="collapse"
              data-bs-target="#navbarNavAltMarkup"
              aria-controls="navbarNavAltMarkup"
              aria-expanded="false"
              aria-label="Toggle navigation"
            >
              <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="navbarNavAltMarkup">
              <ul class="navbar-nav">
                <li class="nav-item active py-1 px-3">
                  <a
                    class="nav-link"
                    href="../../../../nrf/index.html"
                    >nRF Connect SDK</a
                  >
                </li>
                <li><hr class="dropdown-divider" /></li>
                <li class="nav-item  py-1 px-3">
                  <a
                    class="nav-link"
                    href="../../../../nrfx/index.html"
                    >nrfx</a
                  >
                </li>
                <li><hr class="dropdown-divider" /></li>
                <li class="nav-item  py-1 px-3">
                  <a
                    class="nav-link"
                    href="../../../../nrfxlib/README.html"
                    >nrfxlib</a
                  >
                </li>
                <li><hr class="dropdown-divider" /></li>
                <li class="nav-item  py-1 px-3">
                  <a
                    class="nav-link"
                    href="../../../../zephyr/index.html"
                    >Zephyr Project</a
                  >
                </li>
                <li><hr class="dropdown-divider" /></li>
                <li class="nav-item  py-1 px-3">
                  <a
                    class="nav-link"
                    href="../../../../mcuboot/wrapper.html"
                    >MCUboot</a
                  >
                </li>
                <li><hr class="dropdown-divider" /></li>
                <li class="nav-item  py-1 px-3">
                  <a
                    class="nav-link"
                    href="../../../../tfm/index.html"
                    >Trusted Firmware-M</a
                  >
                </li>
                <li><hr class="dropdown-divider" /></li>
                <li class="nav-item  py-1 px-3">
                  <a
                    class="nav-link"
                    href="../../../../matter/index.html"
                    >Matter</a
                  >
                </li>
                <li><hr class="dropdown-divider" /></li>
                <li class="nav-item  py-1 px-3">
                  <a
                    class="nav-link"
                    href="../../../../kconfig/index.html"
                    >Kconfig Reference</a
                  >
                </li>
                <li><hr class="dropdown-divider" /></li>
              </ul>
            </div>
          </nav>
        </div>
      </div>
    </div>
  </div>
</div>

  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
            <a href="../../../index.html" class="icon icon-home"> nRF Connect SDK
          </a>
              <div class="version">
                2.3.99
              </div>
<div id="searchbox" role="search">
  <div class="searchformwrapper">
    <form id="rtd-search-form" class="wy-form" action="../../../search.html" method="get">
      <input type="text" name="q" placeholder="Search docs" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
  </div>
</div>
<script>$('#searchbox').show(0);</script>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Contents</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../../introduction.html">Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../getting_started.html">Getting started</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../dev_model.html">Development model</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../app_dev.html">Application development</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../security.html">Security</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../ecosystem_integration.html">Ecosystems integration</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../nrf91.html">Working with nRF91 Series</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../nrf70.html">Working with nRF70 Series</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../nrf53.html">Working with nRF53 Series</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../nrf52.html">Working with nRF52 Series</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../protocols.html">Protocols</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../../../applications.html">Applications</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../../connectivity_bridge/README.html">Connectivity bridge</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../asset_tracker_v2/README.html">nRF9160: Asset Tracker v2</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="../README.html">nRF9160: Serial LTE modem</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="slm_description.html">Application description</a></li>
<li class="toctree-l3 current"><a class="current reference internal" href="#">Testing scenarios</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#generic-at-commands">Generic AT commands</a></li>
<li class="toctree-l4"><a class="reference internal" href="#tcp-ip-at-commands">TCP/IP AT commands</a></li>
<li class="toctree-l4"><a class="reference internal" href="#icmp-at-commands">ICMP AT commands</a></li>
<li class="toctree-l4"><a class="reference internal" href="#ftp-at-commands">FTP AT commands</a></li>
<li class="toctree-l4"><a class="reference internal" href="#twi-at-commands">TWI AT commands</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="slm_extending.html">Extending the application</a></li>
<li class="toctree-l3"><a class="reference internal" href="slm_data_mode.html">Running in data mode</a></li>
<li class="toctree-l3"><a class="reference internal" href="AT_commands_intro.html">SLM-specific AT commands</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../nrf_desktop/README.html">nRF Desktop</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../nrf5340_audio/README.html">nRF5340 Audio</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../machine_learning/README.html">nRF Machine Learning</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../matter_weather_station/README.html">Thingy:53: Matter weather station</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../zigbee_weather_station/README.html">Thingy:53: Zigbee weather station</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../samples.html">Samples</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../drivers.html">Drivers</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../libraries/index.html">Libraries</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../scripts.html">Scripts</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../release_notes.html">Release notes</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../known_issues.html">Known issues</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../software_maturity.html">Software maturity levels</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../documentation.html">About this documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../glossary.html">Glossary</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../../index.html">nRF Connect SDK</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../../../index.html" class="icon icon-home"></a></li>
          <li class="breadcrumb-item"><a href="../../../applications.html">Applications</a></li>
          <li class="breadcrumb-item"><a href="../README.html">nRF9160: Serial LTE modem</a></li>
      <li class="breadcrumb-item active">Testing scenarios</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../../../_sources/applications/serial_lte_modem/doc/slm_testing.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="testing-scenarios">
<span id="slm-testing"></span><h1>Testing scenarios<a class="headerlink" href="#testing-scenarios" title="Permalink to this heading"></a></h1>
<div class="contents local topic" id="contents">
<ul class="simple">
<li><p><a class="reference internal" href="#generic-at-commands" id="id6">Generic AT commands</a></p></li>
<li><p><a class="reference internal" href="#tcp-ip-at-commands" id="id7">TCP/IP AT commands</a></p>
<ul>
<li><p><a class="reference internal" href="#tcp-client" id="id8">TCP client</a></p></li>
<li><p><a class="reference internal" href="#udp-client" id="id9">UDP client</a></p></li>
<li><p><a class="reference internal" href="#tls-client" id="id10">TLS client</a></p></li>
<li><p><a class="reference internal" href="#dtls-client" id="id11">DTLS client</a></p></li>
<li><p><a class="reference internal" href="#tcp-server" id="id12">TCP server</a></p></li>
<li><p><a class="reference internal" href="#udp-server" id="id13">UDP server</a></p></li>
<li><p><a class="reference internal" href="#tls-server" id="id14">TLS server</a></p></li>
<li><p><a class="reference internal" href="#dtls-server" id="id15">DTLS server</a></p></li>
<li><p><a class="reference internal" href="#dns-lookup" id="id16">DNS lookup</a></p></li>
<li><p><a class="reference internal" href="#socket-options" id="id17">Socket options</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#icmp-at-commands" id="id18">ICMP AT commands</a></p></li>
<li><p><a class="reference internal" href="#ftp-at-commands" id="id19">FTP AT commands</a></p></li>
<li><p><a class="reference internal" href="#twi-at-commands" id="id20">TWI AT commands</a></p></li>
</ul>
</div>
<p>The following testing scenarios give detailed instructions for testing specific use cases.
They list the required AT commands and the expected responses.</p>
<p>Some scenarios are generic and should work out of the box, while others require you to set up a server that you can test against.</p>
<p>See <a class="reference internal" href="slm_description.html#slm-building"><span class="std std-ref">Building and running</span></a> for instructions on how to build and run the Serial LTE modem application.
<a class="reference internal" href="slm_description.html#slm-testing-section"><span class="std std-ref">Testing</span></a> describes how to turn on the modem and conduct the tests.</p>
<section id="generic-at-commands">
<h2><a class="toc-backref" href="#id6">Generic AT commands</a><a class="headerlink" href="#generic-at-commands" title="Permalink to this heading"></a></h2>
<p>Complete the following steps to test the functionality provided by the <a class="reference internal" href="Generic_AT_commands.html#slm-at-gen"><span class="std std-ref">Generic AT commands</span></a>:</p>
<ol class="arabic">
<li><p>Retrieve the version of the serial LTE modem application.</p>
<pre class="highlight literal-block"><strong>AT#XSLMVER</strong>
#XSLMVER: &quot;2.3.0&quot;,&quot;2.3.0&quot;
OK</pre>
</li>
<li><p>Read the current baud rate.</p>
<pre class="highlight literal-block"><strong>AT#XSLMUART?</strong>
#XSLMUART: 115200,0
OK</pre>
<p>You can change the used baud rate with the corresponding set command, but note that LTE Link Monitor requires 115200 bps for communication.</p>
</li>
<li><p>Retrieve a list of all supported proprietary AT commands.</p>
<pre class="highlight literal-block"><strong>AT#XCLAC</strong>
AT#XSLMVER
AT#XSLEEP
AT#XCLAC
AT#XSOCKET
AT#XSOCKETOPT
AT#XBIND
<em>[...]</em>
OK</pre>
</li>
<li><p>Check the supported values for the sleep command, then put the kit in sleep mode.</p>
<pre class="highlight literal-block"><strong>AT#XSLEEP=?</strong>
#XSLEEP: (1,2)
OK</pre>
</li>
</ol>
</section>
<section id="tcp-ip-at-commands">
<h2><a class="toc-backref" href="#id7">TCP/IP AT commands</a><a class="headerlink" href="#tcp-ip-at-commands" title="Permalink to this heading"></a></h2>
<p>The following sections show how to test the functionality provided by the <a class="reference internal" href="TCPIP_AT_commands.html#slm-at-tcp-udp"><span class="std std-ref">TCP and UDP AT commands</span></a>.</p>
<section id="tcp-client">
<h3><a class="toc-backref" href="#id8">TCP client</a><a class="headerlink" href="#tcp-client" title="Permalink to this heading"></a></h3>
<ol class="arabic">
<li><p>Establish and test a TCP connection:</p>
<ol class="loweralpha">
<li><p>Check the available values for the XSOCKET command.</p>
<pre class="highlight literal-block"><strong>AT#XSOCKET=?</strong>
#XSOCKET: (0,1,2),(1,2,3),(0,1)
OK</pre>
</li>
<li><p>Open a TCP socket, read the information (handle, protocol, and role) about the open socket, and set the receive timeout of the open socket to 30 seconds.</p>
<pre class="highlight literal-block"><strong>AT#XSOCKET=1,1,0</strong>
#XSOCKET: 1,1,6
OK

<strong>AT#XSOCKET?</strong>
#XSOCKET: 1,6,0
OK

<strong>AT#XSOCKETOPT=1,20,30</strong>
OK</pre>
</li>
<li><p>Connect to a TCP server on a specified port.
Replace <em>example.com</em> with the hostname or IPv4 address of a TCP server and <em>1234</em> with the corresponding port.
Then read the connection status.
<code class="docutils literal notranslate"><span class="pre">1</span></code> indicates that the connection is established.</p>
<pre class="highlight literal-block"> <strong>AT#XCONNECT=&quot;</strong><em>example.com</em><strong>&quot;,</strong><em>1234</em>
 #XCONNECT: 1
 OK

 <strong>AT#XCONNECT?</strong>
 #XCONNECT: 1
 OK</pre>
</li>
<li><p>Send plain text data to the TCP server and retrieve the returned data.</p>
<pre class="highlight literal-block"><strong>AT#XSEND=&quot;Test TCP&quot;</strong>
#XSEND: 8
OK

<strong>AT#XRECV=0</strong>
#XRECV: 17
PONG: 'Test TCP'
OK</pre>
</li>
<li><p>Close the socket and confirm its state.</p>
<pre class="highlight literal-block"><strong>AT#XSOCKET=0</strong>
#XSOCKET: 0,&quot;closed&quot;
OK

<strong>AT#XSOCKET?</strong>
#XSOCKET: 0
OK</pre>
</li>
</ol>
</li>
<li><p>If you do not have a TCP server to test with, you can use TCP commands to request and receive a response from an HTTP server, for example, <em>www.google.com</em>:</p>
<ol class="loweralpha">
<li><p>Open a TCP socket and connect to the HTTP server on port 80.</p>
<pre class="highlight literal-block"><strong>AT#XSOCKET=1,1,0</strong>
#XSOCKET: 1,1,6
OK

<strong>AT#XCONNECT=&quot;google.com&quot;,80</strong>
#XCONNECT: 1
OK</pre>
</li>
<li><p>Send an HTTP request to the server in data mode.</p>
<pre class="highlight literal-block"><strong>AT#XSEND</strong>
OK</pre>
</li>
<li><p>Send the text below as a whole (for example, as a copy and paste from a text editor).</p>
<div class="highlight highlight-default notranslate"><div class="highlight"><pre><span></span>  <span class="n">HEAD</span> <span class="o">/</span> <span class="n">HTTP</span><span class="o">/</span><span class="mf">1.1</span><span class="o">&lt;</span><span class="n">CR</span><span class="o">&gt;&lt;</span><span class="n">LF</span><span class="o">&gt;</span>
  <span class="n">Host</span><span class="p">:</span> <span class="n">www</span><span class="o">.</span><span class="n">google</span><span class="o">.</span><span class="n">com</span><span class="p">:</span><span class="mi">443</span><span class="o">&lt;</span><span class="n">CR</span><span class="o">&gt;&lt;</span><span class="n">LF</span><span class="o">&gt;</span>
  <span class="n">Connection</span><span class="p">:</span> <span class="n">close</span><span class="o">&lt;</span><span class="n">CR</span><span class="o">&gt;&lt;</span><span class="n">LF</span><span class="o">&gt;</span>
  <span class="o">&lt;</span><span class="n">CR</span><span class="o">&gt;&lt;</span><span class="n">LF</span><span class="o">&gt;</span>
</pre></div>
</div>
</li>
<li><p>Exit data mode.</p>
<div class="highlight highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">+++</span>
<span class="c1">#XDATAMODE: 0</span>
</pre></div>
</div>
</li>
<li><p>Receive the response from the server.</p>
<pre class="highlight literal-block"><strong>AT#XRECV=0</strong>
#XRECV: 576
HTTP/1.1 200 OK
Content-Type: text/html; charset=ISO-8859-1
<em>[...]</em>
OK

<strong>AT#XRECV=0</strong>
#XRECV:147
<em>[...]</em>
Connection: close
OK</pre>
</li>
<li><p>Close the socket.</p>
<pre class="highlight literal-block"><strong>AT#XSOCKET=0</strong>
#XSOCKET: 0,&quot;closed&quot;
OK</pre>
</li>
</ol>
</li>
<li><p>Test a TCP client with TCP proxy service:</p>
<ol class="loweralpha">
<li><p>Check the available values for the XTCPCLI command.</p>
<pre class="highlight literal-block"><strong>AT#XTCPCLI=?</strong>
#XTCPCLI: (0,1,2),&lt;url&gt;,&lt;port&gt;,&lt;sec_tag&gt;
OK</pre>
</li>
<li><p>Create a TCP/TLS client and connect to a server.
Replace <em>example.com</em> with the hostname or IPv4 address of a TCP server and <em>1234</em> with the corresponding port.
Then read the information about the connection.</p>
<pre class="highlight literal-block"><strong>AT#XTCPCLI=1,&quot;</strong><em>example.com</em><strong>&quot;,</strong><em>1234</em>
#XTCPCLI: 2,&quot;connected&quot;
OK

<strong>AT#XTCPCLI?</strong>
#XTCPCLI: 1,0
OK</pre>
</li>
<li><p>Send plain text data to the TCP server and retrieve ten bytes of the returned data.</p>
<pre class="highlight literal-block"><strong>AT#XTCPSEND=&quot;Test TCP&quot;</strong>
#XTCPSEND: 8
OK

<strong>AT#XTCPRECV=10</strong>
PONG: b'Te
#XTCPRECV: 10
OK</pre>
</li>
<li><p>Disconnect and confirm the status of the connection.
<code class="docutils literal notranslate"><span class="pre">-1</span></code> indicates that no connection is open.</p>
<pre class="highlight literal-block"><strong>AT#XTCPCLI=0</strong>
OK

<strong>AT#XTCPCLI?</strong>
#XTCPCLI: -1
OK</pre>
</li>
</ol>
</li>
</ol>
</section>
<section id="udp-client">
<h3><a class="toc-backref" href="#id9">UDP client</a><a class="headerlink" href="#udp-client" title="Permalink to this heading"></a></h3>
<ol class="arabic">
<li><p>Test a UDP client with connectionless UDP:</p>
<ol class="loweralpha">
<li><p>Open a UDP socket and read the information (handle, protocol, and role) about the open socket.</p>
<pre class="highlight literal-block"><strong>AT#XSOCKET=1,2,0</strong>
#XSOCKET: 1,2,17
OK
<strong>AT#XSOCKET?</strong>
#XSOCKET: 1,17,0
OK</pre>
</li>
<li><p>Send plain text data to a UDP server on a specified port.
Replace <em>example.com</em> with the hostname or IPv4 address of a UDP server and <em>1234</em> with the corresponding port.
Then retrieve the returned data.</p>
<pre class="highlight literal-block"><strong>AT#XSENDTO=&quot;</strong><em>example.com</em><strong>&quot;,</strong><em>1234</em><strong>,&quot;Test UDP&quot;</strong>
#XSENDTO: 8
OK
<strong>AT#XRECVFROM=0</strong>
#XRECVFROM: 14
PONG: Test UDP
OK</pre>
</li>
<li><p>Close the socket.</p>
<pre class="highlight literal-block"><strong>AT#XSOCKET=0</strong>
#XSOCKET: 0,&quot;closed&quot;
OK</pre>
</li>
</ol>
</li>
<li><p>Test a UDP client with connection-based UDP:</p>
<ol class="loweralpha">
<li><p>Open a UDP socket and connect to a UDP server on a specified port.
Replace <em>example.com</em> with the hostname or IPv4 address of a UDP server and <em>1234</em> with the corresponding port.</p>
<pre class="highlight literal-block"><strong>AT#XSOCKET=1,2,0</strong>
#XSOCKET: 1,2,17
OK

<strong>AT#XCONNECT=&quot;</strong><em>example.com</em><strong>&quot;,</strong><em>1234</em>
#XCONNECT: 1
OK</pre>
</li>
<li><p>Send plain text data to the UDP server and retrieve the returned data.</p>
<pre class="highlight literal-block"><strong>AT#XSEND=&quot;Test UDP&quot;</strong>
#XSEND: 8
OK

<strong>AT#XRECV=0</strong>
#XRECV: 14
PONG: Test UDP
OK</pre>
</li>
<li><p>Close the socket.</p>
<pre class="highlight literal-block"><strong>AT#XSOCKET=0</strong>
#XSOCKET: 0,&quot;closed&quot;
OK</pre>
</li>
</ol>
</li>
<li><p>Test a connection-based UDP client with UDP proxy service:</p>
<ol class="loweralpha">
<li><p>Check the available values for the XUDPCLI command.</p>
<pre class="highlight literal-block"><strong>AT#XUDPCLI=?</strong>
#XUDPCLI: (0,1,2),&lt;url&gt;,&lt;port&gt;,&lt;sec_tag&gt;
OK</pre>
</li>
<li><p>Create a UDP client and connect to a server.
Replace <em>example.com</em> with the hostname or IPv4 address of a UDP server and <em>1234</em> with the corresponding port.</p>
<pre class="highlight literal-block"><strong>AT#XUDPCLI=1,&quot;</strong><em>example.com</em><strong>&quot;,</strong><em>1234</em>
#XUDPCLI: 2,&quot;connected&quot;
OK</pre>
</li>
<li><p>Send plain text data to the UDP server and check the returned data.</p>
<pre class="highlight literal-block"><strong>AT#XUDPSEND=&quot;Test UDP&quot;</strong>
#XUDPSEND: 8
OK
#XUDPDATA: 14
PONG: Test UDP</pre>
</li>
<li><p>Disconnect from the server.</p>
<pre class="highlight literal-block"><strong>AT#XUDPCLI=0</strong>
OK</pre>
</li>
</ol>
</li>
</ol>
</section>
<section id="tls-client">
<h3><a class="toc-backref" href="#id10">TLS client</a><a class="headerlink" href="#tls-client" title="Permalink to this heading"></a></h3>
<p>Before completing this test, you must update the CA certificate, the client certificate, and the private key to be used for the TLS connection in the modem.
The credentials must use the security tag 16842755.</p>
<p>To store the credentials in the modem, use LTE Link Monitor.
See <a class="reference external" href="https://infocenter.nordicsemi.com/topic/ug_link_monitor/UG/link_monitor/lm_certificate_manager.html">Managing credentials</a> in the LTE Link Monitor User Guide for instructions.</p>
<p>You must register the corresponding credentials on the server side.</p>
<ol class="arabic">
<li><p>Establish and test a TLS connection:</p>
<ol class="loweralpha">
<li><p>List the credentials that are stored in the modem with security tag 16842755.</p>
<pre class="highlight literal-block"><strong>AT%CMNG=1,16842755</strong>
%CMNG: 16842755,0,&quot;0000000000000000000000000000000000000000000000000000000000000000&quot;
%CMNG: 16842755,1,&quot;0101010101010101010101010101010101010101010101010101010101010101&quot;
%CMNG: 16842755,2,&quot;0202020202020202020202020202020202020202020202020202020202020202&quot;
OK</pre>
</li>
<li><p>Open a TCP/TLS socket that uses the security tag 16842755 and connect to a TLS server on a specified port.
Replace <em>example.com</em> with the hostname or IPv4 address of a TLS server and <em>1234</em> with the corresponding port.</p>
<pre class="highlight literal-block"><strong>AT#XSOCKET=1,1,0,16842755</strong>
#XSOCKET: 1,1,258
OK

<strong>AT#XCONNECT=&quot;</strong><em>example.com</em><strong>&quot;,</strong><em>1234</em>
#XCONNECT: 1
OK</pre>
</li>
<li><p>Send plain text data to the TLS server and retrieve the returned data.</p>
<pre class="highlight literal-block"><strong>AT#XSEND=&quot;Test TLS client&quot;</strong>
#XSEND: 15
OK

<strong>AT#XRECV=0</strong>
#XRECV: 24
PONG: b'Test TLS client'
OK</pre>
</li>
<li><p>Close the socket.</p>
<pre class="highlight literal-block"><strong>AT#XSOCKET=0</strong>
#XSOCKET: 0,&quot;closed&quot;
OK</pre>
</li>
</ol>
</li>
<li><p>Test a TLS client with TCP proxy service:</p>
<ol class="loweralpha">
<li><p>Create a TCP/TLS client and connect to a server.
Replace <em>example.com</em> with the hostname or IPv4 address of a TLS server and <em>1234</em> with the corresponding port.
Then read the information about the connection.</p>
<pre class="highlight literal-block"><strong>AT#XTCPCLI=1,&quot;</strong><em>example.com</em><strong>&quot;,</strong><em>1234</em>
#XTCPCLI: 2,&quot;connected&quot;
OK

<strong>AT#XTCPCLI?</strong>
#XTCPCLI: 1,0
OK</pre>
</li>
<li><p>Send plain text data to the TLS server and retrieve the returned data.</p>
<pre class="highlight literal-block"><strong>AT#XTCPSEND=&quot;Test TLS client&quot;</strong>
#XTCPSEND: 15
OK
#XTCPDATA: 24

<strong>AT#XTCPRECV</strong>
PONG: b'Test TLS client'
#XTCPRECV: 24
OK</pre>
</li>
<li><p>Disconnect from the server.</p>
<pre class="highlight literal-block"><strong>AT#XTCPCLI=0</strong>
#XTCPCLI: &quot;disconnected&quot;
OK</pre>
</li>
</ol>
</li>
</ol>
</section>
<section id="dtls-client">
<h3><a class="toc-backref" href="#id11">DTLS client</a><a class="headerlink" href="#dtls-client" title="Permalink to this heading"></a></h3>
<p>The DTLS client requires connection-based UDP to trigger the DTLS establishment.</p>
<p>Before completing this test, you must update the Pre-shared Key (PSK) and the PSK identity to be used for the TLS connection in the modem.
The credentials must use the security tag 16842756.</p>
<p>To store the credentials in the modem, enter the following AT commands:</p>
<pre class="highlight literal-block"><strong>AT%CMNG=0,16842756,3,&quot;6e7266393174657374&quot;</strong>
<strong>AT%CMNG=0,16842756,4,&quot;nrf91test&quot;</strong></pre>
<p>You must register the same PSK and PSK identity on the server side.</p>
<ol class="arabic">
<li><p>Establish and test a DTLS connection:</p>
<ol class="loweralpha">
<li><p>List the credentials that are stored in the modem with security tag 16842755.</p>
<blockquote>
<div><pre class="highlight literal-block"><strong>AT%CMNG=1,16842756</strong>
%CMNG: 16842756,3,&quot;0303030303030303030303030303030303030303030303030303030303030303&quot;
%CMNG: 16842756,4,&quot;0404040404040404040404040404040404040404040404040404040404040404&quot;
OK</pre>
</div></blockquote>
</li>
<li><p>Open a TCP/DTLS socket that uses the security tag 16842756 and connect to a DTLS server on a specified port.
Replace <em>example.com</em> with the hostname or IPv4 address of a DTLS server and <em>1234</em> with the corresponding port.</p>
<blockquote>
<div><pre class="highlight literal-block"><strong>AT#XSOCKET=1,2,0,16842756</strong>
#XSOCKET: 1,2,273
OK

<strong>AT#XCONNECT=&quot;</strong><em>example.com</em><strong>&quot;,</strong><em>1234</em>
#XCONNECT: 1
OK</pre>
</div></blockquote>
</li>
<li><p>Send plain text data to the DTLS server and retrieve the returned data.</p>
<blockquote>
<div><pre class="highlight literal-block"><strong>AT#XSEND=&quot;Test DTLS client&quot;</strong>
#XSEND: 16
OK

<strong>AT#XRECV=0</strong>
#XRECV: 25
PONG: b'Test DTLS client'
OK</pre>
</div></blockquote>
</li>
<li><p>Close the socket.</p>
<blockquote>
<div><pre class="highlight literal-block"><strong>AT#XSOCKET=0</strong>
#XSOCKET: 0,&quot;closed&quot;
OK</pre>
</div></blockquote>
</li>
</ol>
</li>
<li><p>Test a DTLS client with UDP proxy service:</p>
<ol class="loweralpha">
<li><p>Create a UDP/DTLS client and connect to a server.
Replace <em>example.com</em> with the hostname or IPv4 address of a DTLS server and <em>1234</em> with the corresponding port.
Then read the information about the connection.</p>
<blockquote>
<div><pre class="highlight literal-block"><strong>AT#XUDPCLI=1,&quot;</strong><em>example.com</em><strong>&quot;,</strong><em>1234</em><strong>,16842756</strong>
#XUDPCLI: 2,&quot;connected&quot;
OK</pre>
</div></blockquote>
</li>
<li><p>Disconnect from the server.</p>
<blockquote>
<div><pre class="highlight literal-block"><strong>AT#XUDPCLI=0</strong>
OK</pre>
</div></blockquote>
</li>
</ol>
</li>
</ol>
</section>
<section id="tcp-server">
<h3><a class="toc-backref" href="#id12">TCP server</a><a class="headerlink" href="#tcp-server" title="Permalink to this heading"></a></h3>
<p>To act as a TCP server, the nRF9160 DK must have a global private address.
The radio network must be configured to route incoming IP packets to the nRF9160 DK.</p>
<p>To check if the setup is correct, use the <code class="docutils literal notranslate"><span class="pre">AT+CGDCONT?</span></code> command to check if the local IP address allocated by the network is a reserved private address of class A, B, or C (see <a class="reference external" href="https://en.wikipedia.org/wiki/IP_address#Private_addresses">Private addresses</a>).
If it is not, ping your nRF9160 DK from the destination server.</p>
<ol class="arabic">
<li><p>Create a Python script <code class="file docutils literal notranslate"><span class="pre">client_tcp.py</span></code> that acts as a TCP client.
See the following sample code (make sure to use the correct IP address and port):</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">socket</span>
<span class="kn">import</span> <span class="nn">time</span>

<span class="n">host_addr</span> <span class="o">=</span> <span class="s1">&#39;000.000.000.00&#39;</span>
<span class="n">host_port</span> <span class="o">=</span> <span class="mi">1234</span>
<span class="n">s</span> <span class="o">=</span> <span class="n">socket</span><span class="o">.</span><span class="n">socket</span><span class="p">(</span><span class="n">socket</span><span class="o">.</span><span class="n">AF_INET</span><span class="p">,</span> <span class="n">socket</span><span class="o">.</span><span class="n">SOCK_STREAM</span><span class="p">)</span>
<span class="n">s</span><span class="o">.</span><span class="n">connect</span><span class="p">((</span><span class="n">host_addr</span><span class="p">,</span> <span class="n">host_port</span><span class="p">))</span>
<span class="n">time</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Sending: &#39;Hello, TCP#1!&quot;</span><span class="p">)</span>
<span class="n">s</span><span class="o">.</span><span class="n">send</span><span class="p">(</span><span class="sa">b</span><span class="s2">&quot;Hello, TCP#1!&quot;</span><span class="p">)</span>
<span class="n">time</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Sending: &#39;Hello, TCP#2!&quot;</span><span class="p">)</span>
<span class="n">s</span><span class="o">.</span><span class="n">send</span><span class="p">(</span><span class="sa">b</span><span class="s2">&quot;Hello, TCP#2!&quot;</span><span class="p">)</span>
<span class="n">data</span> <span class="o">=</span> <span class="n">s</span><span class="o">.</span><span class="n">recv</span><span class="p">(</span><span class="mi">1024</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>

<span class="n">time</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Sending: &#39;Hello, TCP#3!&quot;</span><span class="p">)</span>
<span class="n">s</span><span class="o">.</span><span class="n">send</span><span class="p">(</span><span class="sa">b</span><span class="s2">&quot;Hello, TCP#3!&quot;</span><span class="p">)</span>
<span class="n">time</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Sending: &#39;Hello, TCP#4!&quot;</span><span class="p">)</span>
<span class="n">s</span><span class="o">.</span><span class="n">send</span><span class="p">(</span><span class="sa">b</span><span class="s2">&quot;Hello, TCP#4!&quot;</span><span class="p">)</span>
<span class="n">time</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Sending: &#39;Hello, TCP#5!&quot;</span><span class="p">)</span>
<span class="n">s</span><span class="o">.</span><span class="n">send</span><span class="p">(</span><span class="sa">b</span><span class="s2">&quot;Hello, TCP#5!&quot;</span><span class="p">)</span>
<span class="n">time</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
<span class="n">data</span> <span class="o">=</span> <span class="n">s</span><span class="o">.</span><span class="n">recv</span><span class="p">(</span><span class="mi">1024</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>

<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Closing connection&quot;</span><span class="p">)</span>
<span class="n">s</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
</pre></div>
</div>
</li>
<li><p>Establish and test a TCP connection:</p>
<ol class="loweralpha">
<li><p>Open a TCP socket, bind it to the TCP port that you want to use, and start listening.
Replace <em>1234</em> with the correct port number.</p>
<pre class="highlight literal-block"><strong>AT#XSOCKET=1,1,1</strong>
#XSOCKET: 2,1,6
OK

<strong>AT#XBIND=</strong><em>1234</em>
OK

<strong>AT#XLISTEN</strong>
OK</pre>
</li>
<li><p>Run the <code class="file docutils literal notranslate"><span class="pre">client_tcp.py</span></code> script to start sending data to the server.</p></li>
<li><p>Accept the connection from the client and start receiving and acknowledging the data.</p>
<pre class="highlight literal-block"><strong>AT#XACCEPT</strong>
#XACCEPT: connected with <em>IP address</em>
#XACCEPT: 3
OK

<strong>AT#XRECV=0</strong>
#XRECV: 26
Hello, TCP#1!Hello, TCP#2!
OK

<strong>AT#XSEND=&quot;TCP1/2 received&quot;</strong>
#XSEND: 15
OK

<strong>AT#XRECV=0</strong>
#XRECV: 39
Hello, TCP#3!Hello, TCP#4!Hello, TCP#5!
OK

<strong>AT#XSEND=&quot;TCP3/4/5 received&quot;</strong>
#XSEND: 17
OK</pre>
</li>
<li><p>Observe the output of the Python script:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ python client_tcp.py

Sending: &#39;Hello, TCP#1!
Sending: &#39;Hello, TCP#2!
TCP1/2 received
Sending: &#39;Hello, TCP#3!
Sending: &#39;Hello, TCP#4!
Sending: &#39;Hello, TCP#5!
TCP3/4/5 received
Closing connection
</pre></div>
</div>
</li>
<li><p>Close the socket.</p>
<pre class="highlight literal-block"><strong>AT#XSOCKET=0</strong>
#XSOCKET: &quot;closed&quot;
OK</pre>
</li>
</ol>
</li>
<li><p>Test the TCP server with TCP proxy service:</p>
<ol class="loweralpha">
<li><p>Check the available values for the XTCPSVR command and read the information about the current state.</p>
<pre class="highlight literal-block"><strong>AT#XTCPSVR=?</strong>
#XTCPSVR: (0,1,2),&lt;port&gt;,&lt;sec_tag&gt;
OK

<strong>AT#XTCPSVR?</strong>
#XTCPSVR: -1,-1
OK</pre>
</li>
<li><p>Create a TCP server and read the information about the current state.
Replace <em>1234</em> with the correct port number.</p>
<pre class="highlight literal-block"><strong>AT#XTCPSVR=1,</strong><em>1234</em>
#XTCPSVR: 2,&quot;started&quot;
OK

<strong>AT#XTCPSVR?</strong>
#XTCPSVR: 1,-1,0
OK</pre>
</li>
<li><p>Run the <code class="file docutils literal notranslate"><span class="pre">client_tcp.py</span></code> script to start sending data to the server.</p></li>
<li><p>Observe that the server accepts the connection from the client.
Read the information about the current state again.</p>
<pre class="highlight literal-block">#XTCPSVR: <em>IP address</em> connected
#XTCPDATA: 13
#XTCPDATA: 13

<strong>AT#XTCPSVR?</strong>
#XTCPSVR: 1,2,0
OK</pre>
</li>
<li><p>Start receiving and acknowledging the data.</p>
<pre class="highlight literal-block"><strong>AT#XTCPRECV</strong>
Hello, TCP#1!Hello, TCP#2!
#XTCPRECV: 26
OK

<strong>AT#XTCPSEND=&quot;TCP1/2 received&quot;</strong>
#XTCPSEND: 15
OK
#XTCPDATA: 13
#XTCPDATA: 13
#XTCPDATA: 13

<strong>AT#XTCPSVR?</strong>
#XTCPSVR: 1,2,0
OK

<strong>AT#XTCPRECV</strong>
Hello, TCP#3!Hello, TCP#4!Hello, TCP#5!
#XTCPRECV: 39
OK

<strong>AT#XTCPSEND=1,&quot;TCP3/4/5 received&quot;</strong>
#XTCPSEND: 17
OK</pre>
</li>
<li><p>Observe the output of the Python script:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ python client_tcp.py

Sending: &#39;Hello, TCP#1!
Sending: &#39;Hello, TCP#2!
TCP1/2 received
Sending: &#39;Hello, TCP#3!
Sending: &#39;Hello, TCP#4!
Sending: &#39;Hello, TCP#5!
TCP3/4/5 received
Closing connection
</pre></div>
</div>
</li>
<li><p>Read the information about the current state.</p>
<pre class="highlight literal-block"><strong>AT#XTCPSVR?</strong>
#XTCPSVR: 1,2,0
OK</pre>
</li>
<li><p>Stop the server.</p>
<pre class="highlight literal-block"><strong>AT#XTCPSVR=0</strong>
#XTCPSVR:-1,&quot;stopped&quot;
OK

<strong>AT#XTCPSVR?</strong>
#XTCPSVR: -1,-1
OK</pre>
</li>
</ol>
</li>
</ol>
</section>
<section id="udp-server">
<h3><a class="toc-backref" href="#id13">UDP server</a><a class="headerlink" href="#udp-server" title="Permalink to this heading"></a></h3>
<p>To act as a UDP server, the nRF9160 DK must have a global private address.
The radio network must be configured to route incoming IP packets to the nRF9160 DK.</p>
<p>To check if the setup is correct, use the <code class="docutils literal notranslate"><span class="pre">AT+CGDCONT?</span></code> command to check if the local IP address allocated by the network is a reserved private address of class A, B, or C (see <a class="reference external" href="https://en.wikipedia.org/wiki/IP_address#Private_addresses">Private addresses</a>).
If it is not, ping your nRF9160 DK from the destination server.</p>
<ol class="arabic">
<li><p>Create a Python script <code class="file docutils literal notranslate"><span class="pre">client_udp.py</span></code> that acts as a UDP client.
See the following sample code (make sure to use the correct IP addresses and port):</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">socket</span>
<span class="kn">import</span> <span class="nn">time</span>

<span class="n">host_addr</span> <span class="o">=</span> <span class="s1">&#39;000.000.000.00&#39;</span>
<span class="n">host_port</span> <span class="o">=</span> <span class="mi">1234</span>
<span class="n">host</span> <span class="o">=</span> <span class="p">(</span><span class="n">host_addr</span><span class="p">,</span> <span class="n">host_port</span><span class="p">)</span>
<span class="n">local_addr</span> <span class="o">=</span> <span class="s1">&#39;9.999.999.99&#39;</span>
<span class="n">local_port</span> <span class="o">=</span> <span class="mi">1234</span>
<span class="n">local</span> <span class="o">=</span> <span class="p">(</span><span class="n">local_addr</span><span class="p">,</span> <span class="n">local_port</span><span class="p">)</span>
<span class="n">s</span> <span class="o">=</span> <span class="n">socket</span><span class="o">.</span><span class="n">socket</span><span class="p">(</span><span class="n">socket</span><span class="o">.</span><span class="n">AF_INET</span><span class="p">,</span> <span class="n">socket</span><span class="o">.</span><span class="n">SOCK_DGRAM</span><span class="p">)</span>
<span class="n">s</span><span class="o">.</span><span class="n">bind</span><span class="p">(</span><span class="n">local</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Sending: &#39;Hello, UDP#1!&quot;</span><span class="p">)</span>
<span class="n">s</span><span class="o">.</span><span class="n">sendto</span><span class="p">(</span><span class="s2">&quot;Hello, UDP#1!&quot;</span><span class="p">,</span> <span class="n">host</span><span class="p">)</span>
<span class="n">time</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Sending: &#39;Hello, UDP#2!&quot;</span><span class="p">)</span>
<span class="n">s</span><span class="o">.</span><span class="n">sendto</span><span class="p">(</span><span class="s2">&quot;Hello, UDP#2!&quot;</span><span class="p">,</span> <span class="n">host</span><span class="p">)</span>
<span class="n">data</span><span class="p">,</span> <span class="n">address</span> <span class="o">=</span> <span class="n">s</span><span class="o">.</span><span class="n">recvfrom</span><span class="p">(</span><span class="mi">1024</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">address</span><span class="p">)</span>

<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Sending: &#39;Hello, UDP#3!&quot;</span><span class="p">)</span>
<span class="n">s</span><span class="o">.</span><span class="n">sendto</span><span class="p">(</span><span class="s2">&quot;Hello, UDP#3!&quot;</span><span class="p">,</span> <span class="n">host</span><span class="p">)</span>
<span class="n">time</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Sending: &#39;Hello, UDP#4!&quot;</span><span class="p">)</span>
<span class="n">s</span><span class="o">.</span><span class="n">sendto</span><span class="p">(</span><span class="s2">&quot;Hello, UDP#4!&quot;</span><span class="p">,</span> <span class="n">host</span><span class="p">)</span>
<span class="n">time</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Sending: &#39;Hello, UDP#5!&quot;</span><span class="p">)</span>
<span class="n">s</span><span class="o">.</span><span class="n">sendto</span><span class="p">(</span><span class="s2">&quot;Hello, UDP#5!&quot;</span><span class="p">,</span> <span class="n">host</span><span class="p">)</span>
<span class="n">data</span><span class="p">,</span> <span class="n">address</span> <span class="o">=</span> <span class="n">s</span><span class="o">.</span><span class="n">recvfrom</span><span class="p">(</span><span class="mi">1024</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">address</span><span class="p">)</span>

<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Closing connection&quot;</span><span class="p">)</span>
<span class="n">s</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
</pre></div>
</div>
</li>
<li><p>Establish and test a UDP connection:</p>
<ol class="loweralpha">
<li><p>Open a UDP socket and bind it to the UDP port that you want to use.
Replace <em>1234</em> with the correct port number.</p>
<pre class="highlight literal-block"><strong>AT#XSOCKET=1,2,1</strong>
#XSOCKET: 2,2,17
OK

<strong>AT#XBIND=</strong><em>1234</em>
OK</pre>
</li>
<li><p>Run the <code class="file docutils literal notranslate"><span class="pre">client_udp.py</span></code> script to start sending data to the server.</p></li>
<li><p>Start receiving and acknowledging the data.
Replace <em>example.com</em> with the hostname or IPv4 address of the UDP client and <em>1234</em> with the corresponding port.</p>
<pre class="highlight literal-block"><strong>AT#XRECVFROM=0</strong>
#XRECVFROM: 13
Hello, UDP#1!
OK

<strong>AT#XRECVFROM=0</strong>
#XRECVFROM: 13
Hello, UDP#2!
OK

<strong>AT#XSENDTO=&quot;</strong><em>example.com</em><strong>&quot;,</strong><em>1234</em><strong>,&quot;UDP1/2 received&quot;</strong>
#XSENDTO: 15
OK

<strong>AT#XRECVFROM=0</strong>
#XRECVFROM: 13
Hello, UDP#3!
OK

<strong>AT#XRECVFROM=0</strong>
#XRECVFROM: 13
Hello, UDP#4!
OK

<strong>AT#XRECVFROM=0</strong>
#XRECVFROM: 13
Hello, UDP#5!
OK

<strong>AT#XSENDTO=&quot;</strong><em>example.com</em><strong>&quot;,</strong><em>1234</em><strong>,&quot;UDP3/4/5 received&quot;</strong>
#XSENDTO: 17
OK</pre>
<p>Note that you will get an error message if a UDP packet is lost.
For example, this error indicates that a packet is lost in the downlink to the nRF9160 DK:</p>
<pre class="highlight literal-block"><strong>AT#XRECVFROM=0</strong>
#XSOCKET: -60
ERROR</pre>
</li>
<li><p>Observe the output of the Python script:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ python client_udp.py

Sending: &#39;Hello, UDP#1!
Sending: &#39;Hello, UDP#2!
UDP1/2 received
(&#39;000.000.000.00&#39;, 1234)
Sending: &#39;Hello, UDP#3!
Sending: &#39;Hello, UDP#4!
Sending: &#39;Hello, UDP#5!
UDP3/4/5 received
(&#39;000.000.000.00&#39;, 1234)
Closing connection
</pre></div>
</div>
</li>
<li><p>Close the socket.</p>
<pre class="highlight literal-block"><strong>AT#XSOCKET=0</strong>
#XSOCKET: 0,&quot;closed&quot;
OK</pre>
</li>
</ol>
</li>
<li><p>Test the UDP server with UDP proxy service:</p>
<ol class="loweralpha">
<li><p>Check the available values for the XUDPSVR command and create a UDP server.
Replace <em>1234</em> with the correct port number.</p>
<pre class="highlight literal-block"><strong>AT#XUDPSVR=?</strong>
#XUDPSVR: (0,1,2),&lt;port&gt;,&lt;sec_tag&gt;
OK

<strong>AT#XUDPSVR=1,</strong><em>1234</em>
#XUDPSVR: 2,&quot;started&quot;
OK</pre>
</li>
<li><p>Run the <code class="file docutils literal notranslate"><span class="pre">client_udp.py</span></code> script to start sending data to the server.</p></li>
<li><p>Observe that the server starts receiving data and acknowledge the data.</p>
<pre class="highlight literal-block">#XUDPDATA: 13
Hello, UDP#1!
#XUDPDATA: 13
Hello, UDP#2!

<strong>AT#XUDPSEND=&quot;UDP1/2 received&quot;</strong>
#XUDPSEND: 15
OK

#XUDPDATA: 13
Hello, UDP#3!
#XUDPDATA: 13
Hello, UDP#4!
#XUDPDATA: 13
Hello, UDP#5!

<strong>AT#XUDPSEND=&quot;UDP3/4/5 received&quot;</strong>
#XUDPSEND: 17
OK</pre>
</li>
<li><p>Observe the output of the Python script:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ python client_udp.py

Sending: &#39;Hello, UDP#1!
Sending: &#39;Hello, UDP#2!
UDP1/2 received
(&#39;000.000.000.00&#39;, 1234)
Sending: &#39;Hello, UDP#3!
Sending: &#39;Hello, UDP#4!
Sending: &#39;Hello, UDP#5!
UDP3/4/5 received
(&#39;000.000.000.00&#39;, 1234)
Closing connection
</pre></div>
</div>
</li>
<li><p>Close the socket.</p>
<pre class="highlight literal-block"><strong>AT#XUDPSVR=0</strong>
#XUDPSVR: &quot;stopped&quot;
OK</pre>
</li>
</ol>
</li>
</ol>
</section>
<section id="tls-server">
<h3><a class="toc-backref" href="#id14">TLS server</a><a class="headerlink" href="#tls-server" title="Permalink to this heading"></a></h3>
<p>The TLS server role is currently not supported.</p>
<pre class="highlight literal-block"><strong>AT#XSOCKET=1,1,1,16842753</strong>
#XSOCKET: &quot;(D)TLS Server not supported&quot;
ERROR

<strong>AT#XTCPSVR=1,3443,16842753</strong>
#XTCPSVR: &quot;TLS Server not supported&quot;
ERROR</pre>
</section>
<section id="dtls-server">
<h3><a class="toc-backref" href="#id15">DTLS server</a><a class="headerlink" href="#dtls-server" title="Permalink to this heading"></a></h3>
<p>The DTLS server role is currently not supported (modem limitation).</p>
<pre class="highlight literal-block"><strong>AT#XSOCKET=1,2,1,16842755</strong>
#XSOCKET: &quot;(D)TLS Server not supported&quot;
ERROR</pre>
</section>
<section id="dns-lookup">
<h3><a class="toc-backref" href="#id16">DNS lookup</a><a class="headerlink" href="#dns-lookup" title="Permalink to this heading"></a></h3>
<ol class="arabic">
<li><p>Look up the IP address for a hostname.</p>
<pre class="highlight literal-block"><strong>AT#XGETADDRINFO=&quot;www.google.com&quot;</strong>
#XGETADDRINFO: &quot;172.217.174.100&quot;
OK

<strong>AT#XGETADDRINFO=&quot;ipv6.google.com&quot;</strong>
#XGETADDRINFO: &quot;2404:6800:4006:80e::200e&quot;
OK

<strong>AT#XGETADDRINFO=&quot;172.217.174.100&quot;</strong>
#XGETADDRINFO: &quot;172.217.174.100&quot;
OK

<strong>AT#XGETADDRINFO=&quot;2404:6800:4006:80e::200e&quot;</strong>
#XGETADDRINFO: &quot;2404:6800:4006:80e::200e&quot;
OK</pre>
</li>
</ol>
</section>
<section id="socket-options">
<h3><a class="toc-backref" href="#id17">Socket options</a><a class="headerlink" href="#socket-options" title="Permalink to this heading"></a></h3>
<p>After opening a client-role socket, you can configure various options.</p>
<ol class="arabic">
<li><p>Check the available values for the XSOCKETOPT command.</p>
<pre class="highlight literal-block"><strong>AT#XSOCKETOPT=?</strong>
#XSOCKETOPT: (0,1),&lt;name&gt;,&lt;value&gt;
OK</pre>
</li>
<li><p>Open a client socket.</p>
<pre class="highlight literal-block"><strong>AT#XSOCKET=1,1,0</strong>
#XSOCKET: 2,1,6
OK</pre>
</li>
<li><p>Test to set and get socket options.
Note that not all options are supported.</p>
<pre class="highlight literal-block"><strong>AT#XSOCKETOPT=1,20,30</strong>
OK</pre>
</li>
</ol>
</section>
</section>
<section id="icmp-at-commands">
<h2><a class="toc-backref" href="#id18">ICMP AT commands</a><a class="headerlink" href="#icmp-at-commands" title="Permalink to this heading"></a></h2>
<p>Complete the following steps to test the functionality provided by the <a class="reference internal" href="ICMP_AT_commands.html#slm-at-icmp"><span class="std std-ref">ICMP AT commands</span></a>:</p>
<ol class="arabic">
<li><p>Ping a remote host, for example, <em>www.google.com</em>.</p>
<pre class="highlight literal-block"><strong>AT#XPING=&quot;www.google.com&quot;,45,5000,5,1000</strong>
OK
#XPING: 0.637 seconds
#XPING: 0.585 seconds
#XPING: 0.598 seconds
#XPING: 0.598 seconds
#XPING: 0.599 seconds
#XPING: average 0.603 seconds

<strong>AT#XPING=&quot;ipv6.google.com&quot;,45,5000,5,1000</strong>
OK
#XPING: 0.140 seconds
#XPING: 0.109 seconds
#XPING: 0.113 seconds
#XPING: 0.118 seconds
#XPING: 0.112 seconds
#XPING: average 0.118 seconds</pre>
</li>
<li><p>Ping a remote IP address, for example, 172.217.174.100.</p>
<pre class="highlight literal-block"><strong>AT#XPING=&quot;172.217.174.100&quot;,45,5000,5,1000</strong>
OK
#XPING: 0.873 seconds
#XPING: 0.576 seconds
#XPING: 0.599 seconds
#XPING: 0.623 seconds
#XPING: 0.577 seconds
#XPING: average 0.650 seconds</pre>
</li>
</ol>
</section>
<section id="ftp-at-commands">
<h2><a class="toc-backref" href="#id19">FTP AT commands</a><a class="headerlink" href="#ftp-at-commands" title="Permalink to this heading"></a></h2>
<p>Note that these commands are available only if <code class="xref kconfig kconfig-option docutils literal notranslate"><span class="pre">CONFIG_SLM_FTPC</span></code> is defined.
Before you test the FTP AT commands, check the setting of the <code class="xref kconfig kconfig-option docutils literal notranslate"><span class="pre">CONFIG_FTP_CLIENT_KEEPALIVE_TIME</span></code> option.
By default, the <a class="reference internal" href="../../../libraries/networking/ftp_client.html#lib-ftp-client"><span class="std std-ref">FTP client</span></a> library keeps the connection to the FTP server alive for 60 seconds, but you can change the duration or turn KEEPALIVE off by setting <code class="xref kconfig kconfig-option docutils literal notranslate"><span class="pre">CONFIG_FTP_CLIENT_KEEPALIVE_TIME</span></code> to 0.</p>
<p>The FTP client behavior depends on the FTP server that is used for testing.
Complete the following steps to test the functionality provided by the <a class="reference internal" href="FTP_AT_commands.html#slm-at-ftp"><span class="std std-ref">FTP AT commands</span></a> with two example servers:</p>
<ol class="arabic">
<li><p>Test an FTP connection to <em>speedtest.tele2.net</em>.</p>
<p>This server supports only anonymous login.
Files must be uploaded to a given folder and will be deleted immediately.
It is not possible to create, rename, or delete folders or rename files.</p>
<ol class="loweralpha">
<li><p>Connect to the FTP server, check the status, and change the transfer mode.
Then disconnect.</p>
<pre class="highlight literal-block"><strong>AT#XFTP=&quot;open&quot;,,,&quot;speedtest.tele2.net&quot;</strong>
220 (vsFTPd 3.0.3)
200 Always in UTF8 mode.
331 Please specify the password.
230 Login successful.
OK

<strong>AT#XFTP=&quot;status&quot;</strong>
215 UNIX Type: L8
211-FTP server status:
     Connected to ::ffff:202.238.218.44
     Logged in as ftp
     TYPE: ASCII
     No session bandwidth limit
     Session timeout in seconds is 300
     Control connection is plain text
     Data connections will be plain text
     At session startup, client count was 38
     vsFTPd 3.0.3 - secure, fast, stable
211 End of status
OK

<strong>AT#XFTP=&quot;ascii&quot;</strong>
200 Switching to ASCII mode.
OK

<strong>AT#XFTP=&quot;binary&quot;</strong>
200 Switching to Binary mode.
OK

<strong>AT#XFTP=&quot;close&quot;</strong>
221 Goodbye.
OK</pre>
</li>
<li><p>Connect to the FTP server and retrieve information about the existing files and folders.</p>
<pre class="highlight literal-block"><strong>AT#XFTP=&quot;open&quot;,,,&quot;speedtest.tele2.net&quot;</strong>
220 (vsFTPd 3.0.3)
200 Always in UTF8 mode.
331 Please specify the password.
230 Login successful.
OK

<strong>AT#XFTP=&quot;pwd&quot;</strong>
257 &quot;/&quot; is the current directory
OK

<strong>AT#XFTP=&quot;ls&quot;</strong>
227 Entering Passive Mode (90,130,70,73,103,35).
1000GB.zip
100GB.zip
100KB.zip
<em>[...]</em>
5MB.zip
upload
150 Here comes the directory listing.
226 Directory send OK.
OK

<strong>AT#XFTP=&quot;ls&quot;,&quot;-l&quot;</strong>
227 Entering Passive Mode (90,130,70,73,94,158).
150 Here comes the directory listing.
-rw-r--r--    1 0        0        1073741824000 Feb 19  2016 1000GB.zip
-rw-r--r--    1 0        0        107374182400 Feb 19  2016 100GB.zip
-rw-r--r--    1 0        0          102400 Feb 19  2016 100KB.zip
-rw-r--r--    1 0        0        104857600 Feb 19  2016 100MB.zip
<em>[...]</em>
-rw-r--r--    1 0        0         5242880 Feb 19  2016 5MB.zip
drwxr-xr-x    2 105      108        561152 Apr 30 02:30 upload
226 Directory send OK.
OK

<strong>AT#XFTP=&quot;ls&quot;,&quot;-l&quot;,&quot;upload&quot;</strong>
227 Entering Passive Mode (90,130,70,73,86,44).
150 Here comes the directory listing.
-rw-------    1 105      108      57272385 Apr 30 02:29 10MB.zip
-rw-------    1 105      108        119972 Apr 30 02:30 14qj36kc9esslej6porartkjks.txt
<em>[...]</em>
-rw-------    1 105      108         32352 Apr 30 02:30 upload_file.txt
226 Directory send OK.
OK

<strong>AT#XFTP=&quot;cd&quot;,&quot;upload&quot;</strong>
250 Directory successfully changed.
OK

<strong>AT#XFTP=&quot;pwd&quot;</strong>
257 &quot;/upload&quot; is the current directory
OK

<strong>AT#XFTP=&quot;ls&quot;,&quot;-l&quot;</strong>
227 Entering Passive Mode (90,130,70,73,113,191).
150 Here comes the directory listing.
-rw-------    1 105      108      57272385 Apr 30 02:29 10MB.zip
-rw-------    1 105      108        294236 Apr 30 02:31 1MB.zip
<em>[...]</em>
-rw-------    1 105      108        838960 Apr 30 02:31 upload_file.txt
226 Directory send OK.
OK

<strong>AT#XFTP=&quot;cd&quot;, &quot;..&quot;</strong>
250 Directory successfully changed.
OK

<strong>AT#XFTP=&quot;pwd&quot;</strong>
257 &quot;/&quot; is the current directory
OK

<strong>AT#XFTP=&quot;ls&quot;,&quot;-l&quot;</strong>
227 Entering Passive Mode (90,130,70,73,90,43).
150 Here comes the directory listing.
-rw-r--r--    1 0        0        1073741824000 Feb 19  2016 1000GB.zip
-rw-r--r--    1 0        0        107374182400 Feb 19  2016 100GB.zip
-rw-r--r--    1 0        0          102400 Feb 19  2016 100KB.zip
<em>[...]</em>
-rw-r--r--    1 0        0         5242880 Feb 19  2016 5MB.zip
drwxr-xr-x    2 105      108        561152 Apr 30 02:31 upload
226 Directory send OK.
OK

<strong>AT#XFTP=&quot;ls&quot;,&quot;-l 1KB.zip&quot;</strong>
227 Entering Passive Mode (90,130,70,73,106,84).
150 Here comes the directory listing.
-rw-r--r--    1 0        0            1024 Feb 19  2016 1KB.zip
226 Directory send OK.
OK</pre>
</li>
<li><p>Switch to binary transfer mode and download a file from the server.</p>
<pre class="highlight literal-block"><strong>AT#XFTP=&quot;binary&quot;</strong>
200 Switching to Binary mode.
OK

<strong>AT#XFTP=&quot;get&quot;,&quot;1KB.zip&quot;</strong>
227 Entering Passive Mode (90,130,70,73,84,29).

00000000000000000000000000<em>[...]</em>000000000000
226 Transfer complete.
OK</pre>
</li>
<li><p>Navigate to the <code class="file docutils literal notranslate"><span class="pre">upload</span></code> folder, switch to binary transfer mode, and create a binary file with the content “DEADBEEF”.</p>
<pre class="highlight literal-block"><strong>AT#XFTP=&quot;cd&quot;,&quot;upload&quot;</strong>
250 Directory successfully changed.
OK

<strong>AT#XFTP=&quot;binary&quot;</strong>
200 Switching to Binary mode.
OK

<strong>AT#XFTP=&quot;put&quot;,&quot;upload.bin&quot;,0,&quot;DEADBEEF&quot;</strong>
227 Entering Passive Mode (90,130,70,73,114,150).
150 Ok to send data.
226 Transfer complete.
OK</pre>
</li>
<li><p>Switch to ASCII transfer mode and create a text file with the content “TEXTDATA”.</p>
<pre class="highlight literal-block"><strong>AT#XFTP=&quot;ascii&quot;</strong>
200 Switching to ASCII mode.
OK

<strong>AT#XFTP=&quot;put&quot;,&quot;upload.txt&quot;,1,&quot;TEXTDATA&quot;</strong>
227 Entering Passive Mode (90,130,70,73,99,84).
150 Ok to send data.
226 Transfer complete.
OK</pre>
</li>
<li><p>Disconnect from the server.</p>
<pre class="highlight literal-block"><strong>AT#XFTP=&quot;close&quot;</strong>
221 Goodbye.
OK</pre>
</li>
</ol>
</li>
<li><p>Test an FTP connection to “ftp.dlptest.com”.</p>
<p>This server does not support anonymous login.
Go to <a class="reference external" href="https://dlptest.com/ftp-test/">DLPTest.com</a> to get the latest login information.
After login on, you can create and remove folders and files, rename files, and upload files.</p>
<ol class="loweralpha">
<li><p>Connect to the FTP server and check the status.
Replace <em>user</em> and <em>password</em> with the login information from <a class="reference external" href="https://dlptest.com/ftp-test/">DLPTest.com</a>.</p>
<pre class="highlight literal-block"><strong>AT#XFTP=&quot;open&quot;,&quot;</strong><em>user</em><strong>&quot;,&quot;</strong><em>password</em><strong>&quot;,&quot;ftp.dlptest.com&quot;</strong>
220-#########################################################
220-Please upload your web files to the public_html directory.
220-Note that letters are case sensitive.
220-#########################################################
220 This is a private system - No anonymous login
200 OK, UTF-8 enabled
331 User <em>user</em> OK. Password required
230-Your bandwidth usage is restricted
230 OK. Current restricted directory is /
OK

<strong>AT#XFTP=&quot;status&quot;</strong>
215 UNIX Type: L8
211 https://www.pureftpd.org/
OK</pre>
</li>
<li><p>Retrieve information about the existing files and folders.</p>
<pre class="highlight literal-block"><strong>AT#XFTP=&quot;pwd&quot;</strong>
257 &quot;/&quot; is your current location
OK

<strong>AT#XFTP=&quot;ls&quot;</strong>
227 Entering Passive Mode (35,209,241,59,135,181)
150 Accepted data connection
226-Options: -a
226 42 matches total
OK
.
..
1_2596384601376578508_17-9ULspeedtest.upt
1_603281663034123496_17-9ULspeedtest.upt
<em>[...]</em>
aa_.rar
write to File.txt</pre>
</li>
<li><p>Create a folder and enter it.</p>
<pre class="highlight literal-block"><strong>AT#XFTP=&quot;mkdir&quot;, &quot;newfolder&quot;</strong>
257 &quot;newfolder&quot; : The directory was successfully created
OK

<strong>AT#XFTP=&quot;ls&quot;,&quot;-l&quot;,&quot;newfolder&quot;</strong>
227 Entering Passive Mode (35,209,241,59,135,134)
150 Accepted data connection
226-Options: -a -l
226 2 matches total
OK
drwxr-xr-x    2 dlptest9   dlptest9         4096 Apr 29 19:53 .
drwxr-xr-x    3 dlptest9   dlptest9        57344 Apr 29 19:53 ..
+CEREG: 1,&quot;1285&quot;,&quot;02EF8210&quot;,7

<strong>AT#XFTP=&quot;cd&quot;,&quot;newfolder&quot;</strong>
250 OK. Current directory is /newfolder
OK</pre>
</li>
<li><p>Switch to binary transfer mode and create a binary file with the content “DEADBEEF”.</p>
<pre class="highlight literal-block"><strong>AT#XFTP=&quot;binary&quot;</strong>
200 TYPE is now 8-bit binary
OK

<strong>AT#XFTP=&quot;put&quot;,&quot;upload.bin&quot;,0,&quot;DEADBEEF&quot;</strong>
227 Entering Passive Mode (35,209,241,59,135,182)
150 Accepted data connection
226-File successfully transferred
226 0.013 seconds (measured here), 310.20 bytes per second
OK

<strong>AT#XFTP=&quot;ls&quot;,&quot;-l&quot;,&quot;upload.bin&quot;</strong>
227 Entering Passive Mode (35,209,241,59,135,146)
150 Accepted data connection
226-Options: -a -l
226 1 matches total
OK
-rw-r--r--    1 dlptest9   dlptest9            4 Apr 29 19:54 upload.bin</pre>
</li>
<li><p>Rename the file.</p>
<pre class="highlight literal-block"><strong>AT#XFTP=&quot;rename&quot;,&quot;upload.bin&quot;,&quot;uploaded.bin&quot;</strong>
350 RNFR accepted - file exists, ready for destination
250 File successfully renamed or moved
OK

<strong>AT#XFTP=&quot;ls&quot;,&quot;-l&quot;,&quot;uploaded.bin&quot;</strong>
227 Entering Passive Mode (35,209,241,59,135,111)
150 Accepted data connection
-rw-r--r--    1 dlptest9   dlptest9            4 Apr 29 19:54 uploaded.bin
226-Options: -a -l
226 1 matches total
OK</pre>
</li>
<li><p>Switch to ASCII transfer mode and create a text file with the content “line #1\r\n”.</p>
<pre class="highlight literal-block"><strong>AT#XFTP=&quot;ascii&quot;</strong>
200 TYPE is now ASCII
OK

<strong>AT#XFTP=&quot;put&quot;,&quot;upload.txt&quot;,1,&quot;line #1\r\n&quot;</strong>
227 Entering Passive Mode (35,209,241,59,135,136)
150 Accepted data connection
226-File successfully transferred
226 0.013 seconds (measured here), 0.82 Kbytes per second
OK

<strong>AT#XFTP=&quot;ls&quot;,&quot;-l upload.txt&quot;</strong>
227 Entering Passive Mode (35,209,241,59,135,166)
150 Accepted data connection
226-Options: -a -l
226 1 matches total
OK
-rw-r--r--    1 dlptest9   dlptest9           11 Apr 29 19:56 upload.txt</pre>
</li>
<li><p>Rename the file.</p>
<pre class="highlight literal-block"><strong>AT#XFTP=&quot;rename&quot;,&quot;upload.txt&quot;,&quot;uploaded.txt&quot;</strong>
350 RNFR accepted - file exists, ready for destination
250 File successfully renamed or moved
OK

<strong>AT#XFTP=&quot;ls&quot;,&quot;-l uploaded.txt&quot;</strong>
227 Entering Passive Mode (35,209,241,59,135,213)
200 Zzz...  // (KEEPALIVE response)
150 Accepted data connection
226-Options: -a -l
226 1 matches total
OK
-rw-r--r--    1 dlptest9   dlptest9           11 Apr 29 19:56 uploaded.txt
+CEREG: 1,&quot;1285&quot;,&quot;02EF8200&quot;,7</pre>
</li>
<li><p>Delete the files and the folder that you created.</p>
<pre class="highlight literal-block"><strong>AT#XFTP=&quot;delete&quot;,&quot;uploaded.bin&quot;</strong>
250 Deleted uploaded.bin
OK

<strong>AT#XFTP=&quot;delete&quot;,&quot;uploaded.txt&quot;</strong>
250 Deleted uploaded.txt
OK

<strong>AT#XFTP=&quot;cd&quot;, &quot;..&quot;</strong>
250 OK. Current directory is /
OK

<strong>AT#XFTP=&quot;rmdir&quot;, &quot;newfolder&quot;</strong>
250 The directory was successfully removed
OK</pre>
</li>
<li><p>Disconnect from the server.</p>
<pre class="highlight literal-block"><strong>AT#XFTP=&quot;close&quot;</strong>
221-Goodbye. You uploaded 1 and downloaded 0 kbytes.
221 Logout.
OK</pre>
</li>
</ol>
</li>
</ol>
</section>
<section id="twi-at-commands">
<span id="slm-testing-twi"></span><h2><a class="toc-backref" href="#id20">TWI AT commands</a><a class="headerlink" href="#twi-at-commands" title="Permalink to this heading"></a></h2>
<p>Complete the following steps to test the functionality provided by the i2c sensors on the Thingy:91 using the two-wire interface (TWI):</p>
<ol class="arabic">
<li><p>Test the TWI list command using <code class="docutils literal notranslate"><span class="pre">AT#XTWILS</span></code>.
As Thingy:91 connects to the sensors via i2c2, it shows that TWI2 is available:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">AT</span><span class="c1">#XTWILS</span>
<span class="c1">#XTWILS: 2</span>
<span class="n">OK</span>
</pre></div>
</div>
</li>
<li><p>Test the TWI write command using <code class="docutils literal notranslate"><span class="pre">AT#XTWIW=2,&quot;76&quot;,&quot;D0&quot;</span></code>.
It performs a write operation to the device address <code class="docutils literal notranslate"><span class="pre">0x76</span></code> (BME680), and it writes <code class="docutils literal notranslate"><span class="pre">D0</span></code> to the device:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">AT</span><span class="c1">#XTWIW=2,&quot;76&quot;,&quot;D0&quot;</span>
<span class="n">OK</span>
</pre></div>
</div>
</li>
<li><p>Test the TWI read command using <code class="docutils literal notranslate"><span class="pre">AT#XTWIR=2,&quot;76&quot;,1</span></code>.
It performs a read operation to the device address <code class="docutils literal notranslate"><span class="pre">0x76</span></code> (BME680), and it reads 1 byte from the device:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">AT</span><span class="c1">#XTWIR=2,&quot;76&quot;,1</span>

<span class="c1">#XTWIR: 61</span>
<span class="n">OK</span>
</pre></div>
</div>
<p>The value returned (<code class="docutils literal notranslate"><span class="pre">61</span></code>) indicates <code class="docutils literal notranslate"><span class="pre">0x61</span></code> as the <code class="docutils literal notranslate"><span class="pre">CHIP</span> <span class="pre">ID</span></code>.</p>
</li>
<li><p>Test the TWI write-and-read command using <code class="docutils literal notranslate"><span class="pre">AT#XTWIWR=2,&quot;76&quot;,&quot;D0&quot;,1</span></code>.
It performs a write-then-read operation to the device address <code class="docutils literal notranslate"><span class="pre">0x76</span></code> (BME680) to get the <code class="docutils literal notranslate"><span class="pre">CHIP</span> <span class="pre">ID</span></code> of the device:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">AT</span><span class="c1">#XTWIWR=2,&quot;76&quot;,&quot;D0&quot;,1</span>

<span class="c1">#XTWIWR: 61</span>
<span class="n">OK</span>
</pre></div>
</div>
<p>The value returned (<code class="docutils literal notranslate"><span class="pre">61</span></code>) indicates <code class="docutils literal notranslate"><span class="pre">0x61</span></code> as the <code class="docutils literal notranslate"><span class="pre">CHIP</span> <span class="pre">ID</span></code>.</p>
</li>
</ol>
</section>
</section>


           </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="slm_extending.html" class="btn btn-neutral float-right" title="Extending the application" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="slm_description.html" class="btn btn-neutral" title="Application description" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">

<table>
<tr>
<td>
    <p>
        &copy; Copyright 2019-2023, Nordic Semiconductor.
      Last updated on Mar 20, 2023.

    </p>
</td>
<td id="nordiclogo">
  <a href="https://www.nordicsemi.com/"><img src="../../../_static/images/nordic-logo.png" border="0"/></a>
</td>
</tr>
</table>
  </div> 


</footer>

<div id="scroll-container">
  <button type="button" id="scroll-btn" class="btn">
    <svg xmlns="http://www.w3.org/2000/svg" height="24" viewBox="0 0 24 24" width="24"><path d="M0 0h24v24H0z" fill="none"/><path d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z" fill="#fff"/></svg>
  </button>
</div>

<script>
  const scrollBtn = document.querySelector("#scroll-btn");

  document.addEventListener("scroll", () => {
    if (window.scrollY > 400) {
          scrollBtn.style.visibility = "visible";
      } else {
          scrollBtn.style.visibility = "hidden";
      }
  });

  scrollBtn.addEventListener("click", () => {
      window.scrollTo({ top: 0, behavior: "smooth" });
  });
</script>
        </div>
      </div>
    </section>
  </div>
  
  <div class="rst-versions" data-toggle="rst-versions" role="note" aria-label="versions">
    <span class="rst-current-version" data-toggle="rst-current-version">
      <span class="fa fa-book"> nRF Connect SDK</span>
       <span class="fa fa-caret-down"></span>
    </span>
    <div class="rst-other-versions">
      
      <div class="rst-other-version ncs">
        <a href="../../../../nrf/index.html">nRF Connect SDK</a>
      </div>
      
      <div class="rst-other-version nrfx">
        <a href="../../../../nrfx/index.html">nrfx</a>
      </div>
      
      <div class="rst-other-version nrfxlib">
        <a href="../../../../nrfxlib/README.html">nrfxlib</a>
      </div>
      
      <div class="rst-other-version zephyr">
        <a href="../../../../zephyr/index.html">Zephyr Project</a>
      </div>
      
      <div class="rst-other-version mcuboot">
        <a href="../../../../mcuboot/wrapper.html">MCUboot</a>
      </div>
      
      <div class="rst-other-version tfm">
        <a href="../../../../tfm/index.html">Trusted Firmware-M</a>
      </div>
      
      <div class="rst-other-version matter">
        <a href="../../../../matter/index.html">Matter</a>
      </div>
      
      <div class="rst-other-version kconfig">
        <a href="../../../../kconfig/index.html">Kconfig Reference</a>
      </div>
    </div>
  </div><script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>