<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Modifying an application &mdash; nRF Connect SDK 2.3.99 documentation</title>
      <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="../_static/css/nordic.css" type="text/css" />
      <link rel="stylesheet" href="../_static/togglebutton.css" type="text/css" />
      <link rel="stylesheet" href="../_static/css/nrf.css" type="text/css" />
      <link rel="stylesheet" href="../_static/tabs.css" type="text/css" /> 
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
        <script src="../_static/jquery.js"></script>
        <script src="../_static/underscore.js"></script>
        <script src="../_static/_sphinx_javascript_frameworks_compat.js"></script>
        <script src="../_static/doctools.js"></script>
        <script src="../_static/sphinx_highlight.js"></script>
        <script src="https://www.googletagmanager.com/gtag/js?id=G-ZPVZRKFQJR"></script>
        <script src="../_static/js/ga-tracker.js"></script>
        <script data-culture="EN" id="CookieConsent" type="text/javascript" src="https://policy.app.cookieinformation.com/uc.js"></script>
        <script src="../_static/tabs.js"></script>
        <script>let toggleHintShow = 'Click to show';</script>
        <script>let toggleHintHide = 'Click to hide';</script>
        <script>let toggleOpenOnPrint = 'true';</script>
        <script src="../_static/togglebutton.js"></script>
        <script>var togglebuttonSelector = '.toggle, .admonition.dropdown';</script>
    <script src="../_static/js/theme.js"></script>
<script
  type="text/javascript"
  src="../_static/js/ncs.js"
></script>
<script src="../_static/js/bootstrap.bundle.min.js"></script>

    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Updating repositories and tools" href="updating.html" />
    <link rel="prev" title="Testing and debugging an application" href="testing.html" />
<link
  href="../_static/css/bootstrap.min.css"
  rel="stylesheet"
/>
<link
  rel="shortcut icon"
  href="../_static/images/favicon.ico"
/>

</head>

<body class="wy-body-for-nav">
<div class="announcement"></div>
<div class="d-print-none ncs-header">
  <div class="container-xl ncs-header-top">
    <div class="row h-100">
      <div class="d-none d-md-block col-2">
        <div class="bg-white py-4 px-3 ml-2 ncs-header-logo">
          <img
            class="ncs-header-logo"
            src="../_static/images/nordic-logo.png"
            alt=""
          />
        </div>
      </div>
      <div
        class="col-8 col-md-7 pl-md-4 d-flex align-self-center justify-content-center"
      >
        <form class="w-75" action="../search.html" method="get">
          <div class="form-group">
            <input
              type="text"
              name="q"
              class="ncs-search-input form-control"
              placeholder="Search all docs..."
            />
          </div>
        </form>
      </div>
      <div class="col-4 col-md-3 d-md-block p-3 text-end">
        <div class="dropdown">
          <button
            class="btn dropdown-toggle ncs-btn-versions"
            type="button"
            id="dropdownMenuButton1"
            data-bs-toggle="dropdown"
            aria-expanded="false"
          >
            <span class="d-none d-md-inline">nRF Connect SDK</span>
            <span id="ncsversion" class="d-inline"></span>
          </button>
          <div class="dropdown-menu" aria-labelledby="dropdownMenuButton"></div>
        </div>
      </div>
    </div>
  </div>
  <div class="ncs-header-nav">
    <div class="container-xl">
      <div class="row">
        <div class="col col-12 d-flex justify-content-center">
          <nav class="navbar navbar-dark navbar-expand-lg p-0">
            <span class="navbar-brand d-block d-lg-none py-2 pl-1"
              >Documentation sets</span
            >
            <button
              class="navbar-toggler"
              type="button"
              data-bs-toggle="collapse"
              data-bs-target="#navbarNavAltMarkup"
              aria-controls="navbarNavAltMarkup"
              aria-expanded="false"
              aria-label="Toggle navigation"
            >
              <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="navbarNavAltMarkup">
              <ul class="navbar-nav">
                <li class="nav-item active py-1 px-3">
                  <a
                    class="nav-link"
                    href="../../nrf/index.html"
                    >nRF Connect SDK</a
                  >
                </li>
                <li><hr class="dropdown-divider" /></li>
                <li class="nav-item  py-1 px-3">
                  <a
                    class="nav-link"
                    href="../../nrfx/index.html"
                    >nrfx</a
                  >
                </li>
                <li><hr class="dropdown-divider" /></li>
                <li class="nav-item  py-1 px-3">
                  <a
                    class="nav-link"
                    href="../../nrfxlib/README.html"
                    >nrfxlib</a
                  >
                </li>
                <li><hr class="dropdown-divider" /></li>
                <li class="nav-item  py-1 px-3">
                  <a
                    class="nav-link"
                    href="../../zephyr/index.html"
                    >Zephyr Project</a
                  >
                </li>
                <li><hr class="dropdown-divider" /></li>
                <li class="nav-item  py-1 px-3">
                  <a
                    class="nav-link"
                    href="../../mcuboot/wrapper.html"
                    >MCUboot</a
                  >
                </li>
                <li><hr class="dropdown-divider" /></li>
                <li class="nav-item  py-1 px-3">
                  <a
                    class="nav-link"
                    href="../../tfm/index.html"
                    >Trusted Firmware-M</a
                  >
                </li>
                <li><hr class="dropdown-divider" /></li>
                <li class="nav-item  py-1 px-3">
                  <a
                    class="nav-link"
                    href="../../matter/index.html"
                    >Matter</a
                  >
                </li>
                <li><hr class="dropdown-divider" /></li>
                <li class="nav-item  py-1 px-3">
                  <a
                    class="nav-link"
                    href="../../kconfig/index.html"
                    >Kconfig Reference</a
                  >
                </li>
                <li><hr class="dropdown-divider" /></li>
              </ul>
            </div>
          </nav>
        </div>
      </div>
    </div>
  </div>
</div>

  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
            <a href="../index.html" class="icon icon-home"> nRF Connect SDK
          </a>
              <div class="version">
                2.3.99
              </div>
<div id="searchbox" role="search">
  <div class="searchformwrapper">
    <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
      <input type="text" name="q" placeholder="Search docs" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
  </div>
</div>
<script>$('#searchbox').show(0);</script>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Contents</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../introduction.html">Introduction</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../getting_started.html">Getting started</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="recommended_versions.html">Requirements</a></li>
<li class="toctree-l2"><a class="reference internal" href="assistant.html">Installing automatically</a></li>
<li class="toctree-l2"><a class="reference internal" href="installing.html">Installing manually</a></li>
<li class="toctree-l2"><a class="reference internal" href="programming.html">Building and programming an application</a></li>
<li class="toctree-l2"><a class="reference internal" href="testing.html">Testing and debugging an application</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">Modifying an application</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#adding-files-and-changing-compiler-settings">Adding files and changing compiler settings</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#role-of-cmakelists-txt">Role of CMakeLists.txt</a></li>
<li class="toctree-l4"><a class="reference internal" href="#updating-cmakelists-txt">Updating CMakeLists.txt</a></li>
<li class="toctree-l4"><a class="reference internal" href="#editing-cmakelists-txt">Editing CMakeLists.txt</a></li>
<li class="toctree-l4"><a class="reference internal" href="#advanced-compiler-settings">Advanced compiler settings</a></li>
<li class="toctree-l4"><a class="reference internal" href="#vsc-compiler-settings">Visual Studio Code compiler settings</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#configuring-your-application">Configuring your application</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#configuration-system-overview">Configuration system overview</a></li>
<li class="toctree-l4"><a class="reference internal" href="#changing-the-configuration-temporarily">Changing the configuration temporarily</a></li>
<li class="toctree-l4"><a class="reference internal" href="#changing-the-configuration-permanently">Changing the configuration permanently</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#providing-cmake-options">Providing CMake options</a></li>
<li class="toctree-l3"><a class="reference internal" href="#configuring-build-types">Configuring build types</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="updating.html">Updating repositories and tools</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../dev_model.html">Development model</a></li>
<li class="toctree-l1"><a class="reference internal" href="../app_dev.html">Application development</a></li>
<li class="toctree-l1"><a class="reference internal" href="../security.html">Security</a></li>
<li class="toctree-l1"><a class="reference internal" href="../ecosystem_integration.html">Ecosystems integration</a></li>
<li class="toctree-l1"><a class="reference internal" href="../nrf91.html">Working with nRF91 Series</a></li>
<li class="toctree-l1"><a class="reference internal" href="../nrf70.html">Working with nRF70 Series</a></li>
<li class="toctree-l1"><a class="reference internal" href="../nrf53.html">Working with nRF53 Series</a></li>
<li class="toctree-l1"><a class="reference internal" href="../nrf52.html">Working with nRF52 Series</a></li>
<li class="toctree-l1"><a class="reference internal" href="../protocols.html">Protocols</a></li>
<li class="toctree-l1"><a class="reference internal" href="../applications.html">Applications</a></li>
<li class="toctree-l1"><a class="reference internal" href="../samples.html">Samples</a></li>
<li class="toctree-l1"><a class="reference internal" href="../drivers.html">Drivers</a></li>
<li class="toctree-l1"><a class="reference internal" href="../libraries/index.html">Libraries</a></li>
<li class="toctree-l1"><a class="reference internal" href="../scripts.html">Scripts</a></li>
<li class="toctree-l1"><a class="reference internal" href="../release_notes.html">Release notes</a></li>
<li class="toctree-l1"><a class="reference internal" href="../known_issues.html">Known issues</a></li>
<li class="toctree-l1"><a class="reference internal" href="../software_maturity.html">Software maturity levels</a></li>
<li class="toctree-l1"><a class="reference internal" href="../documentation.html">About this documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../glossary.html">Glossary</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">nRF Connect SDK</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../index.html" class="icon icon-home"></a></li>
          <li class="breadcrumb-item"><a href="../getting_started.html">Getting started</a></li>
      <li class="breadcrumb-item active">Modifying an application</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../_sources/getting_started/modifying.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="modifying-an-application">
<span id="gs-modifying"></span><h1>Modifying an application<a class="headerlink" href="#modifying-an-application" title="Permalink to this heading"></a></h1>
<div class="contents local topic" id="contents">
<ul class="simple">
<li><p><a class="reference internal" href="#adding-files-and-changing-compiler-settings" id="id7">Adding files and changing compiler settings</a></p>
<ul>
<li><p><a class="reference internal" href="#role-of-cmakelists-txt" id="id8">Role of CMakeLists.txt</a></p></li>
<li><p><a class="reference internal" href="#updating-cmakelists-txt" id="id9">Updating CMakeLists.txt</a></p></li>
<li><p><a class="reference internal" href="#editing-cmakelists-txt" id="id10">Editing CMakeLists.txt</a></p></li>
<li><p><a class="reference internal" href="#advanced-compiler-settings" id="id11">Advanced compiler settings</a></p></li>
<li><p><a class="reference internal" href="#vsc-compiler-settings" id="id12">Visual Studio Code compiler settings</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#configuring-your-application" id="id13">Configuring your application</a></p>
<ul>
<li><p><a class="reference internal" href="#configuration-system-overview" id="id14">Configuration system overview</a></p></li>
<li><p><a class="reference internal" href="#changing-the-configuration-temporarily" id="id15">Changing the configuration temporarily</a></p></li>
<li><p><a class="reference internal" href="#changing-the-configuration-permanently" id="id16">Changing the configuration permanently</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#providing-cmake-options" id="id17">Providing CMake options</a></p></li>
<li><p><a class="reference internal" href="#configuring-build-types" id="id18">Configuring build types</a></p></li>
</ul>
</div>
<p>For simplicity, this guide will refer to both <a class="reference internal" href="../samples.html#samples"><span class="std std-ref">samples</span></a> and <a class="reference internal" href="../applications.html#applications"><span class="std std-ref">applications</span></a> as “applications”.</p>
<p>After programming and testing an application, you probably want to make some modifications to the application, for example, add your own files with additional functionality, change compilation options, or update the default configuration.</p>
<section id="adding-files-and-changing-compiler-settings">
<h2><a class="toc-backref" href="#id7">Adding files and changing compiler settings</a><a class="headerlink" href="#adding-files-and-changing-compiler-settings" title="Permalink to this heading"></a></h2>
<p>The nRF Connect SDK build system is based on Zephyr, whose build system is based on <a class="reference external" href="https://cmake.org/cmake/help/latest/">CMake</a>.
For more information about how the build system works in Zephyr, see <span class="xref std std-ref">zephyr:build_overview</span> and <span class="xref std std-ref">zephyr:application</span> in the Zephyr documentation.</p>
<section id="role-of-cmakelists-txt">
<h3><a class="toc-backref" href="#id8">Role of CMakeLists.txt</a><a class="headerlink" href="#role-of-cmakelists-txt" title="Permalink to this heading"></a></h3>
<p>In the nRF Connect SDK, the application is a CMake project.
As such, the application controls the configuration and build process of itself, Zephyr, and sourced libraries.
The application’s <code class="file docutils literal notranslate"><span class="pre">CMakeLists.txt</span></code> file is the main CMake project file and the source of the build process configuration.</p>
<p>Zephyr provides a CMake package that must be loaded by the application into its <code class="file docutils literal notranslate"><span class="pre">CMakeLists.txt</span></code> file.
When loaded, the application can reference items provided by both Zephyr and the nRF Connect SDK.</p>
<p>Loading Zephyr’s <a class="reference external" href="https://cmake.org/cmake/help/latest/">CMake</a> package creates the <code class="docutils literal notranslate"><span class="pre">app</span></code> CMake target.
You can add application source files to this target from the application <code class="file docutils literal notranslate"><span class="pre">CMakeLists.txt</span></code> file.</p>
</section>
<section id="updating-cmakelists-txt">
<h3><a class="toc-backref" href="#id9">Updating CMakeLists.txt</a><a class="headerlink" href="#updating-cmakelists-txt" title="Permalink to this heading"></a></h3>
<p>The recommended method to update the <code class="file docutils literal notranslate"><span class="pre">CMakeLists.txt</span></code> file is to use the nRF Connect for VS Code extension to maintain it.
You can also edit the file directly.</p>
</section>
<section id="editing-cmakelists-txt">
<h3><a class="toc-backref" href="#id10">Editing CMakeLists.txt</a><a class="headerlink" href="#editing-cmakelists-txt" title="Permalink to this heading"></a></h3>
<p>You can add source files to the <code class="docutils literal notranslate"><span class="pre">app</span></code> CMake target with the <code class="xref c c-func docutils literal notranslate"><span class="pre">target_sources()</span></code> function provided by CMake.</p>
<p>Pay attention to the following configuration options:</p>
<ul>
<li><p>If your application is complex, you can split it into subdirectories.
These subdirectories can provide their own <code class="file docutils literal notranslate"><span class="pre">CMakeLists.txt</span></code> files.</p></li>
<li><p>The build system searches for header files in include directories.
Add additional include directories for your application with the <code class="xref c c-func docutils literal notranslate"><span class="pre">target_include_directories()</span></code> function provided by CMake.
For example, if you want to include an <code class="file docutils literal notranslate"><span class="pre">inc</span></code> directory, the code would look like the following:</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="n">target_include_directories</span><span class="p">(</span><span class="n">app</span><span class="w"> </span><span class="n">PRIVATE</span><span class="w"> </span><span class="n">inc</span><span class="p">)</span>
</pre></div>
</div>
</li>
</ul>
<p>See the <a class="reference external" href="https://cmake.org/cmake/help/latest/">CMake documentation</a> and <span class="xref std std-ref">zephyr:cmake-details</span> in the Zephyr documentation for more information about how to edit <code class="file docutils literal notranslate"><span class="pre">CMakeLists.txt</span></code>.</p>
</section>
<section id="advanced-compiler-settings">
<h3><a class="toc-backref" href="#id11">Advanced compiler settings</a><a class="headerlink" href="#advanced-compiler-settings" title="Permalink to this heading"></a></h3>
<p>The application has full control over the build process.</p>
<p>Using Zephyr’s configuration options is the standard way of controlling how the system is built.
These options can be found under Zephyr’s menuconfig <strong>Build and Link Features</strong> &gt; <strong>Compiler Options</strong>.
For example, to turn off optimizations, select <code class="xref kconfig kconfig-option docutils literal notranslate"><span class="pre">CONFIG_NO_OPTIMIZATIONS</span></code>.</p>
<p>Compiler options not controlled by the Zephyr build system can be controlled through the <code class="xref kconfig kconfig-option docutils literal notranslate"><span class="pre">CONFIG_COMPILER_OPT</span></code> Kconfig option.</p>
</section>
<section id="vsc-compiler-settings">
<h3><a class="toc-backref" href="#id12">Visual Studio Code compiler settings</a><a class="headerlink" href="#vsc-compiler-settings" title="Permalink to this heading"></a></h3>
<p>The nRF Connect for VS Code extension lets you build and program with custom options.
For more information, read about the advanced <a class="reference external" href="https://nrfconnect.github.io/vscode-nrf-connect/guides/debug_advanced.html#custom-launch-and-debug-configurations">Custom launch and debug configurations</a> and <a class="reference external" href="https://nrfconnect.github.io/vscode-nrf-connect/guides/bd_work_with_boards.html#how-to-flash-boards">Application-specific flash options</a> in the extension documentation.</p>
</section>
</section>
<section id="configuring-your-application">
<span id="configure-application"></span><h2><a class="toc-backref" href="#id13">Configuring your application</a><a class="headerlink" href="#configuring-your-application" title="Permalink to this heading"></a></h2>
<p>You might want to change the default options of the application.
There are different ways of doing this, but not all will store your configuration permanently.</p>
<section id="configuration-system-overview">
<span id="id1"></span><h3><a class="toc-backref" href="#id14">Configuration system overview</a><a class="headerlink" href="#configuration-system-overview" title="Permalink to this heading"></a></h3>
<p>Zephyr and the nRF Connect SDK use several configuration systems, each system with a specialized syntax and purpose.</p>
<p>The nRF Connect SDK consists of the following configuration sources:</p>
<ul class="simple">
<li><p>Devicetree source (DTS) files for hardware-related options.</p></li>
<li><p>Kconfig files for software-related options.</p></li>
<li><p>Partition Manager files for memory layout configuration.
This is an nRF Connect SDK configuration system that is not available in Zephyr.</p></li>
</ul>
<p>To read more about Zephyr’s configuration system, see <span class="xref std std-ref">zephyr:build_overview</span> in the Zephyr documentation.</p>
<section id="hardware-related-configuration">
<span id="configure-application-hw"></span><h4>Hardware-related configuration<a class="headerlink" href="#hardware-related-configuration" title="Permalink to this heading"></a></h4>
<p>The preprocessed devicetree sources are parsed by the <code class="file docutils literal notranslate"><span class="pre">zephyr/scripts/dts/gen_defines.py</span></code> script to generate a <code class="file docutils literal notranslate"><span class="pre">devicetree_unfixed.h</span></code> header file with preprocessor macros.</p>
<p>The <code class="file docutils literal notranslate"><span class="pre">zephyr.dts</span></code> file contains the entire hardware-related configuration of the system in the devicetree format.
The header file contains the same kind of information, but with defines usable by source code.</p>
<p>For more information, see Zephyr’s <span class="xref std std-ref">zephyr:dt-guide</span>.</p>
</section>
<section id="software-related-configuration">
<span id="configure-application-sw"></span><h4>Software-related configuration<a class="headerlink" href="#software-related-configuration" title="Permalink to this heading"></a></h4>
<p>Information from devicetree is available to Kconfig, through the functions defined in <code class="file docutils literal notranslate"><span class="pre">zephyr/scripts/kconfig/kconfigfunctions.py</span></code>.</p>
<p>The single <code class="file docutils literal notranslate"><span class="pre">.config</span></code> file in the <code class="file docutils literal notranslate"><span class="pre">&lt;build_dir&gt;/zephyr/</span></code> directory describes the entire software configuration of the constructed binary.</p>
<p>For more information, see Zephyr’s <span class="xref std std-ref">zephyr:application-kconfig</span>.</p>
</section>
<section id="memory-layout-configuration">
<h4>Memory layout configuration<a class="headerlink" href="#memory-layout-configuration" title="Permalink to this heading"></a></h4>
<p>The Partition Manager is specific to the nRF Connect SDK.
If enabled, it provides the memory layout configuration.
The layout is impacted by various elements, such as Kconfig configuration options or the presence of child images.
Partition Manager ensures that all required partitions are in the correct place and have the correct size.</p>
<p>If enabled, the memory layout can be controlled in the following ways:</p>
<ul class="simple">
<li><p>Dynamically (default) - In this scenario, the layout is impacted by various elements, such as Kconfig configuration options or the presence of child images.
Partition Manager ensures that all required partitions are in the correct place and have the correct size.</p></li>
<li><p>Statically - In this scenario, you need to provide the static configuration.
See <a class="reference internal" href="../scripts/partition_manager/partition_manager.html#ug-pm-static"><span class="std std-ref">Static configuration</span></a> for information about how to do this.</p></li>
</ul>
<p>After CMake has run, a single <code class="file docutils literal notranslate"><span class="pre">partitions.yml</span></code> file with the complete memory layout will have been created in the <code class="file docutils literal notranslate"><span class="pre">build</span></code> directory.
This process also creates a set of header files that provides defines, which can be used to refer to memory layout elements.</p>
<p>For more information, see <a class="reference internal" href="../scripts/partition_manager/partition_manager.html#partition-manager"><span class="std std-ref">Partition Manager</span></a>.</p>
</section>
<section id="child-images">
<h4>Child images<a class="headerlink" href="#child-images" title="Permalink to this heading"></a></h4>
<p>The nRF Connect SDK build system allows the application project to become a root for the sub-applications known in the nRF Connect SDK as child images.
Examples of child images are bootloader images, network core images, or security-related images.
Each child image is a separate application.</p>
<p>For more information, see <a class="reference internal" href="../app_dev/multi_image/index.html#ug-multi-image"><span class="std std-ref">Multi-image builds</span></a>.</p>
</section>
</section>
<section id="changing-the-configuration-temporarily">
<h3><a class="toc-backref" href="#id15">Changing the configuration temporarily</a><a class="headerlink" href="#changing-the-configuration-temporarily" title="Permalink to this heading"></a></h3>
<p>When building your application, the different <code class="file docutils literal notranslate"><span class="pre">.config</span></code>, <code class="file docutils literal notranslate"><span class="pre">*_defconfig</span></code> files and the <code class="file docutils literal notranslate"><span class="pre">prj.conf</span></code> file are merged together and then processed by Kconfig.
The resulting configuration is written to the <code class="file docutils literal notranslate"><span class="pre">zephyr/.config</span></code> file in your <code class="file docutils literal notranslate"><span class="pre">build</span></code> directory.
This means that this file is available when building the application, but it is deleted when you clean the build directory with the <code class="docutils literal notranslate"><span class="pre">pristine</span></code> target (see Zephyr’s <span class="xref std std-ref">zephyr:application_rebuild</span> for more information).</p>
<p>The documentation for each <span class="xref std std-ref">configuration option</span> lists the menu path where the option can be found.</p>
<div class="sphinx-tabs docutils container">
<div aria-label="Tabbed content" class="closeable" role="tablist"><button aria-controls="panel-0-blJGIENvbm5lY3QgZm9yIFZTIENvZGU=" aria-selected="true" class="sphinx-tabs-tab group-tab" id="tab-0-blJGIENvbm5lY3QgZm9yIFZTIENvZGU=" name="blJGIENvbm5lY3QgZm9yIFZTIENvZGU=" role="tab" tabindex="0">nRF Connect for VS Code</button><button aria-controls="panel-0-Q29tbWFuZCBsaW5l" aria-selected="false" class="sphinx-tabs-tab group-tab" id="tab-0-Q29tbWFuZCBsaW5l" name="Q29tbWFuZCBsaW5l" role="tab" tabindex="-1">Command line</button><button aria-controls="panel-0-bWVudWNvbmZpZw==" aria-selected="false" class="sphinx-tabs-tab group-tab" id="tab-0-bWVudWNvbmZpZw==" name="bWVudWNvbmZpZw==" role="tab" tabindex="-1">menuconfig</button></div><div aria-labelledby="tab-0-blJGIENvbm5lY3QgZm9yIFZTIENvZGU=" class="sphinx-tabs-panel group-tab" id="panel-0-blJGIENvbm5lY3QgZm9yIFZTIENvZGU=" name="blJGIENvbm5lY3QgZm9yIFZTIENvZGU=" role="tabpanel" tabindex="0"><p>Use the nRF Kconfig GUI in the nRF Connect for VS Code extension to select the desired options.
The GUI organizes the Kconfig options in a hierarchical list and lets you view and manage your selection.</p>
<p>To locate a specific configuration option, use the <strong>Search modules</strong> field.
Read the <a class="reference external" href="https://nrfconnect.github.io/vscode-nrf-connect/guides/ncs_configure_app.html">Configuring with nRF Kconfig</a> page in the nRF Connect for VS Code extension documentation for more information.</p>
</div><div aria-labelledby="tab-0-Q29tbWFuZCBsaW5l" class="sphinx-tabs-panel group-tab" hidden="true" id="panel-0-Q29tbWFuZCBsaW5l" name="Q29tbWFuZCBsaW5l" role="tabpanel" tabindex="0"><p>To quickly test different configuration options, or to build your application in different variants, you can update the <code class="file docutils literal notranslate"><span class="pre">.config</span></code> file in the build directory.
Changes are picked up immediately.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>While it is possible to edit the <code class="file docutils literal notranslate"><span class="pre">.config</span></code> file directly, you should use the nRF Kconfig GUI in the nRF Connect for VS Code extension or a tool like menuconfig or guiconfig to update it.
These tools present all available options and allow you to select the ones that you need.</p>
</div>
</div><div aria-labelledby="tab-0-bWVudWNvbmZpZw==" class="sphinx-tabs-panel group-tab" hidden="true" id="panel-0-bWVudWNvbmZpZw==" name="bWVudWNvbmZpZw==" role="tabpanel" tabindex="0"><p>See <span class="xref std std-ref">zephyr:menuconfig</span> in the Zephyr documentation for instructions on how to run menuconfig or guiconfig.
To locate a specific configuration option, use the <strong>Jump to</strong> field.</p>
</div></div>
</section>
<section id="changing-the-configuration-permanently">
<h3><a class="toc-backref" href="#id16">Changing the configuration permanently</a><a class="headerlink" href="#changing-the-configuration-permanently" title="Permalink to this heading"></a></h3>
<p>To configure your application and maintain the configuration when you clean the build directory pristinely, you need to specify the configuration in one of the permanent configuration files.
This will be either the default <code class="file docutils literal notranslate"><span class="pre">prj.conf</span></code> file of the application or an extra Kconfig fragment.
In these files, you can specify different values for configuration options that are defined by a library or board, and you can add configuration options that are specific to your application.</p>
<p>See <span class="xref std std-ref">zephyr:setting_configuration_values</span> in the Zephyr documentation for information on how to change the configuration permanently.</p>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>Reconfiguring through menuconfig only changes the specific setting and the invisible options that are calculated from it.
It does not adjust visible symbols that have already defaulted to a value even if this default calculation is supposed to be dependent on the changed setting.
This may result in a bloated configuration compared to changing the setting directly in <code class="file docutils literal notranslate"><span class="pre">prj.conf</span></code>.
See the section Stuck symbols in menuconfig and guiconfig on the <span class="xref std std-ref">kconfig_tips_and_tricks</span> in the Zephyr documentation for more information.</p>
</div>
<div class="sphinx-tabs docutils container">
<div aria-label="Tabbed content" class="closeable" role="tablist"><button aria-controls="panel-1-blJGIENvbm5lY3QgZm9yIFZTIENvZGU=" aria-selected="true" class="sphinx-tabs-tab group-tab" id="tab-1-blJGIENvbm5lY3QgZm9yIFZTIENvZGU=" name="blJGIENvbm5lY3QgZm9yIFZTIENvZGU=" role="tab" tabindex="0">nRF Connect for VS Code</button><button aria-controls="panel-1-Q29tbWFuZCBsaW5l" aria-selected="false" class="sphinx-tabs-tab group-tab" id="tab-1-Q29tbWFuZCBsaW5l" name="Q29tbWFuZCBsaW5l" role="tab" tabindex="-1">Command line</button></div><div aria-labelledby="tab-1-blJGIENvbm5lY3QgZm9yIFZTIENvZGU=" class="sphinx-tabs-panel group-tab" id="panel-1-blJGIENvbm5lY3QgZm9yIFZTIENvZGU=" name="blJGIENvbm5lY3QgZm9yIFZTIENvZGU=" role="tabpanel" tabindex="0"><p>If you work with nRF Connect for VS Code extension, you can use one of the following options:</p>
<ul class="simple">
<li><p>Select an extra Kconfig fragment file when you <a class="reference external" href="https://nrfconnect.github.io/vscode-nrf-connect/get_started/build_app_ncs.html">build an application</a>.</p></li>
<li><p>Edit the Kconfig options using the nRF Kconfig GUI and save changes permanently to an existing or new <code class="file docutils literal notranslate"><span class="pre">prj.conf</span></code> file.</p></li>
</ul>
<p>See the <a class="reference external" href="https://nrfconnect.github.io/vscode-nrf-connect/guides/ncs_configure_app.html">extension’s documentation about Kconfig</a> for more information.</p>
</div><div aria-labelledby="tab-1-Q29tbWFuZCBsaW5l" class="sphinx-tabs-panel group-tab" hidden="true" id="panel-1-Q29tbWFuZCBsaW5l" name="Q29tbWFuZCBsaW5l" role="tabpanel" tabindex="0"><p>If you work on the command line, pass the additional options to the <code class="docutils literal notranslate"><span class="pre">west</span> <span class="pre">build</span></code> command.
The options must be added after a <code class="docutils literal notranslate"><span class="pre">--</span></code> at the end of the command.
See <span class="xref std std-ref">zephyr:west-building-cmake-args</span> for more information.</p>
</div></div>
<p>The <code class="file docutils literal notranslate"><span class="pre">prj.conf</span></code> file is read when you open a project.
The file will be reloaded when CMake re-runs.
This will happen automatically when the application is rebuilt.</p>
</section>
</section>
<section id="providing-cmake-options">
<span id="cmake-options"></span><h2><a class="toc-backref" href="#id17">Providing CMake options</a><a class="headerlink" href="#providing-cmake-options" title="Permalink to this heading"></a></h2>
<p>You can provide additional options for building your application to the CMake process, which can be useful, for example, to switch between different build scenarios.
These options are specified when CMake is run, thus not during the actual build, but when configuring the build.</p>
<div class="sphinx-tabs docutils container">
<div aria-label="Tabbed content" class="closeable" role="tablist"><button aria-controls="panel-2-blJGIENvbm5lY3QgZm9yIFZTIENvZGU=" aria-selected="true" class="sphinx-tabs-tab group-tab" id="tab-2-blJGIENvbm5lY3QgZm9yIFZTIENvZGU=" name="blJGIENvbm5lY3QgZm9yIFZTIENvZGU=" role="tab" tabindex="0">nRF Connect for VS Code</button><button aria-controls="panel-2-Q29tbWFuZCBsaW5l" aria-selected="false" class="sphinx-tabs-tab group-tab" id="tab-2-Q29tbWFuZCBsaW5l" name="Q29tbWFuZCBsaW5l" role="tab" tabindex="-1">Command line</button></div><div aria-labelledby="tab-2-blJGIENvbm5lY3QgZm9yIFZTIENvZGU=" class="sphinx-tabs-panel group-tab" id="panel-2-blJGIENvbm5lY3QgZm9yIFZTIENvZGU=" name="blJGIENvbm5lY3QgZm9yIFZTIENvZGU=" role="tabpanel" tabindex="0"><p>If you work with the nRF Connect for VS Code extension, you can specify project-specific CMake options when you add the build configuration for a new nRF Connect SDK project.
See <a class="reference external" href="https://nrfconnect.github.io/vscode-nrf-connect/get_started/build_app_ncs.html">How to build an application</a> in the nRF Connect for VS Code extension documentation.</p>
</div><div aria-labelledby="tab-2-Q29tbWFuZCBsaW5l" class="sphinx-tabs-panel group-tab" hidden="true" id="panel-2-Q29tbWFuZCBsaW5l" name="Q29tbWFuZCBsaW5l" role="tabpanel" tabindex="0"><p>If you work on the command line, pass the additional options to the <code class="docutils literal notranslate"><span class="pre">west</span> <span class="pre">build</span></code> command.
The options must be added after a <code class="docutils literal notranslate"><span class="pre">--</span></code> at the end of the command.
See <span class="xref std std-ref">zephyr:west-building-cmake-args</span> for more information.</p>
</div></div>
</section>
<section id="configuring-build-types">
<span id="gs-modifying-build-types"></span><h2><a class="toc-backref" href="#id18">Configuring build types</a><a class="headerlink" href="#configuring-build-types" title="Permalink to this heading"></a></h2>
<p>When the <code class="docutils literal notranslate"><span class="pre">CONF_FILE</span></code> variable contains a single file and this file follows the naming pattern <code class="file docutils literal notranslate"><span class="pre">prj_&lt;buildtype&gt;.conf</span></code>, then the build type will be inferred to be <em>&lt;buildtype&gt;</em>.
The build type cannot be set explicitly.
The <em>&lt;buildtype&gt;</em> can be any string, but it is common to use <code class="docutils literal notranslate"><span class="pre">release</span></code> and <code class="docutils literal notranslate"><span class="pre">debug</span></code>.</p>
<p>For information about how to set variables, see <span class="xref std std-ref">zephyr:important-build-vars</span> in the Zephyr documentation.</p>
<p>The Partition Manager’s <a class="reference internal" href="../scripts/partition_manager/partition_manager.html#ug-pm-static"><span class="std std-ref">static configuration</span></a> can also be made dependent on the build type.
When the build type has been inferred, the file <code class="file docutils literal notranslate"><span class="pre">pm_static_&lt;buildtype&gt;.yml</span></code> will have precedence over <code class="file docutils literal notranslate"><span class="pre">pm_static.yml</span></code>.</p>
<p>The child image Kconfig configuration can also be made dependent on the build type.
The child image Kconfig overlay file is named <code class="file docutils literal notranslate"><span class="pre">child_image/&lt;child_image_name&gt;.conf</span></code> instead of <code class="file docutils literal notranslate"><span class="pre">prj.conf</span></code>, but otherwise follows the same pattern as the parent Kconfig.</p>
<p>Alternatively, the child image Kconfig configuration file can be introduced as <code class="file docutils literal notranslate"><span class="pre">child_image/&lt;child_image_name&gt;/prj.conf</span></code> and follow the same pattern as the parent Kconfig.
For example, <code class="file docutils literal notranslate"><span class="pre">child_image/mcuboot/prj_release.conf</span></code> can be used to define <code class="docutils literal notranslate"><span class="pre">release</span></code> build type for <code class="docutils literal notranslate"><span class="pre">mcuboot</span></code> child image.</p>
<p>The Devicetree configuration is not affected by the build type.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>For an example of an application that is using build types, see the <a class="reference internal" href="../applications/nrf_desktop/README.html#nrf-desktop"><span class="std std-ref">nRF Desktop</span></a> application (<a class="reference internal" href="../applications/nrf_desktop/README.html#nrf-desktop-requirements-build-types"><span class="std std-ref">nRF Desktop build types</span></a>) or the <a class="reference internal" href="../applications/machine_learning/README.html#nrf-machine-learning-app"><span class="std std-ref">nRF Machine Learning</span></a> application (<a class="reference internal" href="../applications/machine_learning/README.html#nrf-machine-learning-app-requirements-build-types"><span class="std std-ref">nRF Machine Learning build types</span></a>).</p>
</div>
<div class="sphinx-tabs docutils container">
<div aria-label="Tabbed content" class="closeable" role="tablist"><button aria-controls="panel-3-blJGIENvbm5lY3QgZm9yIFZTIENvZGU=" aria-selected="true" class="sphinx-tabs-tab group-tab" id="tab-3-blJGIENvbm5lY3QgZm9yIFZTIENvZGU=" name="blJGIENvbm5lY3QgZm9yIFZTIENvZGU=" role="tab" tabindex="0">nRF Connect for VS Code</button><button aria-controls="panel-3-Q29tbWFuZCBsaW5l" aria-selected="false" class="sphinx-tabs-tab group-tab" id="tab-3-Q29tbWFuZCBsaW5l" name="Q29tbWFuZCBsaW5l" role="tab" tabindex="-1">Command line</button></div><div aria-labelledby="tab-3-blJGIENvbm5lY3QgZm9yIFZTIENvZGU=" class="sphinx-tabs-panel group-tab" id="panel-3-blJGIENvbm5lY3QgZm9yIFZTIENvZGU=" name="blJGIENvbm5lY3QgZm9yIFZTIENvZGU=" role="tabpanel" tabindex="0"><p>To select the build type in the nRF Connect for VS Code extension:</p>
<ol class="arabic simple">
<li><p>When <a class="reference external" href="https://nrfconnect.github.io/vscode-nrf-connect/get_started/build_app_ncs.html">building an application</a> as described in the nRF Connect for VS Code extension documentation, follow the steps for setting up the build configuration.</p></li>
<li><p>In the <strong>Add Build Configuration</strong> screen, select the desired <code class="file docutils literal notranslate"><span class="pre">.conf</span></code> file from the <span class="guilabel">Configuration</span> drop-down menu.</p></li>
<li><p>Fill in other configuration options, if applicable, and click <span class="guilabel">Build Configuration</span>.</p></li>
</ol>
</div><div aria-labelledby="tab-3-Q29tbWFuZCBsaW5l" class="sphinx-tabs-panel group-tab" hidden="true" id="panel-3-Q29tbWFuZCBsaW5l" name="Q29tbWFuZCBsaW5l" role="tabpanel" tabindex="0"><p>To select the build type when building the application from command line, specify the build type by adding the following parameter to the <code class="docutils literal notranslate"><span class="pre">west</span> <span class="pre">build</span></code> command:</p>
<pre class="highlight literal-block">-- -DCONF_FILE=prj_<em>selected_build_type</em>.conf</pre>
<p>For example, you can replace the <em>selected_build_type</em> variable to build the <code class="docutils literal notranslate"><span class="pre">release</span></code> firmware for <code class="docutils literal notranslate"><span class="pre">nrf52840dk_nrf52840</span></code> by running the following command in the project directory:</p>
<div class="highlight highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">west</span> <span class="n">build</span> <span class="o">-</span><span class="n">b</span> <span class="n">nrf52840dk_nrf52840</span> <span class="o">-</span><span class="n">d</span> <span class="n">build_nrf52840dk_nrf52840</span> <span class="o">--</span> <span class="o">-</span><span class="n">DCONF_FILE</span><span class="o">=</span><span class="n">prj_release</span><span class="o">.</span><span class="n">conf</span>
</pre></div>
</div>
<p>The <code class="docutils literal notranslate"><span class="pre">build_nrf52840dk_nrf52840</span></code> parameter specifies the output directory for the build files.</p>
</div></div>
</section>
</section>


           </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="updating.html" class="btn btn-neutral float-right" title="Updating repositories and tools" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="testing.html" class="btn btn-neutral" title="Testing and debugging an application" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">

<table>
<tr>
<td>
    <p>
        &copy; Copyright 2019-2023, Nordic Semiconductor.
      Last updated on Mar 20, 2023.

    </p>
</td>
<td id="nordiclogo">
  <a href="https://www.nordicsemi.com/"><img src="../_static/images/nordic-logo.png" border="0"/></a>
</td>
</tr>
</table>
  </div> 


</footer>

<div id="scroll-container">
  <button type="button" id="scroll-btn" class="btn">
    <svg xmlns="http://www.w3.org/2000/svg" height="24" viewBox="0 0 24 24" width="24"><path d="M0 0h24v24H0z" fill="none"/><path d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z" fill="#fff"/></svg>
  </button>
</div>

<script>
  const scrollBtn = document.querySelector("#scroll-btn");

  document.addEventListener("scroll", () => {
    if (window.scrollY > 400) {
          scrollBtn.style.visibility = "visible";
      } else {
          scrollBtn.style.visibility = "hidden";
      }
  });

  scrollBtn.addEventListener("click", () => {
      window.scrollTo({ top: 0, behavior: "smooth" });
  });
</script>
        </div>
      </div>
    </section>
  </div>
  
  <div class="rst-versions" data-toggle="rst-versions" role="note" aria-label="versions">
    <span class="rst-current-version" data-toggle="rst-current-version">
      <span class="fa fa-book"> nRF Connect SDK</span>
       <span class="fa fa-caret-down"></span>
    </span>
    <div class="rst-other-versions">
      
      <div class="rst-other-version ncs">
        <a href="../../nrf/index.html">nRF Connect SDK</a>
      </div>
      
      <div class="rst-other-version nrfx">
        <a href="../../nrfx/index.html">nrfx</a>
      </div>
      
      <div class="rst-other-version nrfxlib">
        <a href="../../nrfxlib/README.html">nrfxlib</a>
      </div>
      
      <div class="rst-other-version zephyr">
        <a href="../../zephyr/index.html">Zephyr Project</a>
      </div>
      
      <div class="rst-other-version mcuboot">
        <a href="../../mcuboot/wrapper.html">MCUboot</a>
      </div>
      
      <div class="rst-other-version tfm">
        <a href="../../tfm/index.html">Trusted Firmware-M</a>
      </div>
      
      <div class="rst-other-version matter">
        <a href="../../matter/index.html">Matter</a>
      </div>
      
      <div class="rst-other-version kconfig">
        <a href="../../kconfig/index.html">Kconfig Reference</a>
      </div>
    </div>
  </div><script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>