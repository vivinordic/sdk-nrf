<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Features of nRF91 Series &mdash; nRF Connect SDK 2.3.99 documentation</title>
      <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="../../_static/css/nordic.css" type="text/css" />
      <link rel="stylesheet" href="../../_static/togglebutton.css" type="text/css" />
      <link rel="stylesheet" href="../../_static/css/nrf.css" type="text/css" />
      <link rel="stylesheet" href="../../_static/tabs.css" type="text/css" /> 
  <!--[if lt IE 9]>
    <script src="../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="../../" id="documentation_options" src="../../_static/documentation_options.js"></script>
        <script src="../../_static/jquery.js"></script>
        <script src="../../_static/underscore.js"></script>
        <script src="../../_static/_sphinx_javascript_frameworks_compat.js"></script>
        <script src="../../_static/doctools.js"></script>
        <script src="../../_static/sphinx_highlight.js"></script>
        <script src="https://www.googletagmanager.com/gtag/js?id=G-ZPVZRKFQJR"></script>
        <script src="../../_static/js/ga-tracker.js"></script>
        <script data-culture="EN" id="CookieConsent" type="text/javascript" src="https://policy.app.cookieinformation.com/uc.js"></script>
        <script>let toggleHintShow = 'Click to show';</script>
        <script>let toggleHintHide = 'Click to hide';</script>
        <script>let toggleOpenOnPrint = 'true';</script>
        <script src="../../_static/togglebutton.js"></script>
        <script>var togglebuttonSelector = '.toggle, .admonition.dropdown';</script>
    <script src="../../_static/js/theme.js"></script>
<script
  type="text/javascript"
  src="../../_static/js/ncs.js"
></script>
<script src="../../_static/js/bootstrap.bundle.min.js"></script>

    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="Getting started with nRF9160 DK" href="nrf9160_gs.html" />
    <link rel="prev" title="Working with nRF91 Series" href="../../nrf91.html" />
<link
  href="../../_static/css/bootstrap.min.css"
  rel="stylesheet"
/>
<link
  rel="shortcut icon"
  href="../../_static/images/favicon.ico"
/>

</head>

<body class="wy-body-for-nav">
<div class="announcement"></div>
<div class="d-print-none ncs-header">
  <div class="container-xl ncs-header-top">
    <div class="row h-100">
      <div class="d-none d-md-block col-2">
        <div class="bg-white py-4 px-3 ml-2 ncs-header-logo">
          <img
            class="ncs-header-logo"
            src="../../_static/images/nordic-logo.png"
            alt=""
          />
        </div>
      </div>
      <div
        class="col-8 col-md-7 pl-md-4 d-flex align-self-center justify-content-center"
      >
        <form class="w-75" action="../../search.html" method="get">
          <div class="form-group">
            <input
              type="text"
              name="q"
              class="ncs-search-input form-control"
              placeholder="Search all docs..."
            />
          </div>
        </form>
      </div>
      <div class="col-4 col-md-3 d-md-block p-3 text-end">
        <div class="dropdown">
          <button
            class="btn dropdown-toggle ncs-btn-versions"
            type="button"
            id="dropdownMenuButton1"
            data-bs-toggle="dropdown"
            aria-expanded="false"
          >
            <span class="d-none d-md-inline">nRF Connect SDK</span>
            <span id="ncsversion" class="d-inline"></span>
          </button>
          <div class="dropdown-menu" aria-labelledby="dropdownMenuButton"></div>
        </div>
      </div>
    </div>
  </div>
  <div class="ncs-header-nav">
    <div class="container-xl">
      <div class="row">
        <div class="col col-12 d-flex justify-content-center">
          <nav class="navbar navbar-dark navbar-expand-lg p-0">
            <span class="navbar-brand d-block d-lg-none py-2 pl-1"
              >Documentation sets</span
            >
            <button
              class="navbar-toggler"
              type="button"
              data-bs-toggle="collapse"
              data-bs-target="#navbarNavAltMarkup"
              aria-controls="navbarNavAltMarkup"
              aria-expanded="false"
              aria-label="Toggle navigation"
            >
              <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="navbarNavAltMarkup">
              <ul class="navbar-nav">
                <li class="nav-item active py-1 px-3">
                  <a
                    class="nav-link"
                    href="../../../nrf/index.html"
                    >nRF Connect SDK</a
                  >
                </li>
                <li><hr class="dropdown-divider" /></li>
                <li class="nav-item  py-1 px-3">
                  <a
                    class="nav-link"
                    href="../../../nrfx/index.html"
                    >nrfx</a
                  >
                </li>
                <li><hr class="dropdown-divider" /></li>
                <li class="nav-item  py-1 px-3">
                  <a
                    class="nav-link"
                    href="../../../nrfxlib/README.html"
                    >nrfxlib</a
                  >
                </li>
                <li><hr class="dropdown-divider" /></li>
                <li class="nav-item  py-1 px-3">
                  <a
                    class="nav-link"
                    href="../../../zephyr/index.html"
                    >Zephyr Project</a
                  >
                </li>
                <li><hr class="dropdown-divider" /></li>
                <li class="nav-item  py-1 px-3">
                  <a
                    class="nav-link"
                    href="../../../mcuboot/wrapper.html"
                    >MCUboot</a
                  >
                </li>
                <li><hr class="dropdown-divider" /></li>
                <li class="nav-item  py-1 px-3">
                  <a
                    class="nav-link"
                    href="../../../tfm/index.html"
                    >Trusted Firmware-M</a
                  >
                </li>
                <li><hr class="dropdown-divider" /></li>
                <li class="nav-item  py-1 px-3">
                  <a
                    class="nav-link"
                    href="../../../matter/index.html"
                    >Matter</a
                  >
                </li>
                <li><hr class="dropdown-divider" /></li>
                <li class="nav-item  py-1 px-3">
                  <a
                    class="nav-link"
                    href="../../../kconfig/index.html"
                    >Kconfig Reference</a
                  >
                </li>
                <li><hr class="dropdown-divider" /></li>
              </ul>
            </div>
          </nav>
        </div>
      </div>
    </div>
  </div>
</div>

  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
            <a href="../../index.html" class="icon icon-home"> nRF Connect SDK
          </a>
              <div class="version">
                2.3.99
              </div>
<div id="searchbox" role="search">
  <div class="searchformwrapper">
    <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
      <input type="text" name="q" placeholder="Search docs" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
  </div>
</div>
<script>$('#searchbox').show(0);</script>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Contents</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../introduction.html">Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../getting_started.html">Getting started</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../dev_model.html">Development model</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../app_dev.html">Application development</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../security.html">Security</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../ecosystem_integration.html">Ecosystems integration</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../../nrf91.html">Working with nRF91 Series</a><ul class="current">
<li class="toctree-l2 current"><a class="current reference internal" href="#">Features of nRF91 Series</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#introduction">Introduction</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#supported-boards">Supported boards</a></li>
<li class="toctree-l4"><a class="reference internal" href="#application-mcu">Application MCU</a></li>
<li class="toctree-l4"><a class="reference internal" href="#lte-modem">LTE modem</a></li>
<li class="toctree-l4"><a class="reference internal" href="#modem-library">Modem library</a></li>
<li class="toctree-l4"><a class="reference internal" href="#fota-upgrades">FOTA upgrades</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#gnss">GNSS</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#obtaining-a-fix">Obtaining a fix</a></li>
<li class="toctree-l4"><a class="reference internal" href="#enhancements-to-gnss">Enhancements to GNSS</a></li>
<li class="toctree-l4"><a class="reference internal" href="#samples-using-gnss-in-ncs">Samples using GNSS in nRF Connect SDK</a></li>
<li class="toctree-l4"><a class="reference internal" href="#concurrent-gnss-and-lte">Concurrent GNSS and LTE</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#band-lock">Band lock</a></li>
<li class="toctree-l3"><a class="reference internal" href="#network-mode">Network mode</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="nrf9160_gs.html">Getting started with nRF9160 DK</a></li>
<li class="toctree-l2"><a class="reference internal" href="nrf9160.html">Developing with nRF9160 DK</a></li>
<li class="toctree-l2"><a class="reference internal" href="thingy91_gsg.html">Getting started with Thingy:91</a></li>
<li class="toctree-l2"><a class="reference internal" href="thingy91.html">Developing with Thingy:91</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../nrf70.html">Working with nRF70 Series</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../nrf53.html">Working with nRF53 Series</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../nrf52.html">Working with nRF52 Series</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../protocols.html">Protocols</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../applications.html">Applications</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../samples.html">Samples</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../drivers.html">Drivers</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../libraries/index.html">Libraries</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../scripts.html">Scripts</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../release_notes.html">Release notes</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../known_issues.html">Known issues</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../software_maturity.html">Software maturity levels</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../documentation.html">About this documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../glossary.html">Glossary</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">nRF Connect SDK</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../../index.html" class="icon icon-home"></a></li>
          <li class="breadcrumb-item"><a href="../../nrf91.html">Working with nRF91 Series</a></li>
      <li class="breadcrumb-item active">Features of nRF91 Series</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../../_sources/working_with_nrf/nrf91/nrf91_features.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="features-of-nrf91-series">
<span id="ug-nrf91-features"></span><h1>Features of nRF91 Series<a class="headerlink" href="#features-of-nrf91-series" title="Permalink to this heading"></a></h1>
<div class="contents local topic" id="contents">
<ul class="simple">
<li><p><a class="reference internal" href="#introduction" id="id10">Introduction</a></p>
<ul>
<li><p><a class="reference internal" href="#supported-boards" id="id11">Supported boards</a></p></li>
<li><p><a class="reference internal" href="#application-mcu" id="id12">Application MCU</a></p></li>
<li><p><a class="reference internal" href="#lte-modem" id="id13">LTE modem</a></p></li>
<li><p><a class="reference internal" href="#modem-library" id="id14">Modem library</a></p></li>
<li><p><a class="reference internal" href="#fota-upgrades" id="id15">FOTA upgrades</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#gnss" id="id16">GNSS</a></p>
<ul>
<li><p><a class="reference internal" href="#obtaining-a-fix" id="id17">Obtaining a fix</a></p></li>
<li><p><a class="reference internal" href="#enhancements-to-gnss" id="id18">Enhancements to GNSS</a></p></li>
<li><p><a class="reference internal" href="#samples-using-gnss-in-ncs" id="id19">Samples using GNSS in nRF Connect SDK</a></p></li>
<li><p><a class="reference internal" href="#concurrent-gnss-and-lte" id="id20">Concurrent GNSS and LTE</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#band-lock" id="id21">Band lock</a></p></li>
<li><p><a class="reference internal" href="#network-mode" id="id22">Network mode</a></p></li>
</ul>
</div>
<section id="introduction">
<h2><a class="toc-backref" href="#id10">Introduction</a><a class="headerlink" href="#introduction" title="Permalink to this heading"></a></h2>
<p>The nRF9160 SiP integrates an application MCU, a full LTE modem, an RF front end, and power management.
With built-in GNSS support, it is a great choice for asset tracking applications.</p>
<p>For more details on the SiP, see the <a class="reference external" href="https://www.nordicsemi.com/Products/Low-power-cellular-IoT/nRF9160">nRF9160 product website</a> and the <a class="reference external" href="https://infocenter.nordicsemi.com/topic/ps_nrf9160/nRF9160_html5_keyfeatures.html">nRF9160 Product Specification</a>.</p>
<p>The following figure illustrates the conceptual layout when targeting an nRF9160 Cortex-M33 application MCU with TrustZone:</p>
<figure class="align-default" id="id9">
<img alt="Overview of nRF91 application architecture" src="../../_images/nrf9160_ug_overview.svg" /><figcaption>
<p><span class="caption-text">Overview of nRF91 application architecture</span><a class="headerlink" href="#id9" title="Permalink to this image"></a></p>
</figcaption>
</figure>
<section id="supported-boards">
<h3><a class="toc-backref" href="#id11">Supported boards</a><a class="headerlink" href="#supported-boards" title="Permalink to this heading"></a></h3>
<p>Devices in the nRF91 Series are supported by the following boards in the <a class="reference external" href="https://zephyrproject.org/">Zephyr</a> open source project and in nRF Connect SDK.</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 25%" />
<col style="width: 25%" />
<col style="width: 25%" />
<col style="width: 25%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>DK or Prototype platform</p></th>
<th class="head"><p>PCA number</p></th>
<th class="head"><p>Build target</p></th>
<th class="head"><p>Documentation</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><span class="xref std std-ref">zephyr:nrf9160dk_nrf9160</span></p></td>
<td><p>PCA10090</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">nrf9160dk_nrf9160_ns</span></code></p></td>
<td><div class="line-block">
<div class="line"><a class="reference external" href="https://infocenter.nordicsemi.com/topic/ps_nrf9160/nRF9160_html5_keyfeatures.html">Product Specification</a></div>
<div class="line"><a class="reference internal" href="nrf9160_gs.html#ug-nrf9160-gs"><span class="std std-ref">Getting started</span></a></div>
<div class="line"><a class="reference external" href="https://infocenter.nordicsemi.com/topic/ug_nrf91_dk/UG/nrf91_DK/intro.html">User Guide</a></div>
</div>
</td>
</tr>
<tr class="row-odd"><td><p>Thingy91</p></td>
<td><p>PCA20035</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">thingy91_nrf9160_ns</span></code></p></td>
<td><div class="line-block">
<div class="line"><a class="reference internal" href="thingy91_gsg.html#ug-thingy91-gsg"><span class="std std-ref">Getting started</span></a></div>
<div class="line"><a class="reference external" href="https://infocenter.nordicsemi.com/topic/ug_thingy91/UG/thingy91/intro/frontpage.html">User Guide</a></div>
</div>
</td>
</tr>
</tbody>
</table>
</section>
<section id="application-mcu">
<h3><a class="toc-backref" href="#id12">Application MCU</a><a class="headerlink" href="#application-mcu" title="Permalink to this heading"></a></h3>
<p>The application core is a full-featured Arm Cortex-M33 processor including DSP instructions and FPU.
Use this core for tasks that require high performance and for application-level logic.</p>
<p>The M33 TrustZone, one of Cortex-M Security Extensions (CMSE), divides the application MCU into Secure Processing Environment (SPE) and Non-Secure Processing Environment (NSPE).
When the MCU boots, it always starts executing from the secure area.
The secure bootloader chain starts the <a class="reference internal" href="../../app_dev/tfm/index.html#ug-tfm"><span class="std std-ref">Trusted Firmware-M (TF-M)</span></a>, which configures a part of memory and peripherals to be non-secure, and then jumps to the user application located in the non-secure area.</p>
<p>For information about CMSE and the difference between the two environments, see <a class="reference internal" href="../../app_dev/board_support/index.html#app-boards-spe-nspe"><span class="std std-ref">Processing environments</span></a>.</p>
<section id="secure-bootloader-chain">
<h4>Secure bootloader chain<a class="headerlink" href="#secure-bootloader-chain" title="Permalink to this heading"></a></h4>
<p>A secure bootloader chain protects your application against running unauthorized code, and it enables you to do device firmware updates (DFU).
See <a class="reference internal" href="../../app_dev/bootloaders_and_dfu/bootloader.html#ug-bootloader"><span class="std std-ref">Secure bootloader chain</span></a> for more information.</p>
<p>A bootloader chain is optional.
Not all of the nRF9160 samples include a secure bootloader chain, but the ones that do use the <a class="reference internal" href="../../samples/bootloader/README.html#bootloader"><span class="std std-ref">nRF Secure Immutable Bootloader</span></a> sample and <span class="xref std std-doc">mcuboot:index-ncs</span>.</p>
</section>
<section id="trusted-firmware-m-tf-m">
<h4>Trusted Firmware-M (TF-M)<a class="headerlink" href="#trusted-firmware-m-tf-m" title="Permalink to this heading"></a></h4>
<p>Trusted Firmware-M provides a configurable set of software components to create a Trusted Execution Environment.
It has replaced Secure Partition Manager as the solution used by nRF Connect SDK applications and samples.
This means that when you build your application for <code class="docutils literal notranslate"><span class="pre">_ns</span></code> build targets, TF-M is automatically included in the build.
TF-M is a framework for functions and use cases beyond the scope of Secure Partition Manager.</p>
<p>For more information about the TF-M, see <a class="reference internal" href="../../app_dev/tfm/index.html#ug-tfm"><span class="std std-ref">Running applications with Trusted Firmware-M</span></a>.
See also <a class="reference internal" href="../../samples/tfm/tfm_hello_world/README.html#tfm-hello-world"><span class="std std-ref">TF-M Hello World</span></a> for a sample that demonstrates how to add TF-M to an application.</p>
</section>
<section id="application">
<h4>Application<a class="headerlink" href="#application" title="Permalink to this heading"></a></h4>
<p>The user application runs in NSPE.
Therefore, it must be built for the <code class="docutils literal notranslate"><span class="pre">nrf9160dk_nrf9160_ns</span></code> or <code class="docutils literal notranslate"><span class="pre">thingy91_nrf9160_ns</span></code> build target.</p>
<p>The application image might require other images to be present.
Some samples include the <a class="reference internal" href="../../samples/bootloader/README.html#bootloader"><span class="std std-ref">nRF Secure Immutable Bootloader</span></a> sample (<code class="xref kconfig kconfig-option docutils literal notranslate"><span class="pre">CONFIG_SECURE_BOOT</span></code>) and <span class="xref std std-doc">mcuboot:index-ncs</span> (<code class="xref kconfig kconfig-option docutils literal notranslate"><span class="pre">CONFIG_BOOTLOADER_MCUBOOT</span></code>).
Depending on the configuration, all these images can be built at the same time in a <a class="reference internal" href="../../app_dev/multi_image/index.html#ug-multi-image"><span class="std std-ref">multi-image build</span></a>.</p>
</section>
</section>
<section id="lte-modem">
<span id="id1"></span><h3><a class="toc-backref" href="#id13">LTE modem</a><a class="headerlink" href="#lte-modem" title="Permalink to this heading"></a></h3>
<p>The LTE modem handles LTE communication.
It is controlled through <a class="reference external" href="https://infocenter.nordicsemi.com/topic/ref_at_commands/REF/at_commands/intro.html">AT commands</a>.</p>
<p>The firmware for the modem is available as a precompiled binary.
You can download the firmware from the <a class="reference external" href="https://www.nordicsemi.com/Products/Low-power-cellular-IoT/nRF9160/Download#infotabs">nRF9160 product website (compatible downloads)</a>.
The zip file contains both the full firmware and patches to upgrade from one version to another.
A delta patch can only upgrade the modem firmware from one specific version to another version (for example, v1.2.1 to v1.2.2).
If you need to perform a major version update (for example, v1.2.x to v1.3.x), you need an external flash with a minimum size of 4 MB.</p>
<p>Different versions of the LTE modem firmware are available, and these versions are certified for the mobile network operators having their own certification programs.
See the <a class="reference external" href="https://infocenter.nordicsemi.com/topic/comp_matrix_nrf9160/COMP/nrf9160/nrf9160_operator_certifications.html">Mobile network operator certifications</a> for more information.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Most operators do not require certifications other than GCF or PTCRB.
For the current status of GCF and PTCRB certifications, see <a class="reference external" href="https://www.nordicsemi.com/Products/Low-power-Cellular-IoT/nRF9160-Certifications">nRF9160 certifications</a>.</p>
</div>
<p id="nrf9160-update-modem-fw">There are two ways to update the modem firmware:</p>
<dl>
<dt>Full upgrade</dt><dd><blockquote>
<div><p>You can use either a wired or a wireless connection to do a full upgrade of the modem firmware:</p>
<ul class="simple">
<li><p>When using a wired connection, you can use either the <a class="reference external" href="https://infocenter.nordicsemi.com/topic/ug_nc_programmer/UG/nrf_connect_programmer/ncp_introduction.html">nRF Connect Programmer</a>, which is part of <a class="reference external" href="https://www.nordicsemi.com/Software-and-Tools/Development-Tools/nRF-Connect-for-desktop">nRF Connect for Desktop</a>, or the <a class="reference external" href="https://infocenter.nordicsemi.com/topic/ug_pynrfjprog/UG/pynrfjprog/pynrfjprog_lpage.html">nRF pynrfjprog</a> Python package.
Both methods use the Simple Management Protocol (SMP) to provide an interface over UART, which enables the device to perform the update.</p>
<ul>
<li><p>You can use the nRF Connect Programmer to perform the update, regardless of the images that are part of the existing firmware of the device.
For example, you can update the modem on an nRF9160 DK using the instructions described in <a class="reference internal" href="nrf9160_gs.html#nrf9160-gs-updating-fw-modem"><span class="std std-ref">Updating the modem firmware</span></a> in the nRF9160 DK Getting Started guide.</p></li>
<li><p>You can also use the nRF pynrfjprog Python package to perform the update, as long as a custom application image integrating the <code class="docutils literal notranslate"><span class="pre">lib_fmfu_mgmt</span></code> subsystem is included in the existing firmware of the device.
See the <a class="reference internal" href="../../samples/nrf9160/fmfu_smp_svr/README.html#fmfu-smp-svr-sample"><span class="std std-ref">nRF9160: Full modem firmware update using SMP Server</span></a> sample for an example on how to integrate the <a class="reference internal" href="../../libraries/dfu/fmfu_mgmt.html#lib-fmfu-mgmt"><span class="std std-ref">subsystem</span></a> in your custom application.</p></li>
</ul>
</li>
<li><p>When using a wireless connection, the upgrade is applied over-the-air (OTA).
See <a class="reference internal" href="#nrf9160-fota"><span class="std std-ref">FOTA upgrades</span></a> for more information.</p></li>
</ul>
</div></blockquote>
<p>See <span class="xref std std-ref">nrfxlib:nrf_modem_bootloader</span> for more information on the full firmware updates of modem using <span class="xref std std-ref">nrfxlib:nrf_modem</span>.</p>
</dd>
<dt>Delta patches</dt><dd><p>Delta patches are upgrades that contain only the difference from the last version.
See <span class="xref std std-ref">nrfxlib:nrf_modem_delta_dfu</span> for more information on delta firmware updates of modem using <span class="xref std std-ref">nrfxlib:nrf_modem</span>.
When applying a delta patch, you must therefore ensure that this patch works with the current firmware version on your device.
Delta patches are applied as firmware over-the-air (FOTA) upgrades.
See <a class="reference internal" href="#nrf9160-fota"><span class="std std-ref">FOTA upgrades</span></a> for more information.</p>
</dd>
</dl>
</section>
<section id="modem-library">
<h3><a class="toc-backref" href="#id14">Modem library</a><a class="headerlink" href="#modem-library" title="Permalink to this heading"></a></h3>
<p>The nRF Connect SDK applications for the nRF9160-based devices that communicate with the nRF9160 modem firmware must include the <span class="xref std std-ref">nrfxlib:nrf_modem</span>.
The <span class="xref std std-ref">nrfxlib:nrf_modem</span> is released as an OS-independent binary library in the <span class="xref std std-ref">nrfxlib</span> repository and it is integrated into nRF Connect SDK through an integration layer, <code class="docutils literal notranslate"><span class="pre">nrf_modem_lib</span></code>.</p>
<p>The Modem library integration layer fulfills the integration requirements of the Modem library in nRF Connect SDK.
For more information on the integration, see <a class="reference internal" href="../../libraries/modem/nrf_modem_lib.html#nrf-modem-lib-readme"><span class="std std-ref">Modem library integration layer</span></a>.</p>
<section id="modem-trace">
<span id="id2"></span><h4>Modem trace<a class="headerlink" href="#modem-trace" title="Permalink to this heading"></a></h4>
<p>The modem traces of the nRF9160 modem can be captured using the nRF Connect Trace Collector.
For more information on how to collect traces using nRF Connect Trace Collector, see the <a class="reference external" href="https://infocenter.nordicsemi.com/topic/ug_trace_collector/UG/trace_collector/intro.html">Trace Collector</a> documentation.
When the <code class="xref kconfig kconfig-option docutils literal notranslate"><span class="pre">CONFIG_NRF_MODEM_LIB_TRACE</span></code> Kconfig option is enabled, the modem traces are enabled in the modem and are forwarded to the <a class="reference internal" href="../../libraries/modem/nrf_modem_lib.html#modem-trace-module"><span class="std std-ref">Modem trace module</span></a>.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>For the <a class="reference internal" href="../../applications/serial_lte_modem/README.html#serial-lte-modem"><span class="std std-ref">nRF9160: Serial LTE modem</span></a> application and the <a class="reference internal" href="../../samples/nrf9160/at_client/README.html#at-client-sample"><span class="std std-ref">nRF9160: AT Client</span></a> sample, you must also run <code class="docutils literal notranslate"><span class="pre">AT%xmodemtrace=1,2</span></code> to manually activate the predefined trace set.</p>
</div>
<p>You can set the trace level using the AT command <code class="docutils literal notranslate"><span class="pre">%XMODEMTRACE</span></code>.
See <a class="reference external" href="https://infocenter.nordicsemi.com/topic/ref_at_commands/REF/at_commands/mob_termination_ctrl_status/xmodemtrace.html">modem trace AT command documentation</a> for more information.</p>
<p>If the existing trace backends are not sufficient, it is possible to implement custom trace backends.
You can implement your own custom modem traces to store the traces on an external flash.
You can then upload the traces to the cloud for remote analysis when needed.
For more information on the implementation of a custom trace backend, see <a class="reference internal" href="../../libraries/modem/nrf_modem_lib.html#adding-custom-modem-trace-backends"><span class="std std-ref">Adding custom trace backends</span></a>.</p>
</section>
</section>
<section id="fota-upgrades">
<span id="nrf9160-fota"></span><h3><a class="toc-backref" href="#id15">FOTA upgrades</a><a class="headerlink" href="#fota-upgrades" title="Permalink to this heading"></a></h3>
<p>You can update the firmware of the device over the air, thus without a wired connection.
Such an update is called a FOTA (firmware over-the-air) update.
FOTA upgrades can be used to apply delta patches to the <a class="reference internal" href="#lte-modem"><span class="std std-ref">LTE modem</span></a> firmware, full <a class="reference internal" href="#lte-modem"><span class="std std-ref">LTE modem</span></a> firmware upgrades, and to replace the upgradable bootloader or the application.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Even though the Trusted Firmware-M and the application are two individually compiled components, they are treated as a single binary blob in the context of firmware upgrades.
Any reference to the application in this section is meant to indicate the application including the Trusted Firmware-M.</p>
</div>
<p>To perform a FOTA upgrade, complete the following steps:</p>
<ol class="arabic">
<li><dl>
<dt>Make sure that your application supports FOTA upgrades.</dt><dd><p>To download and apply FOTA upgrades, your application must use the <a class="reference internal" href="../../libraries/networking/fota_download.html#lib-fota-download"><span class="std std-ref">FOTA download</span></a> library.
This library deduces the type of upgrade by inspecting the header of the firmware and invokes the <a class="reference internal" href="../../libraries/dfu/dfu_target.html#lib-dfu-target"><span class="std std-ref">DFU target</span></a> library to apply the firmware upgrade.
In its default configuration, the DFU target library is set to support all the types of FOTA upgrades except full modem firmware upgrades, but you can freely enable or disable the support for specific targets.</p>
<p>In addition, the following requirements apply:</p>
<ul class="simple">
<li><p>To upgrade the application, you must use <span class="xref std std-doc">mcuboot:index-ncs</span> as the upgradable bootloader (<code class="xref kconfig kconfig-option docutils literal notranslate"><span class="pre">CONFIG_BOOTLOADER_MCUBOOT</span></code> must be enabled).</p></li>
<li><p>If you want to upgrade the upgradable bootloader, the <a class="reference internal" href="../../samples/bootloader/README.html#bootloader"><span class="std std-ref">nRF Secure Immutable Bootloader</span></a> must be used (<code class="xref kconfig kconfig-option docutils literal notranslate"><span class="pre">CONFIG_SECURE_BOOT</span></code>).</p></li>
<li><p>If you want to upgrade the modem firmware through modem delta updates, neither MCUboot nor the immutable bootloader are required, because the modem firmware upgrade is handled by the modem itself.</p></li>
<li><p>If you want to perform a full modem firmware upgrade, an external flash memory with minimum 4 MB is required.</p></li>
</ul>
</dd>
</dl>
</li>
<li><p>Create a binary file that contains the new image.</p>
<blockquote>
<div><div class="admonition note">
<p class="admonition-title">Note</p>
<p>This step does not apply for upgrades of the modem firmware.
You can download delta patches and full binaries of the modem firmware from the <a class="reference external" href="https://www.nordicsemi.com/Products/Low-power-cellular-IoT/nRF9160/Download#infotabs">nRF9160 product website (compatible downloads)</a>.</p>
</div>
<p>To create a binary file for an application update, build the application with the <code class="xref kconfig kconfig-option docutils literal notranslate"><span class="pre">CONFIG_BOOTLOADER_MCUBOOT</span></code> option enabled.
The <code class="file docutils literal notranslate"><span class="pre">app_update.bin</span></code> file is the file that should be uploaded to the server.</p>
<p>To create binary files for a bootloader upgrade, make sure that <code class="xref kconfig kconfig-option docutils literal notranslate"><span class="pre">CONFIG_SECURE_BOOT</span></code> and <code class="xref kconfig kconfig-option docutils literal notranslate"><span class="pre">CONFIG_BUILD_S1_VARIANT</span></code> are enabled and build MCUboot as usual.
The build will create a binary file for each variant of the upgradable bootloader, one for each bootloader slot.
See <a class="reference internal" href="../../app_dev/bootloaders_and_dfu/bootloader.html#upgradable-bootloader"><span class="std std-ref">Second-stage Upgradable bootloader</span></a> for more information.</p>
</div></blockquote>
</li>
<li><dl class="simple">
<dt>Make the binary file (or files) available for download.</dt><dd><p>Upload the serialized <code class="file docutils literal notranslate"><span class="pre">.cbor</span></code> binary file or files to a web server that is compatible with the <a class="reference internal" href="../../libraries/networking/download_client.html#lib-download-client"><span class="std std-ref">Download client</span></a> library.</p>
</dd>
</dl>
</li>
</ol>
<p>The full FOTA procedure depends on where the binary files are hosted for download.</p>
<section id="fota-upgrades-using-nrf-cloud">
<h4>FOTA upgrades using nRF Cloud<a class="headerlink" href="#fota-upgrades-using-nrf-cloud" title="Permalink to this heading"></a></h4>
<p>FOTA upgrades can be managed through a comprehensive management portal on <a class="reference external" href="https://nrfcloud.com/">nRF Cloud</a>, either fully hosted on nRF Cloud or accessible from a customer cloud using the <a class="reference external" href="https://docs.nrfcloud.com/APIs/REST/RESTIntro/">nRF Cloud REST API</a>.
If you are using nRF Cloud, see the <a class="reference external" href="https://docs.nrfcloud.com/Devices/FirmwareUpdate/FOTATutorial/">nRF Cloud Getting Started FOTA documentation</a> for instructions.</p>
<p>Currently, delta modem firmware FOTA files are available in nRF Cloud under <span class="guilabel">Firmware Updates</span> in the <span class="guilabel">Device Management</span> tab on the left.
If you intend to obtain FOTA files from nRF Cloud, see the additional requirements in <a class="reference internal" href="../../libraries/networking/nrf_cloud.html#lib-nrf-cloud-fota"><span class="std std-ref">Firmware over-the-air (FOTA) updates</span></a>.</p>
<p>You can upload custom application binaries to nRF Cloud for application FOTA updates.
After <a class="reference internal" href="nrf9160_gs.html#nrf9160-gs-connecting-dk-to-cloud"><span class="std std-ref">Connecting the nRF9160 DK to nRF Cloud</span></a>, you can upload the files to your nRF Cloud account as a bundle after navigating to <span class="guilabel">Device Management</span> on the left and clicking <span class="guilabel">Firmware Updates</span>.</p>
</section>
<section id="fota-upgrades-using-other-cloud-services">
<h4>FOTA upgrades using other cloud services<a class="headerlink" href="#fota-upgrades-using-other-cloud-services" title="Permalink to this heading"></a></h4>
<p>FOTA upgrades can alternatively be hosted from a customer-developed cloud services such as solutions based on AWS and Azure.
If you are uploading the files to an Amazon Web Services Simple Storage Service (AWS S3) bucket, see the <a class="reference internal" href="../../libraries/networking/aws_fota.html#lib-aws-fota"><span class="std std-ref">AWS FOTA</span></a> documentation for instructions.
Samples are provided in nRF Connect SDK for AWS (<a class="reference internal" href="../../samples/nrf9160/aws_iot/README.html#aws-iot"><span class="std std-ref">nRF9160: AWS IoT</span></a> sample) and Azure (<a class="reference internal" href="../../samples/nrf9160/azure_fota/README.html#azure-fota-sample"><span class="std std-ref">nRF9160: Azure FOTA</span></a> sample).</p>
<p>Your application must be able to retrieve the host and file name for the binary file.
See the <a class="reference internal" href="../../libraries/networking/fota_download.html#lib-fota-download"><span class="std std-ref">FOTA download</span></a> library documentation for information about the format of this information, especially when providing two files for a bootloader upgrade.
You can hardcode the information in the application, or you can use a functionality like AWS jobs to provide the URL dynamically.</p>
</section>
<section id="samples-and-applications-implementing-fota">
<h4>Samples and applications implementing FOTA<a class="headerlink" href="#samples-and-applications-implementing-fota" title="Permalink to this heading"></a></h4>
<ul class="simple">
<li><p><a class="reference internal" href="../../samples/nrf9160/http_update/full_modem_update/README.html#http-full-modem-update-sample"><span class="std std-ref">nRF9160: HTTP full modem update</span></a> sample - performs a full firmware OTA update of the modem.</p></li>
<li><p><a class="reference internal" href="../../samples/nrf9160/http_update/modem_delta_update/README.html#http-modem-delta-update-sample"><span class="std std-ref">nRF9160: HTTP modem delta update</span></a> sample - performs a delta OTA update of the modem firmware.</p></li>
<li><p><a class="reference internal" href="../../samples/nrf9160/http_update/application_update/README.html#http-application-update-sample"><span class="std std-ref">nRF9160: HTTP application update</span></a> sample - performs a basic application FOTA update.</p></li>
<li><p><a class="reference internal" href="../../samples/nrf9160/aws_iot/README.html#aws-iot"><span class="std std-ref">nRF9160: AWS IoT</span></a> sample - performs a FOTA update using MQTT and HTTP, where the firmware download is triggered through an AWS IoT job.</p></li>
<li><p><a class="reference internal" href="../../samples/nrf9160/azure_fota/README.html#azure-fota-sample"><span class="std std-ref">nRF9160: Azure FOTA</span></a> sample - performs a FOTA update from the Azure IoT Hub.</p></li>
<li><p><a class="reference internal" href="../../applications/asset_tracker_v2/README.html#asset-tracker-v2"><span class="std std-ref">nRF9160: Asset Tracker v2</span></a> application - performs FOTA updates of the application, modem (delta), and boot (if enabled). It also supports nRF Cloud FOTA as well as AWS or Azure FOTA. Only one must be configured at a time.</p></li>
</ul>
</section>
</section>
</section>
<section id="gnss">
<span id="nrf9160-ug-gnss"></span><h2><a class="toc-backref" href="#id16">GNSS</a><a class="headerlink" href="#gnss" title="Permalink to this heading"></a></h2>
<p>An nRF9160-based device is a highly versatile device that integrates both cellular and GNSS functionality.
Note that GNSS functionality is only available on the SICA variant and not on the SIAA or SIBA variants.
See <a class="reference external" href="https://infocenter.nordicsemi.com/topic/comp_matrix_nrf9160/COMP/nrf9160/nrf9160_ic_revision_overview.html">nRF9160 SiP revisions and variants</a> for more information.</p>
<p>There are many GNSS constellations (GPS, BeiDou, Galileo, GLONASS) available but GPS is the most mature technology.
An nRF9160-based device supports both GPS L1 C/A (Coarse/Acquisition) and QZSS L1C/A at 1575.42 MHz.
This frequency band is ideal for penetrating through layers of the atmosphere (troposphere and ionosphere) and suitable for various weather conditions.
GNSS is designed to be used with a line of sight to the sky.
Therefore, the performance is not ideal when there are obstructions overhead or if the receiver is indoors.</p>
<p>The GNSS operation in an nRF9160-based device is time-multiplexed with the LTE modem.
Therefore, the LTE modem must either be completely deactivated or in <a class="reference external" href="https://en.wikipedia.org/wiki/Radio_Resource_Control">RRC idle mode</a> or <a class="reference external" href="https://www.sharetechnote.com/html/Handbook_LTE_PSM.html">Power Saving Mode (PSM)</a> when using the GNSS receiver.
See the <a class="reference external" href="https://infocenter.nordicsemi.com/index.jsp?topic=%2Fps_nrf9160%2Fgps.html&amp;cp=2_0_0_7">nRF9160 GPS receiver Specification</a> for more information.
Customers who are developing their own hardware with the nRF9160 are strongly recommended to use the <a class="reference external" href="https://infocenter.nordicsemi.com/topic/nwp_033/WP/nwp_033/nwp_033_intro.html">nRF9160 Antenna and RF Interface Guidelines</a> as a reference.
See <a class="reference external" href="https://infocenter.nordicsemi.com/topic/nwp_033/WP/nwp_033/nwp_033_gps.html">GPS interface and antenna</a> for more details on GNSS interface and antenna.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Starting from nRF Connect SDK v1.6.0 (Modem library v1.2.0), the GNSS socket is deprecated and replaced with the <span class="xref std std-ref">GNSS interface</span>.</p>
</div>
<section id="obtaining-a-fix">
<h3><a class="toc-backref" href="#id17">Obtaining a fix</a><a class="headerlink" href="#obtaining-a-fix" title="Permalink to this heading"></a></h3>
<p>GNSS provides lots of useful information including 3D location (latitude, longitude, altitude), time, and velocity.</p>
<p>The time to obtain a fix (also referred to as Time to First Fix (TTFF)) will depend on the time when the GNSS receiver was last turned on and used.</p>
<p>Following are the various GNSS start modes:</p>
<ul class="simple">
<li><p>Cold start - GNSS starts after being powered off for a long time with zero knowledge of the time, current location, or the satellite orbits.</p></li>
<li><p>Warm start - GNSS has some coarse knowledge of the time, location, or satellite orbits from a previous fix that is more than around 37 minutes old.</p></li>
<li><p>Hot start - GNSS fix is requested within an interval of around 37 minutes from the last successful fix.</p></li>
</ul>
<p>Each satellite transmits its own <a class="reference external" href="https://en.wikipedia.org/wiki/Ephemeris">Ephemeris</a> data and common <a class="reference external" href="https://en.wikipedia.org/wiki/GPS_signals#Almanac">Almanac</a> data:</p>
<ul class="simple">
<li><p>Ephemeris data - Provides information about the orbit of the satellite transmitting it. This data is valid for four hours and becomes inaccurate after that.</p></li>
<li><p>Almanac data - Provides coarse orbit and status information for each satellite in the constellation. Each satellite broadcasts Almanac data for all satellites.</p></li>
</ul>
<p>The data transmission occurs at a slow data rate of 50 bps.
The orbital data can be received faster using A-GPS.</p>
<p>Due to the clock bias on the receiver, there are four unknowns when looking for a GNSS fix - latitude, longitude, altitude, and clock bias.
This results in solving an equation system with four unknowns, and therefore a minimum of four satellites must be tracked to acquire a fix.</p>
</section>
<section id="enhancements-to-gnss">
<h3><a class="toc-backref" href="#id18">Enhancements to GNSS</a><a class="headerlink" href="#enhancements-to-gnss" title="Permalink to this heading"></a></h3>
<p>When GNSS has not been in use for a while or if the device is in relatively weak signaling conditions, it might take longer to acquire a fix.
To improve this, Nordic Semiconductor has implemented the following methods for acquiring a fix in a shorter time:</p>
<ul class="simple">
<li><p>A-GPS or P-GPS or a combination of both</p></li>
<li><p>Low accuracy mode</p></li>
</ul>
<section id="assisted-gps-a-gps">
<h4>Assisted GPS (A-GPS)<a class="headerlink" href="#assisted-gps-a-gps" title="Permalink to this heading"></a></h4>
<p>A-GPS is commonly used to improve the Time to first fix (TTFF) by utilizing a connection (for example, over cellular) to the internet to retrieve the Almanac and Ephemeris data.
A connection to an internet server that has the Almanac and Ephemeris data is several times quicker than using the slow 50 bps data link to the GPS satellites.
There are many options to retrieve this A-GPS data.
Two such options are using <a class="reference external" href="https://nrfcloud.com/">nRF Cloud</a> and SUPL.
nRF Connect SDK provides example implementations for both these options.
The A-GPS solution available through nRF Cloud has been optimized for embedded devices to reduce protocol overhead and data usage.
This, in turn, results in the download of reduced amount of data, thereby reducing data transfer time, power consumption, and data costs.
See <span class="xref std std-ref">nrfxlib:gnss_int_agps_data</span> for more information about the retrieval of A-GPS data.</p>
</section>
<section id="predicted-gps-p-gps">
<h4>Predicted GPS (P-GPS)<a class="headerlink" href="#predicted-gps-p-gps" title="Permalink to this heading"></a></h4>
<p>P-GPS is a form of assistance, where the device can download up to two weeks of predicted satellite Ephemerides data.
Normally, devices connect to the cellular network approximately every two hours for up-to-date satellite Ephemeris information or they download the Ephemeris data from the acquired satellites.
P-GPS enables devices to determine the exact orbital location of the satellite without connecting to the network every two hours with a trade-off of reduced accuracy of the calculated position over time.
Note that P-GPS requires more memory compared to regular A-GPS.</p>
<p>Also, note that due to satellite clock inaccuracies, not all functional satellites will have Ephemerides data valid for two weeks in the downloaded P-GPS package.
This means that the number of satellites having valid predicted Ephemerides reduces in number roughly after ten days.
Hence, the GNSS module needs to download the Ephemeris data from the satellite broadcast if no predicted Ephemeris is found for that satellite to be able to use the satellite.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>For more information on the various trade-offs of using A-GPS compared to using P-GPS, see the <a class="reference external" href="https://docs.nrfcloud.com/LocationServices/LocationServicesOverview/">nRF Cloud Location Services documentation</a>.</p>
</div>
</section>
<section id="nrf-cloud-a-gps-compared-with-supl-library">
<h4>nRF Cloud A-GPS compared with SUPL library<a class="headerlink" href="#nrf-cloud-a-gps-compared-with-supl-library" title="Permalink to this heading"></a></h4>
<p>The <a class="reference internal" href="../../libraries/networking/nrf_cloud_agps.html#lib-nrf-cloud-agps"><span class="std std-ref">nRF Cloud A-GPS</span></a> library is more efficient to use when compared to the <a class="reference internal" href="../../libraries/others/supl_os_client.html#supl-client"><span class="std std-ref">SUPL</span></a> library, and the latter takes a bit more memory on the device.
Another advantage of nRF Cloud A-GPS library is that the data is encrypted whereas SUPL uses plain socket.
Also, no licenses are required from external vendors to use nRF Cloud A-GPS, whereas for commercial use of SUPL, you must obtain a license.
The <a class="reference internal" href="../../libraries/networking/nrf_cloud_agps.html#lib-nrf-cloud-agps"><span class="std std-ref">nRF Cloud A-GPS</span></a> library is also highly integrated into <a class="reference external" href="https://www.nordicsemi.com/Products/Cloud-services">Nordic Semiconductor’s IoT cloud platform</a>.</p>
</section>
<section id="low-accuracy-mode">
<h4>Low Accuracy Mode<a class="headerlink" href="#low-accuracy-mode" title="Permalink to this heading"></a></h4>
<p>Low accuracy mode allows the GNSS receiver to accept a looser criterion for a fix with four or more satellites or by using a reference altitude to allow for a fix using only three satellites.
This has a tradeoff of reduced accuracy.
This reference altitude can be from a recent valid normal fix or it can be artificially injected.
See <span class="xref std std-ref">nrfxlib:gnss_int_low_accuracy_mode</span> for more information about low accuracy mode and its usage.</p>
</section>
</section>
<section id="samples-using-gnss-in-ncs">
<h3><a class="toc-backref" href="#id19">Samples using GNSS in nRF Connect SDK</a><a class="headerlink" href="#samples-using-gnss-in-ncs" title="Permalink to this heading"></a></h3>
<p>There are many examples in nRF Connect SDK that use GNSS.
Following is a list of the samples and applications with some information about the GNSS usage:</p>
<ul class="simple">
<li><p><a class="reference internal" href="../../applications/asset_tracker_v2/README.html#asset-tracker-v2"><span class="std std-ref">nRF9160: Asset Tracker v2</span></a> application - Uses nRF Cloud for A-GPS or P-GPS or a combination of both. The application obtains GNSS fixes and transmits them to nRF Cloud along with sensor data.</p></li>
<li><p><a class="reference internal" href="../../applications/serial_lte_modem/README.html#serial-lte-modem"><span class="std std-ref">nRF9160: Serial LTE modem</span></a> application - Uses AT commands to start and stop GNSS and has support for nRF Cloud A-GPS and P-GPS. The application displays tracking and GNSS fix information in the serial console.</p></li>
<li><p><a class="reference internal" href="../../samples/nrf9160/gnss/README.html#gnss-sample"><span class="std std-ref">nRF9160: GNSS</span></a> sample - Does not use assistance by default but can be configured to use nRF Cloud A-GPS or P-GPS or a combination of both. The sample displays tracking and fix information as well as NMEA strings in the serial console.</p></li>
</ul>
</section>
<section id="concurrent-gnss-and-lte">
<span id="nrf9160-gps-lte"></span><h3><a class="toc-backref" href="#id20">Concurrent GNSS and LTE</a><a class="headerlink" href="#concurrent-gnss-and-lte" title="Permalink to this heading"></a></h3>
<p>An nRF9160-based device supports GNSS in LTE-M and NB-IoT.
Concurrent operation of GNSS with optional power-saving features, such as extended Discontinuous Reception (eDRX) and Power Saving Mode (PSM), is also supported, and recommended.</p>
<p>The following figure shows how the data transfer occurs in an nRF9160-based device with power-saving in place.</p>
<figure class="align-default">
<img alt="Power consumption" src="../../_images/power_consumption.png" />
</figure>
<p>See <a class="reference external" href="https://www.nordicsemi.com/Products/Low-power-cellular-IoT/What-is-cellular-IoT#energy_efficiency">Energy efficiency</a> for more information.</p>
<p>Asset Tracker enables the concurrent working of GNSS and LTE in eDRX and PSM modes when the device is in <a class="reference external" href="https://en.wikipedia.org/wiki/Radio_Resource_Control">RRC idle mode</a>.
The time between the transition of a device from RRC connected mode (data transfer mode) to RRC idle mode is dependent on the network.
Typically, the time ranges between 5 seconds to 70 seconds after the last data transfer on LTE.
Sensor and GNSS data are sent to the cloud only during the data transfer phase.</p>
</section>
</section>
<section id="band-lock">
<span id="nrf9160-ug-band-lock"></span><h2><a class="toc-backref" href="#id21">Band lock</a><a class="headerlink" href="#band-lock" title="Permalink to this heading"></a></h2>
<p>The band lock is a functionality of the application that lets you send an AT command to the modem instructing it to operate only on specific bands.
The band lock is handled by the LTE Link Control driver.
By default, the functionality is disabled in the driver’s Kconfig file.</p>
<p>The modem can operate in the following E-UTRA Bands: 1, 2, 3, 4, 5, 8, 12, 13, 17, 18, 19, 20, 25, 26, 28, and 66.
To check which bands are supported for a particular modem firmware version, see the <a class="reference external" href="https://www.nordicsemi.com/Products/Low-power-cellular-IoT/nRF9160/Download#infotabs">nRF9160 product website (compatible downloads)</a>.</p>
<p>You can use the band lock to restrict modem operation to a subset of the supported bands, which might improve the performance of your application.
To check which bands are certified in your region, visit <a class="reference external" href="https://www.nordicsemi.com/Products/Low-power-Cellular-IoT/nRF9160-Certifications">nRF9160 Certifications</a>.</p>
<p>To set the LTE band lock, enable the <a class="reference internal" href="../../libraries/modem/lte_lc.html#lte-lc-readme"><span class="std std-ref">LTE link controller</span></a> library in your project configuration file <code class="file docutils literal notranslate"><span class="pre">prj.conf</span></code>, by setting the Kconfig option <code class="xref kconfig kconfig-option docutils literal notranslate"><span class="pre">CONFIG_LTE_LINK_CONTROL</span></code>  to <code class="docutils literal notranslate"><span class="pre">y</span></code>.</p>
<p>Then, enable the LTE band lock feature and the band lock mask in the configuration file of your project, as follows:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">CONFIG_LTE_LOCK_BANDS</span><span class="o">=</span><span class="n">y</span>
<span class="n">CONFIG_LTE_LOCK_BAND_MASK</span><span class="o">=</span><span class="s2">&quot;10000001000000001100&quot;</span>
</pre></div>
</div>
<p>The band lock mask allows you to set the bands on which you want the modem to operate.
Each bit in the <code class="xref kconfig kconfig-option docutils literal notranslate"><span class="pre">CONFIG_LTE_LOCK_BAND_MASK</span></code> option represents one band.
The maximum length of the string is 88 characters (bit string, 88 bits).</p>
<p>The band lock is a non-volatile setting that must be set before activating the modem.
It disappears when the modem is reset.
To prevent this, you can set the modem in <em>power off</em> mode, by either:</p>
<ul class="simple">
<li><p>Sending the AT command <code class="docutils literal notranslate"><span class="pre">AT+CFUN=0</span></code> directly.</p></li>
<li><p>Calling the <a class="reference internal" href="../../libraries/modem/lte_lc.html#c.lte_lc_power_off" title="lte_lc_power_off"><code class="xref c c-func docutils literal notranslate"><span class="pre">lte_lc_power_off()</span></code></a> function while the <em>LTE Link Control Library</em> is enabled.</p></li>
</ul>
<p>Both these options save the configurations and historical data in the Non-Volatile Storage before powering off the modem.</p>
<p>As a recommendation, turn off the band lock after the connection is established and let the modem use the historical connection data to optimize the network search, in case the device is disconnected or moved.</p>
<p>For more detailed information, see the <a class="reference external" href="https://infocenter.nordicsemi.com/topic/ref_at_commands/REF/at_commands/mob_termination_ctrl_status/xbandlock.html">band lock section in the AT Commands reference document</a>.</p>
</section>
<section id="network-mode">
<span id="nrf9160-ug-network-mode"></span><h2><a class="toc-backref" href="#id22">Network mode</a><a class="headerlink" href="#network-mode" title="Permalink to this heading"></a></h2>
<p>The modem supports LTE-M (Cat-M1) and Narrowband Internet of Things (NB-IoT or LTE Cat-NB).
By default, the modem starts in LTE-M mode.
However, this is highly configurable.</p>
<p>When using the LTE Link Control driver, you can select LTE-M with <code class="xref kconfig kconfig-option docutils literal notranslate"><span class="pre">CONFIG_LTE_NETWORK_MODE_LTE_M</span></code> or NB-IoT with <code class="xref kconfig kconfig-option docutils literal notranslate"><span class="pre">CONFIG_LTE_NETWORK_MODE_NBIOT</span></code>.</p>
<p>To start in NB-IoT mode without the driver, send the following command before starting the modem protocols (by using <code class="docutils literal notranslate"><span class="pre">AT+CFUN=1</span></code>):</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">AT</span><span class="o">%</span><span class="n">XSYSTEMMODE</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span>
</pre></div>
</div>
<p>To change the mode at runtime, set the modem to LTE RF OFF state before reconfiguring the mode, then set it back to normal operating mode:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">AT</span><span class="o">+</span><span class="n">CFUN</span><span class="o">=</span><span class="mi">4</span>
<span class="n">AT</span><span class="o">%</span><span class="n">XSYSTEMMODE</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span>
<span class="n">AT</span><span class="o">+</span><span class="n">CFUN</span><span class="o">=</span><span class="mi">1</span>
</pre></div>
</div>
<p>If the modem is shut down gracefully before the next boot (by using <code class="docutils literal notranslate"><span class="pre">AT+CFUN=0</span></code>), it keeps the current setting.</p>
<p>For more detailed information, see the <a class="reference external" href="https://infocenter.nordicsemi.com/topic/ref_at_commands/REF/at_commands/mob_termination_ctrl_status/xsystemmode.html">system mode section in the AT Commands reference document</a>.</p>
</section>
</section>


           </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="nrf9160_gs.html" class="btn btn-neutral float-right" title="Getting started with nRF9160 DK" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="../../nrf91.html" class="btn btn-neutral" title="Working with nRF91 Series" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">

<table>
<tr>
<td>
    <p>
        &copy; Copyright 2019-2023, Nordic Semiconductor.
      Last updated on Mar 20, 2023.

    </p>
</td>
<td id="nordiclogo">
  <a href="https://www.nordicsemi.com/"><img src="../../_static/images/nordic-logo.png" border="0"/></a>
</td>
</tr>
</table>
  </div> 


</footer>

<div id="scroll-container">
  <button type="button" id="scroll-btn" class="btn">
    <svg xmlns="http://www.w3.org/2000/svg" height="24" viewBox="0 0 24 24" width="24"><path d="M0 0h24v24H0z" fill="none"/><path d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z" fill="#fff"/></svg>
  </button>
</div>

<script>
  const scrollBtn = document.querySelector("#scroll-btn");

  document.addEventListener("scroll", () => {
    if (window.scrollY > 400) {
          scrollBtn.style.visibility = "visible";
      } else {
          scrollBtn.style.visibility = "hidden";
      }
  });

  scrollBtn.addEventListener("click", () => {
      window.scrollTo({ top: 0, behavior: "smooth" });
  });
</script>
        </div>
      </div>
    </section>
  </div>
  
  <div class="rst-versions" data-toggle="rst-versions" role="note" aria-label="versions">
    <span class="rst-current-version" data-toggle="rst-current-version">
      <span class="fa fa-book"> nRF Connect SDK</span>
       <span class="fa fa-caret-down"></span>
    </span>
    <div class="rst-other-versions">
      
      <div class="rst-other-version ncs">
        <a href="../../../nrf/index.html">nRF Connect SDK</a>
      </div>
      
      <div class="rst-other-version nrfx">
        <a href="../../../nrfx/index.html">nrfx</a>
      </div>
      
      <div class="rst-other-version nrfxlib">
        <a href="../../../nrfxlib/README.html">nrfxlib</a>
      </div>
      
      <div class="rst-other-version zephyr">
        <a href="../../../zephyr/index.html">Zephyr Project</a>
      </div>
      
      <div class="rst-other-version mcuboot">
        <a href="../../../mcuboot/wrapper.html">MCUboot</a>
      </div>
      
      <div class="rst-other-version tfm">
        <a href="../../../tfm/index.html">Trusted Firmware-M</a>
      </div>
      
      <div class="rst-other-version matter">
        <a href="../../../matter/index.html">Matter</a>
      </div>
      
      <div class="rst-other-version kconfig">
        <a href="../../../kconfig/index.html">Kconfig Reference</a>
      </div>
    </div>
  </div><script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>