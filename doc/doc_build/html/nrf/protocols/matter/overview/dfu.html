<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Matter OTA &mdash; nRF Connect SDK 2.3.99 documentation</title>
      <link rel="stylesheet" href="../../../_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="../../../_static/css/nordic.css" type="text/css" />
      <link rel="stylesheet" href="../../../_static/togglebutton.css" type="text/css" />
      <link rel="stylesheet" href="../../../_static/css/nrf.css" type="text/css" />
      <link rel="stylesheet" href="../../../_static/tabs.css" type="text/css" /> 
  <!--[if lt IE 9]>
    <script src="../../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="../../../" id="documentation_options" src="../../../_static/documentation_options.js"></script>
        <script src="../../../_static/jquery.js"></script>
        <script src="../../../_static/underscore.js"></script>
        <script src="../../../_static/_sphinx_javascript_frameworks_compat.js"></script>
        <script src="../../../_static/doctools.js"></script>
        <script src="../../../_static/sphinx_highlight.js"></script>
        <script src="https://www.googletagmanager.com/gtag/js?id=G-ZPVZRKFQJR"></script>
        <script src="../../../_static/js/ga-tracker.js"></script>
        <script data-culture="EN" id="CookieConsent" type="text/javascript" src="https://policy.app.cookieinformation.com/uc.js"></script>
        <script>let toggleHintShow = 'Click to show';</script>
        <script>let toggleHintHide = 'Click to hide';</script>
        <script>let toggleOpenOnPrint = 'true';</script>
        <script src="../../../_static/togglebutton.js"></script>
        <script>var togglebuttonSelector = '.toggle, .admonition.dropdown';</script>
    <script src="../../../_static/js/theme.js"></script>
<script
  type="text/javascript"
  src="../../../_static/js/ncs.js"
></script>
<script src="../../../_static/js/bootstrap.bundle.min.js"></script>

    <link rel="index" title="Index" href="../../../genindex.html" />
    <link rel="search" title="Search" href="../../../search.html" />
    <link rel="next" title="Matter development model and compatible ecosystems" href="dev_model.html" />
    <link rel="prev" title="Matter multiple fabrics feature" href="multi_fabrics.html" />
<link
  href="../../../_static/css/bootstrap.min.css"
  rel="stylesheet"
/>
<link
  rel="shortcut icon"
  href="../../../_static/images/favicon.ico"
/>

</head>

<body class="wy-body-for-nav">
<div class="announcement"></div>
<div class="d-print-none ncs-header">
  <div class="container-xl ncs-header-top">
    <div class="row h-100">
      <div class="d-none d-md-block col-2">
        <div class="bg-white py-4 px-3 ml-2 ncs-header-logo">
          <img
            class="ncs-header-logo"
            src="../../../_static/images/nordic-logo.png"
            alt=""
          />
        </div>
      </div>
      <div
        class="col-8 col-md-7 pl-md-4 d-flex align-self-center justify-content-center"
      >
        <form class="w-75" action="../../../search.html" method="get">
          <div class="form-group">
            <input
              type="text"
              name="q"
              class="ncs-search-input form-control"
              placeholder="Search all docs..."
            />
          </div>
        </form>
      </div>
      <div class="col-4 col-md-3 d-md-block p-3 text-end">
        <div class="dropdown">
          <button
            class="btn dropdown-toggle ncs-btn-versions"
            type="button"
            id="dropdownMenuButton1"
            data-bs-toggle="dropdown"
            aria-expanded="false"
          >
            <span class="d-none d-md-inline">nRF Connect SDK</span>
            <span id="ncsversion" class="d-inline"></span>
          </button>
          <div class="dropdown-menu" aria-labelledby="dropdownMenuButton"></div>
        </div>
      </div>
    </div>
  </div>
  <div class="ncs-header-nav">
    <div class="container-xl">
      <div class="row">
        <div class="col col-12 d-flex justify-content-center">
          <nav class="navbar navbar-dark navbar-expand-lg p-0">
            <span class="navbar-brand d-block d-lg-none py-2 pl-1"
              >Documentation sets</span
            >
            <button
              class="navbar-toggler"
              type="button"
              data-bs-toggle="collapse"
              data-bs-target="#navbarNavAltMarkup"
              aria-controls="navbarNavAltMarkup"
              aria-expanded="false"
              aria-label="Toggle navigation"
            >
              <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="navbarNavAltMarkup">
              <ul class="navbar-nav">
                <li class="nav-item active py-1 px-3">
                  <a
                    class="nav-link"
                    href="../../../../nrf/index.html"
                    >nRF Connect SDK</a
                  >
                </li>
                <li><hr class="dropdown-divider" /></li>
                <li class="nav-item  py-1 px-3">
                  <a
                    class="nav-link"
                    href="../../../../nrfx/index.html"
                    >nrfx</a
                  >
                </li>
                <li><hr class="dropdown-divider" /></li>
                <li class="nav-item  py-1 px-3">
                  <a
                    class="nav-link"
                    href="../../../../nrfxlib/README.html"
                    >nrfxlib</a
                  >
                </li>
                <li><hr class="dropdown-divider" /></li>
                <li class="nav-item  py-1 px-3">
                  <a
                    class="nav-link"
                    href="../../../../zephyr/index.html"
                    >Zephyr Project</a
                  >
                </li>
                <li><hr class="dropdown-divider" /></li>
                <li class="nav-item  py-1 px-3">
                  <a
                    class="nav-link"
                    href="../../../../mcuboot/wrapper.html"
                    >MCUboot</a
                  >
                </li>
                <li><hr class="dropdown-divider" /></li>
                <li class="nav-item  py-1 px-3">
                  <a
                    class="nav-link"
                    href="../../../../tfm/index.html"
                    >Trusted Firmware-M</a
                  >
                </li>
                <li><hr class="dropdown-divider" /></li>
                <li class="nav-item  py-1 px-3">
                  <a
                    class="nav-link"
                    href="../../../../matter/index.html"
                    >Matter</a
                  >
                </li>
                <li><hr class="dropdown-divider" /></li>
                <li class="nav-item  py-1 px-3">
                  <a
                    class="nav-link"
                    href="../../../../kconfig/index.html"
                    >Kconfig Reference</a
                  >
                </li>
                <li><hr class="dropdown-divider" /></li>
              </ul>
            </div>
          </nav>
        </div>
      </div>
    </div>
  </div>
</div>

  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
            <a href="../../../index.html" class="icon icon-home"> nRF Connect SDK
          </a>
              <div class="version">
                2.3.99
              </div>
<div id="searchbox" role="search">
  <div class="searchformwrapper">
    <form id="rtd-search-form" class="wy-form" action="../../../search.html" method="get">
      <input type="text" name="q" placeholder="Search docs" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
  </div>
</div>
<script>$('#searchbox').show(0);</script>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Contents</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../../introduction.html">Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../getting_started.html">Getting started</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../dev_model.html">Development model</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../app_dev.html">Application development</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../security.html">Security</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../ecosystem_integration.html">Ecosystems integration</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../nrf91.html">Working with nRF91 Series</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../nrf70.html">Working with nRF70 Series</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../nrf53.html">Working with nRF53 Series</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../nrf52.html">Working with nRF52 Series</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../../../protocols.html">Protocols</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../../ble/index.html">Bluetooth LE Controller</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../bt_mesh/index.html">Bluetooth mesh</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../esb/index.html">Enhanced ShockBurst (ESB)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../gazell/index.html">Gazell</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="../index.html">Matter</a><ul class="current">
<li class="toctree-l3 current"><a class="reference internal" href="index.html">Matter overview</a><ul class="current">
<li class="toctree-l4"><a class="reference internal" href="architecture.html">Matter architecture</a></li>
<li class="toctree-l4"><a class="reference internal" href="data_model.html">Matter Data Model and device types</a></li>
<li class="toctree-l4"><a class="reference internal" href="int_model.html">Matter Interaction Model and interaction types</a></li>
<li class="toctree-l4"><a class="reference internal" href="network_topologies.html">Matter network topology and concepts</a></li>
<li class="toctree-l4"><a class="reference internal" href="security.html">Matter network security</a></li>
<li class="toctree-l4"><a class="reference internal" href="commissioning.html">Matter network commissioning</a></li>
<li class="toctree-l4"><a class="reference internal" href="multi_fabrics.html">Matter multiple fabrics feature</a></li>
<li class="toctree-l4 current"><a class="current reference internal" href="#">Matter OTA</a></li>
<li class="toctree-l4"><a class="reference internal" href="dev_model.html">Matter development model and compatible ecosystems</a></li>
<li class="toctree-l4"><a class="reference internal" href="integration.html">Matter integration in the nRF Connect SDK</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../getting_started/index.html">Getting started with Matter</a></li>
<li class="toctree-l3"><a class="reference internal" href="../end_product/index.html">How to create Matter end product</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../multiprotocol/index.html">Multiprotocol support</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../nfc/index.html">Near Field Communication (NFC)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../thread/index.html">Thread</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../wifi/index.html">Wi-Fi</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../zigbee/index.html">Zigbee</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../applications.html">Applications</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../samples.html">Samples</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../drivers.html">Drivers</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../libraries/index.html">Libraries</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../scripts.html">Scripts</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../release_notes.html">Release notes</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../known_issues.html">Known issues</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../software_maturity.html">Software maturity levels</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../documentation.html">About this documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../glossary.html">Glossary</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../../index.html">nRF Connect SDK</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../../../index.html" class="icon icon-home"></a></li>
          <li class="breadcrumb-item"><a href="../../../protocols.html">Protocols</a></li>
          <li class="breadcrumb-item"><a href="../index.html">Matter</a></li>
          <li class="breadcrumb-item"><a href="index.html">Matter overview</a></li>
      <li class="breadcrumb-item active">Matter OTA</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../../../_sources/protocols/matter/overview/dfu.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="matter-ota">
<span id="ug-matter-overview-dfu"></span><h1>Matter OTA<a class="headerlink" href="#matter-ota" title="Permalink to this heading"></a></h1>
<div class="contents local topic" id="contents">
<ul class="simple">
<li><p><a class="reference internal" href="#matter-ota-roles" id="id8">Matter OTA roles</a></p></li>
<li><p><a class="reference internal" href="#matter-ota-requirements" id="id9">Matter OTA requirements</a></p></li>
<li><p><a class="reference internal" href="#matter-ota-process" id="id10">Matter OTA process</a></p></li>
<li><p><a class="reference internal" href="#matter-ota-image-structure-and-transfer" id="id11">Matter OTA image structure and transfer</a></p>
<ul>
<li><p><a class="reference internal" href="#nordic-matter-platform-additions" id="id12">Nordic Matter platform additions</a></p></li>
<li><p><a class="reference internal" href="#matter-tlv-encoding-format" id="id13">Matter TLV encoding format</a></p></li>
<li><p><a class="reference internal" href="#bulk-data-exchange-protocol-bdx" id="id14">Bulk Data Exchange Protocol (BDX)</a></p></li>
</ul>
</li>
</ul>
</div>
<p>The Matter Over-The-Air is a process that allows a Matter device in a Matter fabric to update its firmware.
The <a class="reference external" href="https://csa-iot.org/developer-resource/specifications-download-request/">Matter Core Specification</a> requires that each device implements a method for firmware update for security reasons.
Matter OTA provides a convenient way to fulfill this requirement.</p>
<p>This page provides an overview of the Matter OTA process and mentions <a class="reference internal" href="#ug-matter-overview-dfu-image-nordic"><span class="std std-ref">Nordic Matter platform additions</span></a>.
In this process, recommended for Matter accessory devices, the software image is provided by another Matter node, which acquired information about the image and downloaded it from a centralized and reliable source.
The download takes place over a special transfer protocol and user consent is required for the image to be applied on the target Matter device.</p>
<p>The Matter OTA is just one of the possible firmware update methods.
You can also implement a custom solution.
For example, the <a class="reference external" href="https://github.com/nrfconnect/sdk-connectedhomeip">nrfconnect platform</a> for Matter comes with a solution that lets you update the firmware outside of the Matter network, using Bluetooth LE and the <a class="reference internal" href="../../../libraries/bluetooth_services/services/dfu_smp.html#dfu-smp-readme"><span class="std std-ref">Simple Management Protocol</span></a>.
The conceptual details of this solution are outside the scope of this page.
For detailed information about how to perform an update over Bluetooth LE, see <span class="xref std std-doc">matter:nrfconnect_examples_software_update</span>.</p>
<section id="matter-ota-roles">
<span id="ug-matter-overview-dfu-roles"></span><h2><a class="toc-backref" href="#id8">Matter OTA roles</a><a class="headerlink" href="#matter-ota-roles" title="Permalink to this heading"></a></h2>
<p>The following roles participate in the Matter OTA process:</p>
<dl>
<dt>OTA Requestor</dt><dd><p>Any Matter device that is going to have its firmware updated.
This role corresponds to the OTA Requestor <a class="reference internal" href="data_model.html#ug-matter-overview-data-model"><span class="std std-ref">device type</span></a>, which implements the client role for the OTA Software Update Provider cluster and the server role for the OTA Software Update Requestor cluster.</p>
<p>The OTA Requestor can only receive information about available software updates from the OTA Provider.
Because of this, it may implement a mechanism to discover providers and query the OTA Provider periodically about new software images using the mandatory polling mechanism.
However, it can also receive information about the OTA Providers from the commissioner during <a class="reference internal" href="commissioning.html#ug-matter-overview-commissioning"><span class="std std-ref">Matter network commissioning</span></a>.</p>
<p>The OTA Requestor is typically implemented on accessories (for example, embedded devices built using the nRF Connect SDK).</p>
</dd>
<dt>OTA Provider</dt><dd><p>The device that provides the image for the OTA update.
This role corresponds to the OTA Provider device type, which implements the server role for the OTA Software Update Provider cluster, and optionally the client role for the OTA Software Update Requestor cluster.
Any device on the fabric can assume this role, as long as it has access to the Internet or to the database with links to software images.</p>
<p>The OTA Provider learns about new software images using any custom mechanism provided by the device manufacturer.
It can also learn about new software updates from the <a class="reference internal" href="../end_product/dcl.html#ug-matter-device-dcl"><span class="std std-ref">Matter Distributed Compliance Ledger</span></a>, if it supports querying the DCL.</p>
<p>After the OTA Provider learns about a new software image, it downloads it to its internal cache.
Then, once requested, it sends the image to the OTA Requestor using Matter’s <a class="reference internal" href="#ug-matter-overview-dfu-image-bdx"><span class="std std-ref">Bulk Data Exchange Protocol (BDX)</span></a>.</p>
<p>The OTA Provider can announce its presence to OTA Requestors on the fabric.
The OTA Requestor can also learn about the OTA Providers on the fabric during commissioning or through dynamic discovery.</p>
<p>The OTA Provider is typically implemented on smart home hubs from ecosystem providers.</p>
</dd>
</dl>
<figure class="align-default" id="id6">
<img alt="Matter OTA roles" src="../../../_images/matter_ota_roles.svg" /><figcaption>
<p><span class="caption-text">Matter OTA roles</span><a class="headerlink" href="#id6" title="Permalink to this image"></a></p>
</figcaption>
</figure>
<p>The following parties can also be seen as participating in the process:</p>
<dl class="simple">
<dt>Image Server</dt><dd><p>This is usually a server set up by the vendor who creates the software image.
Information about the software image URI is then typically provided in the <a class="reference internal" href="../end_product/dcl.html#ug-matter-device-dcl"><span class="std std-ref">Matter Distributed Compliance Ledger</span></a>.</p>
</dd>
<dt>User</dt><dd><p>Provides approvals for the OTA process.
Some OTA Requestors can directly ask the user for approval for applying an OTA update, for example using GUI or a network hub.
If asking directly is not possible, the approval request can be delegated to OTA Providers.</p>
</dd>
</dl>
<figure class="align-default" id="id7">
<img alt="Parties to the Matter OTA process" src="../../../_images/matter_ota_all_parties.svg" /><figcaption>
<p><span class="caption-text">Parties to the Matter OTA process</span><a class="headerlink" href="#id7" title="Permalink to this image"></a></p>
</figcaption>
</figure>
</section>
<section id="matter-ota-requirements">
<span id="ug-matter-overview-dfu-reqs"></span><h2><a class="toc-backref" href="#id9">Matter OTA requirements</a><a class="headerlink" href="#matter-ota-requirements" title="Permalink to this heading"></a></h2>
<p>For the Matter OTA process to happen, the following conditions must be met:</p>
<ul class="simple">
<li><p>Both the OTA Requestor and OTA Provider must be members of the same fabric.</p></li>
<li><p>The OTA Requestor must be aware of the OTA Provider.</p></li>
<li><p>A source of software image must be available to the OTA Provider, for example DCL.</p></li>
<li><p>The software image must have a newer version than the firmware currently in use on the OTA Requestor.</p></li>
<li><p>The OTA Requestor must query the OTA Provider periodically about new software images using the polling mechanism.</p></li>
</ul>
</section>
<section id="matter-ota-process">
<span id="ug-matter-overview-dfu-process"></span><h2><a class="toc-backref" href="#id10">Matter OTA process</a><a class="headerlink" href="#matter-ota-process" title="Permalink to this heading"></a></h2>
<p>The following chart shows a simplified overview of the Matter OTA process.
For detailed description, see the Matter Core Specification.</p>
<p>The Matter OTA image download always happens in the background, without affecting the device’s normal operation.</p>
<p class="mscgen">
msc {
hscale = &quot;1.3&quot;;
Req [label=&quot;OTA Requestor&quot;],Pro [label=&quot;OTA Provider&quot;],Serv [label=&quot;Image server&quot;],User [label=&quot;User&quot;];
Req rbox Pro [label=&quot;Commissioning into the same fabric&quot;];
|||;
Pro=&gt;Serv [label=&quot;Connection to server&quot;];
|||;
--- [label=&quot;Two alternatives for OTA Provider discovery&quot;];
Req&lt;=Pro [label=&quot;Option 1\nPresence announcement&quot;];
|||;
Req=&gt;Pro [label=&quot;Option 2\nDynamic discovery of OTA Providers&quot;];
---;
|||;
Req rbox Req [label=&quot;Selection of OTA Provider&quot;];
|||;
Req=&gt;Pro [label=&quot;Querying starts&quot;];
Pro=&gt;Serv [label=&quot;OTA Provider\nlearns about new image&quot;];
|||;
Pro&lt;=Serv [label=&quot;Image downloaded\nover HTTP&quot;];
|||;
Req&lt;=Pro [label=&quot;Image downloaded\nover BDX&quot;];
|||;
Req&gt;&gt;Pro [label=&quot;Notification\nof completed download&quot;];
Pro&lt;=User [label=&quot;Update approval&quot;];
Req&lt;=Pro [label=&quot;Authorization of update&quot;];
|||;
Req rbox Req [label=&quot;Update applied&quot;];
Req&gt;&gt;Pro [label=&quot;Notification\nof successful update&quot;];
Pro&gt;&gt;User [label=&quot;Notification\nof successful update&quot;];
}
</p>
</section>
<section id="matter-ota-image-structure-and-transfer">
<span id="ug-matter-overview-dfu-image"></span><h2><a class="toc-backref" href="#id11">Matter OTA image structure and transfer</a><a class="headerlink" href="#matter-ota-image-structure-and-transfer" title="Permalink to this heading"></a></h2>
<p>The software image transmitted during the Matter OTA process must meet specific structure requirements for it to be transferred and applied correctly.</p>
<p>All software images for the Matter OTA must contain a standardized header, which is used by the OTA Provider to validate the image before it is sent to the OTA Requestor.
The header includes several types of information, including the software version, Vendor ID, and Product ID.</p>
<p>The software image must use fixed encoding and it must include the mandatory fields listed in the following table.</p>
<table class="docutils align-default" id="table">
<colgroup>
<col style="width: 10%" />
<col style="width: 4%" />
<col style="width: 21%" />
<col style="width: 66%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Field name</p></th>
<th class="head"><p>Type</p></th>
<th class="head"><p>Characteristics</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">FileIdentifier</span></code></p></td>
<td><p>uint32</p></td>
<td><p>Fixed-width, little-endian-encoded, unsigned.</p></td>
<td><p>Identifies the OTA image file at its beginning.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">TotalSize</span></code></p></td>
<td><p>uint64</p></td>
<td></td>
<td><p>Indicates the total size in bytes of the _entire_ file.</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">HeaderSize</span></code></p></td>
<td><p>uint32</p></td>
<td></td>
<td><p>Indicates the total size of the TLV-encoded header field.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">Header</span></code></p></td>
<td><p>TLV</p></td>
<td><p>TLV encoding type and value.</p></td>
<td><p>Includes the <cite>ota-image-header-struct</cite> with a predefined order. See section 11.20.2.4 of the <a class="reference external" href="https://csa-iot.org/developer-resource/specifications-download-request/">Matter Core Specification</a> for more information.</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">Payload</span></code></p></td>
<td><p>n/a</p></td>
<td><p>Software image contents.</p></td>
<td><p>Includes the new software to be installed on the OTA Requestor. When using the nRF Connect SDK, this field also includes <a class="reference internal" href="#nordic-matter-platform-additions">Nordic Matter platform additions</a>.</p></td>
</tr>
</tbody>
</table>
<section id="nordic-matter-platform-additions">
<span id="ug-matter-overview-dfu-image-nordic"></span><h3><a class="toc-backref" href="#id12">Nordic Matter platform additions</a><a class="headerlink" href="#nordic-matter-platform-additions" title="Permalink to this heading"></a></h3>
<p>When building a Matter application for <span class="xref std std-doc">nRF Connect platform</span>, the Matter OTA image is one of the build <a class="reference internal" href="../../../app_dev/build_and_config_system/index.html#app-build-output-files"><span class="std std-ref">output files</span></a>.
The default location of the software image is <code class="file docutils literal notranslate"><span class="pre">zephyr/matter.ota</span></code> in the build directory.
The <cite>Payload</cite> field of the software image includes <code class="file docutils literal notranslate"><span class="pre">dfu_multi_image.bin</span></code> file, which is <a class="reference internal" href="../../../app_dev/build_and_config_system/index.html#app-build-output-files-other"><span class="std std-ref">another output file</span></a> of the build process.</p>
<p>The <code class="file docutils literal notranslate"><span class="pre">dfu_multi_image.bin</span></code> file is an archive file that includes a CBOR manifest and a collection of user-selected update components.
The CBOR manifest contains identifiers and sizes of the included update components to allow a user to successfully unpack the archive.
The default update components are firmware images for all MCU cores.</p>
<p>During the Matter OTA firmware update process, the downloaded Matter OTA image is saved to external flash using the <a class="reference internal" href="../../../libraries/dfu/dfu_multi_image.html#lib-dfu-multi-image"><span class="std std-ref">DFU multi-image</span></a> and <a class="reference internal" href="../../../libraries/dfu/dfu_target.html#lib-dfu-target"><span class="std std-ref">DFU target</span></a> libraries.
The DFU multi-image library uses <a class="reference external" href="https://github.com/NordicSemiconductor/zcbor">zcbor</a> for parsing the CBOR header.
Applying the software image requires rebooting to <span class="xref std std-ref">MCUboot</span> bootloader which installs the new firmware.</p>
</section>
<section id="matter-tlv-encoding-format">
<span id="ug-matter-overview-dfu-image-tlv"></span><h3><a class="toc-backref" href="#id13">Matter TLV encoding format</a><a class="headerlink" href="#matter-tlv-encoding-format" title="Permalink to this heading"></a></h3>
<p>Tag-Length-Value (TLV) is a format used for encoding simple structured data in a byte string.
It encodes values as TLV elements, where each element has one of the following types:</p>
<ul class="simple">
<li><p>Primitive type with integers or strings.</p></li>
<li><p>Container type with collections of other TLV elements.
The container type can be a structure, an array, or a list.</p></li>
</ul>
</section>
<section id="bulk-data-exchange-protocol-bdx">
<span id="ug-matter-overview-dfu-image-bdx"></span><h3><a class="toc-backref" href="#id14">Bulk Data Exchange Protocol (BDX)</a><a class="headerlink" href="#bulk-data-exchange-protocol-bdx" title="Permalink to this heading"></a></h3>
<p>For transferring the software image, Matter uses its own internal Bulk Data Exchange (BDX) protocol.
Its main purpose is to facilitate exchanging data between Matter nodes.</p>
<p>The protocol is based on Trivial File Transfer Protocol (TFTP).
BDX does not require transferred file to have any specific format, but it allows to attach arbitrary metadata to the file.
When used for OTA transfers, OTA Provider sends the URI to OTA Requestor using the <code class="docutils literal notranslate"><span class="pre">bdx://&lt;node-id&gt;/&lt;file-name&gt;</span></code> format, where <em>&lt;node-id&gt;</em> corresponds to the Node ID of the OTA Requestor that is to receive the image, and <em>&lt;file-name&gt;</em> is an arbitrary file path that uniquely identifies the software image file on the node.</p>
</section>
</section>
</section>


           </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="dev_model.html" class="btn btn-neutral float-right" title="Matter development model and compatible ecosystems" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="multi_fabrics.html" class="btn btn-neutral" title="Matter multiple fabrics feature" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">

<table>
<tr>
<td>
    <p>
        &copy; Copyright 2019-2023, Nordic Semiconductor.
      Last updated on Mar 20, 2023.

    </p>
</td>
<td id="nordiclogo">
  <a href="https://www.nordicsemi.com/"><img src="../../../_static/images/nordic-logo.png" border="0"/></a>
</td>
</tr>
</table>
  </div> 


</footer>

<div id="scroll-container">
  <button type="button" id="scroll-btn" class="btn">
    <svg xmlns="http://www.w3.org/2000/svg" height="24" viewBox="0 0 24 24" width="24"><path d="M0 0h24v24H0z" fill="none"/><path d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z" fill="#fff"/></svg>
  </button>
</div>

<script>
  const scrollBtn = document.querySelector("#scroll-btn");

  document.addEventListener("scroll", () => {
    if (window.scrollY > 400) {
          scrollBtn.style.visibility = "visible";
      } else {
          scrollBtn.style.visibility = "hidden";
      }
  });

  scrollBtn.addEventListener("click", () => {
      window.scrollTo({ top: 0, behavior: "smooth" });
  });
</script>
        </div>
      </div>
    </section>
  </div>
  
  <div class="rst-versions" data-toggle="rst-versions" role="note" aria-label="versions">
    <span class="rst-current-version" data-toggle="rst-current-version">
      <span class="fa fa-book"> nRF Connect SDK</span>
       <span class="fa fa-caret-down"></span>
    </span>
    <div class="rst-other-versions">
      
      <div class="rst-other-version ncs">
        <a href="../../../../nrf/index.html">nRF Connect SDK</a>
      </div>
      
      <div class="rst-other-version nrfx">
        <a href="../../../../nrfx/index.html">nrfx</a>
      </div>
      
      <div class="rst-other-version nrfxlib">
        <a href="../../../../nrfxlib/README.html">nrfxlib</a>
      </div>
      
      <div class="rst-other-version zephyr">
        <a href="../../../../zephyr/index.html">Zephyr Project</a>
      </div>
      
      <div class="rst-other-version mcuboot">
        <a href="../../../../mcuboot/wrapper.html">MCUboot</a>
      </div>
      
      <div class="rst-other-version tfm">
        <a href="../../../../tfm/index.html">Trusted Firmware-M</a>
      </div>
      
      <div class="rst-other-version matter">
        <a href="../../../../matter/index.html">Matter</a>
      </div>
      
      <div class="rst-other-version kconfig">
        <a href="../../../../kconfig/index.html">Kconfig Reference</a>
      </div>
    </div>
  </div><script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>