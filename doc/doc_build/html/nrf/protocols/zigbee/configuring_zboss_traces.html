<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Configuring ZBOSS traces in nRF Connect SDK &mdash; nRF Connect SDK 2.3.99 documentation</title>
      <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="../../_static/css/nordic.css" type="text/css" />
      <link rel="stylesheet" href="../../_static/togglebutton.css" type="text/css" />
      <link rel="stylesheet" href="../../_static/css/nrf.css" type="text/css" />
      <link rel="stylesheet" href="../../_static/tabs.css" type="text/css" /> 
  <!--[if lt IE 9]>
    <script src="../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="../../" id="documentation_options" src="../../_static/documentation_options.js"></script>
        <script src="../../_static/jquery.js"></script>
        <script src="../../_static/underscore.js"></script>
        <script src="../../_static/_sphinx_javascript_frameworks_compat.js"></script>
        <script src="../../_static/doctools.js"></script>
        <script src="../../_static/sphinx_highlight.js"></script>
        <script src="https://www.googletagmanager.com/gtag/js?id=G-ZPVZRKFQJR"></script>
        <script src="../../_static/js/ga-tracker.js"></script>
        <script data-culture="EN" id="CookieConsent" type="text/javascript" src="https://policy.app.cookieinformation.com/uc.js"></script>
        <script>let toggleHintShow = 'Click to show';</script>
        <script>let toggleHintHide = 'Click to hide';</script>
        <script>let toggleOpenOnPrint = 'true';</script>
        <script src="../../_static/togglebutton.js"></script>
        <script>var togglebuttonSelector = '.toggle, .admonition.dropdown';</script>
    <script src="../../_static/js/theme.js"></script>
<script
  type="text/javascript"
  src="../../_static/js/ncs.js"
></script>
<script src="../../_static/js/bootstrap.bundle.min.js"></script>

    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="Adding ZCL clusters to application" href="adding_clusters.html" />
    <link rel="prev" title="Configuring Zigbee libraries in nRF Connect SDK" href="configuring_libraries.html" />
<link
  href="../../_static/css/bootstrap.min.css"
  rel="stylesheet"
/>
<link
  rel="shortcut icon"
  href="../../_static/images/favicon.ico"
/>

</head>

<body class="wy-body-for-nav">
<div class="announcement"></div>
<div class="d-print-none ncs-header">
  <div class="container-xl ncs-header-top">
    <div class="row h-100">
      <div class="d-none d-md-block col-2">
        <div class="bg-white py-4 px-3 ml-2 ncs-header-logo">
          <img
            class="ncs-header-logo"
            src="../../_static/images/nordic-logo.png"
            alt=""
          />
        </div>
      </div>
      <div
        class="col-8 col-md-7 pl-md-4 d-flex align-self-center justify-content-center"
      >
        <form class="w-75" action="../../search.html" method="get">
          <div class="form-group">
            <input
              type="text"
              name="q"
              class="ncs-search-input form-control"
              placeholder="Search all docs..."
            />
          </div>
        </form>
      </div>
      <div class="col-4 col-md-3 d-md-block p-3 text-end">
        <div class="dropdown">
          <button
            class="btn dropdown-toggle ncs-btn-versions"
            type="button"
            id="dropdownMenuButton1"
            data-bs-toggle="dropdown"
            aria-expanded="false"
          >
            <span class="d-none d-md-inline">nRF Connect SDK</span>
            <span id="ncsversion" class="d-inline"></span>
          </button>
          <div class="dropdown-menu" aria-labelledby="dropdownMenuButton"></div>
        </div>
      </div>
    </div>
  </div>
  <div class="ncs-header-nav">
    <div class="container-xl">
      <div class="row">
        <div class="col col-12 d-flex justify-content-center">
          <nav class="navbar navbar-dark navbar-expand-lg p-0">
            <span class="navbar-brand d-block d-lg-none py-2 pl-1"
              >Documentation sets</span
            >
            <button
              class="navbar-toggler"
              type="button"
              data-bs-toggle="collapse"
              data-bs-target="#navbarNavAltMarkup"
              aria-controls="navbarNavAltMarkup"
              aria-expanded="false"
              aria-label="Toggle navigation"
            >
              <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="navbarNavAltMarkup">
              <ul class="navbar-nav">
                <li class="nav-item active py-1 px-3">
                  <a
                    class="nav-link"
                    href="../../../nrf/index.html"
                    >nRF Connect SDK</a
                  >
                </li>
                <li><hr class="dropdown-divider" /></li>
                <li class="nav-item  py-1 px-3">
                  <a
                    class="nav-link"
                    href="../../../nrfx/index.html"
                    >nrfx</a
                  >
                </li>
                <li><hr class="dropdown-divider" /></li>
                <li class="nav-item  py-1 px-3">
                  <a
                    class="nav-link"
                    href="../../../nrfxlib/README.html"
                    >nrfxlib</a
                  >
                </li>
                <li><hr class="dropdown-divider" /></li>
                <li class="nav-item  py-1 px-3">
                  <a
                    class="nav-link"
                    href="../../../zephyr/index.html"
                    >Zephyr Project</a
                  >
                </li>
                <li><hr class="dropdown-divider" /></li>
                <li class="nav-item  py-1 px-3">
                  <a
                    class="nav-link"
                    href="../../../mcuboot/wrapper.html"
                    >MCUboot</a
                  >
                </li>
                <li><hr class="dropdown-divider" /></li>
                <li class="nav-item  py-1 px-3">
                  <a
                    class="nav-link"
                    href="../../../tfm/index.html"
                    >Trusted Firmware-M</a
                  >
                </li>
                <li><hr class="dropdown-divider" /></li>
                <li class="nav-item  py-1 px-3">
                  <a
                    class="nav-link"
                    href="../../../matter/index.html"
                    >Matter</a
                  >
                </li>
                <li><hr class="dropdown-divider" /></li>
                <li class="nav-item  py-1 px-3">
                  <a
                    class="nav-link"
                    href="../../../kconfig/index.html"
                    >Kconfig Reference</a
                  >
                </li>
                <li><hr class="dropdown-divider" /></li>
              </ul>
            </div>
          </nav>
        </div>
      </div>
    </div>
  </div>
</div>

  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
            <a href="../../index.html" class="icon icon-home"> nRF Connect SDK
          </a>
              <div class="version">
                2.3.99
              </div>
<div id="searchbox" role="search">
  <div class="searchformwrapper">
    <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
      <input type="text" name="q" placeholder="Search docs" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
  </div>
</div>
<script>$('#searchbox').show(0);</script>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Contents</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../introduction.html">Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../getting_started.html">Getting started</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../dev_model.html">Development model</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../app_dev.html">Application development</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../security.html">Security</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../ecosystem_integration.html">Ecosystems integration</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../nrf91.html">Working with nRF91 Series</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../nrf70.html">Working with nRF70 Series</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../nrf53.html">Working with nRF53 Series</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../nrf52.html">Working with nRF52 Series</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../../protocols.html">Protocols</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../ble/index.html">Bluetooth LE Controller</a></li>
<li class="toctree-l2"><a class="reference internal" href="../bt_mesh/index.html">Bluetooth mesh</a></li>
<li class="toctree-l2"><a class="reference internal" href="../esb/index.html">Enhanced ShockBurst (ESB)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../gazell/index.html">Gazell</a></li>
<li class="toctree-l2"><a class="reference internal" href="../matter/index.html">Matter</a></li>
<li class="toctree-l2"><a class="reference internal" href="../multiprotocol/index.html">Multiprotocol support</a></li>
<li class="toctree-l2"><a class="reference internal" href="../nfc/index.html">Near Field Communication (NFC)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../thread/index.html">Thread</a></li>
<li class="toctree-l2"><a class="reference internal" href="../wifi/index.html">Wi-Fi</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="index.html">Zigbee</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="qsg.html">Zigbee quick start guide</a></li>
<li class="toctree-l3"><a class="reference internal" href="supported_features.html">Supported Zigbee features</a></li>
<li class="toctree-l3"><a class="reference internal" href="architectures.html">Zigbee architectures</a></li>
<li class="toctree-l3"><a class="reference internal" href="commissioning.html">Zigbee commissioning</a></li>
<li class="toctree-l3"><a class="reference internal" href="memory.html">Zigbee memory requirements</a></li>
<li class="toctree-l3"><a class="reference internal" href="configuring.html">Configuring Zigbee in nRF Connect SDK</a></li>
<li class="toctree-l3"><a class="reference internal" href="configuring_libraries.html">Configuring Zigbee libraries in nRF Connect SDK</a></li>
<li class="toctree-l3 current"><a class="current reference internal" href="#">Configuring ZBOSS traces in nRF Connect SDK</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#requirements">Requirements</a></li>
<li class="toctree-l4"><a class="reference internal" href="#switch-to-zboss-libraries-with-compiled-in-trace-logs">Switch to ZBOSS libraries with compiled-in trace logs</a></li>
<li class="toctree-l4"><a class="reference internal" href="#select-which-zboss-trace-logs-to-print">Select which ZBOSS trace logs to print</a></li>
<li class="toctree-l4"><a class="reference internal" href="#configure-how-to-print-zboss-trace-logs">Configure how to print ZBOSS trace logs</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="adding_clusters.html">Adding ZCL clusters to application</a></li>
<li class="toctree-l3"><a class="reference internal" href="other_ecosystems.html">Configuring Zigbee samples for other ecosystems</a></li>
<li class="toctree-l3"><a class="reference internal" href="tools.html">Zigbee tools</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../applications.html">Applications</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../samples.html">Samples</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../drivers.html">Drivers</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../libraries/index.html">Libraries</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../scripts.html">Scripts</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../release_notes.html">Release notes</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../known_issues.html">Known issues</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../software_maturity.html">Software maturity levels</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../documentation.html">About this documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../glossary.html">Glossary</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">nRF Connect SDK</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../../index.html" class="icon icon-home"></a></li>
          <li class="breadcrumb-item"><a href="../../protocols.html">Protocols</a></li>
          <li class="breadcrumb-item"><a href="index.html">Zigbee</a></li>
      <li class="breadcrumb-item active">Configuring ZBOSS traces in nRF Connect SDK</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../../_sources/protocols/zigbee/configuring_zboss_traces.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="configuring-zboss-traces-in-ncs">
<span id="ug-zigbee-configuring-zboss-traces"></span><h1>Configuring ZBOSS traces in nRF Connect SDK<a class="headerlink" href="#configuring-zboss-traces-in-ncs" title="Permalink to this heading"></a></h1>
<div class="contents local topic" id="contents">
<ul class="simple">
<li><p><a class="reference internal" href="#requirements" id="id6">Requirements</a></p></li>
<li><p><a class="reference internal" href="#switch-to-zboss-libraries-with-compiled-in-trace-logs" id="id7">Switch to ZBOSS libraries with compiled-in trace logs</a></p></li>
<li><p><a class="reference internal" href="#select-which-zboss-trace-logs-to-print" id="id8">Select which ZBOSS trace logs to print</a></p></li>
<li><p><a class="reference internal" href="#configure-how-to-print-zboss-trace-logs" id="id9">Configure how to print ZBOSS trace logs</a></p>
<ul>
<li><p><a class="reference internal" href="#trace-logs-using-uart-default" id="id10">Trace logs using UART (default)</a></p></li>
<li><p><a class="reference internal" href="#trace-logs-using-native-usb" id="id11">Trace logs using native USB</a></p></li>
</ul>
</li>
</ul>
</div>
<p>The <span class="xref std std-ref">nrfxlib:zboss</span> (ZBOSS stack) comes included in the nRF Connect SDK in a set of precompiled libraries, which can complicate the debugging process.
To help with that, the ZBOSS stack can be configured to print trace logs that allow you to trace the stack behavior.
This page describes how to enable and configure ZBOSS trace logs.</p>
<p>Trace logs are printed in binary form and  require access to stack source files to be decoded into log messages.
Enabling trace logs can help with the debugging process even if you cannot decode them (due to lack of access to stack source files).
This is because of the information they can provide about the stack behavior whenever an issue is found or reproduced.</p>
<p>If any issues are found with the ZBOSS stack, trace logs can be enabled to collect this information while reproducing the issue.
A ticket can then be created in <a class="reference external" href="https://devzone.nordicsemi.com/">DevZone</a> with the log file attached for assistance with the debugging process, and for decoding trace log files.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>ZBOSS trace logs are meant to be used for debugging ZBOSS based applications.
These libraries are not certified and should not be used for production firmware or end products.</p>
</div>
<section id="requirements">
<h2><a class="toc-backref" href="#id6">Requirements</a><a class="headerlink" href="#requirements" title="Permalink to this heading"></a></h2>
<p>To collect and view the log files, you will need the following:</p>
<ul>
<li><p>Software that allows for reading serial ports.
For example, if you are using Windows you can use <a class="reference internal" href="../../getting_started/testing.html#putty"><span class="std std-ref">PuTTY</span></a>.</p></li>
<li><p>Correct COM port.</p>
<blockquote>
<div><ul class="simple">
<li><p>For traces using the UART, the J-Link COM port is used. The development kit is assigned to a COM port (Windows) or a ttyACM device (Linux), which is visible in the system’s Device Manager.</p></li>
<li><p>For traces using USB, a virtual COM port (a serial port emulated over USB) is used. You can set <code class="xref kconfig kconfig-option docutils literal notranslate"><span class="pre">CONFIG_USB_DEVICE_PRODUCT</span></code> to help identify the COM port in the system’s Device Manager.</p></li>
</ul>
</div></blockquote>
</li>
<li><p>An additional USB cable if trace logs through USB are enabled (see <a class="reference internal" href="#ug-zigbee-configuring-zboss-traces-using-usb"><span class="std std-ref">Trace logs using native USB</span></a>).</p></li>
</ul>
</section>
<section class="numbered-step" id="switch-to-zboss-libraries-with-compiled-in-trace-logs">
<h2><a class="toc-backref" href="#id7">Switch to ZBOSS libraries with compiled-in trace logs</a><a class="headerlink" href="#switch-to-zboss-libraries-with-compiled-in-trace-logs" title="Permalink to this heading"></a></h2>
<p>Set the Kconfig option <code class="xref kconfig kconfig-option docutils literal notranslate"><span class="pre">CONFIG_ZIGBEE_ENABLE_TRACES</span></code> to switch to ZBOSS libraries with compiled-in trace logs.</p>
<p>The ZBOSS stack comes in a precompiled form and trace logs are not compiled-in by default.
An additional set of ZBOSS libraries are available in nrfxlib, which does have trace logs compiled-in.</p>
</section>
<section class="numbered-step" id="select-which-zboss-trace-logs-to-print">
<h2><a class="toc-backref" href="#id8">Select which ZBOSS trace logs to print</a><a class="headerlink" href="#select-which-zboss-trace-logs-to-print" title="Permalink to this heading"></a></h2>
<p>Complete the following steps:</p>
<ol class="arabic simple">
<li><p>Select from which subsystems you would like to receive logs by configuring the ZBOSS trace mask with the Kconfig option <code class="xref kconfig kconfig-option docutils literal notranslate"><span class="pre">CONFIG_ZBOSS_TRACE_MASK</span></code>.
Trace masks can be created by adding up masks of subsystems to receive the trace logs from.
For available subsystems, see <code class="file docutils literal notranslate"><span class="pre">nrfxlib/zboss/production/include/zb_trace.h</span></code>.</p></li>
<li><p>Select the level of logs you want to receive.
Configure ZBOSS trace level by selecting one of the following levels:</p>
<ul class="simple">
<li><p>Error trace logs level - Set <code class="xref kconfig kconfig-option docutils literal notranslate"><span class="pre">CONFIG_ZBOSS_TRACE_LOG_LEVEL_ERR</span></code></p></li>
<li><p>Warning trace logs level - Set <code class="xref kconfig kconfig-option docutils literal notranslate"><span class="pre">CONFIG_ZBOSS_TRACE_LOG_LEVEL_WRN</span></code></p></li>
<li><p>Info trace logs level - Set <code class="xref kconfig kconfig-option docutils literal notranslate"><span class="pre">CONFIG_ZBOSS_TRACE_LOG_LEVEL_INF</span></code></p></li>
<li><p>Debug trace logs level - Set <code class="xref kconfig kconfig-option docutils literal notranslate"><span class="pre">CONFIG_ZBOSS_TRACE_LOG_LEVEL_DBG</span></code></p></li>
</ul>
</li>
</ol>
<p>If you do not want to receive trace logs, turn them off by setting the Kconfig option <code class="xref kconfig kconfig-option docutils literal notranslate"><span class="pre">CONFIG_ZBOSS_TRACE_LOG_LEVEL_OFF</span></code>.</p>
<p>Each of the following levels on the list also includes the previous one.
See <a class="reference internal" href="configuring.html#zigbee-ug-logging-stack-logs"><span class="std std-ref">Stack logs</span></a> to read more about trace logs.</p>
</section>
<section class="numbered-step" id="configure-how-to-print-zboss-trace-logs">
<h2><a class="toc-backref" href="#id9">Configure how to print ZBOSS trace logs</a><a class="headerlink" href="#configure-how-to-print-zboss-trace-logs" title="Permalink to this heading"></a></h2>
<p>The <a class="reference internal" href="../../libraries/zigbee/osif.html#zigbee-osif-zboss-osif-serial"><span class="std std-ref">ZBOSS OSIF serial abstract</span></a> offers a few backends to choose from for printing ZBOSS trace logs.
It is recommended to use the Zigbee serial logger, as it is the most efficient.
To enable it, set the Kconfig option <code class="xref kconfig kconfig-option docutils literal notranslate"><span class="pre">CONFIG_ZBOSS_TRACE_BINARY_LOGGING</span></code>.</p>
<dl class="simple">
<dt>Optional: Increasing the size of the ring buffer</dt><dd><p>You can increase size of the ring buffer that temporarily stores the trace logs.
To do this, use <code class="xref kconfig kconfig-option docutils literal notranslate"><span class="pre">CONFIG_ZBOSS_TRACE_LOGGER_BUFFER_SIZE</span></code> to assign a value for size of the buffer.
This can prevent losing some of the logs in demanding scenarios such as high network traffic, multiple devices being configured or joined, and so on.
See <a class="reference internal" href="../../libraries/zigbee/osif.html#zigbee-osif-zigbee-async-serial"><span class="std std-ref">Zigbee serial logger</span></a> for more information.</p>
</dd>
</dl>
<section id="trace-logs-using-uart-default">
<h3><a class="toc-backref" href="#id10">Trace logs using UART (default)</a><a class="headerlink" href="#trace-logs-using-uart-default" title="Permalink to this heading"></a></h3>
<p>When <code class="xref kconfig kconfig-option docutils literal notranslate"><span class="pre">CONFIG_ZBOSS_TRACE_BINARY_LOGGING</span></code> is selected, trace logs are printed using the UART by default.
To configure trace logs using the UART, complete the following steps:</p>
<ol class="arabic">
<li><p>Set the <code class="xref kconfig kconfig-option docutils literal notranslate"><span class="pre">CONFIG_ZBOSS_TRACE_UART_LOGGING</span></code> Kconfig option.</p></li>
<li><p>Provide the ZBOSS tracing serial device in Devicetree like this:</p>
<div class="highlight-devicetree notranslate"><div class="highlight"><pre><span></span><span class="nf">chosen</span><span class="cm"> </span><span class="p">{</span>
<span class="w">    </span><span class="n">ncs</span><span class="p">,</span><span class="n">zboss-trace-uart</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">&amp;</span><span class="n">uart1</span><span class="p">;</span>
<span class="p">};</span>
</pre></div>
</div>
</li>
<li><p>Configure the UART device that you want to use to be connected to the onboard J-Link instead of <code class="docutils literal notranslate"><span class="pre">UART_0</span></code>, by extending the DTS overlay file for the selected board with the following:</p>
<div class="highlight-devicetree notranslate"><div class="highlight"><pre><span></span><span class="o">&amp;</span><span class="na">pinctrl</span><span class="w"> </span><span class="p">{</span>
<span class="w">   </span><span class="nl">uart0_default_alt</span><span class="p">:</span><span class="w"> </span><span class="nf">uart0_default_alt</span><span class="cm"> </span><span class="p">{</span>
<span class="w">      </span><span class="nf">group1</span><span class="cm"> </span><span class="p">{</span>
<span class="w">         </span><span class="n">psels</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">&lt;</span><span class="na">NRF_PSEL</span><span class="p">(</span><span class="na">UART_TX</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span><span class="p">)</span><span class="o">&gt;</span><span class="p">,</span>
<span class="w">                 </span><span class="o">&lt;</span><span class="na">NRF_PSEL</span><span class="p">(</span><span class="na">UART_RX</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span><span class="p">)</span><span class="o">&gt;</span><span class="p">;</span>
<span class="w">      </span><span class="p">};</span>
<span class="w">   </span><span class="p">};</span>

<span class="w">   </span><span class="nl">uart0_sleep_alt</span><span class="p">:</span><span class="w"> </span><span class="nf">uart0_sleep_alt</span><span class="cm"> </span><span class="p">{</span>
<span class="w">      </span><span class="nf">group1</span><span class="cm"> </span><span class="p">{</span>
<span class="w">         </span><span class="n">psels</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">&lt;</span><span class="na">NRF_PSEL</span><span class="p">(</span><span class="na">UART_TX</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span><span class="p">)</span><span class="o">&gt;</span><span class="p">,</span>
<span class="w">                 </span><span class="o">&lt;</span><span class="na">NRF_PSEL</span><span class="p">(</span><span class="na">UART_RX</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span><span class="p">)</span><span class="o">&gt;</span><span class="p">;</span>
<span class="w">         </span><span class="n">low-power-enable</span><span class="p">;</span>
<span class="w">      </span><span class="p">};</span>
<span class="w">   </span><span class="p">};</span>

<span class="w">   </span><span class="nl">uart1_default_alt</span><span class="p">:</span><span class="w"> </span><span class="nf">uart1_default_alt</span><span class="cm"> </span><span class="p">{</span>
<span class="w">      </span><span class="nf">group1</span><span class="cm"> </span><span class="p">{</span>
<span class="w">         </span><span class="n">psels</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">&lt;</span><span class="na">NRF_PSEL</span><span class="p">(</span><span class="na">UART_TX</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="mi">6</span><span class="p">)</span><span class="o">&gt;</span><span class="p">,</span>
<span class="w">                 </span><span class="o">&lt;</span><span class="na">NRF_PSEL</span><span class="p">(</span><span class="na">UART_RX</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="mi">8</span><span class="p">)</span><span class="o">&gt;</span><span class="p">,</span>
<span class="w">                 </span><span class="o">&lt;</span><span class="na">NRF_PSEL</span><span class="p">(</span><span class="na">UART_RTS</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="mi">5</span><span class="p">)</span><span class="o">&gt;</span><span class="p">,</span>
<span class="w">                 </span><span class="o">&lt;</span><span class="na">NRF_PSEL</span><span class="p">(</span><span class="na">UART_CTS</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="mi">7</span><span class="p">)</span><span class="o">&gt;</span><span class="p">;</span>
<span class="w">      </span><span class="p">};</span>
<span class="w">   </span><span class="p">};</span>

<span class="w">   </span><span class="nl">uart1_sleep_alt</span><span class="p">:</span><span class="w"> </span><span class="nf">uart1_sleep_alt</span><span class="cm"> </span><span class="p">{</span>
<span class="w">      </span><span class="nf">group1</span><span class="cm"> </span><span class="p">{</span>
<span class="w">         </span><span class="n">psels</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">&lt;</span><span class="na">NRF_PSEL</span><span class="p">(</span><span class="na">UART_TX</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="mi">6</span><span class="p">)</span><span class="o">&gt;</span><span class="p">,</span>
<span class="w">                 </span><span class="o">&lt;</span><span class="na">NRF_PSEL</span><span class="p">(</span><span class="na">UART_RX</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="mi">8</span><span class="p">)</span><span class="o">&gt;</span><span class="p">,</span>
<span class="w">                 </span><span class="o">&lt;</span><span class="na">NRF_PSEL</span><span class="p">(</span><span class="na">UART_RTS</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="mi">5</span><span class="p">)</span><span class="o">&gt;</span><span class="p">,</span>
<span class="w">                 </span><span class="o">&lt;</span><span class="na">NRF_PSEL</span><span class="p">(</span><span class="na">UART_CTS</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="mi">7</span><span class="p">)</span><span class="o">&gt;</span><span class="p">;</span>
<span class="w">         </span><span class="n">low-power-enable</span><span class="p">;</span>
<span class="w">      </span><span class="p">};</span>
<span class="w">   </span><span class="p">};</span>
<span class="p">};</span>

<span class="o">&amp;</span><span class="nf">uart1</span><span class="cm"> </span><span class="p">{</span>
<span class="w">   </span><span class="n">pinctrl-0</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">&lt;&amp;</span><span class="na">uart1_default_alt</span><span class="o">&gt;</span><span class="p">;</span>
<span class="w">   </span><span class="n">pinctrl-1</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">&lt;&amp;</span><span class="na">uart1_sleep_alt</span><span class="o">&gt;</span><span class="p">;</span>
<span class="w">   </span><span class="n">pinctrl-names</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;default&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;sleep&quot;</span><span class="p">;</span>
<span class="p">};</span>

<span class="o">&amp;</span><span class="nf">uart0</span><span class="cm"> </span><span class="p">{</span>
<span class="w">   </span><span class="n">pinctrl-0</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">&lt;&amp;</span><span class="na">uart0_default_alt</span><span class="o">&gt;</span><span class="p">;</span>
<span class="w">   </span><span class="n">pinctrl-1</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">&lt;&amp;</span><span class="na">uart0_sleep_alt</span><span class="o">&gt;</span><span class="p">;</span>
<span class="w">   </span><span class="n">pinctrl-names</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;default&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;sleep&quot;</span><span class="p">;</span>
<span class="p">};</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>By connecting the UART device to the on-board J-Link, trace logs can be read directly from the J-Link COM port.
As a consequence, the UART device used by the logger is disconnected and application logs cannot be accessed from the J-Link COM port.</p>
</div>
</li>
</ol>
<dl>
<dt>Optional: Increasing the UART throughput</dt><dd><p>You can also increase the UART throughput by changing the baudrate.
Some of the trace logs will be dropped if the throughput is too low.
By default, the UART baudrate is set to <code class="docutils literal notranslate"><span class="pre">115200</span></code>.
To increase the baudrate to <code class="docutils literal notranslate"><span class="pre">1000000</span></code>, add the <code class="docutils literal notranslate"><span class="pre">current-speed</span> <span class="pre">=</span> <span class="pre">&lt;1000000&gt;;</span></code> property to the <code class="docutils literal notranslate"><span class="pre">uart1</span></code> node in the DTS overlay file.
This can be done like the following:</p>
<div class="highlight-devicetree notranslate"><div class="highlight"><pre><span></span><span class="o">&amp;</span><span class="na">pinctrl</span><span class="w"> </span><span class="p">{</span>
<span class="w">   </span><span class="nl">uart1_default_alt</span><span class="p">:</span><span class="w"> </span><span class="nf">uart1_default_alt</span><span class="cm"> </span><span class="p">{</span>
<span class="w">      </span><span class="nf">group1</span><span class="cm"> </span><span class="p">{</span>
<span class="w">         </span><span class="n">psels</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">&lt;</span><span class="na">NRF_PSEL</span><span class="p">(</span><span class="na">UART_TX</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="mi">6</span><span class="p">)</span><span class="o">&gt;</span><span class="p">,</span>
<span class="w">                 </span><span class="o">&lt;</span><span class="na">NRF_PSEL</span><span class="p">(</span><span class="na">UART_RX</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="mi">8</span><span class="p">)</span><span class="o">&gt;</span><span class="p">,</span>
<span class="w">                 </span><span class="o">&lt;</span><span class="na">NRF_PSEL</span><span class="p">(</span><span class="na">UART_RTS</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="mi">5</span><span class="p">)</span><span class="o">&gt;</span><span class="p">,</span>
<span class="w">                 </span><span class="o">&lt;</span><span class="na">NRF_PSEL</span><span class="p">(</span><span class="na">UART_CTS</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="mi">7</span><span class="p">)</span><span class="o">&gt;</span><span class="p">;</span>
<span class="w">      </span><span class="p">};</span>
<span class="w">   </span><span class="p">};</span>

<span class="w">   </span><span class="nl">uart1_sleep_alt</span><span class="p">:</span><span class="w"> </span><span class="nf">uart1_sleep_alt</span><span class="cm"> </span><span class="p">{</span>
<span class="w">      </span><span class="nf">group1</span><span class="cm"> </span><span class="p">{</span>
<span class="w">         </span><span class="n">psels</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">&lt;</span><span class="na">NRF_PSEL</span><span class="p">(</span><span class="na">UART_TX</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="mi">6</span><span class="p">)</span><span class="o">&gt;</span><span class="p">,</span>
<span class="w">                 </span><span class="o">&lt;</span><span class="na">NRF_PSEL</span><span class="p">(</span><span class="na">UART_RX</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="mi">8</span><span class="p">)</span><span class="o">&gt;</span><span class="p">,</span>
<span class="w">                 </span><span class="o">&lt;</span><span class="na">NRF_PSEL</span><span class="p">(</span><span class="na">UART_RTS</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="mi">5</span><span class="p">)</span><span class="o">&gt;</span><span class="p">,</span>
<span class="w">                 </span><span class="o">&lt;</span><span class="na">NRF_PSEL</span><span class="p">(</span><span class="na">UART_CTS</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="mi">7</span><span class="p">)</span><span class="o">&gt;</span><span class="p">;</span>
<span class="w">         </span><span class="n">low-power-enable</span><span class="p">;</span>
<span class="w">      </span><span class="p">};</span>
<span class="w">   </span><span class="p">};</span>
<span class="p">};</span>

<span class="o">&amp;</span><span class="nf">uart1</span><span class="cm"> </span><span class="p">{</span>
<span class="w">   </span><span class="n">current-speed</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">&lt;</span><span class="mi">1000000</span><span class="o">&gt;</span><span class="p">;</span>
<span class="w">   </span><span class="n">pinctrl-0</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">&lt;&amp;</span><span class="na">uart1_default_alt</span><span class="o">&gt;</span><span class="p">;</span>
<span class="w">   </span><span class="n">pinctrl-1</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">&lt;&amp;</span><span class="na">uart1_sleep_alt</span><span class="o">&gt;</span><span class="p">;</span>
<span class="w">   </span><span class="n">pinctrl-names</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;default&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;sleep&quot;</span><span class="p">;</span>
<span class="p">};</span>
</pre></div>
</div>
</dd>
</dl>
</section>
<section id="trace-logs-using-native-usb">
<span id="ug-zigbee-configuring-zboss-traces-using-usb"></span><h3><a class="toc-backref" href="#id11">Trace logs using native USB</a><a class="headerlink" href="#trace-logs-using-native-usb" title="Permalink to this heading"></a></h3>
<p>Trace logs can also be configured to use a native USB.
This is useful because trace logs will be printed through a separate virtual COM port so that the console logs can still be read through the J-Link COM port.
For applications that relay on the UART connection through the J-Link COM port, for example the Network co-processor (NCP) sample, trace logs can only be configured through USB (COM port emulated over USB).
See the <a class="reference internal" href="../../samples/zigbee/ncp/README.html#zigbee-ncp-sample"><span class="std std-ref">Zigbee NCP</span></a> sample page for how to configure trace logs for USB in this case.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Before proceeding with the following steps, first check if your Zigbee application already has USB enabled or is currently using a USB.
If your application is already using a virtual COM port via native USB, use a device name that is different than the default <code class="docutils literal notranslate"><span class="pre">CDC_ACM_0</span></code> to create new virtual COM port for printing trace logs.
For example, if <code class="docutils literal notranslate"><span class="pre">CDC_ACM_0</span></code> is already present, then create a virtual COM port named <code class="docutils literal notranslate"><span class="pre">CDC_ACM_1</span></code>, and so on.
Additionally, the Kconfig option <code class="xref kconfig kconfig-option docutils literal notranslate"><span class="pre">CONFIG_USB_COMPOSITE_DEVICE</span></code> must be set if there are multiple virtual COM ports configured.</p>
<p>See the <a class="reference internal" href="../../samples/zigbee/ncp/README.html#zigbee-ncp-sample"><span class="std std-ref">Zigbee NCP</span></a> sample page as an example where one virtual COM port instance is already configured, and another must be created.</p>
</div>
<p>To configure trace logs using native USB, complete the following steps:</p>
<ol class="arabic">
<li><p>Set the Kconfig option <code class="xref kconfig kconfig-option docutils literal notranslate"><span class="pre">CONFIG_ZBOSS_TRACE_USB_CDC_LOGGING</span></code>.
This also enables the necessary USB Kconfig options.</p></li>
<li><p>Create a virtual COM port that will be used for printing ZBOSS trace logs by extending the DTS overlay file for the selected board with the following:</p>
<div class="highlight-devicetree notranslate"><div class="highlight"><pre><span></span><span class="o">&amp;</span><span class="na">zephyr_udc0</span><span class="w"> </span><span class="p">{</span>
<span class="w">   </span><span class="nl">cdc_acm_uart0</span><span class="p">:</span><span class="w"> </span><span class="nf">cdc_acm_uart0</span><span class="cm"> </span><span class="p">{</span>
<span class="w">      </span><span class="kr">compatible</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;zephyr,cdc-acm-uart&quot;</span><span class="p">;</span>
<span class="w">      </span><span class="n">label</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;CDC_ACM_0&quot;</span><span class="p">;</span>
<span class="w">   </span><span class="p">};</span>
<span class="p">};</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>For the ZBOSS trace logs to be printed correctly through the USB, it is recommended to avoid using the USB autosuspend.</p>
</div>
</li>
<li><p>Provide the ZBOSS tracing serial device in Devicetree like this:</p>
<div class="highlight-devicetree notranslate"><div class="highlight"><pre><span></span><span class="nf">chosen</span><span class="cm"> </span><span class="p">{</span>
<span class="w">    </span><span class="n">ncs</span><span class="p">,</span><span class="n">zboss-trace-uart</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">&amp;</span><span class="n">cdc_acm_uart0</span><span class="p">;</span>
<span class="p">};</span>
</pre></div>
</div>
</li>
</ol>
</section>
</section>
</section>


           </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="adding_clusters.html" class="btn btn-neutral float-right" title="Adding ZCL clusters to application" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="configuring_libraries.html" class="btn btn-neutral" title="Configuring Zigbee libraries in nRF Connect SDK" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">

<table>
<tr>
<td>
    <p>
        &copy; Copyright 2019-2023, Nordic Semiconductor.
      Last updated on Mar 20, 2023.

    </p>
</td>
<td id="nordiclogo">
  <a href="https://www.nordicsemi.com/"><img src="../../_static/images/nordic-logo.png" border="0"/></a>
</td>
</tr>
</table>
  </div> 


</footer>

<div id="scroll-container">
  <button type="button" id="scroll-btn" class="btn">
    <svg xmlns="http://www.w3.org/2000/svg" height="24" viewBox="0 0 24 24" width="24"><path d="M0 0h24v24H0z" fill="none"/><path d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z" fill="#fff"/></svg>
  </button>
</div>

<script>
  const scrollBtn = document.querySelector("#scroll-btn");

  document.addEventListener("scroll", () => {
    if (window.scrollY > 400) {
          scrollBtn.style.visibility = "visible";
      } else {
          scrollBtn.style.visibility = "hidden";
      }
  });

  scrollBtn.addEventListener("click", () => {
      window.scrollTo({ top: 0, behavior: "smooth" });
  });
</script>
        </div>
      </div>
    </section>
  </div>
  
  <div class="rst-versions" data-toggle="rst-versions" role="note" aria-label="versions">
    <span class="rst-current-version" data-toggle="rst-current-version">
      <span class="fa fa-book"> nRF Connect SDK</span>
       <span class="fa fa-caret-down"></span>
    </span>
    <div class="rst-other-versions">
      
      <div class="rst-other-version ncs">
        <a href="../../../nrf/index.html">nRF Connect SDK</a>
      </div>
      
      <div class="rst-other-version nrfx">
        <a href="../../../nrfx/index.html">nrfx</a>
      </div>
      
      <div class="rst-other-version nrfxlib">
        <a href="../../../nrfxlib/README.html">nrfxlib</a>
      </div>
      
      <div class="rst-other-version zephyr">
        <a href="../../../zephyr/index.html">Zephyr Project</a>
      </div>
      
      <div class="rst-other-version mcuboot">
        <a href="../../../mcuboot/wrapper.html">MCUboot</a>
      </div>
      
      <div class="rst-other-version tfm">
        <a href="../../../tfm/index.html">Trusted Firmware-M</a>
      </div>
      
      <div class="rst-other-version matter">
        <a href="../../../matter/index.html">Matter</a>
      </div>
      
      <div class="rst-other-version kconfig">
        <a href="../../../kconfig/index.html">Kconfig Reference</a>
      </div>
    </div>
  </div><script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>