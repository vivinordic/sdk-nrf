<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Software Bill of Materials &mdash; nRF Connect SDK 2.3.99 documentation</title>
      <link rel="stylesheet" href="../../../_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="../../../_static/css/nordic.css" type="text/css" />
      <link rel="stylesheet" href="../../../_static/togglebutton.css" type="text/css" />
      <link rel="stylesheet" href="../../../_static/css/nrf.css" type="text/css" />
      <link rel="stylesheet" href="../../../_static/tabs.css" type="text/css" /> 
  <!--[if lt IE 9]>
    <script src="../../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="../../../" id="documentation_options" src="../../../_static/documentation_options.js"></script>
        <script src="../../../_static/jquery.js"></script>
        <script src="../../../_static/underscore.js"></script>
        <script src="../../../_static/_sphinx_javascript_frameworks_compat.js"></script>
        <script src="../../../_static/doctools.js"></script>
        <script src="../../../_static/sphinx_highlight.js"></script>
        <script src="https://www.googletagmanager.com/gtag/js?id=G-ZPVZRKFQJR"></script>
        <script src="../../../_static/js/ga-tracker.js"></script>
        <script data-culture="EN" id="CookieConsent" type="text/javascript" src="https://policy.app.cookieinformation.com/uc.js"></script>
        <script src="../../../_static/tabs.js"></script>
        <script>let toggleHintShow = 'Click to show';</script>
        <script>let toggleHintHide = 'Click to hide';</script>
        <script>let toggleOpenOnPrint = 'true';</script>
        <script src="../../../_static/togglebutton.js"></script>
        <script>var togglebuttonSelector = '.toggle, .admonition.dropdown';</script>
    <script src="../../../_static/js/theme.js"></script>
<script
  type="text/javascript"
  src="../../../_static/js/ncs.js"
></script>
<script src="../../../_static/js/bootstrap.bundle.min.js"></script>

    <link rel="index" title="Index" href="../../../genindex.html" />
    <link rel="search" title="Search" href="../../../search.html" />
    <link rel="next" title="MDS BLE gateway script" href="../../memfault/README.html" />
    <link rel="prev" title="Partition Manager" href="../../partition_manager/partition_manager.html" />
<link
  href="../../../_static/css/bootstrap.min.css"
  rel="stylesheet"
/>
<link
  rel="shortcut icon"
  href="../../../_static/images/favicon.ico"
/>

</head>

<body class="wy-body-for-nav">
<div class="announcement"></div>
<div class="d-print-none ncs-header">
  <div class="container-xl ncs-header-top">
    <div class="row h-100">
      <div class="d-none d-md-block col-2">
        <div class="bg-white py-4 px-3 ml-2 ncs-header-logo">
          <img
            class="ncs-header-logo"
            src="../../../_static/images/nordic-logo.png"
            alt=""
          />
        </div>
      </div>
      <div
        class="col-8 col-md-7 pl-md-4 d-flex align-self-center justify-content-center"
      >
        <form class="w-75" action="../../../search.html" method="get">
          <div class="form-group">
            <input
              type="text"
              name="q"
              class="ncs-search-input form-control"
              placeholder="Search all docs..."
            />
          </div>
        </form>
      </div>
      <div class="col-4 col-md-3 d-md-block p-3 text-end">
        <div class="dropdown">
          <button
            class="btn dropdown-toggle ncs-btn-versions"
            type="button"
            id="dropdownMenuButton1"
            data-bs-toggle="dropdown"
            aria-expanded="false"
          >
            <span class="d-none d-md-inline">nRF Connect SDK</span>
            <span id="ncsversion" class="d-inline"></span>
          </button>
          <div class="dropdown-menu" aria-labelledby="dropdownMenuButton"></div>
        </div>
      </div>
    </div>
  </div>
  <div class="ncs-header-nav">
    <div class="container-xl">
      <div class="row">
        <div class="col col-12 d-flex justify-content-center">
          <nav class="navbar navbar-dark navbar-expand-lg p-0">
            <span class="navbar-brand d-block d-lg-none py-2 pl-1"
              >Documentation sets</span
            >
            <button
              class="navbar-toggler"
              type="button"
              data-bs-toggle="collapse"
              data-bs-target="#navbarNavAltMarkup"
              aria-controls="navbarNavAltMarkup"
              aria-expanded="false"
              aria-label="Toggle navigation"
            >
              <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="navbarNavAltMarkup">
              <ul class="navbar-nav">
                <li class="nav-item active py-1 px-3">
                  <a
                    class="nav-link"
                    href="../../../../nrf/index.html"
                    >nRF Connect SDK</a
                  >
                </li>
                <li><hr class="dropdown-divider" /></li>
                <li class="nav-item  py-1 px-3">
                  <a
                    class="nav-link"
                    href="../../../../nrfx/index.html"
                    >nrfx</a
                  >
                </li>
                <li><hr class="dropdown-divider" /></li>
                <li class="nav-item  py-1 px-3">
                  <a
                    class="nav-link"
                    href="../../../../nrfxlib/README.html"
                    >nrfxlib</a
                  >
                </li>
                <li><hr class="dropdown-divider" /></li>
                <li class="nav-item  py-1 px-3">
                  <a
                    class="nav-link"
                    href="../../../../zephyr/index.html"
                    >Zephyr Project</a
                  >
                </li>
                <li><hr class="dropdown-divider" /></li>
                <li class="nav-item  py-1 px-3">
                  <a
                    class="nav-link"
                    href="../../../../mcuboot/wrapper.html"
                    >MCUboot</a
                  >
                </li>
                <li><hr class="dropdown-divider" /></li>
                <li class="nav-item  py-1 px-3">
                  <a
                    class="nav-link"
                    href="../../../../tfm/index.html"
                    >Trusted Firmware-M</a
                  >
                </li>
                <li><hr class="dropdown-divider" /></li>
                <li class="nav-item  py-1 px-3">
                  <a
                    class="nav-link"
                    href="../../../../matter/index.html"
                    >Matter</a
                  >
                </li>
                <li><hr class="dropdown-divider" /></li>
                <li class="nav-item  py-1 px-3">
                  <a
                    class="nav-link"
                    href="../../../../kconfig/index.html"
                    >Kconfig Reference</a
                  >
                </li>
                <li><hr class="dropdown-divider" /></li>
              </ul>
            </div>
          </nav>
        </div>
      </div>
    </div>
  </div>
</div>

  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
            <a href="../../../index.html" class="icon icon-home"> nRF Connect SDK
          </a>
              <div class="version">
                2.3.99
              </div>
<div id="searchbox" role="search">
  <div class="searchformwrapper">
    <form id="rtd-search-form" class="wy-form" action="../../../search.html" method="get">
      <input type="text" name="q" placeholder="Search docs" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
  </div>
</div>
<script>$('#searchbox').show(0);</script>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Contents</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../../introduction.html">Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../getting_started.html">Getting started</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../dev_model.html">Development model</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../app_dev.html">Application development</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../security.html">Security</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../ecosystem_integration.html">Ecosystems integration</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../nrf91.html">Working with nRF91 Series</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../nrf70.html">Working with nRF70 Series</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../nrf53.html">Working with nRF53 Series</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../nrf52.html">Working with nRF52 Series</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../protocols.html">Protocols</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../applications.html">Applications</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../samples.html">Samples</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../drivers.html">Drivers</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../libraries/index.html">Libraries</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../../../scripts.html">Scripts</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../../shell/ble_console/README.html">Bluetooth LE Console</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../nrf_provision/fast_pair/README.html">Fast Pair provision script</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../hid_configurator/README.html">HID configurator for nRF Desktop</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../partition_manager/partition_manager.html">Partition Manager</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">Software Bill of Materials</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#overview">Overview</a></li>
<li class="toctree-l3"><a class="reference internal" href="#requirements">Requirements</a></li>
<li class="toctree-l3"><a class="reference internal" href="#using-the-command">Using the command</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#specifying-input">Specifying input</a></li>
<li class="toctree-l4"><a class="reference internal" href="#specifying-output">Specifying output</a></li>
<li class="toctree-l4"><a class="reference internal" href="#detectors">Detectors</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#html-report-overview">HTML report overview</a></li>
<li class="toctree-l3"><a class="reference internal" href="#extracting-a-list-of-files-from-a-build-directory">Extracting a list of files from a build directory</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../memfault/README.html">MDS BLE gateway script</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../release_notes.html">Release notes</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../known_issues.html">Known issues</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../software_maturity.html">Software maturity levels</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../documentation.html">About this documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../glossary.html">Glossary</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../../index.html">nRF Connect SDK</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../../../index.html" class="icon icon-home"></a></li>
          <li class="breadcrumb-item"><a href="../../../scripts.html">Scripts</a></li>
      <li class="breadcrumb-item active">Software Bill of Materials</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../../../_sources/scripts/west_commands/sbom/README.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="software-bill-of-materials">
<span id="west-sbom"></span><h1>Software Bill of Materials<a class="headerlink" href="#software-bill-of-materials" title="Permalink to this heading"></a></h1>
<div class="contents local topic" id="contents">
<ul class="simple">
<li><p><a class="reference internal" href="#overview" id="id6">Overview</a></p></li>
<li><p><a class="reference internal" href="#requirements" id="id7">Requirements</a></p></li>
<li><p><a class="reference internal" href="#using-the-command" id="id8">Using the command</a></p>
<ul>
<li><p><a class="reference internal" href="#specifying-input" id="id9">Specifying input</a></p></li>
<li><p><a class="reference internal" href="#specifying-output" id="id10">Specifying output</a></p></li>
<li><p><a class="reference internal" href="#detectors" id="id11">Detectors</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#html-report-overview" id="id12">HTML report overview</a></p></li>
<li><p><a class="reference internal" href="#extracting-a-list-of-files-from-a-build-directory" id="id13">Extracting a list of files from a build directory</a></p></li>
</ul>
</div>
<p>The Software Bill of Materials (SBOM) is a <span class="xref std std-ref">west</span> extension command that can be invoked by <code class="docutils literal notranslate"><span class="pre">west</span> <span class="pre">ncs-sbom</span></code>.
It provides a list of used licenses for an application build or specific files.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Generating a list of licenses from an application build is <a class="reference internal" href="../../../software_maturity.html#software-maturity"><span class="std std-ref">experimental</span></a>.
The accuracy of detection is constantly verified.
Both implementation and usage may change in the future.</p>
</div>
<section id="overview">
<h2><a class="toc-backref" href="#id6">Overview</a><a class="headerlink" href="#overview" title="Permalink to this heading"></a></h2>
<p>The process of using the <code class="docutils literal notranslate"><span class="pre">ncs-sbom</span></code> command involves the following steps:</p>
<ol class="arabic simple">
<li><p>Create a list of input files based on provided command-line arguments,
for example, all source files used for building a specific application.
For details, see <a class="reference internal" href="#west-sbom-specifying-input"><span class="std std-ref">Specifying input</span></a>.</p></li>
<li><p>Detect the license applied to each file,
for example, read <a class="reference external" href="https://spdx.dev/ids/">SPDX identifier</a> from <code class="docutils literal notranslate"><span class="pre">SPDX-License-Identifier</span></code> tag.
For details, see <a class="reference internal" href="#west-sbom-detectors"><span class="std std-ref">Detectors</span></a>.</p></li>
<li><p>Create an output report containing all the files and license information related to them,
for example, write a report file in HTML format.
For details, see <a class="reference internal" href="#west-sbom-specifying-output"><span class="std std-ref">Specifying output</span></a>.</p></li>
</ol>
</section>
<section id="requirements">
<h2><a class="toc-backref" href="#id7">Requirements</a><a class="headerlink" href="#requirements" title="Permalink to this heading"></a></h2>
<p>The <code class="docutils literal notranslate"><span class="pre">ncs-sbom</span></code> command requires installation of additional Python packages.</p>
<p>Use the following command to install the requirements.</p>
<div class="sphinx-tabs docutils container">
<div aria-label="Tabbed content" class="closeable" role="tablist"><button aria-controls="panel-0-V2luZG93cw==" aria-selected="true" class="sphinx-tabs-tab group-tab" id="tab-0-V2luZG93cw==" name="V2luZG93cw==" role="tab" tabindex="0">Windows</button><button aria-controls="panel-0-TGludXg=" aria-selected="false" class="sphinx-tabs-tab group-tab" id="tab-0-TGludXg=" name="TGludXg=" role="tab" tabindex="-1">Linux</button><button aria-controls="panel-0-bWFjT1M=" aria-selected="false" class="sphinx-tabs-tab group-tab" id="tab-0-bWFjT1M=" name="bWFjT1M=" role="tab" tabindex="-1">macOS</button></div><div aria-labelledby="tab-0-V2luZG93cw==" class="sphinx-tabs-panel group-tab" id="panel-0-V2luZG93cw==" name="V2luZG93cw==" role="tabpanel" tabindex="0"><p>Enter the following command in a command-line window in the <code class="file docutils literal notranslate"><span class="pre">ncs</span></code> folder:</p>
<blockquote>
<div><div class="highlight highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">pip3</span> <span class="n">install</span> <span class="o">-</span><span class="n">r</span> <span class="n">nrf</span><span class="o">/</span><span class="n">scripts</span><span class="o">/</span><span class="n">requirements</span><span class="o">-</span><span class="n">west</span><span class="o">-</span><span class="n">ncs</span><span class="o">-</span><span class="n">sbom</span><span class="o">.</span><span class="n">txt</span>
</pre></div>
</div>
</div></blockquote>
</div><div aria-labelledby="tab-0-TGludXg=" class="sphinx-tabs-panel group-tab" hidden="true" id="panel-0-TGludXg=" name="TGludXg=" role="tabpanel" tabindex="0"><p>Enter the following command in a terminal window in the <code class="file docutils literal notranslate"><span class="pre">ncs</span></code> folder:</p>
<blockquote>
<div><div class="highlight highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">pip3</span> <span class="n">install</span> <span class="o">--</span><span class="n">user</span> <span class="o">-</span><span class="n">r</span> <span class="n">nrf</span><span class="o">/</span><span class="n">scripts</span><span class="o">/</span><span class="n">requirements</span><span class="o">-</span><span class="n">west</span><span class="o">-</span><span class="n">ncs</span><span class="o">-</span><span class="n">sbom</span><span class="o">.</span><span class="n">txt</span>
</pre></div>
</div>
</div></blockquote>
</div><div aria-labelledby="tab-0-bWFjT1M=" class="sphinx-tabs-panel group-tab" hidden="true" id="panel-0-bWFjT1M=" name="bWFjT1M=" role="tabpanel" tabindex="0"><p>Enter the following command in a terminal window in the <code class="file docutils literal notranslate"><span class="pre">ncs</span></code> folder:</p>
<blockquote>
<div><div class="highlight highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">pip3</span> <span class="n">install</span> <span class="o">-</span><span class="n">r</span> <span class="n">nrf</span><span class="o">/</span><span class="n">scripts</span><span class="o">/</span><span class="n">requirements</span><span class="o">-</span><span class="n">west</span><span class="o">-</span><span class="n">ncs</span><span class="o">-</span><span class="n">sbom</span><span class="o">.</span><span class="n">txt</span>
</pre></div>
</div>
</div></blockquote>
</div></div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The <code class="docutils literal notranslate"><span class="pre">ncs-sbom</span></code> command uses the <a class="reference external" href="https://scancode-toolkit.readthedocs.io/">Scancode-Toolkit</a> that requires installation of additional dependencies on a Linux system.
To install the required tools on Ubuntu, run:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">sudo</span> <span class="n">apt</span> <span class="n">install</span> <span class="n">python</span><span class="o">-</span><span class="n">dev</span> <span class="n">bzip2</span> <span class="n">xz</span><span class="o">-</span><span class="n">utils</span> <span class="n">zlib1g</span> <span class="n">libxml2</span><span class="o">-</span><span class="n">dev</span> <span class="n">libxslt1</span><span class="o">-</span><span class="n">dev</span> <span class="n">libpopt0</span>
</pre></div>
</div>
<p>For more details, see <a class="reference external" href="https://scancode-toolkit.readthedocs.io/en/stable/getting-started/install.html">Scancode-Toolkit Installation</a>.</p>
</div>
</section>
<section id="using-the-command">
<h2><a class="toc-backref" href="#id8">Using the command</a><a class="headerlink" href="#using-the-command" title="Permalink to this heading"></a></h2>
<p>The following examples demonstrate the basic usage of the <code class="docutils literal notranslate"><span class="pre">ncs-sbom</span></code> command.</p>
<ul>
<li><p>To see the help, run the following command:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>west<span class="w"> </span>ncs-sbom<span class="w"> </span>-h
</pre></div>
</div>
</li>
<li><p>To get an analysis of the built application and generate a report to the <code class="file docutils literal notranslate"><span class="pre">sbom_report.html</span></code> file in the build directory, run:</p>
<pre class="highlight literal-block"> west ncs-sbom -d <em>build-directory</em></pre>
</li>
<li><p>To analyze the selected files and generate a report to an HTML file, run:</p>
<pre class="highlight literal-block">west ncs-sbom --input-files <em>file1</em> <em>file2</em> --output-html <em>file-name.html</em></pre>
</li>
</ul>
<section id="specifying-input">
<span id="west-sbom-specifying-input"></span><h3><a class="toc-backref" href="#id9">Specifying input</a><a class="headerlink" href="#specifying-input" title="Permalink to this heading"></a></h3>
<p>You can specify all input options several times to provide more input for the report generation, for example, generate a report for two applications.
You can also mix them, for example, to generate a report for the application and some directory.</p>
<ul>
<li><p>To get an application SBOM from a build directory, use the following option:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>-d<span class="w"> </span>build_directory
</pre></div>
</div>
<p>You have to first build the <code class="docutils literal notranslate"><span class="pre">build_directory</span></code> with the <code class="docutils literal notranslate"><span class="pre">west</span> <span class="pre">build</span></code> command using Ninja as the underlying build tool (default).
The build must be successful.
Any change in the application configuration may affect the results, so always rebuild it after reconfiguration and before calling the <code class="docutils literal notranslate"><span class="pre">west</span> <span class="pre">ncs-sbom</span></code>.</p>
<p>You can skip this option if you are in the application directory and you have a default <code class="file docutils literal notranslate"><span class="pre">build</span></code> directory there - the same way as in <code class="docutils literal notranslate"><span class="pre">west</span> <span class="pre">build</span></code> command.</p>
<p>The <a class="reference internal" href="#west-sbom-extracting-from-build"><span class="std std-ref">Extracting a list of files from a build directory</span></a> section describes in detail how to extract a list of files from a build directory.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>All files that are not dependencies of the <code class="file docutils literal notranslate"><span class="pre">zephyr/zephyr.elf</span></code> target are not taken as an input.
If you modify the <code class="file docutils literal notranslate"><span class="pre">.elf</span></code> file after the linking, the modifications are not applied.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">-d</span></code> option is experimental.</p>
</div>
</li>
<li><p>Provide a list of input files directly on the command line:</p>
<pre class="highlight literal-block">--input-files <em>file1</em> <em>file2</em> ...</pre>
<p>Each argument of this option can contain globs as defined by <a class="reference external" href="https://docs.python.org/3/library/pathlib.html#pathlib.Path.glob">Python’s Path.glob</a> with two additions:</p>
<ul class="simple">
<li><p>Support for absolute paths.</p></li>
<li><p>Exclamation mark <code class="docutils literal notranslate"><span class="pre">!</span></code> to exclude files.</p></li>
</ul>
<p>For example, if you want to include all <code class="file docutils literal notranslate"><span class="pre">.c</span></code> files from the current directory and all subdirectories recursively:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>--input-files<span class="w"> </span><span class="s1">&#39;**/*.c&#39;</span>
</pre></div>
</div>
<p>Make sure to have correct quotes around globs, to not have the glob resolved by your shell, and go untouched to the command.</p>
<p>You can prefix a pattern with the exclamation mark <code class="docutils literal notranslate"><span class="pre">!</span></code> to exclude some files.
Patterns are evaluated from left to right, so <code class="docutils literal notranslate"><span class="pre">!</span></code> excludes files from patterns before it, but not after.
For example, if you want to include all <code class="file docutils literal notranslate"><span class="pre">.c</span></code> files from the current directory and all subdirectories recursively except all <code class="file docutils literal notranslate"><span class="pre">main.c</span></code> files, run:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>--input-files<span class="w"> </span><span class="s1">&#39;**/*.c&#39;</span><span class="w"> </span><span class="s1">&#39;!**/main.c&#39;</span>
</pre></div>
</div>
</li>
<li><p>Read a list of input files from a file:</p>
<pre class="highlight literal-block">--input-list-file <em>list_file</em></pre>
<p>It does the same as <code class="docutils literal notranslate"><span class="pre">--input-files</span></code>, but it reads files and patterns from a file (one file or pattern per line).
Files and patterns contained in the list file are relative to the list file location (not the current directory).
Comments starting with a <code class="docutils literal notranslate"><span class="pre">#</span></code> character are allowed.</p>
</li>
</ul>
</section>
<section id="specifying-output">
<span id="west-sbom-specifying-output"></span><h3><a class="toc-backref" href="#id10">Specifying output</a><a class="headerlink" href="#specifying-output" title="Permalink to this heading"></a></h3>
<p>You can specify the format of the report output using the <code class="docutils literal notranslate"><span class="pre">output</span></code> argument.</p>
<ul>
<li><p>To generate a report in HTML format:</p>
<pre class="highlight literal-block">--output-html <em>file-name.html</em></pre>
<p>The <a class="reference internal" href="#west-sbom-html-report-overview"><span class="std std-ref">HTML report overview</span></a> section provides more details about the report.</p>
<p>If you use the <code class="docutils literal notranslate"><span class="pre">-d</span></code> option, you do not need to specify any output argument.
The <code class="file docutils literal notranslate"><span class="pre">sbom_report.html</span></code> file is generated in your build directory
(the first one if you specify more than one build directory).</p>
</li>
<li><p>To generate a cache database:</p>
<pre class="highlight literal-block">--output-cache-database <em>cache-database.json</em></pre>
<p>For details, see <code class="docutils literal notranslate"><span class="pre">cache-database</span></code> detector.</p>
</li>
</ul>
</section>
<section id="detectors">
<span id="west-sbom-detectors"></span><h3><a class="toc-backref" href="#id11">Detectors</a><a class="headerlink" href="#detectors" title="Permalink to this heading"></a></h3>
<p>The <code class="docutils literal notranslate"><span class="pre">ncs-sbom</span></code> command includes the following detectors:</p>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">spdx-tag</span></code> - Search for the <code class="docutils literal notranslate"><span class="pre">SPDX-License-Identifier</span></code> in the source code or the binary file.</p>
<p>For guidelines, see <a class="reference external" href="https://spdx.dev/ids/">SPDX identifier</a>. Enabled by default.</p>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">full-text</span></code> - Compare the contents of the source file with a small database of reference texts.</p>
<p>The database is part of the <code class="docutils literal notranslate"><span class="pre">ncs-sbom</span></code> command. Enabled by default.</p>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">scancode-toolkit</span></code> - License detection by the <a class="reference external" href="https://scancode-toolkit.readthedocs.io/">Scancode-Toolkit</a>. Enabled and optional by default.</p>
<p>If the <code class="docutils literal notranslate"><span class="pre">scancode</span></code> command is not on your <code class="docutils literal notranslate"><span class="pre">PATH</span></code>, you can use the <code class="docutils literal notranslate"><span class="pre">--scancode</span></code> option to provide it, for example:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>--scancode<span class="w"> </span>~/scancode-toolkit/scancode
</pre></div>
</div>
<p>This detector is optional because it is significantly slower than the others.</p>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">external-file</span></code> - Search for license information in an external file. Enabled by default.</p>
<p>The external file has the following properties:</p>
<blockquote>
<div><ul class="simple">
<li><p>It is located in the same directory as the file under detection or in one of its parent directories .</p></li>
<li><p>Its name contains <code class="docutils literal notranslate"><span class="pre">LICENSE</span></code>, <code class="docutils literal notranslate"><span class="pre">LICENCE</span></code> or <code class="docutils literal notranslate"><span class="pre">COPYING</span></code> (case insensitive).</p></li>
<li><p>It has an <code class="docutils literal notranslate"><span class="pre">SPDX-License-Identifier</span></code> tag.</p></li>
<li><p>It has one or several <code class="docutils literal notranslate"><span class="pre">NCS-SBOM-Apply-To-File</span></code> tags containing file paths or globs (as defined by the <a class="reference external" href="https://docs.python.org/3/library/pathlib.html#pathlib.Path.glob">Python’s Path.glob</a>).
They are relative to the external file.</p></li>
</ul>
</div></blockquote>
<p>If any of the <code class="docutils literal notranslate"><span class="pre">NCS-SBOM-Apply-To-File</span></code> tags matches the file under detection, the license from the SPDX tag is used, for example:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>/* The following lines will apply Nordic 5-Clause license to all &quot;.a&quot; files
 * and &quot;.lib&quot; files in the &quot;lib&quot; directory and all its subdirectories.
 *
 * SPDX-License-Identifier: LicenseRef-Nordic-5-Clause
 * NCS-SBOM-Apply-To-File: lib/**/*.a
 * NCS-SBOM-Apply-To-File: lib/**/*.lib
 */
</pre></div>
</div>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">cache-database</span></code> - Use license information detected and cached earlier in the cache database file.
Disabled by default.</p>
<p>Provide the cache database file using the following argument:</p>
<pre class="highlight literal-block">--input-cache-database <em>cache-database.json</em></pre>
<p>Each database entry has a path relative to the west workspace directory, a hash, and a list of detected licenses.
If the file under detection has the same path and hash, the list of licenses from the database is used.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>To generate the database based on, for example the <code class="docutils literal notranslate"><span class="pre">scancode-toolkit</span></code> detector, run the following command:</p>
<pre class="highlight literal-block">west ncs-sbom --input-files <em>files ...</em> --license-detectors scancode-toolkit --output-cache-database <em>cache-database.json</em></pre>
</div>
</li>
</ul>
<p>If you prefer a non-default set of detectors, you can provide a list of comma-separated detectors with the <code class="docutils literal notranslate"><span class="pre">--license-detectors</span></code> option, for example:</p>
<blockquote>
<div><div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>--license-detectors<span class="w"> </span>spdx-tag,scancode-toolkit
</pre></div>
</div>
</div></blockquote>
<p>Some of the detectors are optional, which means that they are not executed for a file that
already has licenses detected by some other previously executed detector.
Detectors are executed from left to right using a list provided by the <code class="docutils literal notranslate"><span class="pre">--license-detectors</span></code>.</p>
<blockquote>
<div><div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>--optional-license-detectors<span class="w"> </span>scancode-toolkit
</pre></div>
</div>
</div></blockquote>
<p>Some detectors may run in parallel on all available CPU cores, which speeds up the detection time.
Use the <code class="docutils literal notranslate"><span class="pre">-n</span></code> option to limit the number of parallel threads or processes.</p>
</section>
</section>
<section id="html-report-overview">
<span id="west-sbom-html-report-overview"></span><h2><a class="toc-backref" href="#id12">HTML report overview</a><a class="headerlink" href="#html-report-overview" title="Permalink to this heading"></a></h2>
<p>The HTML report has following structure:</p>
<ul>
<li><p>Summary of the report, containing the following:</p>
<blockquote>
<div><ul>
<li><p>Notes at the beginning.</p>
<p>General information on the report.</p>
</li>
<li><p>List of inputs.</p>
<p>The file sources.</p>
</li>
<li><p>List of licenses.</p>
<p>All licenses detected in the input files.</p>
</li>
<li><p>List of added license texts.</p>
<p>If a license is not in the <a class="reference external" href="https://spdx.org/licenses/">SPDX License List</a> and it is in the internal database,
the license text is added to the report.</p>
</li>
</ul>
</div></blockquote>
<p>You can click links in the summary to get more details about specific items.</p>
</li>
<li><p>List of files without any license information or with license information that cannot be detected automatically.</p>
<p>You have to investigate them manually to get the license information.</p>
</li>
<li><p>Details about each detected license:</p>
<blockquote>
<div><ul class="simple">
<li><p>License identifier.</p></li>
<li><p>Information if it is a standard SPDX license.</p></li>
<li><p>License name if available.</p></li>
<li><p>Link to license text or more details if available.</p></li>
<li><p>All files from the input covered by this license.</p></li>
</ul>
</div></blockquote>
</li>
<li><p>License texts added to this report.</p></li>
</ul>
</section>
<section id="extracting-a-list-of-files-from-a-build-directory">
<span id="west-sbom-extracting-from-build"></span><h2><a class="toc-backref" href="#id13">Extracting a list of files from a build directory</a><a class="headerlink" href="#extracting-a-list-of-files-from-a-build-directory" title="Permalink to this heading"></a></h2>
<p>The <code class="docutils literal notranslate"><span class="pre">ncs-sbom</span></code> extracts a list of files from a build directory.
It queries ninja for the targets and dependencies.</p>
<p>The entry point is the <code class="file docutils literal notranslate"><span class="pre">zephyr/zephyr.elf</span></code> target file.
The script asks ninja for all input targets of the <code class="file docutils literal notranslate"><span class="pre">zephyr/zephyr.elf</span></code> target.
It also asks for all input targets of the previously extracted input targets,
until it reaches all leaves in the dependency tree.
The result is a list of all the leaves.</p>
<p>To change the target or specify multiple targets, you can add them after the build directory in the <code class="docutils literal notranslate"><span class="pre">-d</span></code> option, for example:</p>
<pre class="highlight literal-block">-d build_directory <em>target1.elf</em> <em>target2.elf</em></pre>
<p>There are two additional methods for improving the correctness of the above algorithm:</p>
<ul>
<li><p>Each library is examined using the GNU ar tool.</p>
<p>If the list of files returned by the GNU ar tool is covered by the list returned from the ninja, the list is assumed to be valid.
Otherwise, the library is assumed to be a leaf, so it is shown in the report and its inputs are not analyzed further.</p>
</li>
<li><p>The <code class="docutils literal notranslate"><span class="pre">ncs-sbom</span></code> parses the <code class="file docutils literal notranslate"><span class="pre">.map</span></code> file created during the <code class="file docutils literal notranslate"><span class="pre">zephyr/zephyr.elf</span></code> linking.</p>
<p>It provides a list of all object files and libraries linked to the <code class="file docutils literal notranslate"><span class="pre">zephyr/zephyr.elf</span></code> file.
The script ends with a fatal error if any file in the <code class="file docutils literal notranslate"><span class="pre">.map</span></code> file is not visible by ninja.</p>
<p>Exceptions are the runtime and standard libraries.
You can specify the list of exceptions with the <code class="docutils literal notranslate"><span class="pre">--allowed-in-map-file-only</span></code> option.
By default, it contains a few common names for the runtime and standard libraries.</p>
<p>If the <code class="file docutils literal notranslate"><span class="pre">.map</span></code> file and the associated <code class="file docutils literal notranslate"><span class="pre">.elf</span></code> file have different names,
you can provide the <code class="file docutils literal notranslate"><span class="pre">.map</span></code> file after the <code class="docutils literal notranslate"><span class="pre">:</span></code> sign following the target,
for example:</p>
<pre class="highlight literal-block">-d build_directory <em>target.elf</em>:<em>file.map</em></pre>
</li>
</ul>
</section>
</section>


           </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="../../memfault/README.html" class="btn btn-neutral float-right" title="MDS BLE gateway script" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="../../partition_manager/partition_manager.html" class="btn btn-neutral" title="Partition Manager" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">

<table>
<tr>
<td>
    <p>
        &copy; Copyright 2019-2023, Nordic Semiconductor.
      Last updated on Mar 20, 2023.

    </p>
</td>
<td id="nordiclogo">
  <a href="https://www.nordicsemi.com/"><img src="../../../_static/images/nordic-logo.png" border="0"/></a>
</td>
</tr>
</table>
  </div> 


</footer>

<div id="scroll-container">
  <button type="button" id="scroll-btn" class="btn">
    <svg xmlns="http://www.w3.org/2000/svg" height="24" viewBox="0 0 24 24" width="24"><path d="M0 0h24v24H0z" fill="none"/><path d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z" fill="#fff"/></svg>
  </button>
</div>

<script>
  const scrollBtn = document.querySelector("#scroll-btn");

  document.addEventListener("scroll", () => {
    if (window.scrollY > 400) {
          scrollBtn.style.visibility = "visible";
      } else {
          scrollBtn.style.visibility = "hidden";
      }
  });

  scrollBtn.addEventListener("click", () => {
      window.scrollTo({ top: 0, behavior: "smooth" });
  });
</script>
        </div>
      </div>
    </section>
  </div>
  
  <div class="rst-versions" data-toggle="rst-versions" role="note" aria-label="versions">
    <span class="rst-current-version" data-toggle="rst-current-version">
      <span class="fa fa-book"> nRF Connect SDK</span>
       <span class="fa fa-caret-down"></span>
    </span>
    <div class="rst-other-versions">
      
      <div class="rst-other-version ncs">
        <a href="../../../../nrf/index.html">nRF Connect SDK</a>
      </div>
      
      <div class="rst-other-version nrfx">
        <a href="../../../../nrfx/index.html">nrfx</a>
      </div>
      
      <div class="rst-other-version nrfxlib">
        <a href="../../../../nrfxlib/README.html">nrfxlib</a>
      </div>
      
      <div class="rst-other-version zephyr">
        <a href="../../../../zephyr/index.html">Zephyr Project</a>
      </div>
      
      <div class="rst-other-version mcuboot">
        <a href="../../../../mcuboot/wrapper.html">MCUboot</a>
      </div>
      
      <div class="rst-other-version tfm">
        <a href="../../../../tfm/index.html">Trusted Firmware-M</a>
      </div>
      
      <div class="rst-other-version matter">
        <a href="../../../../matter/index.html">Matter</a>
      </div>
      
      <div class="rst-other-version kconfig">
        <a href="../../../../kconfig/index.html">Kconfig Reference</a>
      </div>
    </div>
  </div><script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>