<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Fast Pair provision script &mdash; nRF Connect SDK 2.3.99 documentation</title>
      <link rel="stylesheet" href="../../../_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="../../../_static/css/nordic.css" type="text/css" />
      <link rel="stylesheet" href="../../../_static/togglebutton.css" type="text/css" />
      <link rel="stylesheet" href="../../../_static/css/nrf.css" type="text/css" />
      <link rel="stylesheet" href="../../../_static/tabs.css" type="text/css" /> 
  <!--[if lt IE 9]>
    <script src="../../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="../../../" id="documentation_options" src="../../../_static/documentation_options.js"></script>
        <script src="../../../_static/jquery.js"></script>
        <script src="../../../_static/underscore.js"></script>
        <script src="../../../_static/_sphinx_javascript_frameworks_compat.js"></script>
        <script src="../../../_static/doctools.js"></script>
        <script src="../../../_static/sphinx_highlight.js"></script>
        <script src="https://www.googletagmanager.com/gtag/js?id=G-ZPVZRKFQJR"></script>
        <script src="../../../_static/js/ga-tracker.js"></script>
        <script data-culture="EN" id="CookieConsent" type="text/javascript" src="https://policy.app.cookieinformation.com/uc.js"></script>
        <script>let toggleHintShow = 'Click to show';</script>
        <script>let toggleHintHide = 'Click to hide';</script>
        <script>let toggleOpenOnPrint = 'true';</script>
        <script src="../../../_static/togglebutton.js"></script>
        <script>var togglebuttonSelector = '.toggle, .admonition.dropdown';</script>
    <script src="../../../_static/js/theme.js"></script>
<script
  type="text/javascript"
  src="../../../_static/js/ncs.js"
></script>
<script src="../../../_static/js/bootstrap.bundle.min.js"></script>

    <link rel="index" title="Index" href="../../../genindex.html" />
    <link rel="search" title="Search" href="../../../search.html" />
    <link rel="next" title="HID configurator for nRF Desktop" href="../../hid_configurator/README.html" />
    <link rel="prev" title="Bluetooth LE Console" href="../../shell/ble_console/README.html" />
<link
  href="../../../_static/css/bootstrap.min.css"
  rel="stylesheet"
/>
<link
  rel="shortcut icon"
  href="../../../_static/images/favicon.ico"
/>

</head>

<body class="wy-body-for-nav">
<div class="announcement"></div>
<div class="d-print-none ncs-header">
  <div class="container-xl ncs-header-top">
    <div class="row h-100">
      <div class="d-none d-md-block col-2">
        <div class="bg-white py-4 px-3 ml-2 ncs-header-logo">
          <img
            class="ncs-header-logo"
            src="../../../_static/images/nordic-logo.png"
            alt=""
          />
        </div>
      </div>
      <div
        class="col-8 col-md-7 pl-md-4 d-flex align-self-center justify-content-center"
      >
        <form class="w-75" action="../../../search.html" method="get">
          <div class="form-group">
            <input
              type="text"
              name="q"
              class="ncs-search-input form-control"
              placeholder="Search all docs..."
            />
          </div>
        </form>
      </div>
      <div class="col-4 col-md-3 d-md-block p-3 text-end">
        <div class="dropdown">
          <button
            class="btn dropdown-toggle ncs-btn-versions"
            type="button"
            id="dropdownMenuButton1"
            data-bs-toggle="dropdown"
            aria-expanded="false"
          >
            <span class="d-none d-md-inline">nRF Connect SDK</span>
            <span id="ncsversion" class="d-inline"></span>
          </button>
          <div class="dropdown-menu" aria-labelledby="dropdownMenuButton"></div>
        </div>
      </div>
    </div>
  </div>
  <div class="ncs-header-nav">
    <div class="container-xl">
      <div class="row">
        <div class="col col-12 d-flex justify-content-center">
          <nav class="navbar navbar-dark navbar-expand-lg p-0">
            <span class="navbar-brand d-block d-lg-none py-2 pl-1"
              >Documentation sets</span
            >
            <button
              class="navbar-toggler"
              type="button"
              data-bs-toggle="collapse"
              data-bs-target="#navbarNavAltMarkup"
              aria-controls="navbarNavAltMarkup"
              aria-expanded="false"
              aria-label="Toggle navigation"
            >
              <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="navbarNavAltMarkup">
              <ul class="navbar-nav">
                <li class="nav-item active py-1 px-3">
                  <a
                    class="nav-link"
                    href="../../../../nrf/index.html"
                    >nRF Connect SDK</a
                  >
                </li>
                <li><hr class="dropdown-divider" /></li>
                <li class="nav-item  py-1 px-3">
                  <a
                    class="nav-link"
                    href="../../../../nrfx/index.html"
                    >nrfx</a
                  >
                </li>
                <li><hr class="dropdown-divider" /></li>
                <li class="nav-item  py-1 px-3">
                  <a
                    class="nav-link"
                    href="../../../../nrfxlib/README.html"
                    >nrfxlib</a
                  >
                </li>
                <li><hr class="dropdown-divider" /></li>
                <li class="nav-item  py-1 px-3">
                  <a
                    class="nav-link"
                    href="../../../../zephyr/index.html"
                    >Zephyr Project</a
                  >
                </li>
                <li><hr class="dropdown-divider" /></li>
                <li class="nav-item  py-1 px-3">
                  <a
                    class="nav-link"
                    href="../../../../mcuboot/wrapper.html"
                    >MCUboot</a
                  >
                </li>
                <li><hr class="dropdown-divider" /></li>
                <li class="nav-item  py-1 px-3">
                  <a
                    class="nav-link"
                    href="../../../../tfm/index.html"
                    >Trusted Firmware-M</a
                  >
                </li>
                <li><hr class="dropdown-divider" /></li>
                <li class="nav-item  py-1 px-3">
                  <a
                    class="nav-link"
                    href="../../../../matter/index.html"
                    >Matter</a
                  >
                </li>
                <li><hr class="dropdown-divider" /></li>
                <li class="nav-item  py-1 px-3">
                  <a
                    class="nav-link"
                    href="../../../../kconfig/index.html"
                    >Kconfig Reference</a
                  >
                </li>
                <li><hr class="dropdown-divider" /></li>
              </ul>
            </div>
          </nav>
        </div>
      </div>
    </div>
  </div>
</div>

  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
            <a href="../../../index.html" class="icon icon-home"> nRF Connect SDK
          </a>
              <div class="version">
                2.3.99
              </div>
<div id="searchbox" role="search">
  <div class="searchformwrapper">
    <form id="rtd-search-form" class="wy-form" action="../../../search.html" method="get">
      <input type="text" name="q" placeholder="Search docs" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
  </div>
</div>
<script>$('#searchbox').show(0);</script>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Contents</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../../introduction.html">Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../getting_started.html">Getting started</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../dev_model.html">Development model</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../app_dev.html">Application development</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../security.html">Security</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../ecosystem_integration.html">Ecosystems integration</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../nrf91.html">Working with nRF91 Series</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../nrf70.html">Working with nRF70 Series</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../nrf53.html">Working with nRF53 Series</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../nrf52.html">Working with nRF52 Series</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../protocols.html">Protocols</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../applications.html">Applications</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../samples.html">Samples</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../drivers.html">Drivers</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../libraries/index.html">Libraries</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../../../scripts.html">Scripts</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../../shell/ble_console/README.html">Bluetooth LE Console</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">Fast Pair provision script</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#overview">Overview</a></li>
<li class="toctree-l3"><a class="reference internal" href="#requirements">Requirements</a></li>
<li class="toctree-l3"><a class="reference internal" href="#using-the-script">Using the script</a></li>
<li class="toctree-l3"><a class="reference internal" href="#implementation-details">Implementation details</a></li>
<li class="toctree-l3"><a class="reference internal" href="#dependencies">Dependencies</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../hid_configurator/README.html">HID configurator for nRF Desktop</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../partition_manager/partition_manager.html">Partition Manager</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../west_commands/sbom/README.html">Software Bill of Materials</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../memfault/README.html">MDS BLE gateway script</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../release_notes.html">Release notes</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../known_issues.html">Known issues</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../software_maturity.html">Software maturity levels</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../documentation.html">About this documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../glossary.html">Glossary</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../../index.html">nRF Connect SDK</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../../../index.html" class="icon icon-home"></a></li>
          <li class="breadcrumb-item"><a href="../../../scripts.html">Scripts</a></li>
      <li class="breadcrumb-item active">Fast Pair provision script</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../../../_sources/scripts/nrf_provision/fast_pair/README.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="fast-pair-provision-script">
<span id="bt-fast-pair-provision-script"></span><h1>Fast Pair provision script<a class="headerlink" href="#fast-pair-provision-script" title="Permalink to this heading"></a></h1>
<div class="contents local topic" id="contents">
<ul class="simple">
<li><p><a class="reference internal" href="#overview" id="id6">Overview</a></p></li>
<li><p><a class="reference internal" href="#requirements" id="id7">Requirements</a></p></li>
<li><p><a class="reference internal" href="#using-the-script" id="id8">Using the script</a></p></li>
<li><p><a class="reference internal" href="#implementation-details" id="id9">Implementation details</a></p></li>
<li><p><a class="reference internal" href="#dependencies" id="id10">Dependencies</a></p></li>
</ul>
</div>
<p>This Python script generates a hexadecimal file required for the <a class="reference internal" href="../../../external_comp/bt_fast_pair.html#ug-bt-fast-pair"><span class="std std-ref">Google Fast Pair integration in the nRF Connect SDK</span></a>.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>When you <a class="reference internal" href="../../../external_comp/bt_fast_pair.html#ug-bt-fast-pair"><span class="std std-ref">use Google Fast Pair with the nRF Connect SDK</span></a>, the script is automatically called by the build system.
There is no need to generate and program the hexadecimal file manually.
See <a class="reference internal" href="../../../external_comp/bt_fast_pair.html#ug-bt-fast-pair-provisioning"><span class="std std-ref">Provisioning the device</span></a> for details.</p>
</div>
<section id="overview">
<h2><a class="toc-backref" href="#id6">Overview</a><a class="headerlink" href="#overview" title="Permalink to this heading"></a></h2>
<p>The generated hexadecimal file contains the following data obtained during the Fast Pair Provider model registration:</p>
<ul class="simple">
<li><p>Model ID</p></li>
<li><p>Anti-Spoofing Private Key</p></li>
</ul>
<p>See <a class="reference external" href="https://developers.google.com/nearby/fast-pair/specifications/service/modelregistration">Fast Pair Model Registration</a> in the Google Fast Pair Service documentation for details.</p>
</section>
<section id="requirements">
<h2><a class="toc-backref" href="#id7">Requirements</a><a class="headerlink" href="#requirements" title="Permalink to this heading"></a></h2>
<p>The script source files are located in the <code class="file docutils literal notranslate"><span class="pre">scripts/nrf_provision/fast_pair</span></code> directory.</p>
<p>The script uses the <a class="reference external" href="https://python-intelhex.readthedocs.io/en/latest/">IntelHex</a> Python library to generate the hexadecimal file.</p>
<p>To install the script’s requirements, run the following command in its directory:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">python3 -m pip install -r requirements.txt</span>
</pre></div>
</div>
</section>
<section id="using-the-script">
<h2><a class="toc-backref" href="#id8">Using the script</a><a class="headerlink" href="#using-the-script" title="Permalink to this heading"></a></h2>
<p>Run the script commands in the <code class="file docutils literal notranslate"><span class="pre">scripts/nrf_provision/fast_pair</span></code> directory to start using the script.
To list the script arguments, run the following command:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">python3 fp_provision_cli.py -h</span>
</pre></div>
</div>
<p>The following help information describes the available script arguments:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">Fast Pair Provisioning Tool</span>

<span class="go">optional arguments:</span>
<span class="go">  -h, --help            show this help message and exit</span>
<span class="go">  -o OUT_FILE, --out_file OUT_FILE</span>
<span class="go">                        Name of the output file</span>
<span class="go">  -a ADDRESS, --address ADDRESS</span>
<span class="go">                        Address of provisioning partition start (in hex)</span>
<span class="go">  -m MODEL_ID, --model_id MODEL_ID</span>
<span class="go">                        Model ID (in format 0xXXXXXX)</span>
<span class="go">  -k ANTI_SPOOFING_KEY, --anti_spoofing_key ANTI_SPOOFING_KEY</span>
<span class="go">                        Anti Spoofing Key (base64 encoded)</span>
</pre></div>
</div>
<p>The following commands show an example of a script call that uses short names of arguments:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">python3 fp_provision_cli.py -o=provision.hex -a=0x50000 -m=&quot;0xFFFFFF&quot; -k=&quot;AbAbAbAbAbAbAbAbAbAbAbAbAbAbAbAbAbAbAbAbAbA=&quot;</span>
</pre></div>
</div>
<p>The following commands show an example of a script call that uses full names of arguments:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">python3 fp_provision_cli.py --out_file=provision.hex --address=0x50000 --model_id=&quot;0xFFFFFF&quot; --anti_spoofing_key=&quot;AbAbAbAbAbAbAbAbAbAbAbAbAbAbAbAbAbAbAbAbAbA=&quot;</span>
</pre></div>
</div>
<p>Make sure to replace the following parameter values:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">0xFFFFFF</span></code> - Add your Model ID.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">AbAbAbAbAbAbAbAbAbAbAbAbAbAbAbAbAbAbAbAbAbA=</span></code> - Add your Anti Spoofing Key.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">0x50000</span></code> - Add the address of the <code class="docutils literal notranslate"><span class="pre">bt_fast_pair</span></code> partition defined by the <a class="reference internal" href="../../partition_manager/partition_manager.html#partition-manager"><span class="std std-ref">Partition Manager</span></a>.</p></li>
</ul>
</section>
<section id="implementation-details">
<h2><a class="toc-backref" href="#id9">Implementation details</a><a class="headerlink" href="#implementation-details" title="Permalink to this heading"></a></h2>
<p>The script converts the Model ID and Anti-Spoofing Private Key to bytes and places them under the predefined offsets in the generated hexadecimal file.
The ID and the key are required by the Google Fast Pair Service and are provided as command line arguments (see <a class="reference internal" href="#using-the-script">Using the script</a>).
The magic data with predefined value is placed right before the mentioned provisioning data.
The SHA-256 hash is calculated using the magic data and the provisioning data, and then placed right after the provisioning data to ensure data integrity.</p>
<p>The generated data must be placed on a dedicated <code class="docutils literal notranslate"><span class="pre">bt_fast_pair</span></code> partition defined by the <a class="reference internal" href="../../partition_manager/partition_manager.html#partition-manager"><span class="std std-ref">Partition Manager</span></a>.
The <a class="reference internal" href="../../../libraries/bluetooth_services/services/fast_pair.html#bt-fast-pair-readme"><span class="std std-ref">Google Fast Pair Service (GFPS)</span></a> knows both the offset sizes and lengths of the individual data fields in the provisioning data.
The service accesses the data by reading flash content.
The service calculates the hash on its own and checks whether it matches the hash stored on the partition.</p>
</section>
<section id="dependencies">
<h2><a class="toc-backref" href="#id10">Dependencies</a><a class="headerlink" href="#dependencies" title="Permalink to this heading"></a></h2>
<p>The script uses the <a class="reference external" href="https://python-intelhex.readthedocs.io/en/latest/">IntelHex</a> Python library.</p>
</section>
</section>


           </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="../../hid_configurator/README.html" class="btn btn-neutral float-right" title="HID configurator for nRF Desktop" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="../../shell/ble_console/README.html" class="btn btn-neutral" title="Bluetooth LE Console" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">

<table>
<tr>
<td>
    <p>
        &copy; Copyright 2019-2023, Nordic Semiconductor.
      Last updated on Mar 20, 2023.

    </p>
</td>
<td id="nordiclogo">
  <a href="https://www.nordicsemi.com/"><img src="../../../_static/images/nordic-logo.png" border="0"/></a>
</td>
</tr>
</table>
  </div> 


</footer>

<div id="scroll-container">
  <button type="button" id="scroll-btn" class="btn">
    <svg xmlns="http://www.w3.org/2000/svg" height="24" viewBox="0 0 24 24" width="24"><path d="M0 0h24v24H0z" fill="none"/><path d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z" fill="#fff"/></svg>
  </button>
</div>

<script>
  const scrollBtn = document.querySelector("#scroll-btn");

  document.addEventListener("scroll", () => {
    if (window.scrollY > 400) {
          scrollBtn.style.visibility = "visible";
      } else {
          scrollBtn.style.visibility = "hidden";
      }
  });

  scrollBtn.addEventListener("click", () => {
      window.scrollTo({ top: 0, behavior: "smooth" });
  });
</script>
        </div>
      </div>
    </section>
  </div>
  
  <div class="rst-versions" data-toggle="rst-versions" role="note" aria-label="versions">
    <span class="rst-current-version" data-toggle="rst-current-version">
      <span class="fa fa-book"> nRF Connect SDK</span>
       <span class="fa fa-caret-down"></span>
    </span>
    <div class="rst-other-versions">
      
      <div class="rst-other-version ncs">
        <a href="../../../../nrf/index.html">nRF Connect SDK</a>
      </div>
      
      <div class="rst-other-version nrfx">
        <a href="../../../../nrfx/index.html">nrfx</a>
      </div>
      
      <div class="rst-other-version nrfxlib">
        <a href="../../../../nrfxlib/README.html">nrfxlib</a>
      </div>
      
      <div class="rst-other-version zephyr">
        <a href="../../../../zephyr/index.html">Zephyr Project</a>
      </div>
      
      <div class="rst-other-version mcuboot">
        <a href="../../../../mcuboot/wrapper.html">MCUboot</a>
      </div>
      
      <div class="rst-other-version tfm">
        <a href="../../../../tfm/index.html">Trusted Firmware-M</a>
      </div>
      
      <div class="rst-other-version matter">
        <a href="../../../../matter/index.html">Matter</a>
      </div>
      
      <div class="rst-other-version kconfig">
        <a href="../../../../kconfig/index.html">Kconfig Reference</a>
      </div>
    </div>
  </div><script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>